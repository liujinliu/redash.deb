{"version":3,"sources":["webpack:///app.15512cfcb29455603e73.js","webpack:///./client/app/index.js","webpack:///./~/moment/locale ^\\.\\/.*$","webpack:///./client/app/sortable.js","webpack:///./client/app/pages/index.js","webpack:///./client/app/pages/home/index.js","webpack:///./client/app/pages/home/home.html","webpack:///./client/app/pages/queries-list/index.js","webpack:///./client/app/utils/index.js","webpack:///./client/app/utils/paginator.js","webpack:///./client/app/utils/live-paginator.js","webpack:///./client/app/pages/queries-list/queries-list.html","webpack:///./client/app/pages/alerts-list/index.js","webpack:///./client/app/pages/alerts-list/alerts-list.html","webpack:///./client/app/pages/alert/index.js","webpack:///./client/app/pages/alert/alert.html","webpack:///./client/app/pages/alert/alert-subscriptions/index.js","webpack:///./client/app/pages/alert/alert-subscriptions/alert-subscriptions.html","webpack:///./client/app/pages/admin/index.js","webpack:///./client/app/pages/admin/status/index.js","webpack:///./client/app/pages/admin/status/status.html","webpack:///./client/app/pages/admin/outdated-queries/index.js","webpack:///./client/app/pages/admin/outdated-queries/outdated-queries.html","webpack:///./client/app/pages/admin/tasks/index.js","webpack:///./client/app/pages/admin/tasks/tasks.html","webpack:///./client/app/pages/admin/tasks/cancel-query-button/index.js","webpack:///./client/app/pages/dashboards/index.js","webpack:///./client/app/pages/dashboards/dashboard.js","webpack:///./client/app/pages/dashboards/dashboard.html","webpack:///./client/app/pages/dashboards/share-dashboard.html","webpack:///./client/app/pages/dashboards/dashboard-list.js","webpack:///./client/app/pages/dashboards/dashboard-list.html","webpack:///./client/app/pages/dashboards/widget.js","webpack:///./client/app/pages/dashboards/widget.html","webpack:///./client/app/pages/dashboards/edit-text-box.html","webpack:///./client/app/pages/dashboards/add-widget-dialog.js","webpack:///./client/app/pages/dashboards/add-widget-dialog.html","webpack:///./client/app/pages/dashboards/edit-dashboard-dialog.js","webpack:///./client/app/pages/dashboards/edit-dashboard-dialog.html","webpack:///./client/app/pages/dashboards/public-dashboard-page.js","webpack:///./client/app/pages/dashboards/public-dashboard-page.html","webpack:///./client/app/assets/images/redash_icon_small.png","webpack:///./client/app/pages/query-snippets/index.js","webpack:///./client/app/pages/query-snippets/list.js","webpack:///./client/app/pages/query-snippets/list.html","webpack:///./client/app/pages/query-snippets/edit.js","webpack:///./client/app/pages/query-snippets/edit.html","webpack:///./client/app/pages/users/index.js","webpack:///./client/app/pages/users/list.js","webpack:///./client/app/pages/users/list.html","webpack:///./client/app/pages/users/show.js","webpack:///./client/app/pages/users/show.html","webpack:///./client/app/pages/users/new.js","webpack:///./client/app/pages/users/new.html","webpack:///./client/app/pages/groups/index.js","webpack:///./client/app/pages/groups/list.js","webpack:///./client/app/pages/groups/list.html","webpack:///./client/app/pages/groups/show.js","webpack:///./client/app/pages/groups/show.html","webpack:///./client/app/pages/groups/data-sources.js","webpack:///./client/app/pages/groups/data-sources.html","webpack:///./client/app/pages/groups/edit-group-dialog.js","webpack:///./client/app/pages/groups/edit-group-dialog.html","webpack:///./client/app/pages/groups/group-name.js","webpack:///./client/app/pages/destinations/list.js","webpack:///./client/app/pages/destinations/list.html","webpack:///./client/app/pages/destinations/show.js","webpack:///./client/app/pages/destinations/show.html","webpack:///./client/app/pages/data-sources/list.js","webpack:///./client/app/pages/data-sources/list.html","webpack:///./client/app/pages/data-sources/show.js","webpack:///./client/app/pages/data-sources/show.html","webpack:///./client/app/pages/queries/index.js","webpack:///./client/app/pages/queries/source-view.js","webpack:///./client/app/pages/queries/query.html","webpack:///./client/app/pages/queries/view.js","webpack:///./client/app/pages/queries/query-results-link.js","webpack:///./client/app/pages/queries/query-editor.js","webpack:///./client/app/pages/queries/schema-browser.js","webpack:///./client/app/pages/queries/schema-browser.html","webpack:///./client/app/pages/queries/embed-code-dialog.js","webpack:///./client/app/pages/queries/embed-code-dialog.html","webpack:///./client/app/pages/queries/schedule-dialog.js","webpack:///./client/app/pages/queries/schedule-dialog.html","webpack:///./client/app/pages/queries/alert-unsaved-changes.js","webpack:///./client/app/pages/queries/queries-search-results-page.js","webpack:///./client/app/pages/queries/queries-search-results-page.html","webpack:///./client/app/pages/queries/visualization-embed.js","webpack:///./client/app/pages/queries/visualization-embed.html","webpack:///./client/app/components/index.js","webpack:///./client/app/components/app-header/index.js","webpack:///./client/app/components/app-header/app-header.html","webpack:///./client/app/components/footer/index.js","webpack:///./client/app/components/footer/footer.html","webpack:///./client/app/components/page-header/index.js","webpack:///./client/app/components/page-header/page-header.html","webpack:///./client/app/components/tab-nav/index.js","webpack:///./client/app/components/email-settings-warning/index.js","webpack:///./client/app/components/rd-tab/index.js","webpack:///./client/app/components/query-link.js","webpack:///./client/app/components/parameters.js","webpack:///./client/app/components/parameters.html","webpack:///./client/app/components/parameter-settings.html","webpack:///./client/app/components/permissions-editor/index.js","webpack:///./client/app/components/permissions-editor/permissions-editor.html","webpack:///./client/app/components/dynamic-table/index.js","webpack:///./client/app/components/dynamic-table/dynamic-table.html","webpack:///./client/app/components/paginator.js","webpack:///./client/app/components/settings-screen.js","webpack:///./client/app/components/settings-screen.html","webpack:///./client/app/components/error-messages.js","webpack:///./client/app/components/edit-in-place.js","webpack:///./client/app/components/dynamic-form.js","webpack:///./client/app/components/dynamic-form.html","webpack:///./client/app/components/rd-timer.js","webpack:///./client/app/components/rd-time-ago.js","webpack:///./client/app/components/overlay.js","webpack:///./client/app/components/route-status.js","webpack:///./client/app/components/filters.js","webpack:///./client/app/components/filters.html","webpack:///./client/app/filters/index.js","webpack:///./client/app/services/index.js","webpack:///./client/app/services/dashboard.js","webpack:///./client/app/services/widget.js","webpack:///./client/app/services/query.js","webpack:///./client/app/services/query-result.js","webpack:///./client/app/services/events.js","webpack:///./client/app/services/alert.js","webpack:///./client/app/services/alert-subscription.js","webpack:///./client/app/services/destination.js","webpack:///./client/app/services/user.js","webpack:///./client/app/services/group.js","webpack:///./client/app/services/data-source.js","webpack:///./client/app/services/query-snippet.js","webpack:///./client/app/services/notifications.js","webpack:///./client/app/services/keyboard-shortcuts.js","webpack:///./client/app/services/offline-listener.js","webpack:///./client/app/services/alert-dialog.js","webpack:///./client/app/services/auth.js","webpack:///./client/app/directives/index.js","webpack:///./client/app/visualizations/index.js","webpack:///./client/app/visualizations/edit-visualization-dialog.js","webpack:///./client/app/visualizations/edit-visualization-dialog.html","webpack:///./client/app/visualizations/counter/index.js","webpack:///./client/app/visualizations/counter/counter.html","webpack:///./client/app/visualizations/counter/counter-editor.html","webpack:///./client/app/visualizations/table/index.js","webpack:///./client/app/visualizations/table/table.html","webpack:///./client/app/visualizations/chart/index.js","webpack:///./client/app/visualizations/chart/plotly.js","webpack:///./client/app/visualizations/chart/chart.html","webpack:///./client/app/visualizations/chart/chart-editor.html","webpack:///./client/app/visualizations/sunburst/index.js","webpack:///./client/app/visualizations/sunburst/sunburst.js","webpack:///./client/app/visualizations/sunburst/sunburst-sequence-editor.html","webpack:///./client/app/visualizations/sankey/index.js","webpack:///./client/app/visualizations/sankey/d3sankey.js","webpack:///./client/app/visualizations/sankey/sankey-editor.html","webpack:///./client/app/visualizations/word-cloud/index.js","webpack:///./client/app/visualizations/word-cloud/word-cloud-editor.html","webpack:///./client/app/visualizations/box-plot/index.js","webpack:///./client/app/visualizations/box-plot/d3box.js","webpack:///./client/app/visualizations/box-plot/box-plot-editor.html","webpack:///./client/app/visualizations/cohort/index.js","webpack:///./client/app/visualizations/cohort/cohort-editor.html","webpack:///./client/app/visualizations/map/index.js","webpack:///./~/leaflet/dist/images/marker-icon.png","webpack:///./~/leaflet/dist/images/marker-icon-2x.png","webpack:///./~/leaflet/dist/images/marker-shadow.png","webpack:///./client/app/visualizations/map/map.html","webpack:///./client/app/visualizations/map/map-editor.html","webpack:///./client/app/visualizations/pivot/index.js","webpack:///./client/app/filters/markdown.js","webpack:///./client/app/filters/datetime.js","webpack:///./client/app/pages/destinations/index.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","_interopRequireDefault","registerComponents","_underscore","each","components","register","ngModule","registerServices","services","registerPages","pages","registerPage","routes","config","$routeProvider","route","path","logger","template","authenticated","when","registerFilters","filters","filter","name","defineProperty","value","_extends","assign","target","i","arguments","length","source","_debug","_debug2","_angular","_angular2","_angularSanitize","_angularSanitize2","_angularRoute","_angularRoute2","_angularResource","_angularResource2","_angularUiBootstrap","_angularUiBootstrap2","_uiSelect","_uiSelect2","_angularMessages","_angularMessages2","_angularToastr","_angularToastr2","_angularBase64Upload","_angularBase64Upload2","_angularVsRepeat","_angularVsRepeat2","_angularGridster","_angularGridster2","_pages","_components","_filters","_services","_directives","_directives2","_visualizations","_visualizations2","_markdown","_markdown2","_datetime","_datetime2","requirements","$locationProvider","$compileProvider","uiSelectConfig","toastrConfig","aHrefSanitizationWhitelist","html5Mode","theme","positionClass","timeOut","run","$templateCache","OfflineListener","templateName","get","replace","put","webpackContext","req","webpackContextResolve","map","Error","./af","./af.js","./ar","./ar-ly","./ar-ly.js","./ar-ma","./ar-ma.js","./ar-sa","./ar-sa.js","./ar-tn","./ar-tn.js","./ar.js","./az","./az.js","./be","./be.js","./bg","./bg.js","./bn","./bn.js","./bo","./bo.js","./br","./br.js","./bs","./bs.js","./ca","./ca.js","./cs","./cs.js","./cv","./cv.js","./cy","./cy.js","./da","./da.js","./de","./de-at","./de-at.js","./de.js","./dv","./dv.js","./el","./el.js","./en-au","./en-au.js","./en-ca","./en-ca.js","./en-gb","./en-gb.js","./en-ie","./en-ie.js","./en-nz","./en-nz.js","./eo","./eo.js","./es","./es-do","./es-do.js","./es.js","./et","./et.js","./eu","./eu.js","./fa","./fa.js","./fi","./fi.js","./fo","./fo.js","./fr","./fr-ca","./fr-ca.js","./fr-ch","./fr-ch.js","./fr.js","./fy","./fy.js","./gd","./gd.js","./gl","./gl.js","./he","./he.js","./hi","./hi.js","./hr","./hr.js","./hu","./hu.js","./hy-am","./hy-am.js","./id","./id.js","./is","./is.js","./it","./it.js","./ja","./ja.js","./jv","./jv.js","./ka","./ka.js","./kk","./kk.js","./km","./km.js","./ko","./ko.js","./ky","./ky.js","./lb","./lb.js","./lo","./lo.js","./lt","./lt.js","./lv","./lv.js","./me","./me.js","./mi","./mi.js","./mk","./mk.js","./ml","./ml.js","./mr","./mr.js","./ms","./ms-my","./ms-my.js","./ms.js","./my","./my.js","./nb","./nb.js","./ne","./ne.js","./nl","./nl.js","./nn","./nn.js","./pa-in","./pa-in.js","./pl","./pl.js","./pt","./pt-br","./pt-br.js","./pt.js","./ro","./ro.js","./ru","./ru.js","./se","./se.js","./si","./si.js","./sk","./sk.js","./sl","./sl.js","./sq","./sq.js","./sr","./sr-cyrl","./sr-cyrl.js","./sr.js","./ss","./ss.js","./sv","./sv.js","./sw","./sw.js","./ta","./ta.js","./te","./te.js","./th","./th.js","./tl-ph","./tl-ph.js","./tlh","./tlh.js","./tr","./tr.js","./tzl","./tzl.js","./tzm","./tzm-latn","./tzm-latn.js","./tzm.js","./uk","./uk.js","./uz","./uz.js","./vi","./vi.js","./x-pseudo","./x-pseudo.js","./zh-cn","./zh-cn.js","./zh-hk","./zh-hk.js","./zh-tw","./zh-tw.js","keys","resolve","id","_typeof","Symbol","iterator","constructor","_jquery","_jquery2","_sortable","_sortable2","items","directive","uiSortableConfig","$timeout","$log","require","scope","ngModel","uiSortable","link","element","attrs","combineCallbacks","first","second","firstIsFunc","secondIsFunc","apply","this","getSortableWidgetInstance","data","widgetFullName","patchSortableOption","callbacks","$apply","afterStop","wrappers","patchUISortableOptions","newVal","oldVal","sortableWidgetInstance","addDummyOptionKey","opts","forEach","optsDiff","defaultOptions","oldValue","directiveOpts","undefined","options","defaultValue","floating","getPlaceholderElement","placeholder","sortable","result","getPlaceholderExcludesludes","notCssSelector","excludes","find","attr","hasSortingHelper","ui","helperOption","item","isCustomHelperUsed","getSortingHelper","savedNodes","last","isFloating","test","css","getElementScope","elementScopes","x","e","_destroy","getItemIndex","parent","index","wireUp","$watchCollection","start","siblings","model","$modelValue","sourceModel","cancel","_isCanceled","isCanceled","_isCustomHelperUsed","activate","contents","not","connectedSortables","_connectedSortables","push","update","received","dropindex","droptarget","droptargetScope","droptargetModel","sortingHelper","appendTo","splice","moved","stop","equals","receive","remove","helper","inner","oldItemSortable","_restore","innerResult","init","info","initIfEnabled","disabled","cancelWatcher","noop","ui-floating","ui-model-items","extend","$watch","_home","enumerable","_queriesList","_alertsList","_alert","_admin","_dashboards","_querySnippets","_users","_groups","_destinations","_dataSources","_queries","HomeCtrl","$scope","$uibModal","currentUser","Events","Dashboard","Query","record","canCreateQuery","hasPermission","canCreateDashboard","recentQueries","recent","recentDashboards","newDashboard","open","component","dashboard","layout","$inject","controller","/","title","_home2","_classCallCheck","instance","Constructor","TypeError","QueriesListCtrl","reloadOnSearch","/queries","/queries/my","_moment","_moment2","_utils","_queriesList2","$location","Title","queriesFetcher","requestedPage","itemsPerPage","paginator","search","request","self","page","page_size","resource","$promise","then","rows","results","query","created_at","retrieved_at","updateRows","count","parseInt","set","myQueries","LivePaginator","tabs","isActive","_paginator","_livePaginator","_createClass","defineProperties","props","descriptor","configurable","writable","protoProps","staticProps","Paginator","_ref","_ref$page","_ref$itemsPerPage","_ref$totalCount","totalCount","slice","rowsFetcher","AlertsListCtrl","/alerts","_alertsList2","Alert","_this","alerts","stateClass","ok","triggered","unknown","alert","class","state","AlertCtrl","$routeParams","$sce","toastr","alertId","trustAsHtml","html","onQuerySelected","selectedQuery","getQueryResultPromise","queryResult","column","getColumnNames","canEdit","ops","defaultNameBuilder","getDefaultName","searchQueries","term","q","queries","saveChanges","rearm","$save","success","error","delete","$delete","_alertSubscriptions2","/alerts/:alertId","_alert2","_alertSubscriptions","$q","AlertSubscription","Destination","newSubscription","subscribers","destinations","all","responses","subscribedDestinations","compact","s","destination","subscribedUsers","user","d","contains","unshift","destinationsDisplay","icon","type","saveSubscriber","sub","alert_id","destination_id","without","unsubscribe","subscriber","restrict","_status2","_outdatedQueries2","_tasks2","_status","_outdatedQueries","_tasks","AdminStatusCtrl","$http","refresh","workers","manager","status","timer","$on","/admin/status","OutdatedQueriesCtrl","autoUpdate","refresh_time","add","updatedAt","updated_at","/admin/queries/outdated","TasksCtrl","selectedTab","tasks","waiting","in_progress","done","tasksPaginator","setTab","tab","hash","_cancelQueryButton2","/admin/queries/tasks","_cancelQueryButton","cancelQueryButton","queryId","taskId","transclude","inProgress","cancelExecution","admin","_addWidgetDialog2","_widget2","_publicDashboardPage2","_editDashboardDialog2","_dashboard2","_dashboardList2","_dashboard","_dashboardList","_widget","_addWidgetDialog","_editDashboardDialog","_publicDashboardPage","DashboardCtrl","$rootScope","AlertDialog","clientConfig","isFullscreen","refreshRate","showPermissionsControl","globalParameters","refreshRates","rate","setRefreshRate","loadDashboard","autoRefresh","extractGlobalParameters","globalParams","widgets","row","widget","getQuery","getParametersDefs","p","global","param","defaults","_","create","getPrototypeOf","locals","values","onGlobalParametersChange","local","renderDashboard","force","promises","visualization","maxAge","getQueryResult","isUndefined","toPromise","queryResults","queryFilters","getFilters","queryFilter","hasQueryStringValue","has","dashboard_filters_enabled","current","originFilters","filtersOnChange","originFilter","throttle","slug","dashboardSlug","archiveDashboard","archive","$broadcast","message","confirm","showManagePermissionsModal","aclUrl","url","editDashboard","addWidget","toggleFullscreen","document","querySelector","classList","toggle","togglePublished","is_draft","saveInProgress","save","JSON","stringify","version","openShareForm","ShareDashboardComponent","/dashboard/:dashboardSlug","_shareDashboard","_shareDashboard2","bindings","close","dismiss","_this2","toggleSharing","publicAccessEnabled","post","public_url","DashboardListCtrl","TAGS_REGEX","logoUrl","dashboards","selectedTags","searchText","tagIsSelected","tag","indexOf","toggleTag","$event","shiftKey","allTags","out","match","_underscore2","unique","flatten","sort","filteredDashboards","tags","untagged_name","trim","valueTags","Set","tagMatch","filteredMatch","toLowerCase","includes","/dashboards","DashboardWidgetCtrl","$window","canViewQuery","editTextBox","localParametersDefs","localParameters","deleteWidget","getName","response","deleted","reload","restricted","EditTextBoxComponent","public","_editTextBox","_editTextBox2","saveWidget","catch","finally","AddWidgetDialog","Widget","widgetSize","selectedVis","selected_query","text","widgetSizes","isVisualization","isTextBox","setType","pop","onQuerySelect","selected","visualizations","visualization_id","dashboard_id","width","newWidget","new_row","EditDashboardDialog","gridsterOptions","margins","rowHeight","colWidth","columns","mobileModeEnabled","swapping","minRows","draggable","enabled","resizable","rowIndex","colIndex","col","sizeY","sizeX","saveDashboard","sortedItems","sortBy","$value","autoDismiss","loadPublicDashboard","$route","token","params","session","Auth","setApiKey","loadConfig","PublicDashboardPage","_redash_icon_small","_redash_icon_small2","headless","embed","_list2","_edit2","_list","_edit","SnippetsCtrl","QuerySnippet","snippets","/query_snippets","SnippetCtrl","snippetId","editorOptions","mode","advanced","behavioursEnabled","enableSnippets","autoScrollEditorIntoView","onLoad","editor","$blockScrolling","Infinity","getSession","setUseWrapMode","setShowPrintMargin","snippet","sucess","description","/query_snippets/:snippetId","_new2","_show2","_show","_new","UsersCtrl","User","users","/users","UserCtrl","userId","showSettings","showPasswordSettings","selectTab","v","k","profile","apiKey","settings","password","auth_type","new","newRepeat","savePassword","form","$valid","old_password","updateUser","email","sendPasswordReset","disablePasswordResetButton","passwordResetLink","reset_link","/users/:userId","NewUserCtrl","saveUser","userForm","created","/users/new","controllerAs","bindToController","_editGroupDialog2","_groupName2","_dataSources2","_editGroupDialog","_groupName","GroupsCtrl","Group","groups","newGroup","size","group","/groups","GroupCtrl","groupId","members","newMember","findUser","foundUsers","existingIds","m","alreadyMember","addMember","user_id","removeMember","member","/groups/:groupId","GroupDataSourcesCtrl","DataSource","dataSources","newDataSource","findDataSource","foundDataSources","ds","addDataSource","dataSource","data_source_id","view_only","changePermission","viewOnly","removeDataSource","/groups/:groupId/data_sources","EditGroupDialogComponent","saveButtonText","isAdmin","saveName","deleteGroup","DestinationsCtrl","/destinations","DestinationCtrl","destinationId","httpResponse","statusText","/destinations/:destinationId","DataSourcesCtrl","/data_sources","DataSourceCtrl","deleteDataSource","testConnection","callback","dataSourceId","actions","disableWhenDirty","/data_sources/:dataSourceId","_queryResultsLink2","_queryEditor2","_schemaBrowser2","_embedCodeDialog2","_scheduleDialog2","_alertUnsavedChanges2","_visualizationEmbed2","_queriesSearchResultsPage2","_sourceView2","_view2","_sourceView","_view","_queryResultsLink","_queryEditor","_schemaBrowser","_embedCodeDialog","_scheduleDialog","_alertUnsavedChanges","_queriesSearchResultsPage","_visualizationEmbed","QuerySourceCtrl","$controller","Visualization","KeyboardShortcuts","DEFAULT_TAB","isNewQuery","queryText","saveQuery","sourceMode","can_edit","isDirty","base_url","protocol","host","port","newVisualization","getStatus","shortcuts","mod+s","bind","unbind","savePromise","savedQuery","getSourceLink","formatQuery","format","syntax","duplicateQuery","fork","newQuery","deleteVisualization","$e","vis","preventDefault","String","newQueryText","/queries/new","/queries/:queryId/source","_query","_query2","QueryViewCtrl","Notifications","showLog","getDataSourceId","localStorage","lastSelectedDataSourceId","isValidDataSourceId","isNaN","some","toggleSchemaBrowser","hasSchema","editorSize","getSchema","hasPrevSchema","schema","table","collapsed","updateSchema","updateDataSources","noDataSources","isNew","any","refreshSchema","executeQuery","canExecuteQuery","lockButton","cancelling","getPermissions","mod+enter","hasResult","paramsRequired","queryExecuting","isQueryOwner","canViewSource","canScheduleQuery","showDataset","lock","showApiKey","api_key","customOptions","reject","pick","successMessage","errorMessage","updatedQuery","saveDescription","archiveQuery","is_archived","schedule","updateDataSource","latest_query_data","latest_query_data_id","setVisualizationTab","getId","showNotification","getError","getLog","openVisualizationEditor","openModal","windowClass","onNewSuccess","openScheduleForm","showEmbedDialog","/queries/:queryId","queryResultLink","fileType","getUpdatedAt","defineDummySnippets","window","ace","define","snippetText","queryEditor","pre","enableBasicAutocompletion","enableLiveAutocompletion","commands","bindKey","acequire","snippetsModule","snippetManager","parseSnippetFile","getSnippet","newMode","setMode","newSchema","oldSchema","tokensCount","reduce","totalLength","setOption","$parent","resize","focus","schemaCompleter","getCompletions","pos","prefix","keywords","c","score","meta","langTools","addCompleter","SchemaBrowserCtrl","showTable","getSize","SchemaBrowser","onRefresh","EmbedCodeDialog","embedUrl","basePath","snapshotUrlBuilder","snapshotUrl","padWithZeros","str","queryTimePicker","refreshType","hourOptions","range","partial","minuteOptions","hasDailySchedule","parts","scheduleInLocalTime","split","minute","hour","updateSchedule","newSchedule","utc","queryRefreshSelect","refreshOptions","ScheduleForm","alertUnsavedChanges","unloadMessage","confirmMessage","_onbeforeunload","onbeforeunload","event","next","QuerySearchCtrl","$filter","include_drafts","isString","/queries/search","loadData","VisualizationEmbed","QueryResult","visualizationId","showQueryDescription","showDescription","_appHeader","_footer","_pageHeader","_tabNav","_emailSettingsWarning","_rdTab","_queryLink","_parameters","_permissionsEditor","_dynamicTable","_settingsScreen","_errorMessages","_editInPlace","_dynamicForm","_rdTimer","_rdTimeAgo","_overlay","_routeStatus","showQueriesMenu","showNewQueryMenu","showSettingsMenu","showDashboardsMenu","reloadDashboards","logout","_appHeader2","newVersionAvailable","_footer2","_pageHeader2","active","_startsWith2","_startsWith","showMailWarning","mailSettingsMissing","function","rdTab","tabId","substring","QueryLinkController","getUrl","ParametersDirective","parameters","syncValues","editable","changed","showParameterSettings","parameter","ParameterSettingsComponent","_parameters2","_parameterSettings","_parameterSettings2","PermissionsEditorComponent","_permissionsEditor2","grantees","newGrantees","loadGrantees","accessType","grantee","access_type","alreadyGrantee","addGrantee","body","removeGrantee","method","headers","Content-Type","u","DynamicTable","$sanitize","rowsCount","orderByField","orderByReverse","pageChanged","allRows","$onChanges","changes","currentValue","orderBy","reverse","sanitize","sortIcon","_dynamicTable2","PaginatorCtrl","setPage","usersPage","groupsPage","dsPage","destinationsPage","snippetsPage","showGroupsLink","showUsersLink","showDsLink","showDestinationsLink","_settingsScreen2","ErrorMessagesComponent","input","EditInPlace","ignoreBlanks","tElement","tAttrs","elType","viewMode","markdown","placeholderSpan","editing","isEmpty","removeClass","inputElement","children","addClass","edit","keydown","which","blur","DynamicForm","types","t","inProgressActions","action","originalCallback","release","files","dataSourceForm","$setPristine","base64","typesPromise","configuration_schema","properties","prop","_endsWith2","required","prev","_endsWith","_dynamicForm2","rdTimer","timestamp","currentTime","currentTimer","setInterval","$digest","clearInterval","RdTimeAgo","Overlay","permissionDenied","previous","rejection","FiltersComponent","_filters2","onChange","filterChangeListener","modal","$modal","durationHumanize","duration","humanized","seconds","Math","round","days","parseFloat","hours","minutes","scheduleHumanize","localTime","toHuman","a","toUpperCase","widgetWidth","capitalize","_capitalize3","linkify","urlPattern","notEquals","Array","other","filtered","notEmpty","collection","showError","field","$touched","$invalid","$submitted","_capitalize2","_queryResult","_events","_alertSubscription","_destination","_user","_group","_dataSource","_querySnippet","_notifications","_keyboardShortcuts","_offlineListener","_alertDialog","_auth","$resource","transformSingle","transform","transformResponse","concat","isArray","factory","WidgetResource","_truncate2","_truncate","collectParams","part","union","QueryResource","formatted","parse","err","getParameters","isRequired","QueryResultError","missingParams","getMissing","paramsWord","valuesWord","job","join","_mustache2","render","getValues","query_result","getById","encodeURIComponent","$parameters","Parameters","_mustache","Parameter","$$value","toDate","queryString","updateParameters","initFromQueryString","uniq","cachedQueryText","parameterNames","parseQuery","parametersMap","parameterExists","queryStringName","pluck","object","getColumnNameWithoutType","typeSplit","getColumnCleanName","getColumnFriendlyName","addPointToSeries","point","seriesCollection","seriesName","QueryResultService","QueryResultResource","Job","statuses","1","2","3","4","deferred","defer","filterFreeze","columnTypes","isNumber","log","runtime","filterValues","filteredData","memo","isMoment","isSame","getData","mapping","series","xValue","yValues","eValue","sizeValue","definition","yValue","ySeriesName","y","yError","columnNames","prepareFilters","getColumns","filterTypes","friendlyName","multiple","getRawData","unix","promise","jobResponse","query_result_id","refreshStatus","queryName","max_age","query_id","events","debounce","objectType","objectId","additionalProperties","object_type","object_id","Date","now","service","transformRequest","newData","subscriberId","cache","DestinationResource","UserResource","DataSourceResource","trigger","content","tabTrigger","notificationService","pageVisible","monitorVisibility","hidden","visibilityChange","msHidden","documentHidden","addEventListener","isSupported","Notification","permission","requestPermission","notification","setTimeout","onclick","keymap","fn","_mousetrap2","bindGlobal","_mousetrap","addOnlineListener","toast","onlineStateHandler","toastId","removeEventListener","warning","allowHtml","tapToDismiss","AlertDialogComponent","show","storeSession","sessionData","loaded","getLocalSessionData","sessionStorage","getItem","SESSION_ITEM","AuthService","isAuthenticated","login","encodeURI","location","href","removeItem","loadSession","client_config","permissions","getApiKey","CurrentUserService","ClientConfigService","apiKeyHttpInterceptor","$injector","Authorization","$httpProvider","interceptors","to","compareTo","otherModelValue","attributes","validate","$setValidity","$parsers","autofocus","TitleService","newTitle","updateTitle","VisualizationProvider","visualizationTypes","defaultConfig","skipTypes","editorTemplate","registerVisualization","defaultVisualization","getSwitchTemplate","property","pattern","mergedTemplates","templates","ngSwitch","$get","renderVisualizationsTemplate","VisualizationName","defaultName","VisualizationRenderer","VisualizationOptionsEditor","FilterValueFilter","firstValue","dateFormat","dateTimeFormat","provider","_editVisualizationDialog2","_chart2","_counter2","_sunburst2","_sankey2","_wordCloud2","_boxPlot2","_cohort2","_map2","_pivot2","_table2","_editVisualizationDialog","_counter","_table","_chart","_sunburst","_sankey","_wordCloud","_boxPlot","_cohort","_map","_pivot","EditVisualizationDialog","originalVisualization","copy","visTypes","typeChanged","oldType","visForm","$dirty","submit","visIds","closeDialog","CounterRenderer","refreshData","queryData","rowNumber","targetRowNumber","counterColName","targetColName","countRow","counterValue","targetValue","delta","trendPositive","CounterEditor","renderTemplate","editTemplate","_counterEditor","_counterEditor2","formatValue","formattedValue","GridRenderer","gridColumns","gridRows","formatFunction","ChartRenderer","zIndexCompare","seriesOptions","zIndex","reloadData","getChartData","columnMapping","chartSeries","reloadChart","plotlyOptions","ChartEditor","ColorPalette","refreshColumns","difference","refreshColumnsAndForm","yAxisColumns","intersection","xAxisColumn","groupby","refreshSeries","seriesNames","existing","globalSeriesType","yAxis","seriesList","setColumnRole","role","unsetColumn","currentTab","colors","Automatic","stackingOptions","Disabled","Enabled","Percent","changeTab","chartTypes","line","area","pie","scatter","bubble","allowCustomJSVisualizations","custom","xAxisScales","yAxisScales","chartTypeChanged","showSizeColumnPicker","customCode","old","legend","bottomMargin","errorColumn","sizeColumn","ColorBox","sortX","opposite","xAxis","labels","error_y","visible","stacking","_plotly2","_plotly","_chartEditor","_chartEditor2","color","_toConsumableArray","arr","arr2","from","fillXValues","xValues","identity","storeOriginalHeightForEachSeries","original_y","getEnabledSeries","initializeTextAndHover","hoverinfo","normalAreaStacking","enabledSeriesList","seriesIndex","list","yIndex","cumulativeHeightOfPreviousSeries","cumulativeHeightWithThisSeries","lastVisibleY","lastSeriesIndex","percentAreaStacking","seriesY","sumOfCorrespondingDataPoints","total","percentage","previousVisiblePercentage","toFixed","percentBarStacking","sum","j","normalizeValue","seriesMinValue","min","seriesMaxValue","max","leftAxisSeries","yaxis","rightAxisSeries","getScaleType","scale","getColor","ColorPaletteArray","constant","PlotlyChart","CustomPlotlyChart","_d","_d2","_core","_core2","_bar","_bar2","_pie","_pie2","_histogram","_histogram2","setPlotConfig","modeBarButtonsToRemove","BaseColors","Blue","Red","Green","Purple","Cyan","Orange","Light Blue","Lilac","Light Green","Brown","Black","Gray","Pink","Dark Blue","Indian Red","Green 2","Green 3","DarkTurquoise","Dark Violet","Pink 2","height","calculateHeight","fill","getTitle","axis","recalculateOptions","showlegend","margin","b","barmode","xaxis","yaxis2","hasX","cellsInRow","ceil","cellWidth","cellHeight","xPadding","yPadding","xPosition","yPosition","floor","plotlySeries","hole","marker","textposition","domain","hasY2","useUnifiedXaxis","unifiedX","array","eValues","showticklabels","rangeMin","rangeMax","minY","maxY","overlaying","side","l","r","pad","autosize","showLink","displaylogo","plotlyElement","newPlot","on","querySelectorAll","rectDiv","select","maxIndex","itemClicked","redraw","isEqual","relayout","customChart","codeCall","eval","ys","timeSeriesToPlotlySeries","enableConsoleLogs","console","sunburstSequenceRenderer","sunburst","newValue","sunburstSequenceEditor","_sunburstSequenceEditor","_sunburstSequenceEditor2","colorMap","getAncestors","node","Sunburst","breadcrumbPoints","points","w","h","updateBreadcrumbs","ancestors","percentageString","g","breadcrumbs","selectAll","depth","breadcrumb","enter","append","classed","exit","lastCrumb","mouseover","totalSize","toPrecision","summary","style","click","transition","drawSunburst","json","nodes","partition","dx","exitNode","uniqueNames","output","arc","__data__","createVisualization","removeVisualization","buildNodes","raw","grouped","groupBy","sorted","sequence","validKey","buildHierarchy","csv","root","currentNode","_loop","nodeName","isLeaf","childNode","child","watches","parentElement","clientWidth","radius","top","bottom","left","right","PI","svg","startAngle","endAngle","innerRadius","sqrt","outerRadius","dy","marginLeft","category10","unregister","empty","getConnectedNodes","sourceLinks","targetLinks","graph","normalizeName","getNode","level","nodesDict","getLink","links","addLink","sourceName","targetName","spreadNodes","nodesByBreadth","nest","entries","o","padding","y0","createSankey","sankeyHeight","nodeMouseOver","include","nodeMouseOut","category20","sankey","_d3sankey2","nodeWidth","nodePadding","n","rgb","darker","sankeyRenderer","sankeyEditor","_d3sankey","_sankeyEditor","_sankeyEditor2","center","computeNodeLinks","computeNodeValues","moveSinksRight","scaleNodeBreadths","kx","computeNodeBreadths","assignBreadth","nextNodes","remainingNodes","computeNodeDepths","iterations","initializeNodeDepth","ky","relaxLeftToRight","alpha","weightedSource","resolveCollisions","ascendingDepth","relaxRightToLeft","weightedTarget","sortKeys","ascending","computeLinkDepths","ascendingSourceDepth","ascendingTargetDepth","sy","ty","x0","x1","xi","interpolateNumber","x2","curvature","x3","y1","_arguments","findWordFrequencies","columnName","wordsHash","wordsList","toString","wordCloudRenderer","elem","reloadCloud","draw","words","parentNode","rotate","isDefined","wordList","pow","_d3Cloud2","random","font","fontSize","wordCloudEditor","_d3Cloud","_wordCloudEditor","_wordCloudEditor2","boxPlotRenderer","elm","calcIqr","q1","quartiles","q3","iqr","barOffset","xscale","parentWidth","getBoundingClientRect","mydata","xAxisLabel","yAxisLabel","ordinal","rangeBands","boxWidth","yscale","linear","chart","_d3box2","whiskers","orient","xLines","tickSize","yLines","plot","boxPlotEditor","_d3box","_boxPlotEditor","_boxPlotEditor2","box","d3","quartileData","whiskerIndices","whiskerData","outlierIndices","__chart__","insert","medianLine","whisker","outlier","Number","tickFormat","boxTick","whiskerTick","flush","boxWhiskers","boxQuartiles","functor","quantile","cohortRenderer","updateCohort","sortedData","date","day_number","maxColumns","initialDate","container","Cornelius","cohort","timeInterval","time","people","weekOf","cohortEditor","_cohortEditor","_cohortEditor2","mapRenderer","getBounds","bounds","setBounds","fitBounds","_southWest","lat","lng","_northEast","layers","allMarkers","getLayers","_leaflet2","featureGroup","invalidateSize","createDescription","latCol","lonCol","lon","removeLayer","layer","mapControls","addLayer","latColName","lonColName","classify","markers","clusterMarkers","iconCreateFunction","cluster","childCount","getChildCount","divIcon","className","iconSize","Point","markerClusterGroup","layerGroup","groupColor","heatpoint","createMarker","bindPopup","addTo","addOverlay","mapTileUrl","tileLayer","setUrl","pointGroups","All","groupNames","colorScale","scrollWheelZoom","control","attribution","off","fillColor","fillOpacity","stroke","circleMarker","mapEditor","classify_columns","mapTiles","_leaflet","_markerIcon","_markerIcon2","_markerIcon2x","_markerIcon2x2","_markerShadow","_markerShadow2","_mapEditor","_mapEditor2","Icon","Default","mergeOptions","iconUrl","iconRetinaUrl","shadowUrl","_getIconUrl","pivotTableRenderer","renderers","pivotUtilities","configCopy","aggregators","rendererOptions","localeStrings","pivotUI","_marked2","allowScriptsInUserInput","_marked","__webpack_module_template_argument_0__","__webpack_module_template_argument_1__"],"mappings":"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AA,GACAC,OAAA,GACAC,UAAA,GACAC,UAAA,GACAC,aAAA,GACAC,UAAA,GACAC,aAAA,GACAC,UAAA,GACAC,aAAA,GACAC,UAAA,GACAC,aAAA,GACAC,UAAA,GACAC,aAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,aAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,aAAA,GACAC,UAAA,GACAC,aAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,UAAA,GACAC,aAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,GACAC,UAAA,GACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,UAAA,IACAC,aAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,YAAA,IACAC,eAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,UAAA,IACAC,aAAA,IACAC,QAAA,IACAC,WAAA,IACAC,OAAA,IACAC,UAAA,IACAC,QAAA,IACAC,WAAA,IACAC,QAAA,IACAC,aAAA,IACAC,gBAAA,IACAC,WAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,aAAA,IACAC,gBAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,aAAA,IAQApN,GAAAqN,KAAA,WACA,MAAAjT,QAAAiT,KAAAlN,IAEAH,EAAAsN,QAAApN,EACAtG,EAAAC,QAAAmG,EACAA,EAAAuN,GAAA,IF4QQ,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACC,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,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AAQ,KAEVl8C,KARkB,QAAAA,MAQbH,MAAOI,SACV,GAAK0U,aAAa+gC,4BAAlB,CAGA,GAAMhkC,SAAU,QAAVA,WAEJ,GAAMiuC,UAAWC,qDAAqD//C,MAAMiC,QAAQk0C,WAAnE,KACjB2J,UAAS9/C,MAAM0D,EAAG1D,MAAMggD,GAAI5/C,QAAQ,GAAGu8B,SAAS,GAAhD4d,OAAAruD,UAEI+zD,yBAA2B,WAC/BjgD,MAAM0D,KACN1D,MAAMggD,OACN,EAAA3zD,YAAAC,MAAK0T,MAAMonC,OAAQ,SAACA,GAClBpnC,MAAMggD,GAAG5Y,EAAOz5C,UAChB,EAAAtB,YAAAC,MAAK86C,EAAOtmC,KAAM,SAAC6kC,GACjB3lC,MAAM0D,EAAEsB,KAAKq0C,eAAe1T,EAAMjiC,IAClC1D,MAAMggD,GAAG5Y,EAAOz5C,MAAMqX,KAAKq0C,eAAe1T,EAAMiC,QAItD5nC,OAAM6G,OAAO,qBAAsB,WACjC,IACEgL,UACA,MAAOuxB,GACHpjC,MAAMiC,QAAQi+C,mBAEhBC,QAAQxZ,IAAR,uCAAmDvD,MAGtD,GACHpjC,MAAM6G,OAAO,SAAU,WACrBo5C,2BACApuC,YACC,KAGP,OAAOguC,arJ4mTR1F,mBAAkBrxC,SAAW,iBAGrB,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CAEH,SAASxd,EAAQC,KAKd,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CAEH,SAASD,EAAQC,GsJ51UvBD,EAAAC,QAAA,oVtJk2UM,SAASD,EAAQC,GuJl2UvBD,EAAAC,QAAA,ghWvJw2UM,SAASD,EAAQC,EAASC,GwJx2UhC,YAwCA,SAASW,GAAuBT,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,QAASR,GApCvF,QAAS00D,KACP,OACEhvC,SAAU,IACVjR,KAFK,SAEAH,EAAOI,GAGV,QAASgyB,KACPiuB,EAASv6C,SACTu6C,EAAW,GAAAvQ,GAAA5jD,QAAa8T,EAAOI,GAJjC,GAAIigD,GAAW,GAAAvQ,GAAA5jD,QAAa8T,EAAOI,IAOnC,EAAAb,EAAArT,SAAO0kC,QAAQwuB,GAAG,SAAUhtB,GAC5BpyB,EAAM6G,OAAO,+BAAgC,SAAC/E,EAAUw+C,GAClDx+C,IAAaw+C,GACfluB,QAOV,QAASmuB,KACP,OACEnvC,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","file":"app.15512cfcb29455603e73.js","sourcesContent":["webpackJsonp([0,2],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\t__webpack_require__(1);\n\t\n\t__webpack_require__(6);\n\t\n\t__webpack_require__(13);\n\t\n\t__webpack_require__(14);\n\t\n\t__webpack_require__(15);\n\t\n\t__webpack_require__(16);\n\t\n\t__webpack_require__(17);\n\t\n\t__webpack_require__(18);\n\t\n\tvar _debug = __webpack_require__(19);\n\t\n\tvar _debug2 = _interopRequireDefault(_debug);\n\t\n\tvar _angular = __webpack_require__(22);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _angularSanitize = __webpack_require__(24);\n\t\n\tvar _angularSanitize2 = _interopRequireDefault(_angularSanitize);\n\t\n\tvar _angularRoute = __webpack_require__(26);\n\t\n\tvar _angularRoute2 = _interopRequireDefault(_angularRoute);\n\t\n\tvar _angularResource = __webpack_require__(28);\n\t\n\tvar _angularResource2 = _interopRequireDefault(_angularResource);\n\t\n\tvar _angularUiBootstrap = __webpack_require__(30);\n\t\n\tvar _angularUiBootstrap2 = _interopRequireDefault(_angularUiBootstrap);\n\t\n\tvar _uiSelect = __webpack_require__(32);\n\t\n\tvar _uiSelect2 = _interopRequireDefault(_uiSelect);\n\t\n\tvar _angularMessages = __webpack_require__(34);\n\t\n\tvar _angularMessages2 = _interopRequireDefault(_angularMessages);\n\t\n\tvar _angularToastr = __webpack_require__(36);\n\t\n\tvar _angularToastr2 = _interopRequireDefault(_angularToastr);\n\t\n\tvar _angularBase64Upload = __webpack_require__(38);\n\t\n\tvar _angularBase64Upload2 = _interopRequireDefault(_angularBase64Upload);\n\t\n\tvar _angularVsRepeat = __webpack_require__(40);\n\t\n\tvar _angularVsRepeat2 = _interopRequireDefault(_angularVsRepeat);\n\t\n\t__webpack_require__(41);\n\t\n\t__webpack_require__(149);\n\t\n\t__webpack_require__(152);\n\t\n\t__webpack_require__(153);\n\t\n\tvar _angularGridster = __webpack_require__(154);\n\t\n\tvar _angularGridster2 = _interopRequireDefault(_angularGridster);\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\t__webpack_require__(156);\n\t\n\t__webpack_require__(165);\n\t\n\t__webpack_require__(182);\n\t\n\t__webpack_require__(183);\n\t\n\tvar _pages = __webpack_require__(184);\n\t\n\tvar pages = _interopRequireWildcard(_pages);\n\t\n\tvar _components = __webpack_require__(278);\n\t\n\tvar components = _interopRequireWildcard(_components);\n\t\n\tvar _filters = __webpack_require__(315);\n\t\n\tvar filters = _interopRequireWildcard(_filters);\n\t\n\tvar _services = __webpack_require__(317);\n\t\n\tvar services = _interopRequireWildcard(_services);\n\t\n\tvar _directives = __webpack_require__(339);\n\t\n\tvar _directives2 = _interopRequireDefault(_directives);\n\t\n\tvar _visualizations = __webpack_require__(340);\n\t\n\tvar _visualizations2 = _interopRequireDefault(_visualizations);\n\t\n\tvar _markdown = __webpack_require__(625);\n\t\n\tvar _markdown2 = _interopRequireDefault(_markdown);\n\t\n\tvar _datetime = __webpack_require__(627);\n\t\n\tvar _datetime2 = _interopRequireDefault(_datetime);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar logger = (0, _debug2.default)('redash');\n\t\n\tvar requirements = [_angularRoute2.default, _angularResource2.default, _angularSanitize2.default, _angularUiBootstrap2.default, _angularMessages2.default, _uiSelect2.default, 'angularMoment', _angularToastr2.default, 'ui.ace', _angularBase64Upload2.default, 'angularResizable', _angularVsRepeat2.default, 'ui.sortable', _angularGridster2.default.name];\n\t\n\tvar ngModule = _angular2.default.module('app', requirements);\n\t\n\tfunction registerComponents() {\n\t  (0, _underscore.each)(components, function (register) {\n\t    register(ngModule);\n\t  });\n\t}\n\t\n\tfunction registerServices() {\n\t  (0, _underscore.each)(services, function (register) {\n\t    register(ngModule);\n\t  });\n\t}\n\t\n\tfunction registerPages() {\n\t  (0, _underscore.each)(pages, function (registerPage) {\n\t    var routes = registerPage(ngModule);\n\t\n\t    ngModule.config([\"$routeProvider\", function ($routeProvider) {\n\t      (0, _underscore.each)(routes, function (route, path) {\n\t        logger('Route: ', path);\n\t        // This is a workaround, to make sure app-header and footer are loaded only\n\t        // for the authenticated routes.\n\t        // We should look into switching to ui-router, that has built in support for\n\t        // such things.\n\t        route.template = '<app-header></app-header><route-status></route-status>' + route.template + '<footer></footer>';\n\t        route.authenticated = true;\n\t        $routeProvider.when(path, route);\n\t      });\n\t    }]);\n\t  });\n\t}\n\t\n\tfunction registerFilters() {\n\t  (0, _underscore.each)(filters, function (filter, name) {\n\t    ngModule.filter(name, function () {\n\t      return filter;\n\t    });\n\t  });\n\t}\n\t\n\t(0, _directives2.default)(ngModule);\n\tregisterServices();\n\tregisterFilters();\n\t(0, _markdown2.default)(ngModule);\n\t(0, _datetime2.default)(ngModule);\n\tregisterComponents();\n\tregisterPages();\n\t(0, _visualizations2.default)(ngModule);\n\t\n\tngModule.config([\"$routeProvider\", \"$locationProvider\", \"$compileProvider\", \"uiSelectConfig\", \"toastrConfig\", function ($routeProvider, $locationProvider, $compileProvider, uiSelectConfig, toastrConfig) {\n\t  $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|http|data):/);\n\t  $locationProvider.html5Mode(true);\n\t  uiSelectConfig.theme = 'bootstrap';\n\t\n\t  _extends(toastrConfig, {\n\t    positionClass: 'toast-bottom-right',\n\t    timeOut: 2000\n\t  });\n\t}]);\n\t\n\t// Update ui-select's template to use Font-Awesome instead of glyphicon.\n\tngModule.run([\"$templateCache\", \"OfflineListener\", function ($templateCache, OfflineListener) {\n\t  // eslint-disable-line no-unused-vars\n\t  var templateName = 'bootstrap/match.tpl.html';\n\t  var template = $templateCache.get(templateName);\n\t  template = template.replace('glyphicon glyphicon-remove', 'fa fa-remove');\n\t  $templateCache.put(templateName, template);\n\t}]);\n\t\n\texports.default = ngModule;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */\n1,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */\n1,\n/* 14 */\n1,\n/* 15 */\n1,\n/* 16 */\n1,\n/* 17 */\n1,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */,\n/* 29 */,\n/* 30 */,\n/* 31 */,\n/* 32 */,\n/* 33 */,\n/* 34 */,\n/* 35 */,\n/* 36 */,\n/* 37 */,\n/* 38 */,\n/* 39 */,\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar map = {\n\t\t\"./af\": 45,\n\t\t\"./af.js\": 45,\n\t\t\"./ar\": 46,\n\t\t\"./ar-ly\": 47,\n\t\t\"./ar-ly.js\": 47,\n\t\t\"./ar-ma\": 48,\n\t\t\"./ar-ma.js\": 48,\n\t\t\"./ar-sa\": 49,\n\t\t\"./ar-sa.js\": 49,\n\t\t\"./ar-tn\": 50,\n\t\t\"./ar-tn.js\": 50,\n\t\t\"./ar.js\": 46,\n\t\t\"./az\": 51,\n\t\t\"./az.js\": 51,\n\t\t\"./be\": 52,\n\t\t\"./be.js\": 52,\n\t\t\"./bg\": 53,\n\t\t\"./bg.js\": 53,\n\t\t\"./bn\": 54,\n\t\t\"./bn.js\": 54,\n\t\t\"./bo\": 55,\n\t\t\"./bo.js\": 55,\n\t\t\"./br\": 56,\n\t\t\"./br.js\": 56,\n\t\t\"./bs\": 57,\n\t\t\"./bs.js\": 57,\n\t\t\"./ca\": 58,\n\t\t\"./ca.js\": 58,\n\t\t\"./cs\": 59,\n\t\t\"./cs.js\": 59,\n\t\t\"./cv\": 60,\n\t\t\"./cv.js\": 60,\n\t\t\"./cy\": 61,\n\t\t\"./cy.js\": 61,\n\t\t\"./da\": 62,\n\t\t\"./da.js\": 62,\n\t\t\"./de\": 63,\n\t\t\"./de-at\": 64,\n\t\t\"./de-at.js\": 64,\n\t\t\"./de.js\": 63,\n\t\t\"./dv\": 65,\n\t\t\"./dv.js\": 65,\n\t\t\"./el\": 66,\n\t\t\"./el.js\": 66,\n\t\t\"./en-au\": 67,\n\t\t\"./en-au.js\": 67,\n\t\t\"./en-ca\": 68,\n\t\t\"./en-ca.js\": 68,\n\t\t\"./en-gb\": 69,\n\t\t\"./en-gb.js\": 69,\n\t\t\"./en-ie\": 70,\n\t\t\"./en-ie.js\": 70,\n\t\t\"./en-nz\": 71,\n\t\t\"./en-nz.js\": 71,\n\t\t\"./eo\": 72,\n\t\t\"./eo.js\": 72,\n\t\t\"./es\": 73,\n\t\t\"./es-do\": 74,\n\t\t\"./es-do.js\": 74,\n\t\t\"./es.js\": 73,\n\t\t\"./et\": 75,\n\t\t\"./et.js\": 75,\n\t\t\"./eu\": 76,\n\t\t\"./eu.js\": 76,\n\t\t\"./fa\": 77,\n\t\t\"./fa.js\": 77,\n\t\t\"./fi\": 78,\n\t\t\"./fi.js\": 78,\n\t\t\"./fo\": 79,\n\t\t\"./fo.js\": 79,\n\t\t\"./fr\": 80,\n\t\t\"./fr-ca\": 81,\n\t\t\"./fr-ca.js\": 81,\n\t\t\"./fr-ch\": 82,\n\t\t\"./fr-ch.js\": 82,\n\t\t\"./fr.js\": 80,\n\t\t\"./fy\": 83,\n\t\t\"./fy.js\": 83,\n\t\t\"./gd\": 84,\n\t\t\"./gd.js\": 84,\n\t\t\"./gl\": 85,\n\t\t\"./gl.js\": 85,\n\t\t\"./he\": 86,\n\t\t\"./he.js\": 86,\n\t\t\"./hi\": 87,\n\t\t\"./hi.js\": 87,\n\t\t\"./hr\": 88,\n\t\t\"./hr.js\": 88,\n\t\t\"./hu\": 89,\n\t\t\"./hu.js\": 89,\n\t\t\"./hy-am\": 90,\n\t\t\"./hy-am.js\": 90,\n\t\t\"./id\": 91,\n\t\t\"./id.js\": 91,\n\t\t\"./is\": 92,\n\t\t\"./is.js\": 92,\n\t\t\"./it\": 93,\n\t\t\"./it.js\": 93,\n\t\t\"./ja\": 94,\n\t\t\"./ja.js\": 94,\n\t\t\"./jv\": 95,\n\t\t\"./jv.js\": 95,\n\t\t\"./ka\": 96,\n\t\t\"./ka.js\": 96,\n\t\t\"./kk\": 97,\n\t\t\"./kk.js\": 97,\n\t\t\"./km\": 98,\n\t\t\"./km.js\": 98,\n\t\t\"./ko\": 99,\n\t\t\"./ko.js\": 99,\n\t\t\"./ky\": 100,\n\t\t\"./ky.js\": 100,\n\t\t\"./lb\": 101,\n\t\t\"./lb.js\": 101,\n\t\t\"./lo\": 102,\n\t\t\"./lo.js\": 102,\n\t\t\"./lt\": 103,\n\t\t\"./lt.js\": 103,\n\t\t\"./lv\": 104,\n\t\t\"./lv.js\": 104,\n\t\t\"./me\": 105,\n\t\t\"./me.js\": 105,\n\t\t\"./mi\": 106,\n\t\t\"./mi.js\": 106,\n\t\t\"./mk\": 107,\n\t\t\"./mk.js\": 107,\n\t\t\"./ml\": 108,\n\t\t\"./ml.js\": 108,\n\t\t\"./mr\": 109,\n\t\t\"./mr.js\": 109,\n\t\t\"./ms\": 110,\n\t\t\"./ms-my\": 111,\n\t\t\"./ms-my.js\": 111,\n\t\t\"./ms.js\": 110,\n\t\t\"./my\": 112,\n\t\t\"./my.js\": 112,\n\t\t\"./nb\": 113,\n\t\t\"./nb.js\": 113,\n\t\t\"./ne\": 114,\n\t\t\"./ne.js\": 114,\n\t\t\"./nl\": 115,\n\t\t\"./nl.js\": 115,\n\t\t\"./nn\": 116,\n\t\t\"./nn.js\": 116,\n\t\t\"./pa-in\": 117,\n\t\t\"./pa-in.js\": 117,\n\t\t\"./pl\": 118,\n\t\t\"./pl.js\": 118,\n\t\t\"./pt\": 119,\n\t\t\"./pt-br\": 120,\n\t\t\"./pt-br.js\": 120,\n\t\t\"./pt.js\": 119,\n\t\t\"./ro\": 121,\n\t\t\"./ro.js\": 121,\n\t\t\"./ru\": 122,\n\t\t\"./ru.js\": 122,\n\t\t\"./se\": 123,\n\t\t\"./se.js\": 123,\n\t\t\"./si\": 124,\n\t\t\"./si.js\": 124,\n\t\t\"./sk\": 125,\n\t\t\"./sk.js\": 125,\n\t\t\"./sl\": 126,\n\t\t\"./sl.js\": 126,\n\t\t\"./sq\": 127,\n\t\t\"./sq.js\": 127,\n\t\t\"./sr\": 128,\n\t\t\"./sr-cyrl\": 129,\n\t\t\"./sr-cyrl.js\": 129,\n\t\t\"./sr.js\": 128,\n\t\t\"./ss\": 130,\n\t\t\"./ss.js\": 130,\n\t\t\"./sv\": 131,\n\t\t\"./sv.js\": 131,\n\t\t\"./sw\": 132,\n\t\t\"./sw.js\": 132,\n\t\t\"./ta\": 133,\n\t\t\"./ta.js\": 133,\n\t\t\"./te\": 134,\n\t\t\"./te.js\": 134,\n\t\t\"./th\": 135,\n\t\t\"./th.js\": 135,\n\t\t\"./tl-ph\": 136,\n\t\t\"./tl-ph.js\": 136,\n\t\t\"./tlh\": 137,\n\t\t\"./tlh.js\": 137,\n\t\t\"./tr\": 138,\n\t\t\"./tr.js\": 138,\n\t\t\"./tzl\": 139,\n\t\t\"./tzl.js\": 139,\n\t\t\"./tzm\": 140,\n\t\t\"./tzm-latn\": 141,\n\t\t\"./tzm-latn.js\": 141,\n\t\t\"./tzm.js\": 140,\n\t\t\"./uk\": 142,\n\t\t\"./uk.js\": 142,\n\t\t\"./uz\": 143,\n\t\t\"./uz.js\": 143,\n\t\t\"./vi\": 144,\n\t\t\"./vi.js\": 144,\n\t\t\"./x-pseudo\": 145,\n\t\t\"./x-pseudo.js\": 145,\n\t\t\"./zh-cn\": 146,\n\t\t\"./zh-cn.js\": 146,\n\t\t\"./zh-hk\": 147,\n\t\t\"./zh-hk.js\": 147,\n\t\t\"./zh-tw\": 148,\n\t\t\"./zh-tw.js\": 148\n\t};\n\tfunction webpackContext(req) {\n\t\treturn __webpack_require__(webpackContextResolve(req));\n\t};\n\tfunction webpackContextResolve(req) {\n\t\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n\t};\n\twebpackContext.keys = function webpackContextKeys() {\n\t\treturn Object.keys(map);\n\t};\n\twebpackContext.resolve = webpackContextResolve;\n\tmodule.exports = webpackContext;\n\twebpackContext.id = 44;\n\n\n/***/ },\n/* 45 */,\n/* 46 */,\n/* 47 */,\n/* 48 */,\n/* 49 */,\n/* 50 */,\n/* 51 */,\n/* 52 */,\n/* 53 */,\n/* 54 */,\n/* 55 */,\n/* 56 */,\n/* 57 */,\n/* 58 */,\n/* 59 */,\n/* 60 */,\n/* 61 */,\n/* 62 */,\n/* 63 */,\n/* 64 */,\n/* 65 */,\n/* 66 */,\n/* 67 */,\n/* 68 */,\n/* 69 */,\n/* 70 */,\n/* 71 */,\n/* 72 */,\n/* 73 */,\n/* 74 */,\n/* 75 */,\n/* 76 */,\n/* 77 */,\n/* 78 */,\n/* 79 */,\n/* 80 */,\n/* 81 */,\n/* 82 */,\n/* 83 */,\n/* 84 */,\n/* 85 */,\n/* 86 */,\n/* 87 */,\n/* 88 */,\n/* 89 */,\n/* 90 */,\n/* 91 */,\n/* 92 */,\n/* 93 */,\n/* 94 */,\n/* 95 */,\n/* 96 */,\n/* 97 */,\n/* 98 */,\n/* 99 */,\n/* 100 */,\n/* 101 */,\n/* 102 */,\n/* 103 */,\n/* 104 */,\n/* 105 */,\n/* 106 */,\n/* 107 */,\n/* 108 */,\n/* 109 */,\n/* 110 */,\n/* 111 */,\n/* 112 */,\n/* 113 */,\n/* 114 */,\n/* 115 */,\n/* 116 */,\n/* 117 */,\n/* 118 */,\n/* 119 */,\n/* 120 */,\n/* 121 */,\n/* 122 */,\n/* 123 */,\n/* 124 */,\n/* 125 */,\n/* 126 */,\n/* 127 */,\n/* 128 */,\n/* 129 */,\n/* 130 */,\n/* 131 */,\n/* 132 */,\n/* 133 */,\n/* 134 */,\n/* 135 */,\n/* 136 */,\n/* 137 */,\n/* 138 */,\n/* 139 */,\n/* 140 */,\n/* 141 */,\n/* 142 */,\n/* 143 */,\n/* 144 */,\n/* 145 */,\n/* 146 */,\n/* 147 */,\n/* 148 */,\n/* 149 */,\n/* 150 */,\n/* 151 */,\n/* 152 */,\n/* 153 */,\n/* 154 */,\n/* 155 */,\n/* 156 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /* eslint-disable */\n\t/*\n\tTODO:\n\t1. export module name.\n\t2. publish into its own repo?\n\t3. fix lint errors.\n\t*/\n\t\n\t\n\tvar _angular = __webpack_require__(22);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _jquery = __webpack_require__(157);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _sortable = __webpack_require__(158);\n\t\n\tvar _sortable2 = _interopRequireDefault(_sortable);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/*\n\t jQuery UI Sortable plugin wrapper\n\t\n\t @param [ui-sortable] {object} Options to pass to $.fn.sortable() merged onto ui.config\n\t */\n\t_angular2.default.module('ui.sortable', []).value('uiSortableConfig', {\n\t  // the default for jquery-ui sortable is \"> *\", we need to restrict this to\n\t  // ng-repeat items\n\t  // if the user uses\n\t  items: '> [ng-repeat],> [data-ng-repeat],> [x-ng-repeat]'\n\t}).directive('uiSortable', ['uiSortableConfig', '$timeout', '$log', function (uiSortableConfig, $timeout, $log) {\n\t  return {\n\t    require: '?ngModel',\n\t    scope: {\n\t      ngModel: '=',\n\t      uiSortable: '='\n\t    },\n\t    link: function link(scope, element, attrs, ngModel) {\n\t      var savedNodes = void 0;\n\t      element = (0, _jquery2.default)(element);\n\t\n\t      function combineCallbacks(first, second) {\n\t        var firstIsFunc = typeof first === 'function';\n\t        var secondIsFunc = typeof second === 'function';\n\t        if (firstIsFunc && secondIsFunc) {\n\t          return function () {\n\t            first.apply(this, arguments);\n\t            second.apply(this, arguments);\n\t          };\n\t        } else if (secondIsFunc) {\n\t          return second;\n\t        }\n\t        return first;\n\t      }\n\t\n\t      function getSortableWidgetInstance(element) {\n\t        // this is a fix to support jquery-ui prior to v1.11.x\n\t        // otherwise we should be using `element.sortable('instance')`\n\t        var data = element.data('ui-sortable');\n\t        if (data && (typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object' && data.widgetFullName === 'ui-sortable') {\n\t          return data;\n\t        }\n\t        return null;\n\t      }\n\t\n\t      function patchSortableOption(key, value) {\n\t        if (callbacks[key]) {\n\t          if (key === 'stop') {\n\t            // call apply after stop\n\t            value = combineCallbacks(value, function () {\n\t              scope.$apply();\n\t            });\n\t\n\t            value = combineCallbacks(value, afterStop);\n\t          }\n\t          // wrap the callback\n\t          value = combineCallbacks(callbacks[key], value);\n\t        } else if (wrappers[key]) {\n\t          value = wrappers[key](value);\n\t        }\n\t\n\t        // patch the options that need to have values set\n\t        if (!value && (key === 'items' || key === 'ui-model-items')) {\n\t          value = uiSortableConfig.items;\n\t        }\n\t\n\t        return value;\n\t      }\n\t\n\t      function patchUISortableOptions(newVal, oldVal, sortableWidgetInstance) {\n\t        function addDummyOptionKey(value, key) {\n\t          if (!(key in opts)) {\n\t            // add the key in the opts object so that\n\t            // the patch function detects and handles it\n\t            opts[key] = null;\n\t          }\n\t        }\n\t        // for this directive to work we have to attach some callbacks\n\t        _angular2.default.forEach(callbacks, addDummyOptionKey);\n\t\n\t        // only initialize it in case we have to\n\t        // update some options of the sortable\n\t        var optsDiff = null;\n\t\n\t        if (oldVal) {\n\t          // reset deleted options to default\n\t          var defaultOptions = void 0;\n\t          _angular2.default.forEach(oldVal, function (oldValue, key) {\n\t            if (!newVal || !(key in newVal)) {\n\t              if (key in directiveOpts) {\n\t                if (key === 'ui-floating') {\n\t                  opts[key] = 'auto';\n\t                } else {\n\t                  opts[key] = patchSortableOption(key, undefined);\n\t                }\n\t                return;\n\t              }\n\t\n\t              if (!defaultOptions) {\n\t                defaultOptions = (0, _sortable2.default)().options;\n\t              }\n\t              var defaultValue = defaultOptions[key];\n\t              defaultValue = patchSortableOption(key, defaultValue);\n\t\n\t              if (!optsDiff) {\n\t                optsDiff = {};\n\t              }\n\t              optsDiff[key] = defaultValue;\n\t              opts[key] = defaultValue;\n\t            }\n\t          });\n\t        }\n\t\n\t        // update changed options\n\t        _angular2.default.forEach(newVal, function (value, key) {\n\t          // if it's a custom option of the directive,\n\t          // handle it approprietly\n\t          if (key in directiveOpts) {\n\t            if (key === 'ui-floating' && (value === false || value === true) && sortableWidgetInstance) {\n\t              sortableWidgetInstance.floating = value;\n\t            }\n\t\n\t            opts[key] = patchSortableOption(key, value);\n\t            return;\n\t          }\n\t\n\t          value = patchSortableOption(key, value);\n\t\n\t          if (!optsDiff) {\n\t            optsDiff = {};\n\t          }\n\t          optsDiff[key] = value;\n\t          opts[key] = value;\n\t        });\n\t\n\t        return optsDiff;\n\t      }\n\t\n\t      function getPlaceholderElement(element) {\n\t        var placeholder = element.sortable('option', 'placeholder');\n\t\n\t        // placeholder.element will be a function if the placeholder, has\n\t        // been created (placeholder will be an object).  If it hasn't\n\t        // been created, either placeholder will be false if no\n\t        // placeholder class was given or placeholder.element will be\n\t        // undefined if a class was given (placeholder will be a string)\n\t        if (placeholder && placeholder.element && typeof placeholder.element === 'function') {\n\t          var result = placeholder.element();\n\t          // workaround for jquery ui 1.9.x,\n\t          // not returning jquery collection\n\t          result = (0, _jquery2.default)(result);\n\t          return result;\n\t        }\n\t        return null;\n\t      }\n\t\n\t      function getPlaceholderExcludesludes(element, placeholder) {\n\t        // exact match with the placeholder's class attribute to handle\n\t        // the case that multiple connected sortables exist and\n\t        // the placeholder option equals the class of sortable items\n\t        var notCssSelector = opts['ui-model-items'].replace(/[^,]*>/g, '');\n\t        var excludes = element.find('[class=\"' + placeholder.attr('class') + '\"]:not(' + notCssSelector + ')');\n\t        return excludes;\n\t      }\n\t\n\t      function hasSortingHelper(element, ui) {\n\t        var helperOption = element.sortable('option', 'helper');\n\t        return helperOption === 'clone' || typeof helperOption === 'function' && ui.item.sortable.isCustomHelperUsed();\n\t      }\n\t\n\t      function getSortingHelper(element, ui, savedNodes) {\n\t        var result = null;\n\t        if (hasSortingHelper(element, ui) && element.sortable('option', 'appendTo') === 'parent') {\n\t          // The .ui-sortable-helper element (that's the default class name)\n\t          // is placed last.\n\t          result = savedNodes.last();\n\t        }\n\t        return result;\n\t      }\n\t\n\t      // thanks jquery-ui\n\t      function isFloating(item) {\n\t        return (/left|right/.test(item.css('float')) || /inline|table-cell/.test(item.css('display'))\n\t        );\n\t      }\n\t\n\t      function getElementScope(elementScopes, element) {\n\t        var result = null;\n\t        for (var i = 0; i < elementScopes.length; i++) {\n\t          var x = elementScopes[i];\n\t          if (x.element[0] === element[0]) {\n\t            result = x.scope;\n\t            break;\n\t          }\n\t        }\n\t        return result;\n\t      }\n\t\n\t      function afterStop(e, ui) {\n\t        ui.item.sortable._destroy();\n\t      }\n\t\n\t      // return the index of ui.item among the items\n\t      // we can't just do ui.item.index() because there it might have siblings\n\t      // which are not items\n\t      function getItemIndex(item) {\n\t        return item.parent().find(opts['ui-model-items']).index(item);\n\t      }\n\t\n\t      var opts = {};\n\t\n\t      // directive specific options\n\t      var directiveOpts = {\n\t        'ui-floating': undefined,\n\t        'ui-model-items': uiSortableConfig.items\n\t      };\n\t\n\t      var callbacks = {\n\t        receive: null,\n\t        remove: null,\n\t        start: null,\n\t        stop: null,\n\t        update: null\n\t      };\n\t\n\t      var wrappers = {\n\t        helper: null\n\t      };\n\t\n\t      _angular2.default.extend(opts, directiveOpts, uiSortableConfig, scope.uiSortable);\n\t\n\t      function wireUp() {\n\t        // When we add or remove elements, we need the sortable to 'refresh'\n\t        // so it can find the new/removed elements.\n\t        scope.$watchCollection('ngModel', function () {\n\t          // Timeout to let ng-repeat modify the DOM\n\t          $timeout(function () {\n\t            // ensure that the jquery-ui-sortable widget instance\n\t            // is still bound to the directive's element\n\t            if (!!getSortableWidgetInstance(element)) {\n\t              element.sortable('refresh');\n\t            }\n\t          }, 0, false);\n\t        });\n\t\n\t        callbacks.start = function (e, ui) {\n\t          if (opts['ui-floating'] === 'auto') {\n\t            // since the drag has started, the element will be\n\t            // absolutely positioned, so we check its siblings\n\t            var siblings = ui.item.siblings();\n\t            var sortableWidgetInstance = getSortableWidgetInstance((0, _jquery2.default)(e.target));\n\t            sortableWidgetInstance.floating = isFloating(siblings);\n\t          }\n\t\n\t          // Save the starting position of dragged item\n\t          var index = getItemIndex(ui.item);\n\t          ui.item.sortable = {\n\t            model: ngModel.$modelValue[index],\n\t            index: index,\n\t            source: ui.item.parent(),\n\t            sourceModel: ngModel.$modelValue,\n\t            cancel: function cancel() {\n\t              ui.item.sortable._isCanceled = true;\n\t            },\n\t            isCanceled: function isCanceled() {\n\t              return ui.item.sortable._isCanceled;\n\t            },\n\t            isCustomHelperUsed: function isCustomHelperUsed() {\n\t              return !!ui.item.sortable._isCustomHelperUsed;\n\t            },\n\t\n\t            _isCanceled: false,\n\t            _isCustomHelperUsed: ui.item.sortable._isCustomHelperUsed,\n\t            _destroy: function _destroy() {\n\t              _angular2.default.forEach(ui.item.sortable, function (value, key) {\n\t                ui.item.sortable[key] = undefined;\n\t              });\n\t            }\n\t          };\n\t        };\n\t\n\t        callbacks.activate = function (e, ui) {\n\t          // We need to make a copy of the current element's contents so\n\t          // we can restore it after sortable has messed it up.\n\t          // This is inside activate (instead of start) in order to save\n\t          // both lists when dragging between connected lists.\n\t          savedNodes = element.contents();\n\t\n\t          // If this list has a placeholder (the connected lists won't),\n\t          // don't inlcude it in saved nodes.\n\t          var placeholder = getPlaceholderElement(element);\n\t          if (placeholder && placeholder.length) {\n\t            var excludes = getPlaceholderExcludesludes(element, placeholder);\n\t            savedNodes = savedNodes.not(excludes);\n\t          }\n\t\n\t          // save the directive's scope so that it is accessible from ui.item.sortable\n\t          var connectedSortables = ui.item.sortable._connectedSortables || [];\n\t\n\t          connectedSortables.push({\n\t            element: element,\n\t            scope: scope\n\t          });\n\t\n\t          ui.item.sortable._connectedSortables = connectedSortables;\n\t        };\n\t\n\t        callbacks.update = function (e, ui) {\n\t          // Save current drop position but only if this is not a second\n\t          // update that happens when moving between lists because then\n\t          // the value will be overwritten with the old value\n\t          if (!ui.item.sortable.received) {\n\t            ui.item.sortable.dropindex = getItemIndex(ui.item);\n\t            var droptarget = ui.item.parent();\n\t            ui.item.sortable.droptarget = droptarget;\n\t\n\t            var droptargetScope = getElementScope(ui.item.sortable._connectedSortables, droptarget);\n\t            ui.item.sortable.droptargetModel = droptargetScope.ngModel;\n\t\n\t            // Cancel the sort (let ng-repeat do the sort for us)\n\t            // Don't cancel if this is the received list because it has\n\t            // already been canceled in the other list, and trying to cancel\n\t            // here will mess up the DOM.\n\t            element.sortable('cancel');\n\t          }\n\t\n\t          // Put the nodes back exactly the way they started (this is very\n\t          // important because ng-repeat uses comment elements to delineate\n\t          // the start and stop of repeat sections and sortable doesn't\n\t          // respect their order (even if we cancel, the order of the\n\t          // comments are still messed up).\n\t          var sortingHelper = !ui.item.sortable.received && getSortingHelper(element, ui, savedNodes);\n\t          if (sortingHelper && sortingHelper.length) {\n\t            // Restore all the savedNodes except from the sorting helper element.\n\t            // That way it will be garbage collected.\n\t            savedNodes = savedNodes.not(sortingHelper);\n\t          }\n\t          savedNodes.appendTo(element);\n\t\n\t          // If this is the target connected list then\n\t          // it's safe to clear the restored nodes since:\n\t          // update is currently running and\n\t          // stop is not called for the target list.\n\t          if (ui.item.sortable.received) {\n\t            savedNodes = null;\n\t          }\n\t\n\t          // If received is true (an item was dropped in from another list)\n\t          // then we add the new item to this list otherwise wait until the\n\t          // stop event where we will know if it was a sort or item was\n\t          // moved here from another list\n\t          if (ui.item.sortable.received && !ui.item.sortable.isCanceled()) {\n\t            scope.$apply(function () {\n\t              ngModel.$modelValue.splice(ui.item.sortable.dropindex, 0, ui.item.sortable.moved);\n\t            });\n\t          }\n\t        };\n\t\n\t        callbacks.stop = function (e, ui) {\n\t          // If the received flag hasn't be set on the item, this is a\n\t          // normal sort, if dropindex is set, the item was moved, so move\n\t          // the items in the list.\n\t          if (!ui.item.sortable.received && 'dropindex' in ui.item.sortable && !ui.item.sortable.isCanceled()) {\n\t            scope.$apply(function () {\n\t              ngModel.$modelValue.splice(ui.item.sortable.dropindex, 0, ngModel.$modelValue.splice(ui.item.sortable.index, 1)[0]);\n\t            });\n\t          } else {\n\t            // if the item was not moved, then restore the elements\n\t            // so that the ngRepeat's comment are correct.\n\t            if ((!('dropindex' in ui.item.sortable) || ui.item.sortable.isCanceled()) && !_angular2.default.equals(element.contents(), savedNodes)) {\n\t              var sortingHelper = getSortingHelper(element, ui, savedNodes);\n\t              if (sortingHelper && sortingHelper.length) {\n\t                // Restore all the savedNodes except from the sorting helper element.\n\t                // That way it will be garbage collected.\n\t                savedNodes = savedNodes.not(sortingHelper);\n\t              }\n\t              savedNodes.appendTo(element);\n\t            }\n\t          }\n\t\n\t          // It's now safe to clear the savedNodes\n\t          // since stop is the last callback.\n\t          savedNodes = null;\n\t        };\n\t\n\t        callbacks.receive = function (e, ui) {\n\t          // An item was dropped here from another list, set a flag on the\n\t          // item.\n\t          ui.item.sortable.received = true;\n\t        };\n\t\n\t        callbacks.remove = function (e, ui) {\n\t          // Workaround for a problem observed in nested connected lists.\n\t          // There should be an 'update' event before 'remove' when moving\n\t          // elements. If the event did not fire, cancel sorting.\n\t          if (!('dropindex' in ui.item.sortable)) {\n\t            element.sortable('cancel');\n\t            ui.item.sortable.cancel();\n\t          }\n\t\n\t          // Remove the item from this list's model and copy data into item,\n\t          // so the next list can retrive it\n\t          if (!ui.item.sortable.isCanceled()) {\n\t            scope.$apply(function () {\n\t              ui.item.sortable.moved = ngModel.$modelValue.splice(ui.item.sortable.index, 1)[0];\n\t            });\n\t          }\n\t        };\n\t\n\t        wrappers.helper = function (inner) {\n\t          if (inner && typeof inner === 'function') {\n\t            return function (e, item) {\n\t              var oldItemSortable = item.sortable;\n\t              var index = getItemIndex(item);\n\t              item.sortable = {\n\t                model: ngModel.$modelValue[index],\n\t                index: index,\n\t                source: item.parent(),\n\t                sourceModel: ngModel.$modelValue,\n\t                _restore: function _restore() {\n\t                  _angular2.default.forEach(item.sortable, function (value, key) {\n\t                    item.sortable[key] = undefined;\n\t                  });\n\t\n\t                  item.sortable = oldItemSortable;\n\t                }\n\t              };\n\t\n\t              var innerResult = inner.apply(this, arguments);\n\t              item.sortable._restore();\n\t              item.sortable._isCustomHelperUsed = item !== innerResult;\n\t              return innerResult;\n\t            };\n\t          }\n\t          return inner;\n\t        };\n\t\n\t        scope.$watchCollection('uiSortable', function (newVal, oldVal) {\n\t          // ensure that the jquery-ui-sortable widget instance\n\t          // is still bound to the directive's element\n\t          var sortableWidgetInstance = getSortableWidgetInstance(element);\n\t          if (!!sortableWidgetInstance) {\n\t            var optsDiff = patchUISortableOptions(newVal, oldVal, sortableWidgetInstance);\n\t\n\t            if (optsDiff) {\n\t              element.sortable('option', optsDiff);\n\t            }\n\t          }\n\t        }, true);\n\t\n\t        patchUISortableOptions(opts);\n\t      }\n\t\n\t      function init() {\n\t        if (ngModel) {\n\t          wireUp();\n\t        } else {\n\t          $log.info('ui.sortable: ngModel not provided!', element);\n\t        }\n\t\n\t        // Create sortable\n\t        element.sortable(opts);\n\t      }\n\t\n\t      function initIfEnabled() {\n\t        if (scope.uiSortable && scope.uiSortable.disabled) {\n\t          return false;\n\t        }\n\t\n\t        init();\n\t\n\t        // Stop Watcher\n\t        initIfEnabled.cancelWatcher();\n\t        initIfEnabled.cancelWatcher = _angular2.default.noop;\n\t\n\t        return true;\n\t      }\n\t\n\t      initIfEnabled.cancelWatcher = _angular2.default.noop;\n\t\n\t      if (!initIfEnabled()) {\n\t        initIfEnabled.cancelWatcher = scope.$watch('uiSortable.disabled', initIfEnabled);\n\t      }\n\t    }\n\t  };\n\t}]);\n\n/***/ },\n/* 157 */,\n/* 158 */,\n/* 159 */,\n/* 160 */,\n/* 161 */,\n/* 162 */,\n/* 163 */,\n/* 164 */,\n/* 165 */\n1,\n/* 166 */,\n/* 167 */,\n/* 168 */,\n/* 169 */,\n/* 170 */,\n/* 171 */,\n/* 172 */,\n/* 173 */,\n/* 174 */,\n/* 175 */,\n/* 176 */,\n/* 177 */,\n/* 178 */,\n/* 179 */,\n/* 180 */,\n/* 181 */,\n/* 182 */\n1,\n/* 183 */\n1,\n/* 184 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _home = __webpack_require__(185);\n\t\n\tObject.defineProperty(exports, 'home', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_home).default;\n\t  }\n\t});\n\t\n\tvar _queriesList = __webpack_require__(187);\n\t\n\tObject.defineProperty(exports, 'queriesList', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_queriesList).default;\n\t  }\n\t});\n\t\n\tvar _alertsList = __webpack_require__(192);\n\t\n\tObject.defineProperty(exports, 'alertsList', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_alertsList).default;\n\t  }\n\t});\n\t\n\tvar _alert = __webpack_require__(194);\n\t\n\tObject.defineProperty(exports, 'alert', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_alert).default;\n\t  }\n\t});\n\t\n\tvar _admin = __webpack_require__(198);\n\t\n\tObject.defineProperty(exports, 'admin', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_admin).default;\n\t  }\n\t});\n\t\n\tvar _dashboards = __webpack_require__(206);\n\t\n\tObject.defineProperty(exports, 'dashboards', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_dashboards).default;\n\t  }\n\t});\n\t\n\tvar _querySnippets = __webpack_require__(223);\n\t\n\tObject.defineProperty(exports, 'querySnippets', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_querySnippets).default;\n\t  }\n\t});\n\t\n\tvar _users = __webpack_require__(229);\n\t\n\tObject.defineProperty(exports, 'users', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_users).default;\n\t  }\n\t});\n\t\n\tvar _groups = __webpack_require__(236);\n\t\n\tObject.defineProperty(exports, 'groups', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_groups).default;\n\t  }\n\t});\n\t\n\tvar _destinations = __webpack_require__(246);\n\t\n\tObject.defineProperty(exports, 'destinations', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_destinations).default;\n\t  }\n\t});\n\t\n\tvar _dataSources = __webpack_require__(251);\n\t\n\tObject.defineProperty(exports, 'dataSources', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_dataSources).default;\n\t  }\n\t});\n\t\n\tvar _queries = __webpack_require__(256);\n\t\n\tObject.defineProperty(exports, 'queries', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_queries).default;\n\t  }\n\t});\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 185 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tHomeCtrl.$inject = [\"$scope\", \"$uibModal\", \"currentUser\", \"Events\", \"Dashboard\", \"Query\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('homePage', {\n\t    template: _home2.default,\n\t    controller: HomeCtrl\n\t  });\n\t\n\t  return {\n\t    '/': {\n\t      template: '<home-page></home-page>',\n\t      title: 'Redash'\n\t    }\n\t  };\n\t};\n\t\n\tvar _home = __webpack_require__(186);\n\t\n\tvar _home2 = _interopRequireDefault(_home);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction HomeCtrl($scope, $uibModal, currentUser, Events, Dashboard, Query) {\n\t  Events.record('view', 'page', 'personal_homepage');\n\t\n\t  // todo: maybe this should come from some serivce as we have this logic elsewhere.\n\t  this.canCreateQuery = currentUser.hasPermission('create_query');\n\t  this.canCreateDashboard = currentUser.hasPermission('create_dashboard');\n\t\n\t  this.recentQueries = Query.recent();\n\t  this.recentDashboards = Dashboard.recent();\n\t\n\t  this.newDashboard = function () {\n\t    $uibModal.open({\n\t      component: 'editDashboardDialog',\n\t      resolve: {\n\t        dashboard: function dashboard() {\n\t          return { name: null, layout: null };\n\t        }\n\t      }\n\t    });\n\t  };\n\t}\n\n/***/ },\n/* 186 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"container\\\">\\n  <div class=\\\"tile m-t-10 m-b-5\\\">\\n    <div class=\\\"t-body p-5\\\">\\n      <a href=\\\"queries/new\\\" ng-show=\\\"$ctrl.canCreateQuery\\\" class=\\\"btn btn-default\\\">New Query</a>\\n      <button ng-show=\\\"$ctrl.canCreateDashboard\\\" class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.newDashboard()\\\">New Dashboard\\n      </button>\\n      <a href=\\\"alerts/new\\\" class=\\\"btn btn-default\\\">New Alert</a>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"tile\\\">\\n    <div class=\\\"t-body tb-padding\\\">\\n      <div class=\\\"row\\\">\\n          <div class=\\\"col-md-6\\\">\\n            <p class=\\\"f-500 m-b-20 c-black\\\">Recent Dashboards</p>\\n            <div class=\\\"list-group\\\">\\n              <a ng-href=\\\"dashboard/{{dashboard.slug}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"dashboard in $ctrl.recentDashboards\\\">\\n                {{dashboard.name}} <span class=\\\"label label-default\\\" ng-if=\\\"dashboard.is_draft\\\">Unpublished</span>\\n              </a>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"col-md-6\\\">\\n            <p class=\\\"f-500 m-b-20 c-black\\\">Recent Queries</p>\\n            <div class=\\\"list-group\\\">\\n              <a ng-href=\\\"queries/{{query.id}}\\\" class=\\\"list-group-item\\\"\\n                 ng-repeat=\\\"query in $ctrl.recentQueries\\\">{{query.name}} <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span></a>\\n            </div>\\n          </div>\\n      </div>\\n\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 187 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('pageQueriesList', {\n\t    template: _queriesList2.default,\n\t    controller: QueriesListCtrl\n\t  });\n\t\n\t  var route = {\n\t    template: '<page-queries-list></page-queries-list>',\n\t    reloadOnSearch: false\n\t  };\n\t\n\t  return {\n\t    '/queries': route,\n\t    '/queries/my': route\n\t  };\n\t};\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tvar _utils = __webpack_require__(188);\n\t\n\tvar _queriesList = __webpack_require__(191);\n\t\n\tvar _queriesList2 = _interopRequireDefault(_queriesList);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar QueriesListCtrl = function QueriesListCtrl($location, Title, Query) {\n\t  _classCallCheck(this, QueriesListCtrl);\n\t\n\t  var page = parseInt($location.search().page || 1, 10);\n\t\n\t  this.defaultOptions = {};\n\t\n\t  var self = this;\n\t\n\t  switch ($location.path()) {\n\t    case '/queries':\n\t      Title.set('Queries');\n\t      this.resource = Query.query;\n\t      break;\n\t    case '/queries/my':\n\t      Title.set('My Queries');\n\t      this.resource = Query.myQueries;\n\t      break;\n\t    default:\n\t      break;\n\t  }\n\t\n\t  function queriesFetcher(requestedPage, itemsPerPage, paginator) {\n\t    $location.search('page', requestedPage);\n\t\n\t    var request = _extends({}, self.defaultOptions, { page: requestedPage, page_size: itemsPerPage });\n\t\n\t    return self.resource(request).$promise.then(function (data) {\n\t      var rows = data.results.map(function (query) {\n\t        query.created_at = (0, _moment2.default)(query.created_at);\n\t        query.retrieved_at = (0, _moment2.default)(query.retrieved_at);\n\t        return query;\n\t      });\n\t\n\t      paginator.updateRows(rows, data.count);\n\t    });\n\t  }\n\t\n\t  this.paginator = new _utils.LivePaginator(queriesFetcher, { page: page });\n\t\n\t  this.tabs = [{ name: 'My Queries', path: 'queries/my' }, { path: 'queries', name: 'All Queries', isActive: function isActive(path) {\n\t      return path === '/queries';\n\t    } }];\n\t};\n\tQueriesListCtrl.$inject = [\"$location\", \"Title\", \"Query\"];\n\n/***/ },\n/* 188 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _paginator = __webpack_require__(189);\n\t\n\tObject.defineProperty(exports, 'Paginator', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_paginator).default;\n\t  }\n\t});\n\t\n\tvar _livePaginator = __webpack_require__(190);\n\t\n\tObject.defineProperty(exports, 'LivePaginator', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_livePaginator).default;\n\t  }\n\t});\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 189 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Paginator = function () {\n\t  function Paginator(rows) {\n\t    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t        _ref$page = _ref.page,\n\t        page = _ref$page === undefined ? 1 : _ref$page,\n\t        _ref$itemsPerPage = _ref.itemsPerPage,\n\t        itemsPerPage = _ref$itemsPerPage === undefined ? 20 : _ref$itemsPerPage,\n\t        _ref$totalCount = _ref.totalCount,\n\t        totalCount = _ref$totalCount === undefined ? undefined : _ref$totalCount;\n\t\n\t    _classCallCheck(this, Paginator);\n\t\n\t    this.page = page;\n\t    this.itemsPerPage = itemsPerPage;\n\t    this.updateRows(rows, totalCount);\n\t  }\n\t\n\t  _createClass(Paginator, [{\n\t    key: \"setPage\",\n\t    value: function setPage(page) {\n\t      this.page = page;\n\t    }\n\t  }, {\n\t    key: \"getPageRows\",\n\t    value: function getPageRows() {\n\t      var first = this.itemsPerPage * (this.page - 1);\n\t      var last = this.itemsPerPage * this.page;\n\t\n\t      return this.rows.slice(first, last);\n\t    }\n\t  }, {\n\t    key: \"updateRows\",\n\t    value: function updateRows(rows) {\n\t      var totalCount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\t\n\t      this.rows = rows;\n\t      if (this.rows) {\n\t        this.totalCount = totalCount || rows.length;\n\t      } else {\n\t        this.totalCount = 0;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Paginator;\n\t}();\n\t\n\texports.default = Paginator;\n\n/***/ },\n/* 190 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar LivePaginator = function () {\n\t  function LivePaginator(rowsFetcher) {\n\t    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t        _ref$page = _ref.page,\n\t        page = _ref$page === undefined ? 1 : _ref$page,\n\t        _ref$itemsPerPage = _ref.itemsPerPage,\n\t        itemsPerPage = _ref$itemsPerPage === undefined ? 20 : _ref$itemsPerPage;\n\t\n\t    _classCallCheck(this, LivePaginator);\n\t\n\t    this.page = page;\n\t    this.itemsPerPage = itemsPerPage;\n\t    this.rowsFetcher = rowsFetcher;\n\t    this.rowsFetcher(this.page, this.itemsPerPage, this);\n\t  }\n\t\n\t  _createClass(LivePaginator, [{\n\t    key: \"setPage\",\n\t    value: function setPage(page) {\n\t      this.page = page;\n\t      this.rowsFetcher(page, this.itemsPerPage, this);\n\t    }\n\t  }, {\n\t    key: \"getPageRows\",\n\t    value: function getPageRows() {\n\t      return this.rows;\n\t    }\n\t  }, {\n\t    key: \"updateRows\",\n\t    value: function updateRows(rows) {\n\t      var totalCount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\t\n\t      this.rows = rows;\n\t      if (this.rows) {\n\t        this.totalCount = totalCount || rows.length;\n\t      } else {\n\t        this.totalCount = 0;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return LivePaginator;\n\t}();\n\t\n\texports.default = LivePaginator;\n\n/***/ },\n/* 191 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"container\\\">\\n  <page-header title=\\\"Queries\\\"></page-header>\\n  <tab-nav tabs=\\\"$ctrl.tabs\\\"></tab-nav>\\n\\n  <div class=\\\"bg-white\\\">\\n    <table class=\\\"table table-condensed table-hover\\\">\\n      <thead>\\n      <tr>\\n        <th>Name</th>\\n        <th>Created By</th>\\n        <th>Created At</th>\\n        <th>Runtime</th>\\n        <th>Last Executed At</th>\\n        <th>Update Schedule</th>\\n      </tr>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"query in $ctrl.paginator.getPageRows()\\\">\\n        <td><a href=\\\"queries/{{query.id}}\\\">{{query.name}}</a> <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span></td>\\n        <td>{{query.user.name}}</td>\\n        <td>{{query.created_at | dateTime}}</td>\\n        <td>{{query.runtime | durationHumanize}}</td>\\n        <td>{{query.retrieved_at | dateTime}}</td>\\n        <td>{{query.schedule | scheduleHumanize}}</td>\\n      </tr>\\n      </tbody>\\n    </table>\\n    <paginator paginator=\\\"$ctrl.paginator\\\"></paginator>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 192 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('alertsListPage', {\n\t    template: _alertsList2.default,\n\t    controller: AlertsListCtrl\n\t  });\n\t\n\t  return {\n\t    '/alerts': {\n\t      template: '<alerts-list-page></alerts-list-page>',\n\t      title: 'Alerts'\n\t    }\n\t  };\n\t};\n\t\n\tvar _utils = __webpack_require__(188);\n\t\n\tvar _alertsList = __webpack_require__(193);\n\t\n\tvar _alertsList2 = _interopRequireDefault(_alertsList);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar AlertsListCtrl = function AlertsListCtrl(Events, Alert) {\n\t  var _this = this;\n\t\n\t  _classCallCheck(this, AlertsListCtrl);\n\t\n\t  Events.record('view', 'page', 'alerts');\n\t\n\t  this.alerts = new _utils.Paginator([], { itemsPerPage: 20 });\n\t\n\t  Alert.query(function (alerts) {\n\t    var stateClass = {\n\t      ok: 'label label-success',\n\t      triggered: 'label label-danger',\n\t      unknown: 'label label-warning'\n\t    };\n\t\n\t    alerts.forEach(function (alert) {\n\t      alert.class = stateClass[alert.state];\n\t    });\n\t\n\t    _this.alerts.updateRows(alerts);\n\t  });\n\t};\n\tAlertsListCtrl.$inject = [\"Events\", \"Alert\"];\n\n/***/ },\n/* 193 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div>\\n  <page-header title=\\\"Alerts\\\">\\n    <a href=\\\"alerts/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Alert</a>\\n  </page-header>\\n\\n  <div class=\\\"container\\\">\\n    <div class=\\\"container bg-white\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n        <tr>\\n          <th>Name</th>\\n          <th>Created By</th>\\n          <th>State</th>\\n          <th>Created At</th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"row in $ctrl.alerts.getPageRows()\\\">\\n          <td><a href=\\\"alerts/{{row.id}}\\\">{{row.name}}</a></td>\\n          <td>{{row.user.name}}</td>\\n          <td><span ng-class=\\\"row.class\\\">{{row.state | uppercase}}</span> since <span am-time-ago=\\\"row.updated_at\\\"></span></td>\\n          <td><span am-time-ago=\\\"row.created_at\\\"></span></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.alerts\\\"></paginator>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 194 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tAlertCtrl.$inject = [\"$routeParams\", \"$location\", \"$sce\", \"toastr\", \"currentUser\", \"Query\", \"Events\", \"Alert\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('alertPage', {\n\t    template: _alert2.default,\n\t    controller: AlertCtrl\n\t  });\n\t\n\t  ngModule.directive('alertSubscriptions', _alertSubscriptions2.default);\n\t\n\t  return {\n\t    '/alerts/:alertId': {\n\t      template: '<alert-page></alert-page>',\n\t      title: 'Alerts'\n\t    }\n\t  };\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _alert = __webpack_require__(195);\n\t\n\tvar _alert2 = _interopRequireDefault(_alert);\n\t\n\tvar _alertSubscriptions = __webpack_require__(196);\n\t\n\tvar _alertSubscriptions2 = _interopRequireDefault(_alertSubscriptions);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction AlertCtrl($routeParams, $location, $sce, toastr, currentUser, Query, Events, Alert) {\n\t  var _this = this;\n\t\n\t  this.alertId = $routeParams.alertId;\n\t\n\t  if (this.alertId === 'new') {\n\t    Events.record('view', 'page', 'alerts/new');\n\t  } else {\n\t    Events.record('view', 'alert', this.alertId);\n\t  }\n\t\n\t  this.trustAsHtml = function (html) {\n\t    return $sce.trustAsHtml(html);\n\t  };\n\t\n\t  this.onQuerySelected = function (item) {\n\t    _this.selectedQuery = item;\n\t    item.getQueryResultPromise().then(function (result) {\n\t      _this.queryResult = result;\n\t      _this.alert.options.column = _this.alert.options.column || result.getColumnNames()[0];\n\t    });\n\t  };\n\t\n\t  if (this.alertId === 'new') {\n\t    this.alert = new Alert({ options: {} });\n\t    this.canEdit = true;\n\t  } else {\n\t    this.alert = Alert.get({ id: this.alertId }, function (alert) {\n\t      _this.onQuerySelected(new Query(alert.query));\n\t      _this.canEdit = currentUser.canEdit(_this.alert);\n\t    });\n\t  }\n\t\n\t  this.ops = ['greater than', 'less than', 'equals'];\n\t  this.selectedQuery = null;\n\t\n\t  var defaultNameBuilder = (0, _underscore.template)('<%= query.name %>: <%= options.column %> <%= options.op %> <%= options.value %>');\n\t\n\t  this.getDefaultName = function () {\n\t    if (!_this.alert.query) {\n\t      return undefined;\n\t    }\n\t    return defaultNameBuilder(_this.alert);\n\t  };\n\t\n\t  this.searchQueries = function (term) {\n\t    if (!term || term.length < 3) {\n\t      return;\n\t    }\n\t\n\t    Query.search({ q: term }, function (results) {\n\t      _this.queries = results;\n\t    });\n\t  };\n\t\n\t  this.saveChanges = function () {\n\t    if (_this.alert.name === undefined || _this.alert.name === '') {\n\t      _this.alert.name = _this.getDefaultName();\n\t    }\n\t    if (_this.alert.rearm === '' || _this.alert.rearm === 0) {\n\t      _this.alert.rearm = null;\n\t    }\n\t    _this.alert.$save(function (alert) {\n\t      toastr.success('Saved.');\n\t      if (_this.alertId === 'new') {\n\t        $location.path('/alerts/' + alert.id).replace();\n\t      }\n\t    }, function () {\n\t      toastr.error('Failed saving alert.');\n\t    });\n\t  };\n\t\n\t  this.delete = function () {\n\t    _this.alert.$delete(function () {\n\t      $location.path('/alerts');\n\t      toastr.success('Alert deleted.');\n\t    }, function () {\n\t      toastr.error('Failed deleting alert.');\n\t    });\n\t  };\n\t}\n\n/***/ },\n/* 195 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<page-header title='{{$ctrl.alert.name || $ctrl.getDefaultName() || \\\"New\\\" }}'>\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <email-settings-warning function=\\\"'alert emails'\\\"></email-settings-warning>\\n\\n  <div class=\\\"container\\\">\\n    <div class=\\\"row bg-white p-10\\\">\\n      <div class=\\\"col-md-8\\\">\\n        <form name=\\\"alertForm\\\" class=\\\"form\\\">\\n          <div class=\\\"form-group\\\">\\n            <label>Query</label>\\n            <ui-select ng-model=\\\"$ctrl.alert.query\\\" reset-search-input=\\\"false\\\" on-select=\\\"$ctrl.onQuerySelected($item)\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n              <ui-select-match placeholder=\\\"Search a query by name\\\">{{$select.selected.name}}</ui-select-match>\\n              <ui-select-choices repeat=\\\"q in $ctrl.queries\\\"\\n                                 refresh=\\\"$ctrl.searchQueries($select.search)\\\"\\n                                 refresh-delay=\\\"0\\\">\\n                <div ng-bind-html=\\\"$ctrl.trustAsHtml(q.name | highlight: $select.search)\\\"></div>\\n              </ui-select-choices>\\n            </ui-select>\\n          </div>\\n\\n          <div class=\\\"form-group\\\" ng-show=\\\"$ctrl.selectedQuery\\\">\\n            <label>Name</label>\\n            <input type=\\\"string\\\" placeholder=\\\"{{$ctrl.getDefaultName()}}\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.name\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n          </div>\\n\\n          <div ng-show=\\\"$ctrl.queryResult\\\" class=\\\"form-horizontal\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Value column</label>\\n              <div class=\\\"col-md-4\\\">\\n                <select ng-options=\\\"name for name in $ctrl.queryResult.getColumnNames()\\\" ng-model=\\\"$ctrl.alert.options.column\\\"\\n                        class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"></select>\\n              </div>\\n              <label class=\\\"control-label col-md-2\\\">Value</label>\\n              <div class=\\\"col-md-4\\\">\\n                <p class=\\\"form-control-static\\\">{{$ctrl.queryResult.getData()[0][$ctrl.alert.options.column]}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Op</label>\\n              <div class=\\\"col-md-4\\\">\\n                <select ng-options=\\\"name for name in $ctrl.ops\\\" ng-model=\\\"$ctrl.alert.options.op\\\" class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"></select>\\n              </div>\\n              <label class=\\\"control-label col-md-2\\\">Reference</label>\\n              <div class=\\\"col-md-4\\\">\\n                <input type=\\\"number\\\" step=\\\"any\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.options.value\\\" placeholder=\\\"reference value\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"\\n                       required/>\\n              </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Rearm seconds</label>\\n              <div class=\\\"col-md-4\\\">\\n                <input type=\\\"number\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.rearm\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"/>\\n              </div>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.canEdit\\\">\\n            <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!alertForm.$valid\\\" ng-click=\\\"$ctrl.saveChanges()\\\">Save</button>\\n            <button class=\\\"btn btn-danger\\\" ng-if=\\\"$ctrl.alert.id\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button>\\n          </div>\\n        </form>\\n      </div>\\n      <div class=\\\"col-md-4\\\" ng-if=\\\"$ctrl.alert.id\\\">\\n        <alert-subscriptions alert-id=\\\"$ctrl.alert.id\\\"></alert-subscriptions>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 196 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tcontroller.$inject = [\"$scope\", \"$q\", \"$sce\", \"currentUser\", \"AlertSubscription\", \"Destination\", \"toastr\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _alertSubscriptions = __webpack_require__(197);\n\t\n\tvar _alertSubscriptions2 = _interopRequireDefault(_alertSubscriptions);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction controller($scope, $q, $sce, currentUser, AlertSubscription, Destination, toastr) {\n\t  'ngInject';\n\t\n\t  $scope.newSubscription = {};\n\t  $scope.subscribers = [];\n\t  $scope.destinations = [];\n\t  $scope.currentUser = currentUser;\n\t\n\t  $q.all([Destination.query().$promise, AlertSubscription.query({ alertId: $scope.alertId }).$promise]).then(function (responses) {\n\t    var destinations = responses[0];\n\t    var subscribers = responses[1];\n\t\n\t    var subscribedDestinations = (0, _underscore.compact)(subscribers.map(function (s) {\n\t      return s.destination && s.destination.id;\n\t    }));\n\t\n\t    var subscribedUsers = (0, _underscore.compact)(subscribers.map(function (s) {\n\t      return !s.destination && s.user.id;\n\t    }));\n\t\n\t    $scope.destinations = destinations.filter(function (d) {\n\t      return !(0, _underscore.contains)(subscribedDestinations, d.id);\n\t    });\n\t\n\t    if (!(0, _underscore.contains)(subscribedUsers, currentUser.id)) {\n\t      $scope.destinations.unshift({ user: { name: currentUser.name } });\n\t    }\n\t\n\t    $scope.newSubscription.destination = $scope.destinations[0];\n\t    $scope.subscribers = subscribers;\n\t  });\n\t\n\t  $scope.destinationsDisplay = function (d) {\n\t    if (!d) {\n\t      return '';\n\t    }\n\t\n\t    var destination = d;\n\t    if (d.destination) {\n\t      destination = destination.destination;\n\t    } else if (destination.user) {\n\t      destination = {\n\t        name: d.user.name + ' (Email)',\n\t        icon: 'fa-envelope',\n\t        type: 'user'\n\t      };\n\t    }\n\t\n\t    return $sce.trustAsHtml('<i class=\"fa ' + destination.icon + '\"></i>&nbsp;' + destination.name);\n\t  };\n\t\n\t  $scope.saveSubscriber = function () {\n\t    var sub = new AlertSubscription({ alert_id: $scope.alertId });\n\t    if ($scope.newSubscription.destination.id) {\n\t      sub.destination_id = $scope.newSubscription.destination.id;\n\t    }\n\t\n\t    sub.$save(function () {\n\t      toastr.success('Subscribed.');\n\t      $scope.subscribers.push(sub);\n\t      $scope.destinations = (0, _underscore.without)($scope.destinations, $scope.newSubscription.destination);\n\t      if ($scope.destinations.length > 0) {\n\t        $scope.newSubscription.destination = $scope.destinations[0];\n\t      } else {\n\t        $scope.newSubscription.destination = undefined;\n\t      }\n\t    }, function () {\n\t      toastr.error('Failed saving subscription.');\n\t    });\n\t  };\n\t\n\t  $scope.unsubscribe = function (subscriber) {\n\t    var destination = subscriber.destination;\n\t    var user = subscriber.user;\n\t\n\t    subscriber.$delete(function () {\n\t      toastr.success('Unsubscribed');\n\t      $scope.subscribers = (0, _underscore.without)($scope.subscribers, subscriber);\n\t      if (destination) {\n\t        $scope.destinations.push(destination);\n\t      } else if (user.id === currentUser.id) {\n\t        $scope.destinations.push({ user: { name: currentUser.name } });\n\t      }\n\t\n\t      if ($scope.destinations.length === 1) {\n\t        $scope.newSubscription.destination = $scope.destinations[0];\n\t      }\n\t    }, function () {\n\t      toastr.error('Failed unsubscribing.');\n\t    });\n\t  };\n\t}\n\t\n\texports.default = function () {\n\t  return {\n\t    restrict: 'E',\n\t    replace: true,\n\t    scope: {\n\t      alertId: '='\n\t    },\n\t    template: _alertSubscriptions2.default,\n\t    controller: controller\n\t  };\n\t};\n\n/***/ },\n/* 197 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"p-5\\\">\\n  <h4>Notifications</h4>\\n\\n  <div>\\n    <ui-select ng-model=\\\"newSubscription.destination\\\" ng-disabled=\\\"destinations.length == 0\\\">\\n      <ui-select-match><span ng-bind-html=\\\"destinationsDisplay($select.selected)\\\"></span></ui-select-match>\\n      <ui-select-choices repeat=\\\"d in destinations\\\">\\n        <span ng-bind-html=\\\"destinationsDisplay(d)\\\"></span>\\n      </ui-select-choices>\\n    </ui-select>\\n  </div>\\n  <div class=\\\"m-t-5\\\">\\n    <button class=\\\"btn btn-default\\\" ng-click=\\\"saveSubscriber()\\\" ng-disabled=\\\"destinations.length == 0\\\" style=\\\"width:50%;\\\">Add</button>\\n    <span class=\\\"pull-right m-t-5\\\">\\n      <a href=\\\"destinations/new\\\" ng-if=\\\"currentUser.isAdmin\\\">Create New Destination</a>\\n    </span>\\n  </div>\\n\\n  <hr/>\\n\\n  <div>\\n    <div class=\\\"list-group-item\\\" ng-repeat=\\\"subscriber in subscribers\\\">\\n      <span ng-bind-html=\\\"destinationsDisplay(subscriber)\\\"></span>\\n      <button class=\\\"btn btn-xs btn-danger pull-right\\\" ng-click=\\\"unsubscribe(subscriber)\\\" ng-if=\\\"currentUser.isAdmin || currentUser.id == subscriber.user.id\\\">Remove</button>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 198 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t                                 value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t                                 var routes = _extends({}, (0, _status2.default)(ngModule), (0, _outdatedQueries2.default)(ngModule), (0, _tasks2.default)(ngModule));\n\t                                 return routes;\n\t};\n\t\n\tvar _status = __webpack_require__(199);\n\t\n\tvar _status2 = _interopRequireDefault(_status);\n\t\n\tvar _outdatedQueries = __webpack_require__(201);\n\t\n\tvar _outdatedQueries2 = _interopRequireDefault(_outdatedQueries);\n\t\n\tvar _tasks = __webpack_require__(203);\n\t\n\tvar _tasks2 = _interopRequireDefault(_tasks);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 199 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tAdminStatusCtrl.$inject = [\"$scope\", \"$http\", \"$timeout\", \"currentUser\", \"Events\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('statusPage', {\n\t    template: _status2.default,\n\t    controller: AdminStatusCtrl\n\t  });\n\t\n\t  return {\n\t    '/admin/status': {\n\t      template: '<status-page></status-page>',\n\t      title: 'System Status'\n\t    }\n\t  };\n\t};\n\t\n\tvar _status = __webpack_require__(200);\n\t\n\tvar _status2 = _interopRequireDefault(_status);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// TODO: switch to $ctrl instead of $scope.\n\tfunction AdminStatusCtrl($scope, $http, $timeout, currentUser, Events) {\n\t  Events.record('view', 'page', 'admin/status');\n\t\n\t  var refresh = function refresh() {\n\t    $http.get('/status.json').success(function (data) {\n\t      $scope.workers = data.workers;\n\t      delete data.workers;\n\t      $scope.manager = data.manager;\n\t      delete data.manager;\n\t      $scope.status = data;\n\t    });\n\t\n\t    var timer = $timeout(refresh, 59 * 1000);\n\t\n\t    $scope.$on('$destroy', function () {\n\t      if (timer) {\n\t        $timeout.cancel(timer);\n\t      }\n\t    });\n\t  };\n\t\n\t  refresh();\n\t}\n\n/***/ },\n/* 200 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<page-header title=\\\"Admin\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li class=\\\"active\\\"><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li><a href=\\\"admin/queries/tasks\\\">Queries Queue</a></li>\\n      <li><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <div>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">General</li>\\n        <li class=\\\"list-group-item\\\" ng-repeat=\\\"(name, value) in status\\\">\\n          <span class=\\\"badge\\\">{{value}}</span>\\n          {{name | toHuman}}\\n        </li>\\n      </ul>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">Manager</li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\" am-time-ago=\\\"manager.last_refresh_at*1000.0\\\"></span>\\n          Last Refresh\\n        </li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\" am-time-ago=\\\"manager.started_at*1000.0\\\"></span>\\n          Started\\n        </li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\">{{manager.outdated_queries_count}}</span>\\n          Outdated Queries Count\\n        </li>\\n      </ul>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">Queues</li>\\n        <li class=\\\"list-group-item\\\" ng-repeat=\\\"(name, value) in manager.queues\\\">\\n          <span class=\\\"badge\\\">{{value.size}}</span>\\n          {{name}} <span uib-popover=\\\"{{value.data_sources}}\\\" popover-trigger=\\\"'mouseenter'\\\"><i class=\\\"fa fa-question-circle\\\"></i></span>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 201 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tOutdatedQueriesCtrl.$inject = [\"$scope\", \"Events\", \"$http\", \"$timeout\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('outdatedQueriesPage', {\n\t    template: _outdatedQueries2.default,\n\t    controller: OutdatedQueriesCtrl\n\t  });\n\t\n\t  return {\n\t    '/admin/queries/outdated': {\n\t      template: '<outdated-queries-page></outdated-queries-page>',\n\t      title: 'Outdated Queries'\n\t    }\n\t  };\n\t};\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tvar _utils = __webpack_require__(188);\n\t\n\tvar _outdatedQueries = __webpack_require__(202);\n\t\n\tvar _outdatedQueries2 = _interopRequireDefault(_outdatedQueries);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction OutdatedQueriesCtrl($scope, Events, $http, $timeout) {\n\t  var _this = this;\n\t\n\t  Events.record('view', 'page', 'admin/outdated_queries');\n\t  $scope.autoUpdate = true;\n\t\n\t  this.queries = new _utils.Paginator([], { itemsPerPage: 50 });\n\t\n\t  var refresh = function refresh() {\n\t    if ($scope.autoUpdate) {\n\t      $scope.refresh_time = (0, _moment2.default)().add(1, 'minutes');\n\t      $http.get('/api/admin/queries/outdated').success(function (data) {\n\t        _this.queries.updateRows(data.queries);\n\t        $scope.updatedAt = data.updated_at * 1000.0;\n\t      });\n\t    }\n\t\n\t    var timer = $timeout(refresh, 59 * 1000);\n\t\n\t    $scope.$on('$destroy', function () {\n\t      if (timer) {\n\t        $timeout.cancel(timer);\n\t      }\n\t    });\n\t  };\n\t\n\t  refresh();\n\t}\n\n/***/ },\n/* 202 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<page-header title=\\\"Admin\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li><a href=\\\"admin/queries/tasks\\\">Queries Queue</a></li>\\n      <li class=\\\"active\\\"><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <table class=\\\"table table-condensed table-hover\\\">\\n      <thead>\\n      <tr>\\n        <th>Name</th>\\n        <th>Created By</th>\\n        <th>Runtime</th>\\n        <th>Last Executed At</th>\\n        <th>Created At</th>\\n        <th>Update Schedule</th>\\n      </tr>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"row in $ctrl.queries.getPageRows()\\\">\\n        <td>\\n          {{row.data_source_id}}\\n        </td>\\n        <td>\\n          <a ng-href=\\\"queries/{{row.id}}\\\">{{row.name}}</a>\\n        </td>\\n        <td>{{row.user.name}}</td>\\n        <td>{{row.runtime | durationHumanize}}</td>\\n        <td>{{row.retrieved_at | dateTime}}</td>\\n        <td>{{row.created_at | dateTime }}</td>\\n        <td>{{row.schedule | scheduleHumanize}}</td>\\n      </tr>\\n      </tbody>\\n    </table>\\n    <paginator paginator=\\\"$ctrl.queries\\\"></paginator>\\n\\n    <div class=\\\"badge\\\">\\n      Last update: <span am-time-ago=\\\"updatedAt\\\"></span>\\n    </div>\\n    (<label><input type=\\\"checkbox\\\" ng-model=\\\"autoUpdate\\\"> Auto Update</label>)\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 203 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tTasksCtrl.$inject = [\"$scope\", \"$location\", \"$http\", \"$timeout\", \"Events\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('tasksPage', {\n\t    template: _tasks2.default,\n\t    controller: TasksCtrl\n\t  });\n\t\n\t  (0, _cancelQueryButton2.default)(ngModule);\n\t\n\t  return {\n\t    '/admin/queries/tasks': {\n\t      template: '<tasks-page></tasks-page>',\n\t      title: 'Running Queries'\n\t    }\n\t  };\n\t};\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tvar _utils = __webpack_require__(188);\n\t\n\tvar _tasks = __webpack_require__(204);\n\t\n\tvar _tasks2 = _interopRequireDefault(_tasks);\n\t\n\tvar _cancelQueryButton = __webpack_require__(205);\n\t\n\tvar _cancelQueryButton2 = _interopRequireDefault(_cancelQueryButton);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction TasksCtrl($scope, $location, $http, $timeout, Events) {\n\t  var _this = this;\n\t\n\t  Events.record('view', 'page', 'admin/tasks');\n\t  $scope.autoUpdate = true;\n\t\n\t  $scope.selectedTab = 'in_progress';\n\t\n\t  $scope.tasks = {\n\t    waiting: [],\n\t    in_progress: [],\n\t    done: []\n\t  };\n\t\n\t  this.tasksPaginator = new _utils.Paginator([], { itemsPerPage: 50 });\n\t\n\t  $scope.setTab = function (tab) {\n\t    $scope.selectedTab = tab;\n\t    _this.tasksPaginator.updateRows($scope.tasks[tab]);\n\t  };\n\t\n\t  $scope.setTab($location.hash() || 'in_progress');\n\t\n\t  var refresh = function refresh() {\n\t    if ($scope.autoUpdate) {\n\t      $scope.refresh_time = (0, _moment2.default)().add(1, 'minutes');\n\t      $http.get('/api/admin/queries/tasks').success(function (data) {\n\t        $scope.tasks = data;\n\t        _this.tasksPaginator.updateRows($scope.tasks[$scope.selectedTab]);\n\t      });\n\t    }\n\t\n\t    var timer = $timeout(refresh, 5 * 1000);\n\t\n\t    $scope.$on('$destroy', function () {\n\t      if (timer) {\n\t        $timeout.cancel(timer);\n\t      }\n\t    });\n\t  };\n\t\n\t  refresh();\n\t}\n\n/***/ },\n/* 204 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<page-header title=\\\"Admin\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li class=\\\"active\\\"><a href=\\\"admin/queries/tasks\\\">Queries Queue</a></li>\\n      <li><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <ul class=\\\"tab-nav\\\">\\n      <rd-tab tab-id=\\\"in_progress\\\" name=\\\"In Progress ({{tasks.in_progress.length}})\\\" ng-click=\\\"setTab('in_progress')\\\"></rd-tab>\\n      <rd-tab tab-id=\\\"waiting\\\" name=\\\"Waiting ({{tasks.waiting.length}})\\\" ng-click=\\\"setTab('waiting')\\\"></rd-tab>\\n      <rd-tab tab-id=\\\"done\\\" name=\\\"Done\\\" ng-click=\\\"setTab('done')\\\"></rd-tab>\\n    </ul>\\n\\n    <table class=\\\"table table-condensed table-hover\\\">\\n      <thead>\\n      <tr>\\n        <th>Data Source ID</th>\\n        <th>Username</th>\\n        <th>State</th>\\n        <th>Query ID</th>\\n        <th>Query Hash</th>\\n        <th>Runtime</th>\\n        <th>Created At</th>\\n        <th>Started At</th>\\n        <th>Updated At</th>\\n        <th ng-if=\\\"selectedTab === 'in_progress'\\\"></th>\\n      </tr>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"row in $ctrl.tasksPaginator.getPageRows()\\\">\\n        <td>{{row.data_source_id}}</td>\\n        <td>{{row.username}}</td>\\n        <td>{{row.state}} <span ng-if=\\\"row.state === 'failed'\\\" uib-popover=\\\"{{row.error}}\\\" popover-trigger=\\\"mouseenter\\\" class=\\\"zmdi zmdi-help\\\"></span></td>\\n        <td>{{row.query_id}}</td>\\n        <td>{{row.query_hash}}</td>\\n        <td>{{row.run_time | durationHumanize}}</td>\\n        <td>{{row.created_at | toMilliseconds | dateTime }}</td>\\n        <td>{{row.started_at | toMilliseconds | dateTime }}</td>\\n        <td>{{row.updated_at | toMilliseconds | dateTime }}</td>\\n        <td ng-if=\\\"selectedTab === 'in_progress'\\\">\\n          <cancel-query-button query-id=\\\"dataRow.query_id\\\" task-id=\\\"dataRow.task_id\\\"></cancel-query-button>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n    <paginator paginator=\\\"$ctrl.tasksPaginator\\\"></paginator>\\n\\n    <label><input type=\\\"checkbox\\\" ng-model=\\\"autoUpdate\\\"> Auto Update</label>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 205 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('cancelQueryButton', cancelQueryButton);\n\t};\n\t\n\tfunction cancelQueryButton() {\n\t  return {\n\t    restrict: 'E',\n\t    scope: {\n\t      queryId: '=',\n\t      taskId: '='\n\t    },\n\t    transclude: true,\n\t    template: '<button class=\"btn btn-default\" ng-disabled=\"inProgress\" ng-click=\"cancelExecution()\"><i class=\"zmdi zmdi-spinner zmdi-hc-spin\" ng-if=\"inProgress\"></i> Cancel</button>',\n\t    replace: true,\n\t    controller: [\"$scope\", \"$http\", \"currentUser\", \"Events\", function controller($scope, $http, currentUser, Events) {\n\t      $scope.inProgress = false;\n\t\n\t      $scope.cancelExecution = function () {\n\t        $http.delete('api/jobs/' + $scope.taskId).success(function () {});\n\t\n\t        var queryId = $scope.queryId;\n\t        if ($scope.queryId === 'adhoc') {\n\t          queryId = null;\n\t        }\n\t\n\t        Events.record('cancel_execute', 'query', queryId, { admin: true });\n\t        $scope.inProgress = true;\n\t      };\n\t    }]\n\t  };\n\t}\n\n/***/ },\n/* 206 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  (0, _addWidgetDialog2.default)(ngModule);\n\t  (0, _widget2.default)(ngModule);\n\t  (0, _publicDashboardPage2.default)(ngModule);\n\t  (0, _editDashboardDialog2.default)(ngModule);\n\t  return _extends({}, (0, _dashboard2.default)(ngModule), (0, _dashboardList2.default)(ngModule));\n\t};\n\t\n\tvar _dashboard = __webpack_require__(207);\n\t\n\tvar _dashboard2 = _interopRequireDefault(_dashboard);\n\t\n\tvar _dashboardList = __webpack_require__(210);\n\t\n\tvar _dashboardList2 = _interopRequireDefault(_dashboardList);\n\t\n\tvar _widget = __webpack_require__(213);\n\t\n\tvar _widget2 = _interopRequireDefault(_widget);\n\t\n\tvar _addWidgetDialog = __webpack_require__(216);\n\t\n\tvar _addWidgetDialog2 = _interopRequireDefault(_addWidgetDialog);\n\t\n\tvar _editDashboardDialog = __webpack_require__(218);\n\t\n\tvar _editDashboardDialog2 = _interopRequireDefault(_editDashboardDialog);\n\t\n\tvar _publicDashboardPage = __webpack_require__(220);\n\t\n\tvar _publicDashboardPage2 = _interopRequireDefault(_publicDashboardPage);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 207 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tDashboardCtrl.$inject = [\"$rootScope\", \"$routeParams\", \"$location\", \"$timeout\", \"$q\", \"$uibModal\", \"Title\", \"AlertDialog\", \"Dashboard\", \"currentUser\", \"clientConfig\", \"Events\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('shareDashboard', ShareDashboardComponent);\n\t  ngModule.component('dashboardPage', {\n\t    template: _dashboard2.default,\n\t    controller: DashboardCtrl\n\t  });\n\t\n\t  return {\n\t    '/dashboard/:dashboardSlug': {\n\t      template: '<dashboard-page></dashboard-page>',\n\t      reloadOnSearch: false\n\t    }\n\t  };\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _ = _interopRequireWildcard(_underscore);\n\t\n\tvar _dashboard = __webpack_require__(208);\n\t\n\tvar _dashboard2 = _interopRequireDefault(_dashboard);\n\t\n\tvar _shareDashboard = __webpack_require__(209);\n\t\n\tvar _shareDashboard2 = _interopRequireDefault(_shareDashboard);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction DashboardCtrl($rootScope, $routeParams, $location, $timeout, $q, $uibModal, Title, AlertDialog, Dashboard, currentUser, clientConfig, Events) {\n\t  var _this = this;\n\t\n\t  this.isFullscreen = false;\n\t  this.refreshRate = null;\n\t  this.showPermissionsControl = clientConfig.showPermissionsControl;\n\t  this.currentUser = currentUser;\n\t  this.globalParameters = [];\n\t  this.refreshRates = [{ name: '10 seconds', rate: 10 }, { name: '30 seconds', rate: 30 }, { name: '1 minute', rate: 60 }, { name: '5 minutes', rate: 60 * 5 }, { name: '10 minutes', rate: 60 * 10 }, { name: '30 minutes', rate: 60 * 30 }, { name: '1 hour', rate: 60 * 60 }];\n\t\n\t  this.setRefreshRate = function (rate) {\n\t    _this.refreshRate = rate;\n\t    if (rate !== null) {\n\t      _this.loadDashboard(true);\n\t      _this.autoRefresh();\n\t    }\n\t  };\n\t\n\t  this.extractGlobalParameters = function () {\n\t    var globalParams = {};\n\t    _this.dashboard.widgets.forEach(function (row) {\n\t      return row.forEach(function (widget) {\n\t        if (widget.getQuery()) {\n\t          widget.getQuery().getParametersDefs().filter(function (p) {\n\t            return p.global;\n\t          }).forEach(function (param) {\n\t            var defaults = {};\n\t            defaults[param.name] = _.create(Object.getPrototypeOf(param), param);\n\t            defaults[param.name].locals = [];\n\t            globalParams = _.defaults(globalParams, defaults);\n\t            globalParams[param.name].locals.push(param);\n\t          });\n\t        }\n\t      });\n\t    });\n\t    _this.globalParameters = _.values(globalParams);\n\t  };\n\t\n\t  this.onGlobalParametersChange = function () {\n\t    _this.globalParameters.forEach(function (global) {\n\t      global.locals.forEach(function (local) {\n\t        local.value = global.value;\n\t      });\n\t    });\n\t  };\n\t\n\t  var renderDashboard = function renderDashboard(dashboard, force) {\n\t    Title.set(dashboard.name);\n\t    var promises = [];\n\t\n\t    _this.dashboard.widgets.forEach(function (row) {\n\t      return row.forEach(function (widget) {\n\t        if (widget.visualization) {\n\t          var maxAge = force ? 0 : undefined;\n\t          var queryResult = widget.getQuery().getQueryResult(maxAge);\n\t          if (!_.isUndefined(queryResult)) {\n\t            promises.push(queryResult.toPromise());\n\t          }\n\t        }\n\t      });\n\t    });\n\t\n\t    _this.extractGlobalParameters();\n\t\n\t    $q.all(promises).then(function (queryResults) {\n\t      var filters = {};\n\t      queryResults.forEach(function (queryResult) {\n\t        var queryFilters = queryResult.getFilters();\n\t        queryFilters.forEach(function (queryFilter) {\n\t          var hasQueryStringValue = _.has($location.search(), queryFilter.name);\n\t\n\t          if (!(hasQueryStringValue || dashboard.dashboard_filters_enabled)) {\n\t            // If dashboard filters not enabled, or no query string value given,\n\t            // skip filters linking.\n\t            return;\n\t          }\n\t\n\t          if (hasQueryStringValue) {\n\t            queryFilter.current = $location.search()[queryFilter.name];\n\t          }\n\t\n\t          if (!_.has(filters, queryFilter.name)) {\n\t            var filter = _.extend({}, queryFilter);\n\t            filters[filter.name] = filter;\n\t            filters[filter.name].originFilters = [];\n\t          }\n\t\n\t          // TODO: merge values.\n\t          filters[queryFilter.name].originFilters.push(queryFilter);\n\t        });\n\t      });\n\t\n\t      _this.filters = _.values(filters);\n\t      _this.filtersOnChange = function (filter) {\n\t        _.each(filter.originFilters, function (originFilter) {\n\t          originFilter.current = filter.current;\n\t        });\n\t      };\n\t    });\n\t  };\n\t\n\t  this.loadDashboard = _.throttle(function (force) {\n\t    _this.dashboard = Dashboard.get({ slug: $routeParams.dashboardSlug }, function (dashboard) {\n\t      Events.record('view', 'dashboard', dashboard.id);\n\t      renderDashboard(dashboard, force);\n\t    }, function () {\n\t      // error...\n\t      // try again. we wrap loadDashboard with throttle so it doesn't happen too often.\n\t      // we might want to consider exponential backoff and also move this as a general\n\t      // solution in $http/$resource for all AJAX calls.\n\t      _this.loadDashboard();\n\t    });\n\t  }, 1000);\n\t\n\t  this.loadDashboard();\n\t\n\t  this.autoRefresh = function () {\n\t    $timeout(function () {\n\t      _this.loadDashboard(true);\n\t    }, _this.refreshRate.rate * 1000).then(function () {\n\t      return _this.autoRefresh();\n\t    });\n\t  };\n\t\n\t  this.archiveDashboard = function () {\n\t    var archive = function archive() {\n\t      Events.record('archive', 'dashboard', _this.dashboard.id);\n\t      _this.dashboard.$delete(function () {\n\t        $rootScope.$broadcast('reloadDashboards');\n\t      });\n\t    };\n\t\n\t    var title = 'Archive Dashboard';\n\t    var message = 'Are you sure you want to archive the \"' + _this.dashboard.name + '\" dashboard?';\n\t    var confirm = { class: 'btn-warning', title: 'Archive' };\n\t\n\t    AlertDialog.open(title, message, confirm).then(archive);\n\t  };\n\t\n\t  this.showManagePermissionsModal = function () {\n\t    $uibModal.open({\n\t      component: 'permissionsEditor',\n\t      resolve: {\n\t        aclUrl: { url: 'api/dashboards/' + _this.dashboard.id + '/acl' }\n\t      }\n\t    });\n\t  };\n\t\n\t  this.editDashboard = function () {\n\t    $uibModal.open({\n\t      component: 'editDashboardDialog',\n\t      resolve: {\n\t        dashboard: function dashboard() {\n\t          return _this.dashboard;\n\t        }\n\t      }\n\t    }).result.then(function (dashboard) {\n\t      _this.dashboard = dashboard;\n\t    });\n\t  };\n\t\n\t  this.addWidget = function () {\n\t    $uibModal.open({\n\t      component: 'addWidgetDialog',\n\t      resolve: {\n\t        dashboard: function dashboard() {\n\t          return _this.dashboard;\n\t        }\n\t      }\n\t    }).result.then(function () {\n\t      return _this.extractGlobalParameters();\n\t    });\n\t  };\n\t\n\t  this.toggleFullscreen = function () {\n\t    _this.isFullscreen = !_this.isFullscreen;\n\t    document.querySelector('body').classList.toggle('headless');\n\t\n\t    if (_this.isFullscreen) {\n\t      $location.search('fullscreen', true);\n\t    } else {\n\t      $location.search('fullscreen', null);\n\t    }\n\t  };\n\t\n\t  this.togglePublished = function () {\n\t    Events.record('toggle_published', 'dashboard', _this.dashboard.id);\n\t    _this.dashboard.is_draft = !_this.dashboard.is_draft;\n\t    _this.saveInProgress = true;\n\t    Dashboard.save({\n\t      slug: _this.dashboard.id,\n\t      name: _this.dashboard.name,\n\t      layout: JSON.stringify(_this.dashboard.layout),\n\t      is_draft: _this.dashboard.is_draft\n\t    }, function (dashboard) {\n\t      _this.saveInProgress = false;\n\t      _this.dashboard.version = dashboard.version;\n\t      $rootScope.$broadcast('reloadDashboards');\n\t    });\n\t  };\n\t\n\t  if (_.has($location.search(), 'fullscreen')) {\n\t    this.toggleFullscreen();\n\t  }\n\t\n\t  this.openShareForm = function () {\n\t    $uibModal.open({\n\t      component: 'shareDashboard',\n\t      resolve: {\n\t        dashboard: _this.dashboard\n\t      }\n\t    });\n\t  };\n\t}\n\t\n\tvar ShareDashboardComponent = {\n\t  template: _shareDashboard2.default,\n\t  bindings: {\n\t    resolve: '<',\n\t    close: '&',\n\t    dismiss: '&'\n\t  },\n\t  controller: [\"$http\", function controller($http) {\n\t    'ngInject';\n\t\n\t    var _this2 = this;\n\t\n\t    this.dashboard = this.resolve.dashboard;\n\t\n\t    this.toggleSharing = function () {\n\t      var url = 'api/dashboards/' + _this2.dashboard.id + '/share';\n\t\n\t      if (!_this2.dashboard.publicAccessEnabled) {\n\t        // disable\n\t        $http.delete(url).success(function () {\n\t          _this2.dashboard.publicAccessEnabled = false;\n\t          delete _this2.dashboard.public_url;\n\t        }).error(function () {\n\t          _this2.dashboard.publicAccessEnabled = true;\n\t          // TODO: show message\n\t        });\n\t      } else {\n\t        $http.post(url).success(function (data) {\n\t          _this2.dashboard.publicAccessEnabled = true;\n\t          _this2.dashboard.public_url = data.public_url;\n\t        }).error(function () {\n\t          _this2.dashboard.publicAccessEnabled = false;\n\t          // TODO: show message\n\t        });\n\t      }\n\t    };\n\t  }]\n\t};\n\n/***/ },\n/* 208 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"container\\\">\\n  <div class=\\\"row bg-white p-t-10 p-b-10 m-b-10\\\">\\n    <div class=\\\"col-sm-9\\\">\\n      <h3>{{$ctrl.dashboard.name}}\\n        <span class=\\\"label label-default\\\" ng-if=\\\"$ctrl.dashboard.is_draft && !$ctrl.dashboard.is_archived\\\">Unpublished</span>\\n        <span class=\\\"label label-warning\\\" ng-if=\\\"$ctrl.dashboard.is_archived\\\" uib-popover=\\\"This dashboard is archived and and won't appear in the dashboards list or search results.\\\" popover-placement=\\\"right\\\" popover-trigger=\\\"'mouseenter'\\\">Archived</span>\\n      </h3>\\n    </div>\\n    <div class=\\\"col-sm-3 text-right\\\">\\n      <h3>\\n        <span ng-if=\\\"!$ctrl.dashboard.is_archived && !public\\\" class=\\\"hidden-print\\\">\\n            <div class=\\\"btn-group\\\" uib-dropdown>\\n              <button id=\\\"split-button\\\" type=\\\"button\\\"\\n                      ng-class=\\\"{'btn-default': $ctrl.refreshRate === null,'btn-primary':$ctrl.refreshRate !== null}\\\"\\n                      class=\\\"btn\\\" ng-click=\\\"$ctrl.loadDashboard(true)\\\">\\n                <i class=\\\"zmdi zmdi-refresh\\\"></i> {{$ctrl.refreshRate === null ? 'Refresh' : $ctrl.refreshRate.name}}\\n              </button>\\n              <button type=\\\"button\\\" class=\\\"btn\\\" uib-dropdown-toggle\\n                      ng-class=\\\"{'btn-default': $ctrl.refreshRate === null,'btn-primary':$ctrl.refreshRate !== null}\\\">\\n                <span class=\\\"caret\\\"></span>\\n                <span class=\\\"sr-only\\\">Split button!</span>\\n              </button>\\n              <ul class=\\\"dropdown-menu\\\" ng-model=\\\"$ctrl.refreshRate\\\" uib-dropdown-menu role=\\\"menu\\\" aria-labelledby=\\\"split-button\\\">\\n                <li role=\\\"menuitem\\\" ng-repeat=\\\"refreshRate in $ctrl.refreshRates\\\">\\n                  <a href=\\\"#\\\" ng-click=\\\"$ctrl.setRefreshRate(refreshRate)\\\">{{refreshRate.name}}</a>\\n                </li>\\n                <li role=\\\"menuitem\\\" ng-if=\\\"$ctrl.refreshRate !== null\\\">\\n                  <a href=\\\"#\\\" ng-click=\\\"$ctrl.setRefreshRate(null)\\\">Stop auto refresh</a>\\n                </li>\\n              </ul>\\n            </div>\\n            <button type=\\\"button\\\" class=\\\"btn btn-sm\\\" ng-class=\\\"{'btn-default': !$ctrl.isFullscreen, 'btn-primary': $ctrl.isFullscreen}\\\" tooltip=\\\"Enable/Disable Fullscreen display\\\" ng-click=\\\"$ctrl.toggleFullscreen()\\\">\\n              <span class=\\\"zmdi zmdi-fullscreen\\\"></span>\\n            </button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-sm\\\" ng-class=\\\"{'btn-default': !$ctrl.dashboard.publicAccessEnabled, 'btn-primary': $ctrl.dashboard.publicAccessEnabled}\\\" tooltip=\\\"Enable/Disable Share URL\\\" ng-click=\\\"$ctrl.openShareForm()\\\" ng-if=\\\"$ctrl.dashboard.canEdit() || $ctrl.dashboard.publicAccessEnabled\\\">\\n              <span class=\\\"zmdi zmdi-share\\\"></span>\\n            </button>\\n        </span>\\n            <div class=\\\"btn-group hidden-print\\\" role=\\\"group\\\" ng-show=\\\"$ctrl.dashboard.canEdit()\\\" uib-dropdown ng-if=\\\"!$ctrl.dashboard.is_archived\\\">\\n              <button class=\\\"btn btn-default btn-sm dropdown-toggle\\\" uib-dropdown-toggle>\\n                <span class=\\\"zmdi zmdi-more\\\"></span>\\n              </button>\\n              <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.editDashboard()\\\">Edit Dashboard</a></li>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.addWidget()\\\">Add Widget</a></li>\\n                <li ng-if=\\\"$ctrl.showPermissionsControl\\\"><a ng-click=\\\"$ctrl.showManagePermissionsModal()\\\">Manage Permissions</a></li>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_draft\\\"><a ng-click=\\\"$ctrl.togglePublished()\\\">Unpublish Dashboard</a></li>\\n                <li ng-if=\\\"$ctrl.dashboard.is_draft\\\"><a ng-click=\\\"$ctrl.togglePublished()\\\">Publish Dashboard</a></li>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.archiveDashboard()\\\">Archive Dashboard</a></li>\\n              </ul>\\n            </div>\\n      </h3>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <parameters parameters=\\\"$ctrl.globalParameters\\\" on-change=\\\"$ctrl.onGlobalParametersChange()\\\"></parameters>\\n  </div>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <filters ng-if=\\\"$ctrl.dashboard.dashboard_filters_enabled\\\" filters=\\\"$ctrl.filters\\\" on-change=\\\"$ctrl.filtersOnChange(filter, $modal)\\\"></filters>\\n  </div>\\n\\n  <div ng-repeat=\\\"row in $ctrl.dashboard.widgets\\\" class=\\\"row\\\">\\n    <dashboard-widget ng-repeat=\\\"widget in row\\\" widget=\\\"widget\\\" dashboard=\\\"$ctrl.dashboard\\\" on-delete=\\\"$ctrl.extractGlobalParameters()\\\"></dashboard-widget>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 209 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span>\\n  </button>\\n  <h4 class=\\\"modal-title\\\"><i class=\\\"fa fa-share-alt\\\"></i> Share</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div class=\\\"checkbox\\\">\\n    <label>\\n      <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.dashboard.publicAccessEnabled\\\" ng-click=\\\"$ctrl.toggleSharing()\\\" ng-disabled=\\\"!$ctrl.dashboard.canEdit()\\\">\\n      Allow public access (using a secret URL).\\n    </label>\\n  </div>\\n\\n  <div ng-if=\\\"$ctrl.dashboard.publicAccessEnabled\\\">\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" value=\\\"{{$ctrl.dashboard.public_url}}\\\">\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 210 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tDashboardListCtrl.$inject = [\"Dashboard\", \"$location\", \"clientConfig\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('pageDashboardList', {\n\t    template: _dashboardList2.default,\n\t    controller: DashboardListCtrl\n\t  });\n\t\n\t  var route = {\n\t    template: '<page-dashboard-list></page-dashboard-list>',\n\t    reloadOnSearch: false,\n\t    title: 'Dashboards'\n\t  };\n\t\n\t  return {\n\t    '/dashboards': route\n\t  };\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _utils = __webpack_require__(188);\n\t\n\tvar _dashboardList = __webpack_require__(211);\n\t\n\tvar _dashboardList2 = _interopRequireDefault(_dashboardList);\n\t\n\t__webpack_require__(212);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction DashboardListCtrl(Dashboard, $location, clientConfig) {\n\t  var _this = this;\n\t\n\t  var TAGS_REGEX = /(^[\\w\\s]+):|(#[\\w-]+)/ig;\n\t\n\t  this.logoUrl = clientConfig.logoUrl;\n\t  var page = parseInt($location.search().page || 1, 10);\n\t\n\t  this.defaultOptions = {};\n\t  this.dashboards = Dashboard.query({}); // shared promise\n\t\n\t  this.selectedTags = []; // in scope because it needs to be accessed inside a table refresh\n\t  this.searchText = '';\n\t\n\t  this.tagIsSelected = function (tag) {\n\t    return _this.selectedTags.indexOf(tag) > -1;\n\t  };\n\t\n\t  this.toggleTag = function ($event, tag) {\n\t    if (_this.tagIsSelected(tag)) {\n\t      if ($event.shiftKey) {\n\t        _this.selectedTags = _this.selectedTags.filter(function (e) {\n\t          return e !== tag;\n\t        });\n\t      } else {\n\t        _this.selectedTags = [];\n\t      }\n\t    } else if ($event.shiftKey) {\n\t      _this.selectedTags.push(tag);\n\t    } else {\n\t      _this.selectedTags = [tag];\n\t    }\n\t\n\t    _this.update();\n\t  };\n\t\n\t  this.allTags = [];\n\t  this.dashboards.$promise.then(function (data) {\n\t    var out = data.map(function (dashboard) {\n\t      return dashboard.name.match(TAGS_REGEX);\n\t    });\n\t    _this.allTags = _underscore2.default.unique(_underscore2.default.flatten(out)).filter(function (e) {\n\t      return e;\n\t    }).map(function (tag) {\n\t      return tag.replace(/:$/, '');\n\t    });\n\t    _this.allTags.sort();\n\t  });\n\t\n\t  this.paginator = new _utils.Paginator([], { page: page });\n\t\n\t  this.update = function () {\n\t    _this.dashboards.$promise.then(function (data) {\n\t      var filteredDashboards = data.map(function (dashboard) {\n\t        dashboard.tags = (dashboard.name.match(TAGS_REGEX) || []).map(function (tag) {\n\t          return tag.replace(/:$/, '');\n\t        });\n\t        dashboard.untagged_name = dashboard.name.replace(TAGS_REGEX, '').trim();\n\t        return dashboard;\n\t      }).filter(function (value) {\n\t        if (_this.selectedTags.length) {\n\t          var valueTags = new Set(value.tags);\n\t          var tagMatch = _this.selectedTags;\n\t          var filteredMatch = tagMatch.filter(function (x) {\n\t            return valueTags.has(x);\n\t          });\n\t          if (tagMatch.length !== filteredMatch.length) {\n\t            return false;\n\t          }\n\t        }\n\t        if (_this.searchText && _this.searchText.length) {\n\t          if (!value.untagged_name.toLowerCase().includes(_this.searchText.toLowerCase())) {\n\t            return false;\n\t          }\n\t        }\n\t        return true;\n\t      });\n\t\n\t      _this.paginator.updateRows(filteredDashboards, data.count);\n\t    });\n\t  };\n\t\n\t  this.update();\n\t}\n\n/***/ },\n/* 211 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class='container row'>\\n  <page-header title=\\\"Dashboards\\\"></page-header>\\n  <div class=\\\"col-lg-3\\\">\\n    <input type='text' class='form-control' placeholder=\\\"Search Dashboards...\\\" \\n      ng-change=\\\"$ctrl.update()\\\" ng-model=\\\"$ctrl.searchText\\\"/>\\n    <div class='list-group m-t-20 tags-list'>\\n      <a ng-repeat='tag in $ctrl.allTags' ng-class='{\\\"active\\\": $ctrl.tagIsSelected(tag)}'\\n      class='list-group-item' ng-click='$ctrl.toggleTag($event, tag)'>\\n        {{ tag }}\\n      </a>\\n    </div>\\n  </div>\\n  <div class=\\\"col-lg-9\\\">\\n    <div class=\\\"bg-white\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n        <tr>\\n          <th>Name</th>\\n          <th>Created At</th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"dashboard in $ctrl.paginator.getPageRows()\\\">\\n          <td>\\n            <a href=\\\"dashboard/{{ dashboard.slug }}\\\">\\n              <span class=\\\"label label-primary m-2\\\" ng-bind=\\\"tag\\\" ng-repeat=\\\"tag in dashboard.tags\\\"></span> {{ dashboard.untagged_name }}\\n              <span class=\\\"label label-default\\\" ng-if=\\\"dashboard.is_draft\\\">Unpublished</span>\\n            </a>\\n          </td>\\n          <td>{{ dashboard.created_at | dateTime }}</td>\\n        </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.paginator\\\"></paginator>\\n    </div>\\n  </div>\\n</div>\"\n\n/***/ },\n/* 212 */\n1,\n/* 213 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tDashboardWidgetCtrl.$inject = [\"$location\", \"$uibModal\", \"$window\", \"Events\", \"currentUser\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('editTextBox', EditTextBoxComponent);\n\t  ngModule.component('dashboardWidget', {\n\t    template: _widget2.default,\n\t    controller: DashboardWidgetCtrl,\n\t    bindings: {\n\t      widget: '<',\n\t      public: '<',\n\t      dashboard: '<',\n\t      deleted: '&onDelete'\n\t    }\n\t  });\n\t};\n\t\n\tvar _widget = __webpack_require__(214);\n\t\n\tvar _widget2 = _interopRequireDefault(_widget);\n\t\n\tvar _editTextBox = __webpack_require__(215);\n\t\n\tvar _editTextBox2 = _interopRequireDefault(_editTextBox);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar EditTextBoxComponent = {\n\t  template: _editTextBox2.default,\n\t  bindings: {\n\t    resolve: '<',\n\t    close: '&',\n\t    dismiss: '&'\n\t  },\n\t  controller: [\"toastr\", function controller(toastr) {\n\t    'ngInject';\n\t\n\t    var _this = this;\n\t\n\t    this.saveInProgress = false;\n\t    this.widget = this.resolve.widget;\n\t    this.saveWidget = function () {\n\t      _this.saveInProgress = true;\n\t      _this.widget.$save().then(function () {\n\t        _this.close();\n\t      }).catch(function () {\n\t        toastr.error('Widget can not be updated');\n\t      }).finally(function () {\n\t        _this.saveInProgress = false;\n\t      });\n\t    };\n\t  }]\n\t};\n\t\n\tfunction DashboardWidgetCtrl($location, $uibModal, $window, Events, currentUser) {\n\t  var _this2 = this;\n\t\n\t  this.canViewQuery = currentUser.hasPermission('view_query');\n\t\n\t  this.editTextBox = function () {\n\t    $uibModal.open({\n\t      component: 'editTextBox',\n\t      resolve: {\n\t        widget: _this2.widget\n\t      }\n\t    });\n\t  };\n\t\n\t  this.localParametersDefs = function () {\n\t    if (!_this2.localParameters) {\n\t      _this2.localParameters = _this2.widget.query.getParametersDefs().filter(function (p) {\n\t        return !p.global;\n\t      });\n\t    }\n\t    return _this2.localParameters;\n\t  };\n\t\n\t  this.deleteWidget = function () {\n\t    if (!$window.confirm('Are you sure you want to remove \"' + _this2.widget.getName() + '\" from the dashboard?')) {\n\t      return;\n\t    }\n\t\n\t    Events.record('delete', 'widget', _this2.widget.id);\n\t\n\t    _this2.widget.$delete(function (response) {\n\t      _this2.dashboard.widgets = _this2.dashboard.widgets.map(function (row) {\n\t        return row.filter(function (widget) {\n\t          return widget.id !== undefined;\n\t        });\n\t      });\n\t\n\t      _this2.dashboard.widgets = _this2.dashboard.widgets.filter(function (row) {\n\t        return row.length > 0;\n\t      });\n\t\n\t      _this2.dashboard.layout = response.layout;\n\t      _this2.dashboard.version = response.version;\n\t\n\t      if (_this2.deleted) {\n\t        _this2.deleted({});\n\t      }\n\t    });\n\t  };\n\t\n\t  Events.record('view', 'widget', this.widget.id);\n\t\n\t  this.reload = function (force) {\n\t    var maxAge = $location.search().maxAge;\n\t    if (force) {\n\t      maxAge = 0;\n\t    }\n\t    _this2.queryResult = _this2.query.getQueryResult(maxAge);\n\t  };\n\t\n\t  if (this.widget.visualization) {\n\t    Events.record('view', 'query', this.widget.visualization.query.id);\n\t    Events.record('view', 'visualization', this.widget.visualization.id);\n\t\n\t    this.query = this.widget.getQuery();\n\t    this.reload(false);\n\t\n\t    this.type = 'visualization';\n\t  } else if (this.widget.restricted) {\n\t    this.type = 'restricted';\n\t  } else {\n\t    this.type = 'textbox';\n\t  }\n\t}\n\n/***/ },\n/* 214 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"col-lg-{{$ctrl.widget.width | colWidth}}\\\">\\n    <div class=\\\"tile\\\" ng-if=\\\"$ctrl.type=='visualization'\\\">\\n        <div class=\\\"t-header widget\\\">\\n            <div class=\\\"th-title\\\">\\n                <p class=\\\"hidden-print\\\">\\n                    <span ng-hide=\\\"$ctrl.canViewQuery\\\">{{$ctrl.query.name}}</span>\\n                    <query-link query=\\\"$ctrl.query\\\" visualization=\\\"$ctrl.widget.visualization\\\" ng-show=\\\"$ctrl.canViewQuery\\\"></query-link>\\n                    <small><visualization-name visualization=\\\"$ctrl.widget.visualization\\\"/></small>\\n                </p>\\n                <p class=\\\"visible-print\\\">\\n                  {{$ctrl.query.name}}\\n                  <visualization-name visualization=\\\"$ctrl.widget.visualization\\\"/>\\n                </p>\\n                <div class=\\\"text-muted\\\" ng-bind-html=\\\"$ctrl.query.description | markdown\\\"></div>\\n            </div>\\n          <div class=\\\"actions dropdown\\\" uib-dropdown ng-if=\\\"!$ctrl.public\\\">\\n            <a data-toggle=\\\"dropdown\\\" uib-dropdown-toggle><i class=\\\"zmdi zmdi-more\\\"></i></a>\\n\\n            <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu style=\\\"z-index:1000000\\\">\\n              <li ng-class=\\\"{'disabled': $ctrl.queryResult.isEmpty()}\\\"><a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'csv')}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'csv')}}\\\" target=\\\"_self\\\">Download as CSV File</a></li>\\n              <li ng-class=\\\"{'disabled': $ctrl.queryResult.isEmpty()}\\\"><a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'xlsx')}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'xlsx')}}\\\" target=\\\"_self\\\">Download as Excel File</a></li>\\n              <li><a ng-href=\\\"queries/{{$ctrl.query.id}}#{{$ctrl.widget.visualization.id}}\\\" ng-show=\\\"$ctrl.canViewQuery\\\">View Query</a></li>\\n              <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.deleteWidget()\\\">Remove From Dashboard</a></li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <parameters parameters=\\\"$ctrl.localParametersDefs()\\\"></parameters>\\n\\n        <div ng-switch=\\\"$ctrl.queryResult.getStatus()\\\">\\n          <div ng-switch-when=\\\"failed\\\">\\n            <div class=\\\"alert alert-danger m-5\\\" ng-show=\\\"$ctrl.queryResult.getError()\\\">Error running query: <strong>{{$ctrl.queryResult.getError()}}</strong></div>\\n          </div>\\n          <div ng-switch-when=\\\"done\\\">\\n              <visualization-renderer visualization=\\\"$ctrl.widget.visualization\\\" query-result=\\\"$ctrl.queryResult\\\" class=\\\"t-body\\\"></visualization-renderer>\\n          </div>\\n          <div ng-switch-default class=\\\"text-center\\\">\\n            <i class=\\\"zmdi zmdi-refresh zmdi-hc-spin zmdi-hc-5x\\\"></i>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"p-5 clearfix\\\" style=\\\"line-height:28px;\\\">\\n            <span class=\\\"small hidden-print\\\">Updated: <span am-time-ago=\\\"$ctrl.queryResult.getUpdatedAt()\\\"></span></span>\\n            <span class=\\\"visible-print\\\">\\n              Updated: {{$ctrl.queryResult.getUpdatedAt() | dateTime}}\\n            </span>\\n            <button class=\\\"btn btn-sm btn-default pull-right hidden-print\\\" ng-click=\\\"$ctrl.reload(true)\\\" ng-if=\\\"!$ctrl.public\\\"><i class=\\\"zmdi zmdi-refresh\\\"></i></button>\\n        </div>\\n    </div>\\n\\n  <div class=\\\"tile\\\" ng-if=\\\"$ctrl.type=='restricted'\\\">\\n    <div class=\\\"t-body\\\">\\n      <div class=\\\"text-center\\\">\\n        <h1><span class=\\\"zmdi zmdi-lock\\\"></span></h1>\\n        <p class=\\\"text-muted\\\">\\n          This widget requires access to a data source you don't have access to.\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"tile\\\" ng-hide=\\\"$ctrl.widget.width === 0\\\" ng-if=\\\"$ctrl.type=='textbox'\\\">\\n    <div class=\\\"t-body\\\">\\n      <div class=\\\"dropdown\\\" uib-dropdown ng-if=\\\"!$ctrl.public && $ctrl.dashboard.canEdit()\\\">\\n        <div class=\\\"dropdown-header\\\">\\n          <a data-toggle=\\\"dropdown\\\" uib-dropdown-toggle class=\\\"actions\\\"><i class=\\\"zmdi zmdi-more\\\"></i></a>\\n        </div>\\n\\n        <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu style=\\\"z-index:1000000\\\">\\n          <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.editTextBox()\\\">Edit</a></li>\\n          <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.deleteWidget()\\\">Remove From Dashboard</a></li>\\n        </ul>\\n      </div>\\n      <p ng-bind-html=\\\"$ctrl.widget.text | markdown\\\" class=\\\"p-5\\\"></p>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 215 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n  <h4 class=\\\"modal-title\\\">Edit TextBox</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div class=\\\"form-group\\\">\\n    <textarea class=\\\"form-control\\\" ng-model=\\\"$ctrl.widget.text\\\" rows=\\\"3\\\"></textarea>\\n  </div>\\n  <div ng-show=\\\"$ctrl.widget.text\\\">\\n    <strong>Preview:</strong>\\n    <p ng-bind-html=\\\"$ctrl.widget.text | markdown\\\"></p>\\n  </div>\\n</div>\\n\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.close()\\\">Close</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.saveWidget()\\\">Save</button>\\n</div>\\n\"\n\n/***/ },\n/* 216 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('addWidgetDialog', AddWidgetDialog);\n\t};\n\t\n\tvar _addWidgetDialog = __webpack_require__(217);\n\t\n\tvar _addWidgetDialog2 = _interopRequireDefault(_addWidgetDialog);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar AddWidgetDialog = {\n\t  template: _addWidgetDialog2.default,\n\t  bindings: {\n\t    resolve: '<',\n\t    close: '&',\n\t    dismiss: '&'\n\t  },\n\t  controller: [\"$sce\", \"toastr\", \"Query\", \"Widget\", function controller($sce, toastr, Query, Widget) {\n\t    'ngInject';\n\t\n\t    var _this = this;\n\t\n\t    this.dashboard = this.resolve.dashboard;\n\t    this.saveInProgress = false;\n\t    this.widgetSize = 1;\n\t    this.selectedVis = null;\n\t    this.query = {};\n\t    this.selected_query = undefined;\n\t    this.text = '';\n\t    this.widgetSizes = [{\n\t      name: 'Regular',\n\t      value: 1\n\t    }, {\n\t      name: 'Double',\n\t      value: 2\n\t    }];\n\t\n\t    this.type = 'visualization';\n\t\n\t    this.trustAsHtml = function (html) {\n\t      return $sce.trustAsHtml(html);\n\t    };\n\t    this.isVisualization = function () {\n\t      return _this.type === 'visualization';\n\t    };\n\t    this.isTextBox = function () {\n\t      return _this.type === 'textbox';\n\t    };\n\t\n\t    this.setType = function (type) {\n\t      _this.type = type;\n\t      if (type === 'textbox') {\n\t        _this.widgetSizes.push({ name: 'Hidden', value: 0 });\n\t      } else if (_this.widgetSizes.length > 2) {\n\t        _this.widgetSizes.pop();\n\t      }\n\t    };\n\t\n\t    this.onQuerySelect = function () {\n\t      if (!_this.query.selected) {\n\t        return;\n\t      }\n\t\n\t      Query.get({ id: _this.query.selected.id }, function (query) {\n\t        if (query) {\n\t          _this.selected_query = query;\n\t          if (query.visualizations.length) {\n\t            _this.selectedVis = query.visualizations[0];\n\t          }\n\t        }\n\t      });\n\t    };\n\t\n\t    this.searchQueries = function (term) {\n\t      if (!term || term.length < 3) {\n\t        return;\n\t      }\n\t\n\t      Query.search({ q: term }, function (results) {\n\t        _this.queries = results;\n\t      });\n\t    };\n\t\n\t    this.saveWidget = function () {\n\t      _this.saveInProgress = true;\n\t      var widget = new Widget({\n\t        visualization_id: _this.selectedVis && _this.selectedVis.id,\n\t        dashboard_id: _this.dashboard.id,\n\t        options: {},\n\t        width: _this.widgetSize,\n\t        text: _this.text\n\t      });\n\t\n\t      widget.$save().then(function (response) {\n\t        // update dashboard layout\n\t        _this.dashboard.layout = response.layout;\n\t        _this.dashboard.version = response.version;\n\t        var newWidget = new Widget(response.widget);\n\t        if (response.new_row) {\n\t          _this.dashboard.widgets.push([newWidget]);\n\t        } else {\n\t          _this.dashboard.widgets[_this.dashboard.widgets.length - 1].push(newWidget);\n\t        }\n\t        _this.close();\n\t      }).catch(function () {\n\t        toastr.error('Widget can not be added');\n\t      }).finally(function () {\n\t        _this.saveInProgress = false;\n\t      });\n\t    };\n\t  }]\n\t};\n\n/***/ },\n/* 217 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" aria-hidden=\\\"true\\\" ng-click=\\\"$ctrl.dismiss()\\\">&times;</button>\\n  <h4 class=\\\"modal-title\\\">Add Widget</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <p class=\\\"btn-group\\\">\\n      <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-class=\\\"{active: $ctrl.isVisualization()}\\\" ng-click=\\\"$ctrl.setType('visualization')\\\">Visualization</button>\\n      <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-class=\\\"{active: $ctrl.isTextBox()}\\\" ng-click=\\\"$ctrl.setType('textbox')\\\">Text Box</button>\\n  </p>\\n\\n  <div ng-show=\\\"$ctrl.isTextBox()\\\">\\n      <div class=\\\"form-group\\\">\\n          <textarea class=\\\"form-control\\\" ng-model=\\\"$ctrl.text\\\" rows=\\\"3\\\"></textarea>\\n      </div>\\n      <div ng-show=\\\"$ctrl.text\\\">\\n          <strong>Preview:</strong>\\n          <p ng-bind-html=\\\"$ctrl.text | markdown\\\"></p>\\n      </div>\\n  </div>\\n\\n  <div ng-show=\\\"$ctrl.isVisualization()\\\">\\n      <div class=\\\"form-group\\\">\\n          <ui-select ng-model=\\\"$ctrl.query.selected\\\" theme=\\\"bootstrap\\\" reset-search-input=\\\"false\\\" on-select=\\\"$ctrl.onQuerySelect($item, $model)\\\">\\n              <ui-select-match placeholder=\\\"Search a query by name\\\">{{$select.selected.name}}</ui-select-match>\\n              <ui-select-choices repeat=\\\"q in $ctrl.queries\\\"\\n                                 refresh=\\\"$ctrl.searchQueries($select.search)\\\"\\n                                 refresh-delay=\\\"0\\\">\\n                  <div ng-bind-html=\\\"$ctrl.trustAsHtml(q.name | highlight: $select.search)\\\"></div>\\n              </ui-select-choices>\\n          </ui-select>\\n      </div>\\n\\n      <div ng-show=\\\"$ctrl.selected_query\\\">\\n          <div class=\\\"form-group\\\">\\n              <label for=\\\"\\\">Choose Visualization</label>\\n              <select ng-model=\\\"$ctrl.selectedVis\\\" ng-options=\\\"vis as vis.name group by vis.type for vis in $ctrl.selected_query.visualizations\\\" class=\\\"form-control\\\"></select>\\n          </div>\\n      </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n      <label for=\\\"\\\">Widget Size</label>\\n      <select class=\\\"form-control\\\" ng-model=\\\"$ctrl.widgetSize\\\"\\n              ng-options=\\\"c.value as c.name for c in $ctrl.widgetSizes\\\"></select>\\n  </div>\\n</div>\\n\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.dismiss()\\\">Close</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress || !($ctrl.selectedVis || $ctrl.isTextBox())\\\" ng-click=\\\"$ctrl.saveWidget()\\\">Add to Dashboard</button>\\n</div>\\n\"\n\n/***/ },\n/* 218 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('editDashboardDialog', EditDashboardDialog);\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _editDashboardDialog = __webpack_require__(219);\n\t\n\tvar _editDashboardDialog2 = _interopRequireDefault(_editDashboardDialog);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar EditDashboardDialog = {\n\t  bindings: {\n\t    resolve: '<',\n\t    close: '&',\n\t    dismiss: '&'\n\t  },\n\t  template: _editDashboardDialog2.default,\n\t  controller: [\"$rootScope\", \"$location\", \"$http\", \"toastr\", \"Events\", \"Dashboard\", function controller($rootScope, $location, $http, toastr, Events, Dashboard) {\n\t    'ngInject';\n\t\n\t    var _this = this;\n\t\n\t    this.dashboard = this.resolve.dashboard;\n\t    this.gridsterOptions = {\n\t      margins: [5, 5],\n\t      rowHeight: 100,\n\t      colWidth: 260,\n\t      columns: 2,\n\t      mobileModeEnabled: false,\n\t      swapping: true,\n\t      minRows: 1,\n\t      draggable: {\n\t        enabled: true\n\t      },\n\t      resizable: {\n\t        enabled: false\n\t      }\n\t    };\n\t\n\t    this.items = [];\n\t\n\t    if (this.dashboard.widgets) {\n\t      this.dashboard.widgets.forEach(function (row, rowIndex) {\n\t        row.forEach(function (widget, colIndex) {\n\t          _this.items.push({\n\t            id: widget.id,\n\t            col: colIndex,\n\t            row: rowIndex,\n\t            sizeY: 1,\n\t            sizeX: widget.width,\n\t            name: widget.getName() });\n\t        });\n\t      });\n\t    }\n\t\n\t    this.saveDashboard = function () {\n\t      _this.saveInProgress = true;\n\t\n\t      if (_this.dashboard.id) {\n\t        var layout = [];\n\t        var sortedItems = (0, _underscore.sortBy)(_this.items, function (item) {\n\t          return item.row * 10 + item.col;\n\t        });\n\t\n\t        sortedItems.forEach(function (item) {\n\t          layout[item.row] = layout[item.row] || [];\n\t          if (item.col > 0 && layout[item.row][item.col - 1] === undefined) {\n\t            layout[item.row][item.col - 1] = item.id;\n\t          } else {\n\t            layout[item.row][item.col] = item.id;\n\t          }\n\t        });\n\t\n\t        var request = {\n\t          slug: _this.dashboard.id,\n\t          name: _this.dashboard.name,\n\t          version: _this.dashboard.version,\n\t          layout: JSON.stringify(layout)\n\t        };\n\t\n\t        Dashboard.save(request, function (dashboard) {\n\t          _this.dashboard = dashboard;\n\t          _this.saveInProgress = false;\n\t          _this.close({ $value: _this.dashboard });\n\t          $rootScope.$broadcast('reloadDashboards');\n\t        }, function (error) {\n\t          _this.saveInProgress = false;\n\t          if (error.status === 403) {\n\t            toastr.error('Unable to save dashboard: Permission denied.');\n\t          } else if (error.status === 409) {\n\t            toastr.error('It seems like the dashboard has been modified by another user. ' + 'Please copy/backup your changes and reload this page.', { autoDismiss: false });\n\t          }\n\t        });\n\t        Events.record('edit', 'dashboard', _this.dashboard.id);\n\t      } else {\n\t        $http.post('api/dashboards', {\n\t          name: _this.dashboard.name\n\t        }).success(function (response) {\n\t          _this.close();\n\t          $location.path('/dashboard/' + response.slug).replace();\n\t        });\n\t        Events.record('create', 'dashboard');\n\t      }\n\t    };\n\t  }]\n\t};\n\n/***/ },\n/* 219 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" ng-click=\\\"$ctrl.dismiss()\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" aria-hidden=\\\"true\\\">&times;</button>\\n  <h4 class=\\\"modal-title\\\">Edit: {{$ctrl.dashboard.name}}</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <p>\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Dashboard Name\\\" ng-model=\\\"$ctrl.dashboard.name\\\">\\n  </p>\\n\\n  <div gridster=\\\"$ctrl.gridsterOptions\\\" ng-if=\\\"$ctrl.items | notEmpty\\\">\\n    <ul>\\n      <li gridster-item=\\\"item\\\" ng-repeat=\\\"item in $ctrl.items\\\" class=\\\"widget panel panel-default gs-w\\\">\\n        <div class=\\\"heading\\\">{{item.name}}</div>\\n      </li>\\n    </ul>\\n  </div>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.dismiss()\\\">Close</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.saveDashboard()\\\">Save</button>\\n</div>\\n\"\n\n/***/ },\n/* 220 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  loadPublicDashboard.$inject = [\"$http\", \"$route\"];\n\t  session.$inject = [\"$http\", \"$route\", \"Auth\"];\n\t  ngModule.component('publicDashboardPage', PublicDashboardPage);\n\t\n\t  function loadPublicDashboard($http, $route) {\n\t    'ngInject';\n\t\n\t    var token = $route.current.params.token;\n\t    return $http.get('/api/dashboards/public/' + token).then(function (response) {\n\t      return response.data;\n\t    });\n\t  }\n\t\n\t  function session($http, $route, Auth) {\n\t    var token = $route.current.params.token;\n\t    Auth.setApiKey(token);\n\t    return Auth.loadConfig();\n\t  }\n\t\n\t  ngModule.config([\"$routeProvider\", function ($routeProvider) {\n\t    $routeProvider.when('/public/dashboards/:token', {\n\t      template: '<public-dashboard-page dashboard=\"$resolve.dashboard\"></public-dashboard-page>',\n\t      reloadOnSearch: false,\n\t      resolve: {\n\t        dashboard: loadPublicDashboard,\n\t        session: session\n\t      }\n\t    });\n\t  }]);\n\t};\n\t\n\tvar _publicDashboardPage = __webpack_require__(221);\n\t\n\tvar _publicDashboardPage2 = _interopRequireDefault(_publicDashboardPage);\n\t\n\tvar _redash_icon_small = __webpack_require__(222);\n\t\n\tvar _redash_icon_small2 = _interopRequireDefault(_redash_icon_small);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar PublicDashboardPage = {\n\t  template: _publicDashboardPage2.default,\n\t  bindings: {\n\t    dashboard: '<'\n\t  },\n\t  controller: [\"$routeParams\", \"Widget\", function controller($routeParams, Widget) {\n\t    'ngInject';\n\t\n\t    // embed in params == headless\n\t\n\t    this.logoUrl = _redash_icon_small2.default;\n\t    this.headless = $routeParams.embed;\n\t    if (this.headless) {\n\t      document.querySelector('body').classList.add('headless');\n\t    }\n\t    this.public = true;\n\t    this.dashboard.widgets = this.dashboard.widgets.map(function (row) {\n\t      return row.map(function (widget) {\n\t        return new Widget(widget);\n\t      });\n\t    });\n\t  }]\n\t};\n\n/***/ },\n/* 221 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<!-- simple nav bar -->\\n<nav class=\\\"navbar navbar-inverse navbar-fixed-top\\\" role=\\\"navigation\\\" ng-if=\\\"!$ctrl.headless\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"navbar-header\\\">\\n      <a class=\\\"navbar-brand\\\" href=\\\"/\\\" target=\\\"_self\\\"><img ng-src=\\\"{{$ctrl.logoUrl}}\\\"/></a>\\n    </div>\\n  </div>\\n</nav>\\n\\n<div class=\\\"container\\\">\\n  <page-header title=\\\"{{$ctrl.dashboard.name}}\\\">\\n  </page-header>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <filters ng-if=\\\"$ctrl.dashboard.dashboard_filters_enabled\\\"></filters>\\n  </div>\\n\\n    <div ng-repeat=\\\"row in $ctrl.dashboard.widgets\\\" class=\\\"row\\\">\\n      <dashboard-widget ng-repeat=\\\"widget in row\\\" widget=\\\"widget\\\" dashboard=\\\"$ctrl.dashboard\\\" public=\\\"true\\\"></dashboard-widget>\\n    </div>\\n</div>\\n\"\n\n/***/ },\n/* 222 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAABl9pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+NTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MTAwPC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjEwMDwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+MTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOkEzNjMxNjc5RUZGQTExRTRCODg4OThENzNBNThGM0VDPC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOkEzNjMxNjdBRUZGQTExRTRCODg4OThENzNBNThGM0VDPC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOkEzNjMxNjc3RUZGQTExRTRCODg4OThENzNBNThGM0VDPC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOkEzNjMxNjc4RUZGQTExRTRCODg4OThENzNBNThGM0VDPC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8ZGM6c3ViamVjdD4KICAgICAgICAgICAgPHJkZjpTZXEvPgogICAgICAgICA8L2RjOnN1YmplY3Q+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE1OjA1OjEyIDEwOjA1OjU4PC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5QaXhlbG1hdG9yIDMuMy4yPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpLVWDGAAARGUlEQVR4Ae1dCYwcxRX91T3XXt7DYAsbYyfhEAEMOECCgCBEzJmgWML4CFeMYwjYHAkJNkhoOQIOuZB314mcBUUCedfaYCScgAIRCIIgCGESxBFuFtkG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\"\n\n/***/ },\n/* 223 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  var routes = _extends({}, (0, _list2.default)(ngModule), (0, _edit2.default)(ngModule));\n\t  return routes;\n\t};\n\t\n\tvar _list = __webpack_require__(224);\n\t\n\tvar _list2 = _interopRequireDefault(_list);\n\t\n\tvar _edit = __webpack_require__(226);\n\t\n\tvar _edit2 = _interopRequireDefault(_edit);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 224 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tSnippetsCtrl.$inject = [\"$location\", \"currentUser\", \"Events\", \"QuerySnippet\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('snippetsListPage', {\n\t    template: _list2.default,\n\t    controller: SnippetsCtrl\n\t  });\n\t\n\t  return {\n\t    '/query_snippets': {\n\t      template: '<snippets-list-page></snippets-list-page>',\n\t      title: 'Query Snippets'\n\t    }\n\t  };\n\t};\n\t\n\tvar _utils = __webpack_require__(188);\n\t\n\tvar _list = __webpack_require__(225);\n\t\n\tvar _list2 = _interopRequireDefault(_list);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction SnippetsCtrl($location, currentUser, Events, QuerySnippet) {\n\t  var _this = this;\n\t\n\t  Events.record('view', 'page', 'query_snippets');\n\t\n\t  this.snippets = new _utils.Paginator([], { itemsPerPage: 20 });\n\t  QuerySnippet.query(function (snippets) {\n\t    _this.snippets.updateRows(snippets);\n\t  });\n\t}\n\n/***/ },\n/* 225 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<settings-screen>\\n    <div class=\\\"row voffset1\\\">\\n        <div class=\\\"col-md-12\\\">\\n          <p>\\n            <a href=\\\"query_snippets/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Snippet</a>\\n          </p>\\n\\n          <table class=\\\"table table-condensed table-hover\\\">\\n            <thead>\\n              <tr>\\n                <th>Trigger</th>\\n                <th>Description</th>\\n                <th>Snippet</th>\\n                <th>Created By</th>\\n                <th>Updated At</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr ng-repeat=\\\"row in $ctrl.snippets.getPageRows()\\\">\\n                <td>\\n                  <a href=\\\"query_snippets/{{row.id}}\\\">{{row.trigger}}</a>\\n                </td>\\n                <td>\\n                  {{row.description}}\\n                </td>\\n                <td>\\n                  {{row.snippet}}\\n                </td>\\n                <td>\\n                  {{row.user.name}}\\n                </td>\\n                <td>\\n                  <span am-time-ago=\\\"row.created_at\\\"></span>\\n                </td>\\n              </tr>\\n            </tbody>\\n          </table>\\n          <paginator paginator=\\\"$ctrl.snippets\\\"></paginator>\\n        </div>\\n    </div>\\n</settings-screen>\\n\"\n\n/***/ },\n/* 226 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tSnippetCtrl.$inject = [\"$routeParams\", \"$http\", \"$location\", \"toastr\", \"currentUser\", \"Events\", \"QuerySnippet\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('snippetPage', {\n\t    template: _edit2.default,\n\t    controller: SnippetCtrl\n\t  });\n\t\n\t  return {\n\t    '/query_snippets/:snippetId': {\n\t      template: '<snippet-page></snippet-page>',\n\t      title: 'Query Snippets'\n\t    }\n\t  };\n\t};\n\t\n\t__webpack_require__(227);\n\t\n\tvar _edit = __webpack_require__(228);\n\t\n\tvar _edit2 = _interopRequireDefault(_edit);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction SnippetCtrl($routeParams, $http, $location, toastr, currentUser, Events, QuerySnippet) {\n\t  var _this = this;\n\t\n\t  this.snippetId = $routeParams.snippetId;\n\t  Events.record('view', 'query_snippet', this.snippetId);\n\t\n\t  this.editorOptions = {\n\t    mode: 'snippets',\n\t    advanced: {\n\t      behavioursEnabled: true,\n\t      enableSnippets: false,\n\t      autoScrollEditorIntoView: true\n\t    },\n\t    onLoad: function onLoad(editor) {\n\t      editor.$blockScrolling = Infinity;\n\t      editor.getSession().setUseWrapMode(true);\n\t      editor.setShowPrintMargin(false);\n\t    }\n\t  };\n\t\n\t  this.saveChanges = function () {\n\t    _this.snippet.$save(function (snippet) {\n\t      toastr.success('Saved.');\n\t      if (_this.snippetId === 'new') {\n\t        $location.path('/query_snippets/' + snippet.id).replace();\n\t      }\n\t    }, function () {\n\t      toastr.error('Failed saving snippet.');\n\t    });\n\t  };\n\t\n\t  this.delete = function () {\n\t    _this.snippet.$delete(function () {\n\t      $location.path('/query_snippets');\n\t      toastr.sucess('Query snippet deleted.');\n\t    }, function () {\n\t      toastr.error('Failed deleting query snippet.');\n\t    });\n\t  };\n\t\n\t  if (this.snippetId === 'new') {\n\t    this.snippet = new QuerySnippet({ description: '' });\n\t    this.canEdit = true;\n\t  } else {\n\t    this.snippet = QuerySnippet.get({ id: this.snippetId }, function (snippet) {\n\t      _this.canEdit = currentUser.canEdit(snippet);\n\t    });\n\t  }\n\t}\n\n/***/ },\n/* 227 */,\n/* 228 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<settings-screen>\\n  <div class=\\\"\\\">\\n    <form name=\\\"snippetForm\\\" class=\\\"form\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>Trigger</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.snippet.trigger\\\" ng-disabled=\\\"!$ctrl.canEdit\\\" required>\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Description</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.snippet.description\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Snippet</label>\\n        <pre ng-if=\\\"!$ctrl.canEdit\\\">{{$ctrl.snippet.snippet}}</pre>\\n        <div ui-ace=\\\"$ctrl.editorOptions\\\" ng-model=\\\"$ctrl.snippet.snippet\\\" style=\\\"height:300px\\\" ng-if=\\\"$ctrl.canEdit\\\"></div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.canEdit\\\">\\n        <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!snippetForm.$valid\\\" ng-click=\\\"$ctrl.saveChanges()\\\">Save</button>\\n        <button class=\\\"btn btn-danger\\\" ng-if=\\\"$ctrl.snippet.id\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button>\\n      </div>\\n      <small ng-if=\\\"$ctrl.snippet.user\\\">\\n        Created by: {{$ctrl.snippet.user.name}}\\n      </small>\\n    </form>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ },\n/* 229 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t                                 value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t                                 var routes = _extends({}, (0, _list2.default)(ngModule), (0, _new2.default)(ngModule), (0, _show2.default)(ngModule));\n\t                                 return routes;\n\t};\n\t\n\tvar _list = __webpack_require__(230);\n\t\n\tvar _list2 = _interopRequireDefault(_list);\n\t\n\tvar _show = __webpack_require__(232);\n\t\n\tvar _show2 = _interopRequireDefault(_show);\n\t\n\tvar _new = __webpack_require__(234);\n\t\n\tvar _new2 = _interopRequireDefault(_new);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 230 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tUsersCtrl.$inject = [\"currentUser\", \"Events\", \"User\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('usersListPage', {\n\t    controller: UsersCtrl,\n\t    template: _list2.default\n\t  });\n\t\n\t  return {\n\t    '/users': {\n\t      template: '<users-list-page></users-list-page>',\n\t      title: 'Users'\n\t    }\n\t  };\n\t};\n\t\n\tvar _utils = __webpack_require__(188);\n\t\n\tvar _list = __webpack_require__(231);\n\t\n\tvar _list2 = _interopRequireDefault(_list);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction UsersCtrl(currentUser, Events, User) {\n\t  var _this = this;\n\t\n\t  Events.record('view', 'page', 'users');\n\t\n\t  this.currentUser = currentUser;\n\t  this.users = new _utils.Paginator([], { itemsPerPage: 20 });\n\t  User.query(function (users) {\n\t    _this.users.updateRows(users);\n\t  });\n\t}\n\n/***/ },\n/* 231 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <p ng-if=\\\"$ctrl.currentUser.hasPermission('admin')\\\">\\n        <a href=\\\"users/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New User</a>\\n      </p>\\n\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th>Name</th>\\n            <th>Joined</th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n          <tr ng-repeat=\\\"row in $ctrl.users.getPageRows()\\\">\\n            <td>\\n              <img ng-src=\\\"{{row.gravatar_url}}\\\" height=\\\"40px\\\"/> <a href=\\\"users/{{row.id}}\\\">{{row.name}}</a>\\n            </td>\\n            <td>\\n              <span am-time-ago=\\\"row.created_at\\\"></span>\\n            </td>\\n          </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.users\\\"></paginator>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ },\n/* 232 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tUserCtrl.$inject = [\"$scope\", \"$routeParams\", \"$http\", \"$location\", \"toastr\", \"clientConfig\", \"currentUser\", \"Events\", \"User\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.controller('UserCtrl', UserCtrl);\n\t\n\t  return {\n\t    '/users/:userId': {\n\t      template: _show2.default,\n\t      reloadOnSearch: false,\n\t      controller: 'UserCtrl',\n\t      title: 'Users'\n\t    }\n\t  };\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _show = __webpack_require__(233);\n\t\n\tvar _show2 = _interopRequireDefault(_show);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction UserCtrl($scope, $routeParams, $http, $location, toastr, clientConfig, currentUser, Events, User) {\n\t  $scope.userId = $routeParams.userId;\n\t  $scope.currentUser = currentUser;\n\t  $scope.clientConfig = clientConfig;\n\t\n\t  if ($scope.userId === 'me') {\n\t    $scope.userId = currentUser.id;\n\t  }\n\t\n\t  Events.record('view', 'user', $scope.userId);\n\t  $scope.canEdit = currentUser.hasPermission('admin') || currentUser.id === parseInt($scope.userId, 10);\n\t  $scope.showSettings = false;\n\t  $scope.showPasswordSettings = false;\n\t\n\t  $scope.selectTab = function (tab) {\n\t    $scope.selectedTab = tab;\n\t    (0, _underscore.each)($scope.tabs, function (v, k) {\n\t      $scope.tabs[k] = k === tab;\n\t    });\n\t  };\n\t\n\t  $scope.setTab = function (tab) {\n\t    $scope.selectedTab = tab;\n\t    $location.hash(tab);\n\t  };\n\t\n\t  $scope.tabs = {\n\t    profile: false,\n\t    apiKey: false,\n\t    settings: false,\n\t    password: false\n\t  };\n\t\n\t  $scope.selectTab($location.hash() || 'profile');\n\t\n\t  $scope.user = User.get({ id: $scope.userId }, function (user) {\n\t    if (user.auth_type === 'password') {\n\t      $scope.showSettings = $scope.canEdit;\n\t      $scope.showPasswordSettings = $scope.canEdit;\n\t    }\n\t  });\n\t\n\t  $scope.password = {\n\t    current: '',\n\t    new: '',\n\t    newRepeat: ''\n\t  };\n\t\n\t  $scope.savePassword = function (form) {\n\t    if (!form.$valid) {\n\t      return;\n\t    }\n\t\n\t    var data = {\n\t      id: $scope.user.id,\n\t      password: $scope.password.new,\n\t      old_password: $scope.password.current\n\t    };\n\t\n\t    User.save(data, function () {\n\t      toastr.success('Password Saved.');\n\t      $scope.password = {\n\t        current: '',\n\t        new: '',\n\t        newRepeat: ''\n\t      };\n\t    }, function (error) {\n\t      var message = error.data.message || 'Failed saving password.';\n\t      toastr.error(message);\n\t    });\n\t  };\n\t\n\t  $scope.updateUser = function (form) {\n\t    if (!form.$valid) {\n\t      return;\n\t    }\n\t\n\t    var data = {\n\t      id: $scope.user.id,\n\t      name: $scope.user.name,\n\t      email: $scope.user.email\n\t    };\n\t\n\t    User.save(data, function (user) {\n\t      toastr.success('Saved.');\n\t      $scope.user = user;\n\t    }, function (error) {\n\t      var message = error.data.message || 'Failed saving.';\n\t      toastr.error(message);\n\t    });\n\t  };\n\t\n\t  $scope.sendPasswordReset = function () {\n\t    $scope.disablePasswordResetButton = true;\n\t    $http.post('api/users/' + $scope.user.id + '/reset_password').success(function (data) {\n\t      $scope.disablePasswordResetButton = false;\n\t      $scope.passwordResetLink = data.reset_link;\n\t    });\n\t  };\n\t}\n\n/***/ },\n/* 233 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<settings-screen>\\n  <email-settings-warning function=\\\"'invite emails'\\\"></email-settings-warning>\\n\\n  <h3 class=\\\"p-l-5\\\">{{user.name}}</h3>\\n\\n  <ul class=\\\"tab-nav\\\">\\n    <rd-tab tab-id=\\\"profile\\\" name=\\\"Profile\\\" ng-click=\\\"selectTab('profile')\\\"></rd-tab>\\n    <rd-tab tab-id=\\\"apiKey\\\" name=\\\"API Key\\\" ng-click=\\\"selectTab('apiKey')\\\" ng-if=\\\"user.api_key\\\"></rd-tab>\\n    <rd-tab tab-id=\\\"settings\\\" name=\\\"Settings\\\" ng-click=\\\"selectTab('settings')\\\" ng-if=\\\"showSettings\\\"></rd-tab>\\n    <rd-tab tab-id=\\\"password\\\" name=\\\"Password\\\" ng-click=\\\"selectTab('password')\\\" ng-if=\\\"showPasswordSettings\\\"></rd-tab>\\n  </ul>\\n\\n  <div ng-show=\\\"selectedTab == 'profile'\\\" class=\\\"p-10\\\">\\n    <p>\\n      <img ng-src=\\\"{{user.gravatar_url}}\\\"/>\\n    </p>\\n\\n    <p>\\n      <strong>{{user.name}}</strong>\\n    </p>\\n\\n    <p>\\n      {{user.email}}\\n    </p>\\n    <div ng-if=\\\"currentUser.isAdmin\\\">\\n      <hr/>\\n      <div class=\\\"form-group\\\">\\n        <button class=\\\"btn btn-default\\\" ng-click=\\\"sendPasswordReset()\\\" ng-disabled=\\\"disablePasswordResetButton\\\">Send\\n          Password Reset Email\\n        </button>\\n      </div>\\n\\n      <div ng-if=\\\"passwordResetLink\\\" class=\\\"alert alert-success\\\">\\n        <p ng-if=\\\"!clientConfig.mailSettingMissing\\\">\\n          <strong>The user should receive a link to reset his password by email soon.</strong>\\n        </p>\\n        <p ng-if=\\\"clientConfig.mailSettingsMissing\\\">\\n          You don't have mail server configured, please send the following link\\n          to {{user.name}} to reset their password:<br/>\\n          <a ng-href=\\\"passwordResetLink\\\">{{passwordResetLink}}</a>\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n  <div ng-show=\\\"selectedTab == 'apiKey'\\\" class=\\\"p-10\\\">\\n    API Key:\\n    <input type=\\\"text\\\" value=\\\"{{user.api_key}}\\\" size=\\\"44\\\" readonly/>\\n  </div>\\n  <div ng-show=\\\"selectedTab == 'settings'\\\" class=\\\"p-10\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <form class=\\\"form\\\" name=\\\"userSettingsForm\\\" ng-submit=\\\"updateUser(userSettingsForm)\\\" novalidate>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userSettingsForm.name | showError:userSettingsForm )}\\\">\\n          <label class=\\\"control-label\\\">Name</label>\\n          <input name=\\\"name\\\" type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"user.name\\\" required/>\\n          <error-messages input=\\\"userSettingsForm.name\\\" form=\\\"userSettingsForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userSettingsForm.email | showError:userSettingsForm )}\\\">\\n          <label class=\\\"control-label\\\">Email</label>\\n          <input name=\\\"email\\\" type=\\\"email\\\" class=\\\"form-control\\\" ng-model=\\\"user.email\\\" required/>\\n          <error-messages input=\\\"userSettingsForm.email\\\" form=\\\"userSettingsForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <button class=\\\"btn btn-primary\\\">Save</button>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n  <div ng-show=\\\"selectedTab == 'password'\\\" class=\\\"p-10\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <form class=\\\"form\\\" name=\\\"userPasswordForm\\\" ng-submit=\\\"savePassword(userPasswordForm)\\\" novalidate>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userPasswordForm.currentPassword | showError:userPasswordForm )}\\\">\\n          <label class=\\\"control-label\\\">Current Password</label>\\n          <input name=\\\"currentPassword\\\" class=\\\"form-control\\\" type=\\\"password\\\" ng-model=\\\"password.current\\\" required/>\\n          <error-messages input=\\\"userPasswordForm.currentPassword\\\" form=\\\"userPasswordForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userPasswordForm.newPassword | showError:userPasswordForm )}\\\">\\n          <label class=\\\"control-label\\\">New Password</label>\\n          <input name=\\\"newPassword\\\" class=\\\"form-control\\\" type=\\\"password\\\" ng-model=\\\"password.new\\\" ng-minlength=\\\"6\\\"\\n                 required/>\\n          <error-messages input=\\\"userPasswordForm.newPassword\\\" form=\\\"userPasswordForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userPasswordForm.passwordRepeat | showError:userPasswordForm )}\\\">\\n          <label class=\\\"control-label\\\">Repeat New Password</label>\\n          <input name=\\\"passwordRepeat\\\" class=\\\"form-control\\\" type=\\\"password\\\" ng-model=\\\"password.newRepeat\\\"\\n                 compare-to=\\\"password.new\\\"/>\\n          <span class=\\\"help-block error\\\"\\n                ng-if=\\\"userPasswordForm.passwordRepeat.$error.compareTo\\\">Passwords don't match.</span>\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <button class=\\\"btn btn-primary\\\">Save</button>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ },\n/* 234 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tNewUserCtrl.$inject = [\"$scope\", \"$location\", \"toastr\", \"currentUser\", \"Events\", \"User\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.controller('NewUserCtrl', NewUserCtrl);\n\t\n\t  return {\n\t    '/users/new': {\n\t      template: _new2.default,\n\t      controller: 'NewUserCtrl',\n\t      controllerAs: '$ctrl',\n\t      bindToController: 'true'\n\t    }\n\t  };\n\t};\n\t\n\tvar _new = __webpack_require__(235);\n\t\n\tvar _new2 = _interopRequireDefault(_new);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction NewUserCtrl($scope, $location, toastr, currentUser, Events, User) {\n\t  var _this = this;\n\t\n\t  Events.record('view', 'page', 'users/new');\n\t\n\t  $scope.user = new User({});\n\t  $scope.saveUser = function () {\n\t    if (!_this.userForm.$valid) {\n\t      return;\n\t    }\n\t\n\t    $scope.user.$save(function (user) {\n\t      $scope.user = user;\n\t      $scope.user.created = true;\n\t      toastr.success('Saved.');\n\t    }, function (error) {\n\t      var message = error.data.message || 'Failed saving.';\n\t      toastr.error(message);\n\t    });\n\t  };\n\t}\n\n/***/ },\n/* 235 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<settings-screen>\\n  <email-settings-warning function=\\\"'invite emails'\\\"></email-settings-warning>\\n  <form class=\\\"form\\\" name=\\\"$ctrl.userForm\\\" ng-submit=\\\"saveUser()\\\" novalidate>\\n    <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  ($ctrl.userForm.email | showError:$ctrl.userForm )}\\\">\\n      <label class=\\\"control-label\\\">Name</label>\\n      <input type=\\\"text\\\" name=\\\"name\\\" class=\\\"form-control\\\" ng-model=\\\"user.name\\\" ng-disabled=\\\"user.created\\\" required/>\\n\\n      <error-messages input=\\\"$ctrl.userForm.name\\\" form=\\\"$ctrl.userForm\\\"></error-messages>\\n    </div>\\n\\n    <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error': ($ctrl.userForm.email | showError:$ctrl.userForm ) }\\\">\\n      <label class=\\\"control-label\\\">Email</label>\\n      <input name=\\\"email\\\" type=\\\"email\\\" class=\\\"form-control\\\" ng-model=\\\"user.email\\\" ng-disabled=\\\"user.created\\\" required/>\\n\\n      <error-messages input=\\\"$ctrl.userForm.email\\\" form=\\\"$ctrl.userForm\\\"></error-messages>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"!user.created\\\">\\n      <button class=\\\"btn btn-primary\\\">Create</button>\\n    </div>\\n\\n\\n    <div ng-if=\\\"user.created\\\" class=\\\"alert alert-success\\\">\\n      <p>\\n        <strong>The user has been created and should receive an invite email soon.</strong>\\n      </p>\\n      <p>\\n        You can use the following link to invite them yourself:<br/>\\n        {{user.invite_link}}\\n      </p>\\n    </div>\\n  </form>\\n</settings-screen>\\n\"\n\n/***/ },\n/* 236 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  (0, _editGroupDialog2.default)(ngModule);\n\t  (0, _groupName2.default)(ngModule);\n\t\n\t  return _extends({}, (0, _list2.default)(ngModule), (0, _show2.default)(ngModule), (0, _dataSources2.default)(ngModule));\n\t};\n\t\n\tvar _list = __webpack_require__(237);\n\t\n\tvar _list2 = _interopRequireDefault(_list);\n\t\n\tvar _show = __webpack_require__(239);\n\t\n\tvar _show2 = _interopRequireDefault(_show);\n\t\n\tvar _dataSources = __webpack_require__(241);\n\t\n\tvar _dataSources2 = _interopRequireDefault(_dataSources);\n\t\n\tvar _editGroupDialog = __webpack_require__(243);\n\t\n\tvar _editGroupDialog2 = _interopRequireDefault(_editGroupDialog);\n\t\n\tvar _groupName = __webpack_require__(245);\n\t\n\tvar _groupName2 = _interopRequireDefault(_groupName);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 237 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tGroupsCtrl.$inject = [\"$scope\", \"$uibModal\", \"currentUser\", \"Events\", \"Group\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.controller('GroupsCtrl', GroupsCtrl);\n\t\n\t  return {\n\t    '/groups': {\n\t      template: _list2.default,\n\t      controller: 'GroupsCtrl',\n\t      title: 'Groups'\n\t    }\n\t  };\n\t};\n\t\n\tvar _utils = __webpack_require__(188);\n\t\n\tvar _list = __webpack_require__(238);\n\t\n\tvar _list2 = _interopRequireDefault(_list);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction GroupsCtrl($scope, $uibModal, currentUser, Events, Group) {\n\t  Events.record('view', 'page', 'groups');\n\t  $scope.currentUser = currentUser;\n\t  $scope.groups = new _utils.Paginator([], { itemsPerPage: 20 });\n\t  Group.query(function (groups) {\n\t    $scope.groups.updateRows(groups);\n\t  });\n\t\n\t  $scope.newGroup = function () {\n\t    $uibModal.open({\n\t      component: 'editGroupDialog',\n\t      size: 'sm',\n\t      resolve: {\n\t        group: function group() {\n\t          return new Group({});\n\t        }\n\t      }\n\t    });\n\t  };\n\t}\n\n/***/ },\n/* 238 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <p ng-if=\\\"currentUser.hasPermission('admin')\\\">\\n        <a ng-click=\\\"newGroup()\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Group</a>\\n      </p>\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th>Name</th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n          <tr ng-repeat=\\\"row in groups.getPageRows()\\\">\\n            <td>\\n              <a href=\\\"groups/{{row.id}}\\\">{{row.name}}</a>\\n            </td>\\n          </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"groups\\\"></paginator>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ },\n/* 239 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tGroupCtrl.$inject = [\"$scope\", \"$routeParams\", \"$http\", \"currentUser\", \"Events\", \"Group\", \"User\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.controller('GroupCtrl', GroupCtrl);\n\t  return {\n\t    '/groups/:groupId': {\n\t      template: _show2.default,\n\t      controller: 'GroupCtrl'\n\t    }\n\t  };\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _show = __webpack_require__(240);\n\t\n\tvar _show2 = _interopRequireDefault(_show);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction GroupCtrl($scope, $routeParams, $http, currentUser, Events, Group, User) {\n\t  Events.record('view', 'group', $scope.groupId);\n\t\n\t  $scope.currentUser = currentUser;\n\t  $scope.group = Group.get({ id: $routeParams.groupId });\n\t  $scope.members = Group.members({ id: $routeParams.groupId });\n\t  $scope.newMember = {};\n\t\n\t  $scope.findUser = function (search) {\n\t    if (search === '') {\n\t      return;\n\t    }\n\t\n\t    if ($scope.foundUsers === undefined) {\n\t      User.query(function (users) {\n\t        var existingIds = $scope.members.map(function (m) {\n\t          return m.id;\n\t        });\n\t        users.forEach(function (user) {\n\t          user.alreadyMember = (0, _underscore.contains)(existingIds, user.id);\n\t        });\n\t        $scope.foundUsers = users;\n\t      });\n\t    }\n\t  };\n\t\n\t  $scope.addMember = function (user) {\n\t    // Clear selection, to clear up the input control.\n\t    $scope.newMember.selected = undefined;\n\t\n\t    $http.post('api/groups/' + $routeParams.groupId + '/members', { user_id: user.id }).success(function () {\n\t      $scope.members.unshift(user);\n\t      user.alreadyMember = true;\n\t    });\n\t  };\n\t\n\t  $scope.removeMember = function (member) {\n\t    $http.delete('api/groups/' + $routeParams.groupId + '/members/' + member.id).success(function () {\n\t      $scope.members = $scope.members.filter(function (m) {\n\t        return m !== member;\n\t      });\n\t\n\t      if ($scope.foundUsers) {\n\t        $scope.foundUsers.forEach(function (user) {\n\t          if (user.id === member.id) {\n\t            user.alreadyMember = false;\n\t          }\n\t        });\n\t      }\n\t    });\n\t  };\n\t}\n\n/***/ },\n/* 240 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<settings-screen>\\n  <group-name group=\\\"group\\\"></group-name>\\n\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-lg-4\\\">\\n      <ul class=\\\"tab-nav\\\">\\n        <li role=\\\"presentation\\\" class=\\\"active\\\"><a href=\\\"groups/{{group.id}}\\\">Members</a></li>\\n        <li role=\\\"presentation\\\" ng-if=\\\"currentUser.isAdmin\\\"><a href=\\\"groups/{{group.id}}/data_sources\\\">Data Sources</a></li>\\n      </ul>\\n    </div>\\n\\n    <div class=\\\"col-lg-8\\\" ng-if=\\\"currentUser.isAdmin\\\">\\n      <ui-select ng-model=\\\"newMember.selected\\\" on-select=\\\"addMember($item)\\\">\\n        <ui-select-match placeholder=\\\"Add New Member\\\"></ui-select-match>\\n        <ui-select-choices repeat=\\\"user in foundUsers | filter:$select.search\\\"\\n                           refresh=\\\"findUser($select.search)\\\"\\n                           refresh-delay=\\\"0\\\"\\n                           ui-disable-choice=\\\"user.alreadyMember\\\">\\n          <div>\\n            <img ng-src=\\\"{{user.gravatar_url}}\\\" height=\\\"24px\\\">&nbsp;{{user.name}}\\n            <small ng-if=\\\"user.alreadyMember\\\">(already member in this group)</small>\\n          </div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-lg-12\\\">\\n      <table class=\\\"table table-condensed table-hover\\\" ng-show=\\\"members\\\">\\n        <tbody>\\n        <tr ng-repeat=\\\"member in members\\\">\\n          <td width=\\\"50px\\\"><img ng-src=\\\"{{member.gravatar_url}}\\\" height=\\\"40px\\\"/></td>\\n          <td>{{member.name}} <button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"removeMember(member)\\\" ng-if=\\\"currentUser.isAdmin\\\">Remove</button></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n\\n      <div ng-hide=\\\"members.length\\\">\\n        No members.\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ },\n/* 241 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tGroupDataSourcesCtrl.$inject = [\"$scope\", \"$routeParams\", \"$http\", \"Events\", \"Group\", \"DataSource\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.controller('GroupDataSourcesCtrl', GroupDataSourcesCtrl);\n\t\n\t  return {\n\t    '/groups/:groupId/data_sources': {\n\t      template: _dataSources2.default,\n\t      controller: 'GroupDataSourcesCtrl'\n\t    }\n\t  };\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _dataSources = __webpack_require__(242);\n\t\n\tvar _dataSources2 = _interopRequireDefault(_dataSources);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction GroupDataSourcesCtrl($scope, $routeParams, $http, Events, Group, DataSource) {\n\t  Events.record('view', 'group_data_sources', $scope.groupId);\n\t  $scope.group = Group.get({ id: $routeParams.groupId });\n\t  $scope.dataSources = Group.dataSources({ id: $routeParams.groupId });\n\t  $scope.newDataSource = {};\n\t\n\t  $scope.findDataSource = function () {\n\t    if ($scope.foundDataSources === undefined) {\n\t      DataSource.query(function (dataSources) {\n\t        var existingIds = $scope.dataSources.map(function (m) {\n\t          return m.id;\n\t        });\n\t        $scope.foundDataSources = dataSources.filter(function (ds) {\n\t          return !(0, _underscore.contains)(existingIds, ds.id);\n\t        });\n\t      });\n\t    }\n\t  };\n\t\n\t  $scope.addDataSource = function (dataSource) {\n\t    // Clear selection, to clear up the input control.\n\t    $scope.newDataSource.selected = undefined;\n\t\n\t    $http.post('api/groups/' + $routeParams.groupId + '/data_sources', { data_source_id: dataSource.id }).success(function () {\n\t      dataSource.view_only = false;\n\t      $scope.dataSources.unshift(dataSource);\n\t\n\t      if ($scope.foundDataSources) {\n\t        $scope.foundDataSources = $scope.foundDataSources.filter(function (ds) {\n\t          return ds !== dataSource;\n\t        });\n\t      }\n\t    });\n\t  };\n\t\n\t  $scope.changePermission = function (dataSource, viewOnly) {\n\t    $http.post('api/groups/' + $routeParams.groupId + '/data_sources/' + dataSource.id, { view_only: viewOnly }).success(function () {\n\t      dataSource.view_only = viewOnly;\n\t    });\n\t  };\n\t\n\t  $scope.removeDataSource = function (dataSource) {\n\t    $http.delete('api/groups/' + $routeParams.groupId + '/data_sources/' + dataSource.id).success(function () {\n\t      $scope.dataSources = $scope.dataSources.filter(function (ds) {\n\t        return dataSource !== ds;\n\t      });\n\t    });\n\t  };\n\t}\n\n/***/ },\n/* 242 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<settings-screen>\\n  <group-name group=\\\"group\\\"></group-name>\\n\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-lg-4\\\">\\n      <ul class=\\\"tab-nav\\\">\\n        <li role=\\\"presentation\\\"><a href=\\\"groups/{{group.id}}\\\">Members</a></li>\\n        <li role=\\\"presentation\\\" class=\\\"active\\\"><a href=\\\"groups/{{group.id}}/data_sources\\\">Data Sources</a></li>\\n      </ul>\\n    </div>\\n    <div class=\\\"col-lg-8\\\">\\n      <ui-select ng-model=\\\"newDataSource.selected\\\" on-select=\\\"addDataSource($item)\\\">\\n        <ui-select-match placeholder=\\\"Add Data Source\\\"></ui-select-match>\\n        <ui-select-choices repeat=\\\"dataSource in foundDataSources | filter:$select.search\\\"\\n                           refresh=\\\"findDataSource($select.search)\\\"\\n                           refresh-delay=\\\"0\\\">\\n          <div>\\n            {{dataSource.name}}\\n          </div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-lg-12\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"dataSource in dataSources\\\">\\n          <td> {{dataSource.name}}</td>\\n          <td width=\\\"280px\\\" class=\\\"text-right\\\">\\n            <div class=\\\"btn-group\\\" uib-dropdown>\\n              <button type=\\\"button\\\" class=\\\"btn btn-sm btn-default dropdown-toggle\\\" uib-dropdown-toggle ng-if=\\\"dataSource.view_only\\\">\\n                View Only <span class=\\\"caret\\\"></span>\\n              </button>\\n\\n              <button type=\\\"button\\\" class=\\\"btn btn-sm btn-success dropdown-toggle\\\" uib-dropdown-toggle ng-if=\\\"!dataSource.view_only\\\">\\n                Full Access <span class=\\\"caret\\\"></span>\\n              </button>\\n\\n              <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\" uib-dropdown-menu>\\n                <li><a ng-click=\\\"changePermission(dataSource, false)\\\"><small ng-if=\\\"!dataSource.view_only\\\"><span class=\\\"fa fa-check\\\"/></small> Full Access<br/></a></li>\\n                <li><a ng-click=\\\"changePermission(dataSource, true)\\\"><small ng-if=\\\"dataSource.view_only\\\"><span class=\\\"fa fa-check\\\"/></small> View Only</a></li>\\n              </ul>\\n            </div>\\n\\n            <button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"removeDataSource(dataSource)\\\">Remove</button>\\n          </td>\\n        </tr>\\n        </tbody>\\n      </table>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ },\n/* 243 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('editGroupDialog', EditGroupDialogComponent);\n\t};\n\t\n\tvar _editGroupDialog = __webpack_require__(244);\n\t\n\tvar _editGroupDialog2 = _interopRequireDefault(_editGroupDialog);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar EditGroupDialogComponent = {\n\t  template: _editGroupDialog2.default,\n\t  bindings: {\n\t    resolve: '<',\n\t    close: '&',\n\t    dismiss: '&'\n\t  },\n\t  controller: [\"$location\", function controller($location) {\n\t    'ngInject';\n\t\n\t    var _this = this;\n\t\n\t    this.group = this.resolve.group;\n\t    var newGroup = this.group.id === undefined;\n\t\n\t    if (newGroup) {\n\t      this.saveButtonText = 'Create';\n\t      this.title = 'Create a New Group';\n\t    } else {\n\t      this.saveButtonText = 'Save';\n\t      this.title = 'Edit Group';\n\t    }\n\t\n\t    this.ok = function () {\n\t      _this.group.$save(function (group) {\n\t        if (newGroup) {\n\t          $location.path('/groups/' + group.id).replace();\n\t          _this.close();\n\t        } else {\n\t          _this.close();\n\t        }\n\t      });\n\t    };\n\t  }]\n\t};\n\n/***/ },\n/* 244 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"modal-header\\\">\\n    <h3 class=\\\"modal-title\\\">{{$ctrl.title}}</h3>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <form class=\\\"form\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"$ctrl.group.name\\\" placeholder=\\\"Group Name\\\" class=\\\"form-control\\\"/>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <button class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.close()\\\">Cancel</button>\\n    <button class=\\\"btn btn-primary\\\" ng-click=\\\"$ctrl.ok()\\\">{{$ctrl.saveButtonText}}</button>\\n</div>\\n\"\n\n/***/ },\n/* 245 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tcontroller.$inject = [\"$window\", \"$location\", \"toastr\", \"currentUser\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('groupName', {\n\t    bindings: {\n\t      group: '<'\n\t    },\n\t    transclude: true,\n\t    template: '\\n      <h2 class=\"p-l-5\">\\n        <edit-in-place editable=\"$ctrl.canEdit()\" done=\"$ctrl.saveName\" ignore-blanks=\\'true\\' value=\"$ctrl.group.name\"></edit-in-place>&nbsp;\\n        <button class=\"btn btn-xs btn-danger\" ng-if=\"$ctrl.canEdit()\" ng-click=\"$ctrl.deleteGroup()\">Delete this group</button>\\n      </h2>\\n    ',\n\t    replace: true,\n\t    controller: controller\n\t  });\n\t};\n\t\n\tfunction controller($window, $location, toastr, currentUser) {\n\t  var _this = this;\n\t\n\t  this.canEdit = function () {\n\t    return currentUser.isAdmin && _this.group.type !== 'builtin';\n\t  };\n\t\n\t  this.saveName = function () {\n\t    _this.group.$save();\n\t  };\n\t\n\t  this.deleteGroup = function () {\n\t    if ($window.confirm('Are you sure you want to delete this group?')) {\n\t      _this.group.$delete(function () {\n\t        $location.path('/groups').replace();\n\t        toastr.success('Group deleted successfully.');\n\t      });\n\t    }\n\t  };\n\t}\n\n/***/ },\n/* 246 */\n[628, 247, 249],\n/* 247 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tDestinationsCtrl.$inject = [\"$scope\", \"$location\", \"toastr\", \"currentUser\", \"Events\", \"Destination\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.controller('DestinationsCtrl', DestinationsCtrl);\n\t\n\t  return {\n\t    '/destinations': {\n\t      template: _list2.default,\n\t      controller: 'DestinationsCtrl',\n\t      title: 'Destinations'\n\t    }\n\t  };\n\t};\n\t\n\tvar _list = __webpack_require__(248);\n\t\n\tvar _list2 = _interopRequireDefault(_list);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction DestinationsCtrl($scope, $location, toastr, currentUser, Events, Destination) {\n\t  Events.record('view', 'page', 'admin/destinations');\n\t\n\t  $scope.destinations = Destination.query();\n\t}\n\n/***/ },\n/* 248 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-4\\\">\\n      <p>\\n        <a href=\\\"destinations/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Alert Destination</a>\\n      </p>\\n      <div class=\\\"list-group\\\">\\n        <a ng-href=\\\"destinations/{{destination.id}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"destination in destinations\\\"><i class=\\\"fa {{destination.icon}}\\\"></i> {{destination.name}}</a>\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ },\n/* 249 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tDestinationCtrl.$inject = [\"$scope\", \"$routeParams\", \"$http\", \"$location\", \"toastr\", \"currentUser\", \"Events\", \"Destination\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.controller('DestinationCtrl', DestinationCtrl);\n\t\n\t  return {\n\t    '/destinations/:destinationId': {\n\t      template: _show2.default,\n\t      controller: 'DestinationCtrl',\n\t      title: 'Destinations'\n\t    }\n\t  };\n\t};\n\t\n\tvar _debug = __webpack_require__(19);\n\t\n\tvar _debug2 = _interopRequireDefault(_debug);\n\t\n\tvar _show = __webpack_require__(250);\n\t\n\tvar _show2 = _interopRequireDefault(_show);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar logger = (0, _debug2.default)('redash:http');\n\t\n\tfunction DestinationCtrl($scope, $routeParams, $http, $location, toastr, currentUser, Events, Destination) {\n\t  Events.record('view', 'page', 'admin/destination');\n\t\n\t  $scope.destinationId = $routeParams.destinationId;\n\t\n\t  if ($scope.destinationId === 'new') {\n\t    $scope.destination = new Destination({ options: {} });\n\t  } else {\n\t    $scope.destination = Destination.get({ id: $routeParams.destinationId });\n\t  }\n\t\n\t  $scope.$watch('destination.id', function (id) {\n\t    if (id !== $scope.destinationId && id !== undefined) {\n\t      $location.path('/destinations/' + id).replace();\n\t    }\n\t  });\n\t\n\t  $scope.delete = function () {\n\t    Events.record('delete', 'destination', $scope.destination.id);\n\t\n\t    $scope.destination.$delete(function () {\n\t      toastr.success('Destination deleted successfully.');\n\t      $location.path('/destinations/');\n\t    }, function (httpResponse) {\n\t      logger('Failed to delete destination: ', httpResponse.status, httpResponse.statusText, httpResponse.data);\n\t      toastr.error('Failed to delete destination.');\n\t    });\n\t  };\n\t}\n\n/***/ },\n/* 250 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <dynamic-form target=\\\"destination\\\" type=\\\"destinations\\\">\\n        <button class=\\\"btn btn-danger\\\" ng-if=\\\"destination.id\\\" ng-click=\\\"delete()\\\">Delete</button>\\n      </dynamic-form>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ },\n/* 251 */\n[628, 252, 254],\n/* 252 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tDataSourcesCtrl.$inject = [\"$scope\", \"$location\", \"currentUser\", \"Events\", \"DataSource\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.controller('DataSourcesCtrl', DataSourcesCtrl);\n\t\n\t  return {\n\t    '/data_sources': {\n\t      template: _list2.default,\n\t      controller: 'DataSourcesCtrl',\n\t      title: 'Data Sources'\n\t    }\n\t  };\n\t};\n\t\n\tvar _list = __webpack_require__(253);\n\t\n\tvar _list2 = _interopRequireDefault(_list);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction DataSourcesCtrl($scope, $location, currentUser, Events, DataSource) {\n\t  Events.record('view', 'page', 'admin/data_sources');\n\t\n\t  $scope.dataSources = DataSource.query();\n\t}\n\n/***/ },\n/* 253 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-4\\\">\\n      <p>\\n        <a href=\\\"data_sources/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Data Source</a>\\n      </p>\\n      <div class=\\\"list-group\\\">\\n        <a ng-href=\\\"data_sources/{{dataSource.id}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"dataSource in dataSources\\\"><i class=\\\"fa fa-database\\\"></i> {{dataSource.name}}</a>\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ },\n/* 254 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tDataSourceCtrl.$inject = [\"$scope\", \"$routeParams\", \"$http\", \"$location\", \"toastr\", \"currentUser\", \"Events\", \"DataSource\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.controller('DataSourceCtrl', DataSourceCtrl);\n\t\n\t  return {\n\t    '/data_sources/:dataSourceId': {\n\t      template: _show2.default,\n\t      controller: 'DataSourceCtrl',\n\t      title: 'Datasources'\n\t    }\n\t  };\n\t};\n\t\n\tvar _debug = __webpack_require__(19);\n\t\n\tvar _debug2 = _interopRequireDefault(_debug);\n\t\n\tvar _show = __webpack_require__(255);\n\t\n\tvar _show2 = _interopRequireDefault(_show);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar logger = (0, _debug2.default)('redash:http');\n\t\n\tfunction DataSourceCtrl($scope, $routeParams, $http, $location, toastr, currentUser, Events, DataSource) {\n\t  Events.record('view', 'page', 'admin/data_source');\n\t\n\t  $scope.dataSourceId = $routeParams.dataSourceId;\n\t\n\t  if ($scope.dataSourceId === 'new') {\n\t    $scope.dataSource = new DataSource({ options: {} });\n\t  } else {\n\t    $scope.dataSource = DataSource.get({ id: $routeParams.dataSourceId });\n\t  }\n\t\n\t  $scope.$watch('dataSource.id', function (id) {\n\t    if (id !== $scope.dataSourceId && id !== undefined) {\n\t      $location.path('/data_sources/' + id).replace();\n\t    }\n\t  });\n\t\n\t  function deleteDataSource() {\n\t    Events.record('delete', 'datasource', $scope.dataSource.id);\n\t\n\t    $scope.dataSource.$delete(function () {\n\t      toastr.success('Data source deleted successfully.');\n\t      $location.path('/data_sources/');\n\t    }, function (httpResponse) {\n\t      logger('Failed to delete data source: ', httpResponse.status, httpResponse.statusText, httpResponse.data);\n\t      toastr.error('Failed to delete data source.');\n\t    });\n\t  }\n\t\n\t  function testConnection(callback) {\n\t    Events.record('test', 'datasource', $scope.dataSource.id);\n\t\n\t    DataSource.test({ id: $scope.dataSource.id }, function (httpResponse) {\n\t      if (httpResponse.ok) {\n\t        toastr.success('Success');\n\t      } else {\n\t        toastr.error(httpResponse.message, 'Connection Test Failed:', { timeOut: 10000 });\n\t      }\n\t      callback();\n\t    }, function (httpResponse) {\n\t      logger('Failed to test data source: ', httpResponse.status, httpResponse.statusText, httpResponse);\n\t      toastr.error('Unknown error occurred while performing connection test. Please try again later.', 'Connection Test Failed:', { timeOut: 10000 });\n\t      callback();\n\t    });\n\t  }\n\t\n\t  $scope.actions = [{ name: 'Delete', class: 'btn-danger', callback: deleteDataSource }, { name: 'Test Connection', class: 'btn-default', callback: testConnection, disableWhenDirty: true }];\n\t}\n\n/***/ },\n/* 255 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<settings-screen>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-8\\\">\\n      <dynamic-form target=\\\"dataSource\\\" type=\\\"data_sources\\\" actions=\\\"actions\\\">\\n      </dynamic-form>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ },\n/* 256 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  (0, _queryResultsLink2.default)(ngModule);\n\t  (0, _queryEditor2.default)(ngModule);\n\t  (0, _schemaBrowser2.default)(ngModule);\n\t  (0, _embedCodeDialog2.default)(ngModule);\n\t  (0, _scheduleDialog2.default)(ngModule);\n\t  (0, _alertUnsavedChanges2.default)(ngModule);\n\t  (0, _visualizationEmbed2.default)(ngModule);\n\t\n\t  return _extends({}, (0, _queriesSearchResultsPage2.default)(ngModule), (0, _sourceView2.default)(ngModule), (0, _view2.default)(ngModule));\n\t};\n\t\n\tvar _sourceView = __webpack_require__(257);\n\t\n\tvar _sourceView2 = _interopRequireDefault(_sourceView);\n\t\n\tvar _view = __webpack_require__(259);\n\t\n\tvar _view2 = _interopRequireDefault(_view);\n\t\n\tvar _queryResultsLink = __webpack_require__(260);\n\t\n\tvar _queryResultsLink2 = _interopRequireDefault(_queryResultsLink);\n\t\n\tvar _queryEditor = __webpack_require__(261);\n\t\n\tvar _queryEditor2 = _interopRequireDefault(_queryEditor);\n\t\n\tvar _schemaBrowser = __webpack_require__(267);\n\t\n\tvar _schemaBrowser2 = _interopRequireDefault(_schemaBrowser);\n\t\n\tvar _embedCodeDialog = __webpack_require__(269);\n\t\n\tvar _embedCodeDialog2 = _interopRequireDefault(_embedCodeDialog);\n\t\n\tvar _scheduleDialog = __webpack_require__(271);\n\t\n\tvar _scheduleDialog2 = _interopRequireDefault(_scheduleDialog);\n\t\n\tvar _alertUnsavedChanges = __webpack_require__(273);\n\t\n\tvar _alertUnsavedChanges2 = _interopRequireDefault(_alertUnsavedChanges);\n\t\n\tvar _queriesSearchResultsPage = __webpack_require__(274);\n\t\n\tvar _queriesSearchResultsPage2 = _interopRequireDefault(_queriesSearchResultsPage);\n\t\n\tvar _visualizationEmbed = __webpack_require__(276);\n\t\n\tvar _visualizationEmbed2 = _interopRequireDefault(_visualizationEmbed);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 257 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tQuerySourceCtrl.$inject = [\"Events\", \"toastr\", \"$controller\", \"$scope\", \"$location\", \"$http\", \"$q\", \"AlertDialog\", \"currentUser\", \"Query\", \"Visualization\", \"KeyboardShortcuts\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.controller('QuerySourceCtrl', QuerySourceCtrl);\n\t\n\t  return {\n\t    '/queries/new': {\n\t      template: _query2.default,\n\t      controller: 'QuerySourceCtrl',\n\t      reloadOnSearch: false,\n\t      resolve: {\n\t        query: [\"Query\", function newQuery(Query) {\n\t          'ngInject';\n\t\n\t          return Query.newQuery();\n\t        }],\n\t        dataSources: [\"DataSource\", function dataSources(DataSource) {\n\t          'ngInject';\n\t\n\t          return DataSource.query().$promise;\n\t        }]\n\t      }\n\t    },\n\t    '/queries/:queryId/source': {\n\t      template: _query2.default,\n\t      controller: 'QuerySourceCtrl',\n\t      reloadOnSearch: false,\n\t      resolve: {\n\t        query: [\"Query\", \"$route\", function query(Query, $route) {\n\t          'ngInject';\n\t\n\t          return Query.get({ id: $route.current.params.queryId }).$promise;\n\t        }]\n\t      }\n\t    }\n\t  };\n\t};\n\t\n\tvar _query = __webpack_require__(258);\n\t\n\tvar _query2 = _interopRequireDefault(_query);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction QuerySourceCtrl(Events, toastr, $controller, $scope, $location, $http, $q, AlertDialog, currentUser, Query, Visualization, KeyboardShortcuts) {\n\t  // extends QueryViewCtrl\n\t  $controller('QueryViewCtrl', { $scope: $scope });\n\t  // TODO:\n\t  // This doesn't get inherited. Setting it on this didn't work either (which is weird).\n\t  // Obviously it shouldn't be repeated, but we got bigger fish to fry.\n\t  var DEFAULT_TAB = 'table';\n\t\n\t  Events.record('view_source', 'query', $scope.query.id);\n\t\n\t  var isNewQuery = !$scope.query.id;\n\t  var queryText = $scope.query.query;\n\t  var saveQuery = $scope.saveQuery;\n\t\n\t  $scope.sourceMode = true;\n\t  $scope.canEdit = currentUser.canEdit($scope.query) || $scope.query.can_edit;\n\t  $scope.isDirty = false;\n\t  $scope.base_url = $location.protocol() + '://' + $location.host() + ':' + $location.port();\n\t\n\t  $scope.newVisualization = undefined;\n\t\n\t  // @override\n\t  Object.defineProperty($scope, 'showDataset', {\n\t    get: function get() {\n\t      return $scope.queryResult && $scope.queryResult.getStatus() === 'done';\n\t    }\n\t  });\n\t\n\t  var shortcuts = {\n\t    'mod+s': function save() {\n\t      if ($scope.canEdit) {\n\t        $scope.saveQuery();\n\t      }\n\t    }\n\t  };\n\t\n\t  KeyboardShortcuts.bind(shortcuts);\n\t\n\t  $scope.$on('$destroy', function () {\n\t    KeyboardShortcuts.unbind(shortcuts);\n\t  });\n\t\n\t  // @override\n\t  $scope.saveQuery = function (options, data) {\n\t    var savePromise = saveQuery(options, data);\n\t\n\t    savePromise.then(function (savedQuery) {\n\t      queryText = savedQuery.query;\n\t      $scope.isDirty = $scope.query.query !== queryText;\n\t      // update to latest version number\n\t      $scope.query.version = savedQuery.version;\n\t\n\t      if (isNewQuery) {\n\t        // redirect to new created query (keep hash)\n\t        $location.path(savedQuery.getSourceLink());\n\t      }\n\t    });\n\t\n\t    return savePromise;\n\t  };\n\t\n\t  $scope.formatQuery = function () {\n\t    Query.format($scope.dataSource.syntax, $scope.query.query).then(function (query) {\n\t      $scope.query.query = query;\n\t    }).catch(function (error) {\n\t      return toastr.error(error);\n\t    });\n\t  };\n\t\n\t  $scope.duplicateQuery = function () {\n\t    Events.record('fork', 'query', $scope.query.id);\n\t\n\t    Query.fork({ id: $scope.query.id }, function (newQuery) {\n\t      $location.url(newQuery.getSourceLink()).replace();\n\t    });\n\t  };\n\t\n\t  $scope.deleteVisualization = function ($e, vis) {\n\t    $e.preventDefault();\n\t\n\t    var title = undefined;\n\t    var message = 'Are you sure you want to delete ' + vis.name + ' ?';\n\t    var confirm = { class: 'btn-danger', title: 'Delete' };\n\t\n\t    AlertDialog.open(title, message, confirm).then(function () {\n\t      Events.record('delete', 'visualization', vis.id);\n\t\n\t      Visualization.delete({ id: vis.id }, function () {\n\t        if ($scope.selectedTab === String(vis.id)) {\n\t          $scope.selectedTab = DEFAULT_TAB;\n\t          $location.hash($scope.selectedTab);\n\t        }\n\t        $scope.query.visualizations = $scope.query.visualizations.filter(function (v) {\n\t          return vis.id !== v.id;\n\t        });\n\t      }, function () {\n\t        toastr.error(\"Error deleting visualization. Maybe it's used in a dashboard?\");\n\t      });\n\t    });\n\t  };\n\t\n\t  $scope.$watch('query.query', function (newQueryText) {\n\t    $scope.isDirty = newQueryText !== queryText;\n\t  });\n\t}\n\n/***/ },\n/* 258 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"container\\\">\\n  <overlay ng-if=\\\"canCreateQuery === false && query.isNew()\\\">\\n    You don't have permission to create new queries on any of the data sources available to you. You can either <a\\n    href=\\\"queries\\\">browse existing queries</a>, or ask for additional permissions from your Redash admin.\\n  </overlay>\\n  <overlay ng-if=\\\"noDataSources && currentUser.isAdmin\\\">\\n    Looks like no data sources were created yet (or none of them available to the group(s) you're member of). Please\\n    create one first, and then start querying.\\n    <br/>\\n    <a href=\\\"data_sources/new\\\" class=\\\"btn btn-primary\\\">Create Data Source</a> <a href=\\\"groups\\\" class=\\\"btn btn-default\\\">Manage\\n    Group Permissions</a>\\n  </overlay>\\n  <overlay ng-if=\\\"noDataSources && !currentUser.isAdmin\\\">\\n    Looks like no data sources were created yet (or none of them available to the group(s) you're member of). Please ask\\n    your Redash admin to create one first.\\n  </overlay>\\n\\n  <alert-unsaved-changes ng-if=\\\"canEdit\\\" is-dirty=\\\"isDirty\\\"></alert-unsaved-changes>\\n\\n  <div class=\\\"row bg-white p-10 m-b-10\\\">\\n    <div class=\\\"col-sm-9\\\">\\n      <h3>\\n        <edit-in-place editable=\\\"canEdit\\\" done=\\\"saveName\\\" ignore-blanks=\\\"true\\\" value=\\\"query.name\\\"></edit-in-place>\\n        <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft && !query.is_archived\\\">Unpublished</span>\\n        <span class=\\\"label label-warning\\\" ng-if=\\\"query.is_archived\\\" uib-popover=\\\"This query is archived and can't be used in dashboards, and won't appear in search results.\\\" popover-placement=\\\"right\\\" popover-trigger=\\\"'mouseenter'\\\">Archived</span>\\n      </h3>\\n      <p>\\n        <em>\\n          <edit-in-place editable=\\\"canEdit\\\"\\n                         done=\\\"saveDescription\\\"\\n                         editor=\\\"textarea\\\"\\n                         placeholder=\\\"No description\\\"\\n                         ignore-blanks='false'\\n                         value=\\\"query.description\\\"\\n                         markdown=\\\"true\\\">\\n          </edit-in-place>\\n        </em>\\n\\n      <ul class=\\\"list-inline m-t-20\\\">\\n        <li>\\n          <span class=\\\"zmdi zmdi-account\\\"></span>\\n          <span class=\\\"text-muted\\\">Created By </span>\\n          <strong>{{query.user.name}}</strong>\\n        </li>\\n        <li ng-if=\\\"query.last_modified_by && query.user.id != query.last_modified_by.id\\\">\\n          <span class=\\\"zmdi zmdi-account\\\"></span>\\n          <span class=\\\"text-muted\\\">Last Modified By </span>\\n          <strong>{{query.last_modified_by.name}}</strong>\\n        </li>\\n        <li>\\n          <span class=\\\"zmdi zmdi-time\\\"></span>\\n          <span class=\\\"text-muted\\\">Updated at </span>\\n          <strong>\\n            <rd-time-ago value=\\\"query.updated_at\\\"></rd-time-ago>\\n          </strong>\\n        </li>\\n        <li>\\n          <span class=\\\"zmdi zmdi-time\\\"></span>\\n          <span class=\\\"text-muted\\\">Created at </span>\\n          <strong>\\n            <rd-time-ago value=\\\"query.created_at\\\"></rd-time-ago>\\n          </strong>\\n        </li>\\n      </ul>\\n      </p>\\n    </div>\\n    <div class=\\\"col-sm-3 text-right\\\">\\n      <h3>\\n        <span ng-show=\\\"query.id && canViewSource\\\">\\n            <a ng-show=\\\"!sourceMode\\\"\\n              ng-href=\\\"{{query.getUrl(true, selectedTab)}}\\\" class=\\\"btn btn-default\\\">Show Source\\n            </a>\\n            <a ng-show=\\\"sourceMode\\\"\\n              ng-href=\\\"{{query.getUrl(false, selectedTab)}}\\\" class=\\\"btn btn-default\\\">Hide Source\\n            </a>\\n        </span>\\n      </h3>\\n    </div>\\n  </div>\\n\\n  <!-- editor -->\\n  <div class=\\\"container\\\">\\n      <div class=\\\"row bg-white p-b-5\\\" ng-if=\\\"sourceMode\\\" resizable r-directions=\\\"['bottom']\\\" r-height=\\\"300\\\" style=\\\"min-height:100px;\\\">\\n        <schema-browser class=\\\"col-md-3 hidden-sm hidden-xs schema-container\\\"\\n                        schema=\\\"schema\\\"\\n                        on-refresh=\\\"refreshSchema()\\\"\\n                        ng-show=\\\"hasSchema\\\">\\n        </schema-browser>\\n\\n        <div ng-class=\\\"editorSize\\\" style=\\\"height:100%;\\\">\\n            <div class=\\\"p-5\\\">\\n              <button type=\\\"button\\\" class=\\\"btn btn-primary btn-s\\\" ng-disabled=\\\"queryExecuting || !canExecuteQuery()\\\"\\n                      ng-click=\\\"executeQuery()\\\">\\n                <span class=\\\"zmdi zmdi-play\\\"></span> Execute\\n              </button>\\n\\n              <button type=\\\"button\\\" class=\\\"btn btn-default btn-s\\\" ng-click=\\\"formatQuery()\\\">\\n                <span class=\\\"zmdi zmdi-format-indent-increase\\\"></span> Format Query\\n              </button>\\n\\n              <i class=\\\"fa fa-database\\\"></i>\\n              <span class=\\\"text-muted\\\">Data Source</span>\\n              <select ng-disabled=\\\"!isQueryOwner\\\" ng-model=\\\"query.data_source_id\\\" ng-change=\\\"updateDataSource()\\\"\\n                      ng-options=\\\"ds.id as ds.name for ds in dataSources\\\"></select>\\n\\n              <div class=\\\"pull-right\\\">\\n                <button class=\\\"btn btn-s btn-default\\\" ng-click=\\\"togglePublished()\\\" ng-if=\\\"query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\">\\n                  <span class=\\\"fa fa-paper-plane\\\"></span> Publish\\n                </button>\\n                <button class=\\\"btn btn-s btn-default\\\" ng-click=\\\"duplicateQuery()\\\" ng-disabled=\\\"query.id === undefined\\\">\\n                  <span class=\\\"zmdi zmdi-arrow-split\\\"></span> Fork\\n                </button>\\n                <button class=\\\"btn btn-default\\\" ng-show=\\\"canEdit\\\" ng-click=\\\"saveQuery()\\\">\\n                  <span class=\\\"fa fa-floppy-o\\\"> </span> Save<span\\n                  ng-show=\\\"isDirty\\\">&#42;</span>\\n                </button>\\n                <div class=\\\"btn-group\\\" role=\\\"group\\\" uib-dropdown>\\n                  <button class=\\\"btn btn-default btn-sm dropdown-toggle\\\" uib-dropdown-toggle>\\n                    <span class=\\\"zmdi zmdi-more\\\"></span>\\n                  </button>\\n                  <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n                    <li ng-if=\\\"!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\"><a ng-click=\\\"archiveQuery()\\\">Archive Query</a></li>\\n                    <li ng-if=\\\"!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin')) && showPermissionsControl\\\"><a ng-click=\\\"showManagePermissionsModal()\\\">Manage Permissions</a></li>\\n                    <li ng-if=\\\"!query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\"><a ng-click=\\\"togglePublished()\\\">Unpublish Query</a></li>\\n                    <li ng-if=\\\"query.id != undefined\\\"><a ng-click=\\\"showApiKey()\\\">Show API Key</a></li>\\n                  </ul>\\n                </div>\\n              </div>\\n            </div>\\n            <p style=\\\"height:calc(100% - 40px);\\\">\\n              <query-editor query=\\\"query\\\"\\n                            schema=\\\"schema\\\"\\n                            syntax=\\\"dataSource.syntax\\\"></query-editor>\\n            </p>\\n        </div>\\n      </div>\\n  </div>\\n  <!-- end of editor -->\\n\\n  <!-- Query Details-->\\n  <div class=\\\"container m-b-5 p-t-5 bg-ace\\\" ng-if=\\\"sourceMode\\\">\\n  </div>\\n  <!-- End of Query Details-->\\n\\n  <div class=\\\"tile\\\">\\n    <div class=\\\"t-header bg-ace\\\">\\n      <div class=\\\"pull-right\\\">\\n        <button class=\\\"btn btn-sm btn-default\\\" ng-click=\\\"executeQuery()\\\"\\n                ng-disabled=\\\"queryExecuting || !canExecuteQuery()\\\" title=\\\"Refresh Dataset\\\"\\n                ng-if=\\\"!sourceMode\\\"><span\\n          class=\\\"zmdi zmdi-refresh\\\"></span></button>\\n        <div class=\\\"btn-group\\\" uib-dropdown>\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-sm dropdown-toggle\\\"\\n                  ng-disabled=\\\"queryExecuting || !queryResult.getData()\\\" aria-haspopup=\\\"true\\\"\\n                  uib-dropdown-toggle aria-expanded=\\\"false\\\">\\n            Download Dataset <span class=\\\"caret\\\"></span>\\n          </button>\\n          <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n            <li>\\n              <a query-result-link target=\\\"_self\\\">\\n                <span class=\\\"fa fa-file-o\\\"></span> Download as CSV File\\n              </a>\\n            </li>\\n            <li>\\n              <a query-result-link file-type=\\\"xlsx\\\" target=\\\"_self\\\">\\n                <span class=\\\"fa fa-file-excel-o\\\"></span> Download as Excel File\\n              </a>\\n            </li>\\n          </ul>\\n        </div>\\n      </div>\\n      <ul class=\\\"list-inline\\\">\\n        <li>\\n          <!-- runtime -->\\n          <span class=\\\"zmdi zmdi-timer\\\"></span>\\n          <span class=\\\"text-muted\\\">Runtime </span>\\n          <strong ng-show=\\\"!queryExecuting\\\">{{queryResult.getRuntime() | durationHumanize}}</strong>\\n          <span ng-show=\\\"queryExecuting\\\">Running&hellip;</span>\\n        </li>\\n        <li>\\n          <!-- rows -->\\n          <span class=\\\"zmdi zmdi-format-align-justify\\\"></span>\\n          <span class=\\\"text-muted\\\">Rows </span><strong>{{queryResult.getData().length}}</strong>\\n        </li>\\n        <li>\\n          <!-- refresh schedule -->\\n          <span class=\\\"zmdi zmdi-refresh\\\"></span>\\n          <span class=\\\"text-muted\\\">Refresh Schedule</span>\\n          <a ng-click=\\\"openScheduleForm()\\\" ng-if=\\\"!query.isNew()\\\">{{query.schedule | scheduleHumanize}}</a>\\n          <span ng-if=\\\"query.isNew()\\\">Never</span>\\n        </li>\\n        <li>\\n          <!-- last update -->\\n          <span class=\\\"zmdi zmdi-time\\\"></span>\\n          <span class=\\\"text-muted\\\">Last update </span>\\n          <strong>\\n            <rd-time-ago value=\\\"queryResult.query_result.retrieved_at\\\"></rd-time-ago>\\n          </strong>\\n        </li>\\n      </ul>\\n\\n    </div>\\n    <div class=\\\"t-body\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-lg-12\\\">\\n          <parameters parameters=\\\"query.getParametersDefs()\\\" sync-values=\\\"!query.isNew()\\\" editable=\\\"sourceMode && canEdit\\\"></parameters>\\n          <!-- Query Execution Status -->\\n          <div class=\\\"alert alert-info\\\" ng-show=\\\"queryResult.getStatus() == 'processing'\\\">\\n            Executing query&hellip;\\n            <rd-timer timestamp=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n            <button type=\\\"button\\\" class=\\\"btn btn-warning btn-xs pull-right\\\" ng-disabled=\\\"cancelling\\\"\\n                    ng-click=\\\"cancelExecution()\\\">Cancel\\n            </button>\\n          </div>\\n          <div class=\\\"alert alert-info\\\" ng-show=\\\"queryResult.getStatus() == 'waiting'\\\">\\n            Query in queue&hellip;\\n            <rd-timer timestamp=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n            <button type=\\\"button\\\" class=\\\"btn btn-warning btn-xs pull-right\\\" ng-disabled=\\\"cancelling\\\"\\n                    ng-click=\\\"cancelExecution()\\\">Cancel\\n            </button>\\n          </div>\\n          <div class=\\\"alert alert-danger\\\" ng-show=\\\"queryResult.getError()\\\">Error running query: <strong>{{queryResult.getError()}}</strong>\\n          </div>\\n          <!-- End of Query Execution Status -->\\n\\n          <!-- tabs and data -->\\n          <div ng-if=\\\"showDataset\\\">\\n            <div class=\\\"row p-10\\\" ng-show=\\\"showLog\\\">\\n              <div class=\\\"col-lg-12\\\">\\n                <p>Log Information:</p>\\n                <p ng-repeat=\\\"l in queryResult.getLog()\\\">{{l}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-lg-12\\\">\\n                <ul class=\\\"tab-nav\\\">\\n                  <rd-tab tab-id=\\\"table\\\" name=\\\"Table\\\" base-path=\\\"query.getUrl(sourceMode)\\\"></rd-tab>\\n                  <rd-tab tab-id=\\\"{{vis.id}}\\\" name=\\\"{{vis.name}}\\\" ng-if=\\\"vis.type!='TABLE'\\\" base-path=\\\"query.getUrl(sourceMode)\\\"\\n                          ng-repeat=\\\"vis in query.visualizations\\\">\\n                          <span class=\\\"remove\\\" ng-click=\\\"deleteVisualization($event, vis)\\\"\\n                                ng-show=\\\"canEdit\\\"> &times;</span>\\n                  </rd-tab>\\n                  <li class=\\\"rd-tab\\\"><a ng-click=\\\"openVisualizationEditor()\\\" ng-if=\\\"sourceMode && canEdit\\\">&plus; New Visualization</a></li>\\n                </ul>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-lg-12\\\">\\n                <div ng-show=\\\"selectedTab == 'table'\\\">\\n                  <filters filters=\\\"filters\\\"></filters>\\n                  <grid-renderer query-result=\\\"queryResult\\\" items-per-page=\\\"50\\\"></grid-renderer>\\n                  <!-- the ng-repeat is a lame hack to find the table visualization... -->\\n                  <div class=\\\"bg-ace p-5\\\" ng-repeat=\\\"vis in query.visualizations\\\" ng-if=\\\"vis.type == 'TABLE'\\\">\\n                    <button class=\\\"btn btn-default\\\" ng-if=\\\"!query.isNew()\\\" ng-click=\\\"showEmbedDialog(query, vis)\\\"><i class=\\\"zmdi zmdi-code\\\"></i> Embed</button>\\n                  </div>\\n                </div>\\n                <div ng-if=\\\"selectedTab == vis.id\\\" ng-repeat=\\\"vis in query.visualizations\\\">\\n                  <visualization-renderer visualization=\\\"vis\\\" query-result=\\\"queryResult\\\"></visualization-renderer>\\n                  <div class=\\\"bg-ace p-5\\\">\\n                    <button class=\\\"btn btn-default\\\" ng-click=\\\"openVisualizationEditor(vis)\\\" ng-if=\\\"canEdit\\\">Edit</button>\\n                    <button class=\\\"btn btn-default\\\" ng-click=\\\"showEmbedDialog(query, vis)\\\"><i class=\\\"zmdi zmdi-code\\\"></i> Embed</button>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 259 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tQueryViewCtrl.$inject = [\"$scope\", \"Events\", \"$route\", \"$routeParams\", \"$location\", \"$window\", \"$q\", \"KeyboardShortcuts\", \"Title\", \"AlertDialog\", \"Notifications\", \"clientConfig\", \"toastr\", \"$uibModal\", \"currentUser\", \"Query\", \"DataSource\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.controller('QueryViewCtrl', QueryViewCtrl);\n\t\n\t  return {\n\t    '/queries/:queryId': {\n\t      template: _query2.default,\n\t      controller: 'QueryViewCtrl',\n\t      reloadOnSearch: false,\n\t      resolve: {\n\t        query: [\"Query\", \"$route\", function query(Query, $route) {\n\t          'ngInject';\n\t\n\t          return Query.get({ id: $route.current.params.queryId }).$promise;\n\t        }]\n\t      }\n\t    }\n\t  };\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _query = __webpack_require__(258);\n\t\n\tvar _query2 = _interopRequireDefault(_query);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction QueryViewCtrl($scope, Events, $route, $routeParams, $location, $window, $q, KeyboardShortcuts, Title, AlertDialog, Notifications, clientConfig, toastr, $uibModal, currentUser, Query, DataSource) {\n\t  var DEFAULT_TAB = 'table';\n\t\n\t  function getQueryResult(maxAge) {\n\t    if (maxAge === undefined) {\n\t      maxAge = $location.search().maxAge;\n\t    }\n\t\n\t    if (maxAge === undefined) {\n\t      maxAge = -1;\n\t    }\n\t\n\t    $scope.showLog = false;\n\t    $scope.queryResult = $scope.query.getQueryResult(maxAge);\n\t  }\n\t\n\t  function getDataSourceId() {\n\t    // Try to get the query's data source id\n\t    var dataSourceId = $scope.query.data_source_id;\n\t\n\t    // If there is no source yet, then parse what we have in localStorage\n\t    //   e.g. `null` -> `NaN`, malformed data -> `NaN`, \"1\" -> 1\n\t    if (dataSourceId === undefined) {\n\t      dataSourceId = parseInt(localStorage.lastSelectedDataSourceId, 10);\n\t    }\n\t\n\t    // If we had an invalid value in localStorage (e.g. nothing, deleted source),\n\t    // then use the first data source\n\t    var isValidDataSourceId = !isNaN(dataSourceId) && (0, _underscore.some)($scope.dataSources, function (ds) {\n\t      return ds.id === dataSourceId;\n\t    });\n\t\n\t    if (!isValidDataSourceId) {\n\t      dataSourceId = $scope.dataSources[0].id;\n\t    }\n\t\n\t    // Return our data source id\n\t    return dataSourceId;\n\t  }\n\t\n\t  function toggleSchemaBrowser(hasSchema) {\n\t    $scope.hasSchema = hasSchema;\n\t    $scope.editorSize = hasSchema ? 'col-md-9' : 'col-md-12';\n\t  }\n\t\n\t  function getSchema() {\n\t    var refresh = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\t\n\t    DataSource.getSchema({ id: $scope.query.data_source_id, refresh: refresh }, function (data) {\n\t      var hasPrevSchema = refresh ? $scope.schema && $scope.schema.length > 0 : false;\n\t      var hasSchema = data && data.length > 0;\n\t\n\t      if (hasSchema) {\n\t        $scope.schema = data;\n\t        data.forEach(function (table) {\n\t          table.collapsed = true;\n\t        });\n\t      } else if (hasPrevSchema) {\n\t        toastr.error('Schema refresh failed. Please try again later.');\n\t      }\n\t\n\t      toggleSchemaBrowser(hasSchema || hasPrevSchema);\n\t    });\n\t  }\n\t\n\t  function updateSchema() {\n\t    toggleSchemaBrowser(false);\n\t    getSchema();\n\t  }\n\t\n\t  $scope.refreshSchema = function () {\n\t    return getSchema(true);\n\t  };\n\t\n\t  function updateDataSources(dataSources) {\n\t    // Filter out data sources the user can't query (or used by current query):\n\t    $scope.dataSources = dataSources.filter(function (dataSource) {\n\t      return !dataSource.view_only || dataSource.id === $scope.query.data_source_id;\n\t    });\n\t\n\t    if ($scope.dataSources.length === 0) {\n\t      $scope.noDataSources = true;\n\t      return;\n\t    }\n\t\n\t    if ($scope.query.isNew()) {\n\t      $scope.query.data_source_id = getDataSourceId();\n\t    }\n\t\n\t    $scope.dataSource = (0, _underscore.find)(dataSources, function (ds) {\n\t      return ds.id === $scope.query.data_source_id;\n\t    });\n\t\n\t    $scope.canCreateQuery = (0, _underscore.any)(dataSources, function (ds) {\n\t      return !ds.view_only;\n\t    });\n\t\n\t    updateSchema();\n\t  }\n\t\n\t  $scope.executeQuery = function () {\n\t    if (!$scope.canExecuteQuery()) {\n\t      return;\n\t    }\n\t\n\t    if (!$scope.query.query) {\n\t      return;\n\t    }\n\t\n\t    getQueryResult(0);\n\t    $scope.lockButton(true);\n\t    $scope.cancelling = false;\n\t    Events.record('execute', 'query', $scope.query.id);\n\t\n\t    Notifications.getPermissions();\n\t  };\n\t\n\t  $scope.currentUser = currentUser;\n\t  $scope.dataSource = {};\n\t  $scope.query = $route.current.locals.query;\n\t  $scope.showPermissionsControl = clientConfig.showPermissionsControl;\n\t\n\t  var shortcuts = {\n\t    'mod+enter': $scope.executeQuery\n\t  };\n\t\n\t  KeyboardShortcuts.bind(shortcuts);\n\t\n\t  $scope.$on('$destroy', function () {\n\t    KeyboardShortcuts.unbind(shortcuts);\n\t  });\n\t\n\t  Events.record('view', 'query', $scope.query.id);\n\t  if ($scope.query.hasResult() || $scope.query.paramsRequired()) {\n\t    getQueryResult();\n\t  }\n\t  $scope.queryExecuting = false;\n\t\n\t  $scope.isQueryOwner = currentUser.id === $scope.query.user.id || currentUser.hasPermission('admin');\n\t  $scope.canViewSource = currentUser.hasPermission('view_source');\n\t\n\t  $scope.canExecuteQuery = function () {\n\t    return currentUser.hasPermission('execute_query') && !$scope.dataSource.view_only;\n\t  };\n\t\n\t  $scope.canScheduleQuery = currentUser.hasPermission('schedule_query');\n\t\n\t  if ($route.current.locals.dataSources) {\n\t    $scope.dataSources = $route.current.locals.dataSources;\n\t    updateDataSources($route.current.locals.dataSources);\n\t  } else {\n\t    $scope.dataSources = DataSource.query(updateDataSources);\n\t  }\n\t\n\t  // in view mode, latest dataset is always visible\n\t  // source mode changes this behavior\n\t  $scope.showDataset = true;\n\t  $scope.showLog = false;\n\t\n\t  $scope.lockButton = function (lock) {\n\t    $scope.queryExecuting = lock;\n\t  };\n\t\n\t  $scope.showApiKey = function () {\n\t    $window.alert('API Key for this query:\\n' + $scope.query.api_key);\n\t  };\n\t\n\t  $scope.saveQuery = function (customOptions, data) {\n\t    var request = data;\n\t\n\t    if (request) {\n\t      // Don't save new query with partial data\n\t      if ($scope.query.isNew()) {\n\t        return $q.reject();\n\t      }\n\t      request.id = $scope.query.id;\n\t      request.version = $scope.query.version;\n\t    } else {\n\t      request = (0, _underscore.pick)($scope.query, ['schedule', 'query', 'id', 'description', 'name', 'data_source_id', 'options', 'latest_query_data_id', 'version', 'is_draft']);\n\t    }\n\t\n\t    var options = _extends({}, {\n\t      successMessage: 'Query saved',\n\t      errorMessage: 'Query could not be saved'\n\t    }, customOptions);\n\t\n\t    return Query.save(request, function (updatedQuery) {\n\t      toastr.success(options.successMessage);\n\t      $scope.query.version = updatedQuery.version;\n\t    }, function (error) {\n\t      if (error.status === 409) {\n\t        toastr.error('It seems like the query has been modified by another user. ' + 'Please copy/backup your changes and reload this page.', { autoDismiss: false });\n\t      } else {\n\t        toastr.error(options.errorMessage);\n\t      }\n\t    }).$promise;\n\t  };\n\t\n\t  $scope.togglePublished = function () {\n\t    Events.record('toggle_published', 'query', $scope.query.id);\n\t    $scope.query.is_draft = !$scope.query.is_draft;\n\t    $scope.saveQuery(undefined, { is_draft: $scope.query.is_draft });\n\t  };\n\t\n\t  $scope.saveDescription = function () {\n\t    Events.record('edit_description', 'query', $scope.query.id);\n\t    $scope.saveQuery(undefined, { description: $scope.query.description });\n\t  };\n\t\n\t  $scope.saveName = function () {\n\t    Events.record('edit_name', 'query', $scope.query.id);\n\t    $scope.saveQuery(undefined, { name: $scope.query.name });\n\t  };\n\t\n\t  $scope.cancelExecution = function () {\n\t    $scope.cancelling = true;\n\t    $scope.queryResult.cancelExecution();\n\t    Events.record('cancel_execute', 'query', $scope.query.id);\n\t  };\n\t\n\t  $scope.archiveQuery = function () {\n\t    function archive() {\n\t      Query.delete({ id: $scope.query.id }, function () {\n\t        $scope.query.is_archived = true;\n\t        $scope.query.schedule = null;\n\t      }, function () {\n\t        toastr.error('Query could not be archived.');\n\t      });\n\t    }\n\t\n\t    var title = 'Archive Query';\n\t    var message = 'Are you sure you want to archive this query?<br/> All alerts and dashboard widgets created with its visualizations will be deleted.';\n\t    var confirm = { class: 'btn-warning', title: 'Archive' };\n\t\n\t    AlertDialog.open(title, message, confirm).then(archive);\n\t  };\n\t\n\t  $scope.updateDataSource = function () {\n\t    Events.record('update_data_source', 'query', $scope.query.id);\n\t    localStorage.lastSelectedDataSourceId = $scope.query.data_source_id;\n\t\n\t    $scope.query.latest_query_data = null;\n\t    $scope.query.latest_query_data_id = null;\n\t\n\t    if ($scope.query.id) {\n\t      Query.save({\n\t        id: $scope.query.id,\n\t        data_source_id: $scope.query.data_source_id,\n\t        latest_query_data_id: null\n\t      });\n\t    }\n\t\n\t    updateSchema();\n\t    $scope.dataSource = (0, _underscore.find)($scope.dataSources, function (ds) {\n\t      return ds.id === $scope.query.data_source_id;\n\t    });\n\t    $scope.executeQuery();\n\t  };\n\t\n\t  $scope.setVisualizationTab = function (visualization) {\n\t    $scope.selectedTab = visualization.id;\n\t    $location.hash(visualization.id);\n\t  };\n\t\n\t  $scope.$watch('query.name', function () {\n\t    Title.set($scope.query.name);\n\t  });\n\t\n\t  $scope.$watch('queryResult && queryResult.getData()', function (data) {\n\t    if (!data) {\n\t      return;\n\t    }\n\t\n\t    $scope.filters = $scope.queryResult.getFilters();\n\t  });\n\t\n\t  $scope.$watch('queryResult && queryResult.getStatus()', function (status) {\n\t    if (!status) {\n\t      return;\n\t    }\n\t\n\t    if (status === 'done') {\n\t      $scope.query.latest_query_data_id = $scope.queryResult.getId();\n\t      $scope.query.queryResult = $scope.queryResult;\n\t\n\t      Notifications.showNotification('Redash', $scope.query.name + ' updated.');\n\t    } else if (status === 'failed') {\n\t      Notifications.showNotification('Redash', $scope.query.name + ' failed to run: ' + $scope.queryResult.getError());\n\t    }\n\t\n\t    if (status === 'done' || status === 'failed') {\n\t      $scope.lockButton(false);\n\t    }\n\t\n\t    if ($scope.queryResult.getLog() != null) {\n\t      $scope.showLog = true;\n\t    }\n\t  });\n\t\n\t  $scope.openVisualizationEditor = function (visualization) {\n\t    function openModal() {\n\t      $uibModal.open({\n\t        windowClass: 'modal-xl',\n\t        component: 'editVisualizationDialog',\n\t        resolve: {\n\t          query: $scope.query,\n\t          visualization: visualization,\n\t          queryResult: $scope.queryResult,\n\t          onNewSuccess: function onNewSuccess() {\n\t            return $scope.setVisualizationTab;\n\t          }\n\t        }\n\t      });\n\t    }\n\t\n\t    if ($scope.query.isNew()) {\n\t      $scope.saveQuery().then(function (query) {\n\t        // Because we have a path change, we need to \"signal\" the next page to\n\t        // open the visualization editor.\n\t        $location.path(query.getSourceLink()).hash('add');\n\t      });\n\t    } else {\n\t      openModal();\n\t    }\n\t  };\n\t\n\t  if ($location.hash() === 'add') {\n\t    $location.hash(null);\n\t    $scope.openVisualizationEditor();\n\t  }\n\t\n\t  $scope.openScheduleForm = function () {\n\t    if (!$scope.isQueryOwner || !$scope.canScheduleQuery) {\n\t      return;\n\t    }\n\t\n\t    $uibModal.open({\n\t      component: 'scheduleDialog',\n\t      size: 'sm',\n\t      resolve: {\n\t        query: $scope.query,\n\t        saveQuery: function saveQuery() {\n\t          return $scope.saveQuery;\n\t        }\n\t      }\n\t    });\n\t  };\n\t\n\t  $scope.showEmbedDialog = function (query, visualization) {\n\t    $uibModal.open({\n\t      component: 'embedCodeDialog',\n\t      resolve: {\n\t        query: query,\n\t        visualization: visualization\n\t      }\n\t    });\n\t  };\n\t\n\t  $scope.$watch(function () {\n\t    return $location.hash();\n\t  }, function (hash) {\n\t    $scope.selectedTab = hash || DEFAULT_TAB;\n\t  });\n\t\n\t  $scope.showManagePermissionsModal = function () {\n\t    $uibModal.open({\n\t      component: 'permissionsEditor',\n\t      resolve: {\n\t        aclUrl: { url: 'api/queries/' + $routeParams.queryId + '/acl' }\n\t      }\n\t    });\n\t  };\n\t}\n\n/***/ },\n/* 260 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('queryResultLink', queryResultLink);\n\t};\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction queryResultLink() {\n\t  return {\n\t    restrict: 'A',\n\t    link: function link(scope, element, attrs) {\n\t      var fileType = attrs.fileType ? attrs.fileType : 'csv';\n\t      scope.$watch('queryResult && queryResult.getData()', function (data) {\n\t        if (!data) {\n\t          return;\n\t        }\n\t\n\t        if (scope.queryResult.getId() == null) {\n\t          element.attr('href', '');\n\t        } else {\n\t          element.attr('href', 'api/queries/' + scope.query.id + '/results/' + scope.queryResult.getId() + '.' + fileType + (scope.embed ? '?api_key=' + scope.apiKey : ''));\n\t          element.attr('download', scope.query.name.replace(' ', '_') + (0, _moment2.default)(scope.queryResult.getUpdatedAt()).format('_YYYY_MM_DD') + '.' + fileType);\n\t        }\n\t      });\n\t    }\n\t  };\n\t}\n\n/***/ },\n/* 261 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tqueryEditor.$inject = [\"QuerySnippet\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('queryEditor', queryEditor);\n\t};\n\t\n\t__webpack_require__(149);\n\t\n\t__webpack_require__(262);\n\t\n\t__webpack_require__(263);\n\t\n\t__webpack_require__(264);\n\t\n\t__webpack_require__(266);\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\t// By default Ace will try to load snippet files for the different modes and fail.\n\t// We don't need them, so we use these placeholders until we define our own.\n\tfunction defineDummySnippets(mode) {\n\t  window.ace.define('ace/snippets/' + mode, ['require', 'exports', 'module'], function (require, exports) {\n\t    exports.snippetText = '';\n\t    exports.scope = mode;\n\t  });\n\t}\n\t\n\tdefineDummySnippets('python');\n\tdefineDummySnippets('sql');\n\tdefineDummySnippets('json');\n\t\n\tfunction queryEditor(QuerySnippet) {\n\t  return {\n\t    restrict: 'E',\n\t    scope: {\n\t      query: '=',\n\t      schema: '=',\n\t      syntax: '='\n\t    },\n\t    template: '<div ui-ace=\"editorOptions\" ng-model=\"query.query\"></div>',\n\t    link: {\n\t      pre: function pre($scope) {\n\t        $scope.syntax = $scope.syntax || 'sql';\n\t\n\t        $scope.editorOptions = {\n\t          mode: 'json',\n\t          // require: ['ace/ext/language_tools'],\n\t          advanced: {\n\t            behavioursEnabled: true,\n\t            enableSnippets: true,\n\t            enableBasicAutocompletion: true,\n\t            enableLiveAutocompletion: true,\n\t            autoScrollEditorIntoView: true\n\t          },\n\t          onLoad: function onLoad(editor) {\n\t            // Release Cmd/Ctrl+L to the browser\n\t            editor.commands.bindKey('Cmd+L', null);\n\t            editor.commands.bindKey('Ctrl+L', null);\n\t\n\t            QuerySnippet.query(function (snippets) {\n\t              window.ace.acequire(['ace/snippets'], function (snippetsModule) {\n\t                var snippetManager = snippetsModule.snippetManager;\n\t                var m = {\n\t                  snippetText: ''\n\t                };\n\t                m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n\t                snippets.forEach(function (snippet) {\n\t                  m.snippets.push(snippet.getSnippet());\n\t                });\n\t\n\t                snippetManager.register(m.snippets || [], m.scope);\n\t              });\n\t            });\n\t\n\t            editor.$blockScrolling = Infinity;\n\t            editor.getSession().setUseWrapMode(true);\n\t            editor.setShowPrintMargin(false);\n\t\n\t            $scope.$watch('syntax', function (syntax) {\n\t              var newMode = 'ace/mode/' + syntax;\n\t              editor.getSession().setMode(newMode);\n\t            });\n\t\n\t            $scope.$watch('schema', function (newSchema, oldSchema) {\n\t              if (newSchema !== oldSchema) {\n\t                var tokensCount = newSchema.reduce(function (totalLength, table) {\n\t                  return totalLength + table.columns.length;\n\t                }, 0);\n\t                // If there are too many tokens we disable live autocomplete,\n\t                // as it makes typing slower.\n\t                if (tokensCount > 5000) {\n\t                  editor.setOption('enableLiveAutocompletion', false);\n\t                } else {\n\t                  editor.setOption('enableLiveAutocompletion', true);\n\t                }\n\t              }\n\t            });\n\t\n\t            $scope.$parent.$on('angular-resizable.resizing', function () {\n\t              editor.resize();\n\t            });\n\t\n\t            editor.focus();\n\t          }\n\t        };\n\t\n\t        var schemaCompleter = {\n\t          getCompletions: function getCompletions(state, session, pos, prefix, callback) {\n\t            if (prefix.length === 0 || !$scope.schema) {\n\t              callback(null, []);\n\t              return;\n\t            }\n\t\n\t            if (!$scope.schema.keywords) {\n\t              var keywords = {};\n\t\n\t              $scope.schema.forEach(function (table) {\n\t                keywords[table.name] = 'Table';\n\t\n\t                table.columns.forEach(function (c) {\n\t                  keywords[c] = 'Column';\n\t                  keywords[table.name + '.' + c] = 'Column';\n\t                });\n\t              });\n\t\n\t              $scope.schema.keywords = (0, _underscore.map)(keywords, function (v, k) {\n\t                return {\n\t                  name: k,\n\t                  value: k,\n\t                  score: 0,\n\t                  meta: v\n\t                };\n\t              });\n\t            }\n\t            callback(null, $scope.schema.keywords);\n\t          }\n\t        };\n\t\n\t        window.ace.acequire(['ace/ext/language_tools'], function (langTools) {\n\t          langTools.addCompleter(schemaCompleter);\n\t        });\n\t      }\n\t    }\n\t  };\n\t}\n\n/***/ },\n/* 262 */,\n/* 263 */,\n/* 264 */,\n/* 265 */,\n/* 266 */,\n/* 267 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tSchemaBrowserCtrl.$inject = [\"$scope\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('schemaBrowser', SchemaBrowser);\n\t};\n\t\n\tvar _schemaBrowser = __webpack_require__(268);\n\t\n\tvar _schemaBrowser2 = _interopRequireDefault(_schemaBrowser);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction SchemaBrowserCtrl($scope) {\n\t  'ngInject';\n\t\n\t  this.showTable = function (table) {\n\t    table.collapsed = !table.collapsed;\n\t    $scope.$broadcast('vsRepeatTrigger');\n\t  };\n\t\n\t  this.getSize = function (table) {\n\t    var size = 18;\n\t\n\t    if (!table.collapsed) {\n\t      size += 18 * table.columns.length;\n\t    }\n\t\n\t    return size;\n\t  };\n\t}\n\t\n\tvar SchemaBrowser = {\n\t  bindings: {\n\t    schema: '<',\n\t    onRefresh: '&'\n\t  },\n\t  controller: SchemaBrowserCtrl,\n\t  template: _schemaBrowser2.default\n\t};\n\n/***/ },\n/* 268 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"schema-container\\\">\\n  <div class=\\\"schema-control\\\">\\n    <input type=\\\"text\\\" placeholder=\\\"Search schema...\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.schemaFilter\\\">\\n    <button class=\\\"btn btn-default\\\"\\n            title=\\\"Refresh Schema\\\"\\n            ng-click=\\\"$ctrl.onRefresh()\\\">\\n      <span class=\\\"zmdi zmdi-refresh\\\"></span>\\n    </button>\\n  </div>\\n\\n  <div class=\\\"schema-browser\\\" vs-repeat vs-size=\\\"$ctrl.getSize(table)\\\">\\n    <div ng-repeat=\\\"table in $ctrl.schema | filter:$ctrl.schemaFilter track by table.name\\\">\\n      <div class=\\\"table-name\\\" ng-click=\\\"$ctrl.showTable(table)\\\">\\n        <i class=\\\"fa fa-table\\\"></i>\\n        <strong>\\n          <span title=\\\"{{table.name}}\\\">{{table.name}}</span>\\n          <span ng-if=\\\"table.size !== undefined\\\"> ({{table.size}})</span>\\n        </strong>\\n      </div>\\n      <div uib-collapse=\\\"table.collapsed\\\">\\n        <div ng-repeat=\\\"column in table.columns track by column\\\" style=\\\"padding-left:16px;\\\">{{column}}</div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 269 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('embedCodeDialog', EmbedCodeDialog);\n\t};\n\t\n\tvar _embedCodeDialog = __webpack_require__(270);\n\t\n\tvar _embedCodeDialog2 = _interopRequireDefault(_embedCodeDialog);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar EmbedCodeDialog = {\n\t  controller: [\"clientConfig\", function controller(clientConfig) {\n\t    'ngInject';\n\t\n\t    this.query = this.resolve.query;\n\t    this.visualization = this.resolve.visualization;\n\t\n\t    this.embedUrl = clientConfig.basePath + 'embed/query/' + this.query.id + '/visualization/' + this.visualization.id + '?api_key=' + this.query.api_key;\n\t    if (window.snapshotUrlBuilder) {\n\t      this.snapshotUrl = window.snapshotUrlBuilder(this.query, this.visualization);\n\t    }\n\t  }],\n\t\n\t  bindings: {\n\t    resolve: '<',\n\t    close: '&',\n\t    dismiss: '&'\n\t  },\n\t  template: _embedCodeDialog2.default\n\t};\n\n/***/ },\n/* 270 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Embed Code</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <h5>IFrame Embed</h5>\\n    <div>\\n      <code>&lt;iframe src=\\\"{{ $ctrl.embedUrl }}\\\" width=\\\"720\\\" height=\\\"391\\\"&gt;&lt;/iframe&gt;</code>\\n    </div>\\n    <span class=\\\"text-muted\\\">(height should be adjusted)</span>\\n    <div ng-if=\\\"snapshotUrl\\\">\\n      <h5>Image Embed</h5>\\n      <div>\\n        <code style=\\\"overflow-wrap:break-word;\\\">{{snapshotUrl}}</code>\\n      </div>\\n    </div>\\n</div>\\n\"\n\n/***/ },\n/* 271 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('queryTimePicker', queryTimePicker);\n\t  ngModule.directive('queryRefreshSelect', queryRefreshSelect);\n\t  ngModule.component('scheduleDialog', ScheduleForm);\n\t};\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _scheduleDialog = __webpack_require__(272);\n\t\n\tvar _scheduleDialog2 = _interopRequireDefault(_scheduleDialog);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction padWithZeros(size, v) {\n\t  var str = String(v);\n\t  if (str.length < size) {\n\t    str = '0' + str;\n\t  }\n\t  return str;\n\t}\n\t\n\tfunction queryTimePicker() {\n\t  return {\n\t    restrict: 'E',\n\t    scope: {\n\t      refreshType: '=',\n\t      query: '=',\n\t      saveQuery: '='\n\t    },\n\t    template: '\\n      <select ng-disabled=\"refreshType != \\'daily\\'\" ng-model=\"hour\" ng-change=\"updateSchedule()\" ng-options=\"c as c for c in hourOptions\"></select> :\\n      <select ng-disabled=\"refreshType != \\'daily\\'\" ng-model=\"minute\" ng-change=\"updateSchedule()\" ng-options=\"c as c for c in minuteOptions\"></select>\\n    ',\n\t    link: function link($scope) {\n\t      $scope.hourOptions = (0, _underscore.map)((0, _underscore.range)(0, 24), (0, _underscore.partial)(padWithZeros, 2));\n\t      $scope.minuteOptions = (0, _underscore.map)((0, _underscore.range)(0, 60, 5), (0, _underscore.partial)(padWithZeros, 2));\n\t\n\t      if ($scope.query.hasDailySchedule()) {\n\t        var parts = $scope.query.scheduleInLocalTime().split(':');\n\t        $scope.minute = parts[1];\n\t        $scope.hour = parts[0];\n\t      } else {\n\t        $scope.minute = '15';\n\t        $scope.hour = '00';\n\t      }\n\t\n\t      $scope.updateSchedule = function () {\n\t        var newSchedule = (0, _moment2.default)().hour($scope.hour).minute($scope.minute).utc().format('HH:mm');\n\t\n\t        if (newSchedule !== $scope.query.schedule) {\n\t          $scope.query.schedule = newSchedule;\n\t          $scope.saveQuery();\n\t        }\n\t      };\n\t\n\t      $scope.$watch('refreshType', function () {\n\t        if ($scope.refreshType === 'daily') {\n\t          $scope.updateSchedule();\n\t        }\n\t      });\n\t    }\n\t  };\n\t}\n\t\n\tfunction queryRefreshSelect() {\n\t  return {\n\t    restrict: 'E',\n\t    scope: {\n\t      refreshType: '=',\n\t      query: '=',\n\t      saveQuery: '='\n\t    },\n\t    template: '<select\\n                ng-disabled=\"refreshType != \\'periodic\\'\"\\n                ng-model=\"query.schedule\"\\n                ng-change=\"saveQuery()\"\\n                ng-options=\"c.value as c.name for c in refreshOptions\">\\n                <option value=\"\">No Refresh</option>\\n                </select>',\n\t    link: function link($scope) {\n\t      $scope.refreshOptions = [{\n\t        value: '60',\n\t        name: 'Every minute'\n\t      }];\n\t\n\t      [5, 10, 15, 30].forEach(function (i) {\n\t        $scope.refreshOptions.push({\n\t          value: String(i * 60),\n\t          name: 'Every ' + i + ' minutes'\n\t        });\n\t      });\n\t\n\t      (0, _underscore.range)(1, 13).forEach(function (i) {\n\t        $scope.refreshOptions.push({\n\t          value: String(i * 3600),\n\t          name: 'Every ' + i + 'h'\n\t        });\n\t      });\n\t\n\t      $scope.refreshOptions.push({\n\t        value: String(24 * 3600),\n\t        name: 'Every 24h'\n\t      });\n\t      $scope.refreshOptions.push({\n\t        value: String(7 * 24 * 3600),\n\t        name: 'Every 7 days'\n\t      });\n\t      $scope.refreshOptions.push({\n\t        value: String(14 * 24 * 3600),\n\t        name: 'Every 14 days'\n\t      });\n\t      $scope.refreshOptions.push({\n\t        value: String(30 * 24 * 3600),\n\t        name: 'Every 30 days'\n\t      });\n\t\n\t      $scope.$watch('refreshType', function () {\n\t        if ($scope.refreshType === 'periodic') {\n\t          if ($scope.query.hasDailySchedule()) {\n\t            $scope.query.schedule = null;\n\t            $scope.saveQuery();\n\t          }\n\t        }\n\t      });\n\t    }\n\t  };\n\t}\n\t\n\tvar ScheduleForm = {\n\t  controller: function controller() {\n\t    this.query = this.resolve.query;\n\t    this.saveQuery = this.resolve.saveQuery;\n\t\n\t    if (this.query.hasDailySchedule()) {\n\t      this.refreshType = 'daily';\n\t    } else {\n\t      this.refreshType = 'periodic';\n\t    }\n\t  },\n\t\n\t  bindings: {\n\t    resolve: '<',\n\t    close: '&',\n\t    dismiss: '&'\n\t  },\n\t  template: _scheduleDialog2.default\n\t};\n\n/***/ },\n/* 272 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Refresh Schedule</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <div class=\\\"radio\\\">\\n        <label>\\n            <input type=\\\"radio\\\" value=\\\"periodic\\\" ng-model=\\\"$ctrl.refreshType\\\">\\n            <query-refresh-select refresh-type=\\\"$ctrl.refreshType\\\" query=\\\"$ctrl.query\\\" save-query=\\\"$ctrl.saveQuery\\\"></query-refresh-select>\\n        </label>\\n    </div>\\n    <div class=\\\"radio\\\">\\n        <label>\\n            <input type=\\\"radio\\\" value=\\\"daily\\\" ng-model=\\\"$ctrl.refreshType\\\">\\n            <query-time-picker refresh-type=\\\"$ctrl.refreshType\\\" query=\\\"$ctrl.query\\\" save-query=\\\"$ctrl.saveQuery\\\"></query-time-picker>\\n        </label>\\n    </div>\\n</div>\\n\"\n\n/***/ },\n/* 273 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\talertUnsavedChanges.$inject = [\"$window\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('alertUnsavedChanges', alertUnsavedChanges);\n\t};\n\t\n\tfunction alertUnsavedChanges($window) {\n\t  return {\n\t    restrict: 'E',\n\t    replace: true,\n\t    scope: {\n\t      isDirty: '='\n\t    },\n\t    link: function link($scope) {\n\t      var unloadMessage = 'You will lose your changes if you leave';\n\t      var confirmMessage = unloadMessage + '\\n\\nAre you sure you want to leave this page?';\n\t      // store original handler (if any)\n\t      var _onbeforeunload = $window.onbeforeunload;\n\t\n\t      $window.onbeforeunload = function onbeforeunload() {\n\t        return $scope.isDirty ? unloadMessage : null;\n\t      };\n\t\n\t      $scope.$on('$locationChangeStart', function (event, next, current) {\n\t        if (next.split('?')[0] === current.split('?')[0] || next.split('#')[0] === current.split('#')[0]) {\n\t          return;\n\t        }\n\t\n\t        if ($scope.isDirty && !$window.confirm(confirmMessage)) {\n\t          event.preventDefault();\n\t        }\n\t      });\n\t\n\t      $scope.$on('$destroy', function () {\n\t        $window.onbeforeunload = _onbeforeunload;\n\t      });\n\t    }\n\t  };\n\t}\n\n/***/ },\n/* 274 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tQuerySearchCtrl.$inject = [\"$location\", \"$filter\", \"currentUser\", \"Events\", \"Query\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('queriesSearchResultsPage', {\n\t    template: _queriesSearchResultsPage2.default,\n\t    controller: QuerySearchCtrl\n\t  });\n\t\n\t  return {\n\t    '/queries/search': {\n\t      template: '<queries-search-results-page></queries-search-results-page>',\n\t      reloadOnSearch: true,\n\t      title: 'Queries Search'\n\t    }\n\t  };\n\t};\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _utils = __webpack_require__(188);\n\t\n\tvar _queriesSearchResultsPage = __webpack_require__(275);\n\t\n\tvar _queriesSearchResultsPage2 = _interopRequireDefault(_queriesSearchResultsPage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction QuerySearchCtrl($location, $filter, currentUser, Events, Query) {\n\t  var _this = this;\n\t\n\t  this.term = $location.search().q;\n\t  this.paginator = new _utils.Paginator([], { itemsPerPage: 20 });\n\t\n\t  Query.search({ q: this.term, include_drafts: true }, function (results) {\n\t    var queries = results.map(function (query) {\n\t      query.created_at = (0, _moment2.default)(query.created_at);\n\t      return query;\n\t    });\n\t\n\t    _this.paginator.updateRows(queries);\n\t  });\n\t\n\t  this.search = function () {\n\t    if (!(0, _underscore.isString)(_this.term) || _this.term.trim() === '') {\n\t      _this.paginator.updateRows([]);\n\t    } else {\n\t      $location.search({ q: _this.term });\n\t    }\n\t  };\n\t\n\t  Events.record('search', 'query', '', { term: this.term });\n\t}\n\n/***/ },\n/* 275 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"container\\\">\\n    <div class=\\\"bg-white p-5 m-t-10 m-b-10\\\">\\n      <form class=\\\"form-inline\\\" role=\\\"form\\\" ng-submit=\\\"$ctrl.search()\\\">\\n          <div class=\\\"form-group\\\">\\n              <input class=\\\"form-control\\\" placeholder=\\\"Search...\\\" ng-model=\\\"$ctrl.term\\\" autofocus>\\n          </div>\\n          <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">\\n              <span class=\\\"zmdi zmdi-search\\\"></span>\\n          </button>\\n      </form>\\n    </div>\\n    <div class=\\\"bg-white\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th>Name</th>\\n            <th>Created By</th>\\n            <th>Created At</th>\\n            <th>Update Schedule</th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n          <tr ng-repeat=\\\"query in $ctrl.paginator.getPageRows()\\\">\\n            <td><a href=\\\"queries/{{query.id}}\\\">{{query.name}}</a> <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span></td>\\n            <td>{{query.user.name}}</td>\\n            <td>{{query.created_at | dateTime}}</td>\\n            <td>{{query.schedule | scheduleHumanize}}</td>\\n          </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.paginator\\\"></paginator>\\n    </div>\\n</div>\\n\"\n\n/***/ },\n/* 276 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  session.$inject = [\"$http\", \"$route\", \"Auth\"];\n\t  loadData.$inject = [\"$http\", \"$route\", \"$q\", \"Auth\"];\n\t  ngModule.component('visualizationEmbed', VisualizationEmbed);\n\t\n\t  function session($http, $route, Auth) {\n\t    'ngInject';\n\t\n\t    var apiKey = $route.current.params.api_key;\n\t    Auth.setApiKey(apiKey);\n\t    return Auth.loadConfig();\n\t  }\n\t\n\t  function loadData($http, $route, $q, Auth) {\n\t    return session($http, $route, Auth).then(function () {\n\t      var queryId = $route.current.params.queryId;\n\t      var query = $http.get('/api/queries/' + queryId).then(function (response) {\n\t        return response.data;\n\t      });\n\t      var queryResult = $http.get('/api/queries/' + queryId + '/results.json').then(function (response) {\n\t        return response.data;\n\t      });\n\t      return $q.all([query, queryResult]);\n\t    });\n\t  }\n\t\n\t  ngModule.config([\"$routeProvider\", function ($routeProvider) {\n\t    $routeProvider.when('/embed/query/:queryId/visualization/:visualizationId', {\n\t      template: '<visualization-embed data=\"$resolve.data\"></visualization-embed>',\n\t      resolve: {\n\t        data: loadData\n\t      }\n\t    });\n\t  }]);\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _visualizationEmbed = __webpack_require__(277);\n\t\n\tvar _visualizationEmbed2 = _interopRequireDefault(_visualizationEmbed);\n\t\n\tvar _redash_icon_small = __webpack_require__(222);\n\t\n\tvar _redash_icon_small2 = _interopRequireDefault(_redash_icon_small);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar VisualizationEmbed = {\n\t  template: _visualizationEmbed2.default,\n\t  bindings: {\n\t    data: '<'\n\t  },\n\t  controller: [\"$routeParams\", \"Query\", \"QueryResult\", function controller($routeParams, Query, QueryResult) {\n\t    'ngInject';\n\t\n\t    document.querySelector('body').classList.add('headless');\n\t    var visualizationId = parseInt($routeParams.visualizationId, 10);\n\t    this.showQueryDescription = $routeParams.showDescription;\n\t    this.apiKey = $routeParams.api_key;\n\t    this.logoUrl = _redash_icon_small2.default;\n\t    this.query = new Query(this.data[0]);\n\t    this.queryResult = new QueryResult(this.data[1]);\n\t    this.visualization = (0, _underscore.find)(this.query.visualizations, function (visualization) {\n\t      return visualization.id === visualizationId;\n\t    });\n\t  }]\n\t};\n\n/***/ },\n/* 277 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"tile m-10\\\">\\n  <div class=\\\"t-heading p-10\\\">\\n    <h3 class=\\\"th-title\\\">\\n      <p>\\n        <img src=\\\"{{$ctrl.logoUrl}}\\\" style=\\\"height: 24px;\\\"/>\\n        {{$ctrl.query.name}}\\n        <small><visualization-name visualization=\\\"$ctrl.visualization\\\"/></small>\\n      </p>\\n      <small ng-if=\\\"$ctrl.showQueryDescription\\\">\\n        <div class=\\\"text-muted\\\" ng-bind-html=\\\"$ctrl.query.description | markdown\\\"></div>\\n      </small>\\n    </h3>\\n  </div>\\n\\n  <visualization-renderer visualization=\\\"$ctrl.visualization\\\" query-result=\\\"$ctrl.queryResult\\\" class=\\\"t-body\\\">\\n  </visualization-renderer>\\n\\n  <div class=\\\"bg-ace clearfix p-10\\\">\\n    <div class=\\\"col-sm-6\\\">\\n      <span class=\\\"label label-default hidden-print\\\">Updated: <span am-time-ago=\\\"$ctrl.queryResult.getUpdatedAt()\\\"></span></span>\\n      <span class=\\\"label label-default visible-print\\\">Updated: {{$ctrl.queryResult.getUpdatedAt() | dateTime}}</span>\\n    </div>\\n    <div class=\\\"col-sm-6 text-right hidden-print\\\">\\n      <a class=\\\"btn btn-default btn-xs\\\" ng-href=\\\"queries/{{$ctrl.query.id}}#{{$ctrl.visualization.id}}\\\" target=\\\"_blank\\\" tooltip=\\\"Open in Redash\\\">\\n        <span class=\\\"zmdi zmdi-link\\\"></span>\\n      </a>\\n\\n      <div class=\\\"btn-group\\\" uib-dropdown>\\n        <button type=\\\"button\\\" class=\\\"btn btn-default btn-xs dropdown-toggle\\\" aria-haspopup=\\\"true\\\" uib-dropdown-toggle\\n                aria-expanded=\\\"false\\\">\\n          Download Dataset <span class=\\\"caret\\\"></span>\\n        </button>\\n        <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n          <li>\\n            <a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'csv', $ctrl.apiKey)}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'csv')}}\\\" target=\\\"_self\\\">\\n              <span class=\\\"fa fa-file-o\\\"></span> Download as CSV File\\n            </a>\\n          </li>\\n          <li>\\n            <a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'xlsx', $ctrl.apiKey)}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'xlsx')}}\\\"  target=\\\"_self\\\">\\n              <span class=\\\"fa fa-file-excel-o\\\"></span> Download as Excel File\\n            </a>\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 278 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _appHeader = __webpack_require__(279);\n\t\n\tObject.defineProperty(exports, 'appHeader', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_appHeader).default;\n\t  }\n\t});\n\t\n\tvar _footer = __webpack_require__(282);\n\t\n\tObject.defineProperty(exports, 'footer', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_footer).default;\n\t  }\n\t});\n\t\n\tvar _pageHeader = __webpack_require__(284);\n\t\n\tObject.defineProperty(exports, 'pageHeader', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_pageHeader).default;\n\t  }\n\t});\n\t\n\tvar _tabNav = __webpack_require__(286);\n\t\n\tObject.defineProperty(exports, 'tabNav', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_tabNav).default;\n\t  }\n\t});\n\t\n\tvar _emailSettingsWarning = __webpack_require__(290);\n\t\n\tObject.defineProperty(exports, 'emailSettingsWarning', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_emailSettingsWarning).default;\n\t  }\n\t});\n\t\n\tvar _rdTab = __webpack_require__(291);\n\t\n\tObject.defineProperty(exports, 'rdTab', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_rdTab).default;\n\t  }\n\t});\n\t\n\tvar _queryLink = __webpack_require__(292);\n\t\n\tObject.defineProperty(exports, 'queryLink', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_queryLink).default;\n\t  }\n\t});\n\t\n\tvar _parameters = __webpack_require__(293);\n\t\n\tObject.defineProperty(exports, 'parameters', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_parameters).default;\n\t  }\n\t});\n\t\n\tvar _permissionsEditor = __webpack_require__(296);\n\t\n\tObject.defineProperty(exports, 'permissionsEditor', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_permissionsEditor).default;\n\t  }\n\t});\n\t\n\tvar _dynamicTable = __webpack_require__(298);\n\t\n\tObject.defineProperty(exports, 'dynamicTable', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_dynamicTable).default;\n\t  }\n\t});\n\t\n\tvar _paginator = __webpack_require__(301);\n\t\n\tObject.defineProperty(exports, 'paginator', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_paginator).default;\n\t  }\n\t});\n\t\n\tvar _settingsScreen = __webpack_require__(302);\n\t\n\tObject.defineProperty(exports, 'settingsScreen', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_settingsScreen).default;\n\t  }\n\t});\n\t\n\tvar _errorMessages = __webpack_require__(304);\n\t\n\tObject.defineProperty(exports, 'errorMessages', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_errorMessages).default;\n\t  }\n\t});\n\t\n\tvar _editInPlace = __webpack_require__(305);\n\t\n\tObject.defineProperty(exports, 'editInPlace', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_editInPlace).default;\n\t  }\n\t});\n\t\n\tvar _dynamicForm = __webpack_require__(306);\n\t\n\tObject.defineProperty(exports, 'dynamicForm', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_dynamicForm).default;\n\t  }\n\t});\n\t\n\tvar _rdTimer = __webpack_require__(309);\n\t\n\tObject.defineProperty(exports, 'rdTimer', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_rdTimer).default;\n\t  }\n\t});\n\t\n\tvar _rdTimeAgo = __webpack_require__(310);\n\t\n\tObject.defineProperty(exports, 'rdTimeAgo', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_rdTimeAgo).default;\n\t  }\n\t});\n\t\n\tvar _overlay = __webpack_require__(311);\n\t\n\tObject.defineProperty(exports, 'overlay', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_overlay).default;\n\t  }\n\t});\n\t\n\tvar _routeStatus = __webpack_require__(312);\n\t\n\tObject.defineProperty(exports, 'routeStatus', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_routeStatus).default;\n\t  }\n\t});\n\t\n\tvar _filters = __webpack_require__(313);\n\t\n\tObject.defineProperty(exports, 'filters', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_filters).default;\n\t  }\n\t});\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 279 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tcontroller.$inject = [\"$rootScope\", \"$location\", \"$uibModal\", \"Auth\", \"currentUser\", \"Dashboard\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('appHeader', {\n\t    template: _appHeader2.default,\n\t    controller: controller\n\t  });\n\t};\n\t\n\tvar _debug = __webpack_require__(19);\n\t\n\tvar _debug2 = _interopRequireDefault(_debug);\n\t\n\tvar _appHeader = __webpack_require__(280);\n\t\n\tvar _appHeader2 = _interopRequireDefault(_appHeader);\n\t\n\tvar _redash_icon_small = __webpack_require__(222);\n\t\n\tvar _redash_icon_small2 = _interopRequireDefault(_redash_icon_small);\n\t\n\t__webpack_require__(281);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar logger = (0, _debug2.default)('redash:appHeader');\n\t\n\tfunction controller($rootScope, $location, $uibModal, Auth, currentUser, Dashboard) {\n\t  var _this = this;\n\t\n\t  // TODO: logoUrl should come from clientconfig\n\t  this.logoUrl = _redash_icon_small2.default;\n\t  this.currentUser = currentUser;\n\t  this.showQueriesMenu = currentUser.hasPermission('view_query');\n\t  this.showNewQueryMenu = currentUser.hasPermission('create_query');\n\t  this.showSettingsMenu = currentUser.hasPermission('list_users');\n\t  this.showDashboardsMenu = currentUser.hasPermission('list_dashboards');\n\t\n\t  this.reloadDashboards = function () {\n\t    logger('Reloading dashboards.');\n\t    _this.dashboards = Dashboard.recent();\n\t  };\n\t\n\t  this.reloadDashboards();\n\t\n\t  $rootScope.$on('reloadDashboards', this.reloadDashboards);\n\t\n\t  this.newDashboard = function () {\n\t    $uibModal.open({\n\t      component: 'editDashboardDialog',\n\t      resolve: {\n\t        dashboard: function dashboard() {\n\t          return { name: null, layout: null };\n\t        }\n\t      }\n\t    });\n\t  };\n\t\n\t  this.searchQueries = function () {\n\t    $location.path('/queries/search').search({ q: _this.term });\n\t  };\n\t\n\t  this.logout = function () {\n\t    Auth.logout();\n\t  };\n\t}\n\n/***/ },\n/* 280 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<nav class=\\\"navbar navbar-inverse navbar-fixed-top app-header\\\" role=\\\"navigation\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"navbar-header\\\">\\n      <button type=\\\"button\\\" class=\\\"navbar-toggle\\\" ng-click=\\\"isNavOpen = !isNavOpen\\\">\\n        <span class=\\\"sr-only\\\">Toggle navigation</span>\\n        <span class=\\\"icon-bar\\\"></span>\\n        <span class=\\\"icon-bar\\\"></span>\\n        <span class=\\\"icon-bar\\\"></span>\\n      </button>\\n      <a class=\\\"navbar-brand\\\" href=\\\"/\\\"><img ng-src=\\\"{{$ctrl.logoUrl}}\\\"/></a>\\n    </div>\\n    <div class=\\\"collapse navbar-collapse\\\" uib-collapse=\\\"!isNavOpen\\\">\\n      <ul class=\\\"nav navbar-nav\\\">\\n        <li class=\\\"dropdown\\\" ng-show=\\\"$ctrl.showDashboardsMenu\\\" uib-dropdown>\\n          <a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle title=\\\"Dashboards\\\">\\n            <span class=\\\"visible-xs visible-md visible-lg\\\">Dashboards <b class=\\\"caret\\\"></b></span>\\n            <span class=\\\"visible-sm\\\"><i class=\\\"zmdi zmdi-view-dashboard\\\"></i> <b class=\\\"caret\\\"></b></span>\\n          </a>\\n          <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n            <li><a ng-show=\\\"$ctrl.currentUser.hasPermission('create_dashboard')\\\" ng-click=\\\"$ctrl.newDashboard()\\\">New Dashboard</a></li>\\n            <li><a href=\\\"dashboards\\\">Dashboards</a></li>\\n            <li class=\\\"divider\\\" ng-if=\\\"$ctrl.dashboards | notEmpty\\\"></li>\\n            <li ng-repeat=\\\"dashboard in $ctrl.dashboards\\\">\\n              <a href=\\\"dashboard/{{dashboard.slug}}\\\" ng-bind=\\\"dashboard.name\\\"></a>\\n            </li>\\n          </ul>\\n        </li>\\n        <li class=\\\"dropdown\\\" ng-show=\\\"$ctrl.showQueriesMenu\\\" uib-dropdown>\\n          <a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle>Queries <b class=\\\"caret\\\"></b></a>\\n          <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n            <li ng-show=\\\"$ctrl.showNewQueryMenu\\\"><a href=\\\"queries/new\\\">New Query</a></li>\\n            <li><a href=\\\"queries\\\">Queries</a></li>\\n          </ul>\\n        </li>\\n        <li>\\n          <a href=\\\"alerts\\\">Alerts</a>\\n        </li>\\n      </ul>\\n      <form class=\\\"navbar-form navbar-left\\\" role=\\\"search\\\" ng-submit=\\\"$ctrl.searchQueries()\\\">\\n        <div class=\\\"input-group menu-search\\\">\\n          <input type=\\\"text\\\" ng-model=\\\"$ctrl.term\\\" class=\\\"form-control\\\" placeholder=\\\"Search queries...\\\">\\n          <span class=\\\"input-group-btn\\\">\\n            <button type=\\\"submit\\\" class=\\\"btn btn-default\\\"><span class=\\\"zmdi zmdi-search\\\"></span></button>\\n          </span>\\n        </div>\\n      </form>\\n      <ul class=\\\"nav navbar-nav navbar-right\\\">\\n        <li ng-show=\\\"$ctrl.currentUser.isAdmin\\\">\\n          <a href=\\\"data_sources\\\" title=\\\"Data Sources\\\"><i class=\\\"fa fa-database\\\"></i></a>\\n        </li>\\n        <li ng-show=\\\"$ctrl.showSettingsMenu\\\">\\n          <a href=\\\"users\\\" title=\\\"Settings\\\"><i class=\\\"fa fa-cog\\\"></i></a>\\n        </li>\\n        <li class=\\\"dropdown\\\" uib-dropdown>\\n          <a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle><span ng-bind=\\\"$ctrl.currentUser.name\\\"></span> <span\\n            class=\\\"caret\\\"></span></a>\\n          <ul class=\\\"dropdown-menu\\\" dropdown-menu>\\n            <li style=\\\"width:300px\\\">\\n              <a ng-href=\\\"users/{{$ctrl.currentUser.id}}\\\">\\n                <div class=\\\"row\\\">\\n                  <div class=\\\"col-sm-2\\\">\\n                    <img ng-src=\\\"{{$ctrl.currentUser.gravatar_url}}\\\" size=\\\"40px\\\" class=\\\"img-circle\\\"/>\\n                  </div>\\n                  <div class=\\\"col-sm-10\\\">\\n                    <p><strong>{{$ctrl.currentUser.name}}</strong></p>\\n                  </div>\\n                </div>\\n              </a>\\n            </li>\\n            <li class=\\\"divider\\\" ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\">\\n            <li ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\"><a href=\\\"admin/status\\\">System Status</a></li>\\n            <li class=\\\"divider\\\">\\n            </li>\\n            <li>\\n              <a ng-click=\\\"$ctrl.logout()\\\">Log out</a>\\n            </li>\\n          </ul>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</nav>\\n\"\n\n/***/ },\n/* 281 */\n1,\n/* 282 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tcontroller.$inject = [\"clientConfig\", \"currentUser\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('footer', {\n\t    template: _footer2.default,\n\t    controller: controller\n\t  });\n\t};\n\t\n\tvar _footer = __webpack_require__(283);\n\t\n\tvar _footer2 = _interopRequireDefault(_footer);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction controller(clientConfig, currentUser) {\n\t  this.version = clientConfig.version;\n\t  this.newVersionAvailable = clientConfig.newVersionAvailable && currentUser.isAdmin;\n\t}\n\n/***/ },\n/* 283 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div id=\\\"footer\\\">\\n    <a href=\\\"http://redash.io\\\">Redash</a> <span ng-bind=\\\"$ctrl.version\\\"></span> <small ng-if=\\\"$ctrl.newVersionAvailable\\\" ng-cloak class=\\\"ng-cloak\\\"><a href=\\\"https://version.redash.io/\\\">(New Redash version available)</a></small>\\n\\n    <ul class=\\\"f-menu\\\">\\n        <li><a href=\\\"https://redash.io/help/\\\">Documentation</a></li>\\n        <li><a href=\\\"http://github.com/getredash/redash\\\">Contribute</a></li>\\n    </ul>\\n</div>\\n\"\n\n/***/ },\n/* 284 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('pageHeader', {\n\t    template: _pageHeader2.default,\n\t    controller: controller,\n\t    transclude: true,\n\t    bindings: {\n\t      title: '@'\n\t    }\n\t  });\n\t};\n\t\n\tvar _pageHeader = __webpack_require__(285);\n\t\n\tvar _pageHeader2 = _interopRequireDefault(_pageHeader);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction controller() {}\n\n/***/ },\n/* 285 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"row bg-white p-10 p-l-15 p-r-15 m-b-10\\\">\\n  <div class=\\\"col-sm-9\\\">\\n    <h3>{{$ctrl.title}}</h3>\\n  </div>\\n  <div class=\\\"col-sm-3 text-right\\\">\\n    <h3 ng-transclude>\\n    </h3>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 286 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tcontroller.$inject = [\"$location\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('tabNav', {\n\t    template: '<ul class=\"tab-nav bg-white\">' + '<li ng-repeat=\"tab in $ctrl.tabs\" ng-class=\"{\\'active\\': tab.active }\"><a ng-href=\"{{tab.path}}\">{{tab.name}}</a></li>' + '</ul>',\n\t    controller: controller,\n\t    bindings: {\n\t      tabs: '<'\n\t    }\n\t  });\n\t};\n\t\n\tvar _startsWith = __webpack_require__(287);\n\t\n\tvar _startsWith2 = _interopRequireDefault(_startsWith);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction controller($location) {\n\t  this.tabs.forEach(function (tab) {\n\t    if (tab.isActive) {\n\t      tab.active = tab.isActive($location.path());\n\t    } else {\n\t      tab.active = (0, _startsWith2.default)($location.path(), '/' + tab.path);\n\t    }\n\t  });\n\t}\n\n/***/ },\n/* 287 */,\n/* 288 */,\n/* 289 */,\n/* 290 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tcontroller.$inject = [\"clientConfig\", \"currentUser\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('emailSettingsWarning', {\n\t    bindings: {\n\t      function: '<'\n\t    },\n\t    template: '<p class=\"alert alert-danger\" ng-if=\"$ctrl.showMailWarning\">It looks like your mail server isn\\'t configured. Make sure to configure it for the {{$ctrl.function}} to work.</p>',\n\t    controller: controller\n\t  });\n\t};\n\t\n\tfunction controller(clientConfig, currentUser) {\n\t  this.showMailWarning = clientConfig.mailSettingsMissing && currentUser.isAdmin;\n\t}\n\n/***/ },\n/* 291 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\trdTab.$inject = [\"$location\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('rdTab', rdTab);\n\t};\n\t\n\tfunction rdTab($location) {\n\t  return {\n\t    restrict: 'E',\n\t    scope: {\n\t      tabId: '@',\n\t      name: '@',\n\t      basePath: '=?'\n\t    },\n\t    transclude: true,\n\t    template: '<li class=\"rd-tab\" ng-class=\"{active: tabId==selectedTab}\"><a href=\"{{basePath}}#{{tabId}}\">{{name}}<span ng-transclude></span></a></li>',\n\t    replace: true,\n\t    link: function link(scope) {\n\t      scope.basePath = scope.basePath || $location.path().substring(1);\n\t      scope.$watch(function () {\n\t        return scope.$parent.selectedTab;\n\t      }, function (tab) {\n\t        scope.selectedTab = tab;\n\t      });\n\t    }\n\t  };\n\t}\n\n/***/ },\n/* 292 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('queryLink', {\n\t    bindings: {\n\t      query: '<',\n\t      visualization: '<'\n\t    },\n\t    template: '<a ng-href=\"{{$ctrl.link}}\" class=\"query-link\">{{$ctrl.query.name}}</a>',\n\t    controller: QueryLinkController\n\t  });\n\t};\n\t\n\tfunction QueryLinkController() {\n\t  var hash = null;\n\t  if (this.visualization) {\n\t    if (this.visualization.type === 'TABLE') {\n\t      // link to hard-coded table tab instead of the (hidden) visualization tab\n\t      hash = 'table';\n\t    } else {\n\t      hash = this.visualization.id;\n\t    }\n\t  }\n\t\n\t  this.link = this.query.getUrl(false, hash);\n\t}\n\n/***/ },\n/* 293 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tParametersDirective.$inject = [\"$location\", \"$uibModal\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('parameters', ParametersDirective);\n\t  ngModule.component('parameterSettings', ParameterSettingsComponent);\n\t};\n\t\n\tvar _parameters = __webpack_require__(294);\n\t\n\tvar _parameters2 = _interopRequireDefault(_parameters);\n\t\n\tvar _parameterSettings = __webpack_require__(295);\n\t\n\tvar _parameterSettings2 = _interopRequireDefault(_parameterSettings);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar ParameterSettingsComponent = {\n\t  template: _parameterSettings2.default,\n\t  bindings: {\n\t    resolve: '<',\n\t    close: '&',\n\t    dismiss: '&'\n\t  },\n\t  controller: function controller() {\n\t    'ngInject';\n\t\n\t    this.parameter = this.resolve.parameter;\n\t  }\n\t};\n\t\n\tfunction ParametersDirective($location, $uibModal) {\n\t  return {\n\t    restrict: 'E',\n\t    transclude: true,\n\t    scope: {\n\t      parameters: '=',\n\t      syncValues: '=?',\n\t      editable: '=?',\n\t      changed: '&onChange'\n\t    },\n\t    template: _parameters2.default,\n\t    link: function link(scope) {\n\t      // is this the correct location for this logic?\n\t      if (scope.syncValues !== false) {\n\t        scope.$watch('parameters', function () {\n\t          if (scope.changed) {\n\t            scope.changed({});\n\t          }\n\t          scope.parameters.forEach(function (param) {\n\t            if (param.value !== null || param.value !== '') {\n\t              $location.search('p_' + param.name, param.value);\n\t            }\n\t          });\n\t        }, true);\n\t      }\n\t\n\t      scope.showParameterSettings = function (param) {\n\t        $uibModal.open({\n\t          component: 'parameterSettings',\n\t          resolve: {\n\t            parameter: param\n\t          }\n\t        });\n\t      };\n\t    }\n\t  };\n\t}\n\n/***/ },\n/* 294 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-inline bg-white p-5\\\" ng-if=\\\"parameters | notEmpty\\\" ui-sortable=\\\"{ 'ui-floating': true, 'disabled': !editable }\\\" ng-model=\\\"parameters\\\">\\n  <div class=\\\"form-group\\\" ng-repeat=\\\"param in parameters\\\">\\n    <label>{{param.title}}</label>\\n    <button class=\\\"btn btn-default btn-xs\\\" ng-click=\\\"showParameterSettings(param)\\\" ng-if=\\\"editable\\\"><i class=\\\"zmdi zmdi-settings\\\"></i></button>\\n    <span ng-switch=\\\"param.type\\\">\\n      <input ng-switch-when=\\\"datetime-with-seconds\\\" type=\\\"datetime-local\\\" step=\\\"1\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n      <input ng-switch-when=\\\"datetime-local\\\" type=\\\"datetime-local\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n      <input ng-switch-when=\\\"date\\\" type=\\\"date\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n      <input ng-switch-default type=\\\"{{param.type}}\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n    </span>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 295 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">{{$ctrl.parameter.name}}</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <div class=\\\"form\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>Title</label>\\n        <input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.parameter.title\\\">\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>Type</label>\\n        <select ng-model=\\\"$ctrl.parameter.type\\\" class=\\\"form-control\\\">\\n          <option value=\\\"text\\\">Text</option>\\n          <option value=\\\"number\\\">Number</option>\\n          <option value=\\\"date\\\">Date</option>\\n          <option value=\\\"datetime-local\\\">Date and Time</option>\\n          <option value=\\\"datetime-with-seconds\\\">Date and Time (with seconds)</option>\\n        </select>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>Global</label>\\n        <input type=\\\"checkbox\\\" class=\\\"form-inline\\\" ng-model=\\\"$ctrl.parameter.global\\\">\\n      </div>\\n    </div>\\n</div>\\n\"\n\n/***/ },\n/* 296 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('permissionsEditor', PermissionsEditorComponent);\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _permissionsEditor = __webpack_require__(297);\n\t\n\tvar _permissionsEditor2 = _interopRequireDefault(_permissionsEditor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar PermissionsEditorComponent = {\n\t  template: _permissionsEditor2.default,\n\t  bindings: {\n\t    resolve: '<',\n\t    close: '&',\n\t    dismiss: '&'\n\t  },\n\t  controller: [\"$http\", \"User\", function controller($http, User) {\n\t    'ngInject';\n\t\n\t    var _this = this;\n\t\n\t    this.grantees = [];\n\t    this.newGrantees = {};\n\t    this.aclUrl = this.resolve.aclUrl.url;\n\t\n\t    // List users that are granted permissions\n\t    var loadGrantees = function loadGrantees() {\n\t      $http.get(_this.aclUrl).success(function (result) {\n\t        _this.grantees = [];\n\t\n\t        (0, _underscore.each)(result, function (grantees, accessType) {\n\t          grantees.forEach(function (grantee) {\n\t            grantee.access_type = accessType;\n\t            _this.grantees.push(grantee);\n\t          });\n\t        });\n\t      });\n\t    };\n\t\n\t    loadGrantees();\n\t\n\t    // Search for user\n\t    this.findUser = function (search) {\n\t      if (search === '') {\n\t        return;\n\t      }\n\t\n\t      if (_this.foundUsers === undefined) {\n\t        User.query(function (users) {\n\t          var existingIds = _this.grantees.map(function (m) {\n\t            return m.id;\n\t          });\n\t          users.forEach(function (user) {\n\t            user.alreadyGrantee = (0, _underscore.contains)(existingIds, user.id);\n\t          });\n\t          _this.foundUsers = users;\n\t        });\n\t      }\n\t    };\n\t\n\t    // Add new user to grantees list\n\t    this.addGrantee = function (user) {\n\t      _this.newGrantees.selected = undefined;\n\t      var body = { access_type: 'modify', user_id: user.id };\n\t      $http.post(_this.aclUrl, body).success(function () {\n\t        user.alreadyGrantee = true;\n\t        loadGrantees();\n\t      });\n\t    };\n\t\n\t    // Remove user from grantees list\n\t    this.removeGrantee = function (user) {\n\t      var body = { access_type: 'modify', user_id: user.id };\n\t      $http({ url: _this.aclUrl,\n\t        method: 'DELETE',\n\t        data: body,\n\t        headers: { 'Content-Type': 'application/json' }\n\t      }).success(function () {\n\t        _this.grantees = _this.grantees.filter(function (m) {\n\t          return m !== user;\n\t        });\n\t\n\t        if (_this.foundUsers) {\n\t          _this.foundUsers.forEach(function (u) {\n\t            if (u.id === user.id) {\n\t              u.alreadyGrantee = false;\n\t            }\n\t          });\n\t        }\n\t      });\n\t    };\n\t  }]\n\t};\n\n/***/ },\n/* 297 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Manage Permissions</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div style=\\\"overflow: auto; height: 300px\\\">\\n    <ui-select ng-model=\\\"$ctrl.newGrantee.selected\\\" on-select=\\\"$ctrl.addGrantee($item)\\\">\\n       <ui-select-match placeholder=\\\"Add New User\\\"></ui-select-match>\\n       <ui-select-choices repeat=\\\"user in $ctrl.foundUsers | filter:$select.search\\\"\\n                         refresh=\\\"$ctrl.findUser($select.search)\\\"\\n                         refresh-delay=\\\"0\\\"\\n                         ui-disable-choice=\\\"user.alreadyGrantee\\\">\\n        <div>\\n          <img ng-src=\\\"{{user.gravatar_url}}\\\" height=\\\"24px\\\">&nbsp;{{user.name}}\\n          <small ng-if=\\\"user.alreadyGrantee\\\">(already has permission)</small>\\n        </div>\\n       </ui-select-choices>\\n    </ui-select>\\n      <br/>\\n       <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th></th>\\n            <th>User</th>\\n            <th>Permission</th>\\n            <th></th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"grantee in $ctrl.grantees\\\">\\n          <td width=\\\"50px\\\"><img ng-src=\\\"{{grantee.gravatar_url}}\\\" height=\\\"40px\\\"/></td>\\n          <td>{{grantee.name}} </td>\\n          <td>{{grantee.access_type}}</td>\\n          <td><button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"$ctrl.removeGrantee(grantee)\\\">Remove</button></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n    </div>\\n  </div>\\n\"\n\n/***/ },\n/* 298 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tDynamicTable.$inject = [\"$sanitize\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('dynamicTable', {\n\t    template: _dynamicTable2.default,\n\t    controller: DynamicTable,\n\t    bindings: {\n\t      rows: '<',\n\t      columns: '<',\n\t      count: '<'\n\t    }\n\t  });\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _dynamicTable = __webpack_require__(299);\n\t\n\tvar _dynamicTable2 = _interopRequireDefault(_dynamicTable);\n\t\n\t__webpack_require__(300);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction DynamicTable($sanitize) {\n\t  'ngInject';\n\t\n\t  var _this = this;\n\t\n\t  this.itemsPerPage = this.count = 15;\n\t  this.page = 1;\n\t  this.rowsCount = 0;\n\t  this.orderByField = undefined;\n\t  this.orderByReverse = false;\n\t\n\t  this.pageChanged = function () {\n\t    var first = _this.count * (_this.page - 1);\n\t    var last = _this.count * _this.page;\n\t\n\t    _this.rows = _this.allRows.slice(first, last);\n\t  };\n\t\n\t  this.$onChanges = function (changes) {\n\t    if (changes.columns) {\n\t      _this.columns = changes.columns.currentValue;\n\t    }\n\t\n\t    if (changes.rows) {\n\t      _this.allRows = changes.rows.currentValue;\n\t    }\n\t\n\t    _this.rowsCount = _this.allRows.length;\n\t\n\t    _this.pageChanged();\n\t  };\n\t\n\t  this.orderBy = function (column) {\n\t    if (column === _this.orderByField) {\n\t      _this.orderByReverse = !_this.orderByReverse;\n\t    } else {\n\t      _this.orderByField = column;\n\t      _this.orderByReverse = false;\n\t    }\n\t\n\t    if (_this.orderByField) {\n\t      _this.allRows = (0, _underscore.sortBy)(_this.allRows, _this.orderByField.name);\n\t      if (_this.orderByReverse) {\n\t        _this.allRows = _this.allRows.reverse();\n\t      }\n\t      _this.pageChanged();\n\t    }\n\t  };\n\t\n\t  this.sanitize = function (value) {\n\t    return $sanitize(value);\n\t  };\n\t\n\t  this.sortIcon = function (column) {\n\t    if (column !== _this.orderByField) {\n\t      return null;\n\t    }\n\t\n\t    if (_this.orderByReverse) {\n\t      return 'desc';\n\t    }\n\t\n\t    return 'asc';\n\t  };\n\t}\n\n/***/ },\n/* 299 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div>\\n  <table class=\\\"table table-condensed table-hover\\\">\\n    <thead>\\n    <tr>\\n      <th ng-repeat=\\\"column in $ctrl.columns\\\" ng-click=\\\"$ctrl.orderBy(column)\\\" class=\\\"sortable-column\\\">\\n        {{column.title}} <span ng-if=\\\"$ctrl.sortIcon(column)\\\"><i class=\\\"fa fa-sort-{{$ctrl.sortIcon(column)}}\\\"></i></span>\\n      </th>\\n    </tr>\\n\\n    </thead>\\n    <tbody>\\n    <tr ng-repeat=\\\"row in $ctrl.rows\\\">\\n      <td ng-repeat=\\\"column in $ctrl.columns\\\" ng-bind-html=\\\"$ctrl.sanitize(column.formatFunction(row[column.name]))\\\">\\n      </td>\\n    </tr>\\n    </tbody>\\n  </table>\\n</div>\\n<div class=\\\"text-center\\\">\\n  <ul uib-pagination total-items=\\\"$ctrl.rowsCount\\\"\\n      items-per-page=\\\"$ctrl.itemsPerPage\\\"\\n      ng-model=\\\"$ctrl.page\\\"\\n      max-size=\\\"6\\\"\\n      class=\\\"pagination\\\"\\n      boundary-link-numbers=\\\"true\\\"\\n      rotate=\\\"false\\\"\\n      next-text='>'\\n      previous-text='<'\\n      ng-change=\\\"$ctrl.pageChanged()\\\"></ul>\\n</div>\\n\"\n\n/***/ },\n/* 300 */\n1,\n/* 301 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('paginator', {\n\t    template: '\\n<div class=\"text-center\">\\n  <ul uib-pagination total-items=\"$ctrl.paginator.totalCount\"\\n                     items-per-page=\"$ctrl.paginator.itemsPerPage\"\\n                     ng-model=\"$ctrl.page\"\\n                     max-size=\"6\"\\n                     class=\"pagination\"\\n                     boundary-link-numbers=\"true\"\\n                     rotate=\"false\"\\n                     next-text=\\'>\\'\\n                     previous-text=\\'<\\'\\n                     ng-change=\"$ctrl.pageChanged()\"></ul>\\n</div>\\n    ',\n\t    bindings: {\n\t      paginator: '<'\n\t    },\n\t    controller: PaginatorCtrl\n\t  });\n\t};\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar PaginatorCtrl = function () {\n\t  function PaginatorCtrl() {\n\t    _classCallCheck(this, PaginatorCtrl);\n\t\n\t    this.page = this.paginator.page;\n\t  }\n\t\n\t  _createClass(PaginatorCtrl, [{\n\t    key: 'pageChanged',\n\t    value: function pageChanged() {\n\t      this.paginator.setPage(this.page);\n\t    }\n\t  }]);\n\n\t  return PaginatorCtrl;\n\t}();\n\n/***/ },\n/* 302 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('settingsScreen', [\"$location\", function ($location) {\n\t    return {\n\t      restrict: 'E',\n\t      transclude: true,\n\t      template: _settingsScreen2.default,\n\t      controller: [\"$scope\", \"currentUser\", function controller($scope, currentUser) {\n\t        $scope.usersPage = (0, _startsWith2.default)($location.path(), '/users');\n\t        $scope.groupsPage = (0, _startsWith2.default)($location.path(), '/groups');\n\t        $scope.dsPage = (0, _startsWith2.default)($location.path(), '/data_sources');\n\t        $scope.destinationsPage = (0, _startsWith2.default)($location.path(), '/destinations');\n\t        $scope.snippetsPage = (0, _startsWith2.default)($location.path(), '/query_snippets');\n\t\n\t        $scope.showGroupsLink = currentUser.hasPermission('list_users');\n\t        $scope.showUsersLink = currentUser.hasPermission('list_users');\n\t        $scope.showDsLink = currentUser.hasPermission('admin');\n\t        $scope.showDestinationsLink = currentUser.hasPermission('admin');\n\t      }]\n\t    };\n\t  }]);\n\t};\n\t\n\tvar _startsWith = __webpack_require__(287);\n\t\n\tvar _startsWith2 = _interopRequireDefault(_startsWith);\n\t\n\tvar _settingsScreen = __webpack_require__(303);\n\t\n\tvar _settingsScreen2 = _interopRequireDefault(_settingsScreen);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 303 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<page-header title=\\\"Settings\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li ng-class=\\\"{'active': dsPage }\\\" ng-if=\\\"showDsLink\\\"><a href=\\\"data_sources\\\">Data Sources</a></li>\\n      <li ng-class=\\\"{'active': usersPage }\\\" ng-if=\\\"showUsersLink\\\"><a href=\\\"users\\\">Users</a></li>\\n      <li ng-class=\\\"{'active': groupsPage }\\\" ng-if=\\\"showGroupsLink\\\"><a href=\\\"groups\\\">Groups</a></li>\\n      <li ng-class=\\\"{'active': destinationsPage }\\\" ng-if=\\\"showDestinationsLink\\\"><a href=\\\"destinations\\\">Alert Destinations</a></li>\\n      <li ng-class=\\\"{'active': snippetsPage }\\\"><a href=\\\"query_snippets\\\">Query Snippets</a></li>\\n    </ul>\\n\\n    <div ng-transclude>\\n\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 304 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('errorMessages', ErrorMessagesComponent);\n\t};\n\t\n\tvar ErrorMessagesComponent = {\n\t  template: '\\n  <div class=\"help-block\" ng-messages=\"$ctrl.input.$error\" ng-show=\"$ctrl.input.$touched || $ctrl.form.$submitted\">\\n    <span class=\"error\" ng-message=\"required\">This field is required.</span>\\n    <span class=\"error\" ng-message=\"minlength\">This field is too short.</span>\\n    <span class=\"error\" ng-message=\"email\">This needs to be a valid email.</span>\\n  </div>\\n  ',\n\t  replace: true,\n\t  bindings: {\n\t    input: '<',\n\t    form: '<'\n\t  },\n\t  controller: function controller() {}\n\t};\n\n/***/ },\n/* 305 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('editInPlace', EditInPlace);\n\t};\n\t\n\tvar _jquery = __webpack_require__(157);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// From: http://jsfiddle.net/joshdmiller/NDFHg/\n\tfunction EditInPlace() {\n\t  return {\n\t    restrict: 'E',\n\t    scope: {\n\t      value: '=',\n\t      ignoreBlanks: '=',\n\t      editable: '=',\n\t      done: '='\n\t    },\n\t    template: function template(tElement, tAttrs) {\n\t      var elType = tAttrs.editor || 'input';\n\t      var placeholder = tAttrs.placeholder || 'Click to edit';\n\t\n\t      var viewMode = '';\n\t\n\t      if (tAttrs.markdown === 'true') {\n\t        viewMode = '<span ng-click=\"editable && edit()\" ng-bind-html=\"value|markdown\" ng-class=\"{editable: editable}\"></span>';\n\t      } else {\n\t        viewMode = '<span ng-click=\"editable && edit()\" ng-bind=\"value\" ng-class=\"{editable: editable}\"></span>';\n\t      }\n\t\n\t      var placeholderSpan = '<span ng-click=\"editable && edit()\"\\n                                     ng-show=\"editable && !value\"\\n                                     ng-class=\"{editable: editable}\">' + placeholder + '</span>';\n\t      var editor = '<{elType} ng-model=\"value\" class=\"rd-form-control\"></{elType}>'.replace('{elType}', elType);\n\t\n\t      return viewMode + placeholderSpan + editor;\n\t    },\n\t    link: function link($scope, element) {\n\t      // Let's get a reference to the input element, as we'll want to reference it.\n\t      var inputElement = (0, _jquery2.default)(element.children()[2]);\n\t\n\t      // This directive should have a set class so we can style it.\n\t      element.addClass('edit-in-place');\n\t\n\t      // Initially, we're not editing.\n\t      $scope.editing = false;\n\t\n\t      // ng-click handler to activate edit-in-place\n\t      $scope.edit = function () {\n\t        $scope.oldValue = $scope.value;\n\t\n\t        $scope.editing = true;\n\t\n\t        // We control display through a class on the directive itself. See the CSS.\n\t        element.addClass('active');\n\t\n\t        // And we must focus the element.\n\t        // `angular.element()` provides a chainable array, like jQuery so to access\n\t        // a native DOM function, we have to reference the first element in the array.\n\t        inputElement[0].focus();\n\t      };\n\t\n\t      function save() {\n\t        if ($scope.editing) {\n\t          if ($scope.ignoreBlanks && (0, _underscore.isEmpty)($scope.value)) {\n\t            $scope.value = $scope.oldValue;\n\t          }\n\t          $scope.editing = false;\n\t          element.removeClass('active');\n\t\n\t          if ($scope.value !== $scope.oldValue) {\n\t            if ($scope.done) {\n\t              $scope.done();\n\t            }\n\t          }\n\t        }\n\t      }\n\t\n\t      (0, _jquery2.default)(inputElement).keydown(function (e) {\n\t        // 'return' or 'enter' key pressed\n\t        // allow 'shift' to break lines\n\t        if (e.which === 13 && !e.shiftKey) {\n\t          save();\n\t        } else if (e.which === 27) {\n\t          $scope.value = $scope.oldValue;\n\t          $scope.$apply(function () {\n\t            (0, _jquery2.default)(inputElement[0]).blur();\n\t          });\n\t        }\n\t      }).blur(function () {\n\t        save();\n\t      });\n\t    }\n\t  };\n\t}\n\n/***/ },\n/* 306 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tDynamicForm.$inject = [\"$http\", \"toastr\", \"$q\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('dynamicForm', DynamicForm);\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _endsWith = __webpack_require__(307);\n\t\n\tvar _endsWith2 = _interopRequireDefault(_endsWith);\n\t\n\tvar _dynamicForm = __webpack_require__(308);\n\t\n\tvar _dynamicForm2 = _interopRequireDefault(_dynamicForm);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction DynamicForm($http, toastr, $q) {\n\t  return {\n\t    restrict: 'E',\n\t    replace: 'true',\n\t    transclude: true,\n\t    template: _dynamicForm2.default,\n\t    scope: {\n\t      target: '=',\n\t      type: '@type',\n\t      actions: '='\n\t    },\n\t    link: function link($scope) {\n\t      function setType(types) {\n\t        if ($scope.target.type === undefined) {\n\t          $scope.target.type = types[0].type;\n\t        }\n\t\n\t        $scope.type = (0, _underscore.find)(types, function (t) {\n\t          return t.type === $scope.target.type;\n\t        });\n\t      }\n\t\n\t      $scope.inProgressActions = {};\n\t      if ($scope.actions) {\n\t        $scope.actions.forEach(function (action) {\n\t          var originalCallback = action.callback;\n\t          var name = action.name;\n\t          action.callback = function () {\n\t            action.name = '<i class=\"zmdi zmdi-spinner zmdi-hc-spin\"></i> ' + name;\n\t\n\t            $scope.inProgressActions[action.name] = true;\n\t            function release() {\n\t              $scope.inProgressActions[action.name] = false;\n\t              action.name = name;\n\t            }\n\t            originalCallback(release);\n\t          };\n\t        });\n\t      }\n\t\n\t      $scope.files = {};\n\t\n\t      $scope.$watchCollection('files', function () {\n\t        (0, _underscore.each)($scope.files, function (v, k) {\n\t          // THis is needed because angular-base64-upload sets the value to null at initialization,\n\t          // causing the field to be marked as dirty even if it wasn't changed.\n\t          if (!v && $scope.target.options[k]) {\n\t            $scope.dataSourceForm.$setPristine();\n\t          }\n\t          if (v) {\n\t            $scope.target.options[k] = v.base64;\n\t          }\n\t        });\n\t      });\n\t\n\t      var typesPromise = $http.get('api/' + $scope.type + '/types');\n\t\n\t      $q.all([typesPromise, $scope.target.$promise]).then(function (responses) {\n\t        var types = responses[0].data;\n\t        setType(types);\n\t\n\t        $scope.types = types;\n\t\n\t        types.forEach(function (type) {\n\t          (0, _underscore.each)(type.configuration_schema.properties, function (prop, name) {\n\t            if (name === 'password' || name === 'passwd') {\n\t              prop.type = 'password';\n\t            }\n\t\n\t            if ((0, _endsWith2.default)(name, 'File')) {\n\t              prop.type = 'file';\n\t            }\n\t\n\t            if (prop.type === 'boolean') {\n\t              prop.type = 'checkbox';\n\t            }\n\t\n\t            prop.required = (0, _underscore.contains)(type.configuration_schema.required, name);\n\t          });\n\t        });\n\t      });\n\t\n\t      $scope.$watch('target.type', function (current, prev) {\n\t        if (prev !== current) {\n\t          if (prev !== undefined) {\n\t            $scope.target.options = {};\n\t          }\n\t          setType($scope.types);\n\t        }\n\t      });\n\t\n\t      $scope.saveChanges = function () {\n\t        $scope.target.$save(function () {\n\t          toastr.success('Saved.');\n\t          $scope.dataSourceForm.$setPristine();\n\t        }, function () {\n\t          toastr.error('Failed saving.');\n\t        });\n\t      };\n\t    }\n\t  };\n\t}\n\n/***/ },\n/* 307 */,\n/* 308 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<form name=\\\"dataSourceForm\\\">\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"dataSourceName\\\">Name</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" name=\\\"dataSourceName\\\" ng-model=\\\"target.name\\\" required>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"type\\\">Type</label>\\n        <select name=\\\"type\\\" class=\\\"form-control\\\" ng-options=\\\"type.type as type.name for type in types\\\" ng-model=\\\"target.type\\\"></select>\\n    </div>\\n    <div class=\\\"form-group\\\" ng-class='{\\\"has-error\\\": !inner.input.$valid}' ng-form=\\\"inner\\\" ng-repeat=\\\"(name, input) in type.configuration_schema.properties\\\">\\n        <label ng-if=\\\"input.type !== 'checkbox'\\\">{{input.title || name | capitalize}}</label>\\n        <input name=\\\"input\\\" type=\\\"{{input.type}}\\\" class=\\\"form-control\\\" ng-model=\\\"target.options[name]\\\" ng-required=\\\"input.required\\\"\\n                ng-if=\\\"input.type !== 'file' && input.type !== 'checkbox'\\\" accesskey=\\\"tab\\\" placeholder=\\\"{{input.default}}\\\">\\n\\n        <label ng-if=\\\"input.type=='checkbox'\\\">\\n          <input name=\\\"input\\\" type=\\\"{{input.type}}\\\" ng-model=\\\"target.options[name]\\\" ng-required=\\\"input.required\\\"\\n                  ng-if=\\\"input.type !== 'file'\\\" accesskey=\\\"tab\\\" placeholder=\\\"{{input.default}}\\\">\\n          {{input.title || name | capitalize}}\\n        </label>\\n\\n        <input name=\\\"input\\\" type=\\\"file\\\" class=\\\"form-control\\\" ng-model=\\\"files[name]\\\" ng-required=\\\"input.required && !target.options[name]\\\"\\n               base-sixty-four-input\\n               ng-if=\\\"input.type === 'file'\\\">\\n    </div>\\n    <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!dataSourceForm.$valid\\\" ng-click=\\\"saveChanges()\\\">Save</button>\\n    <span ng-repeat=\\\"action in actions\\\">\\n        <button class=\\\"btn\\\"\\n                ng-class=\\\"action.class\\\"\\n                ng-if=\\\"target.id\\\"\\n                ng-disabled=\\\"(action.disableWhenDirty && dataSourceForm.$dirty) || inProgressActions[action.name]\\\"\\n                ng-click=\\\"action.callback()\\\" ng-bind-html=\\\"action.name\\\"></button>\\n    </span>\\n\\n    <span ng-transclude>\\n\\n    </span>\\n</form>\\n\"\n\n/***/ },\n/* 309 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('rdTimer', rdTimer);\n\t};\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction rdTimer() {\n\t  return {\n\t    restrict: 'E',\n\t    scope: { timestamp: '=' },\n\t    template: '{{currentTime}}',\n\t    controller: [\"$scope\", function controller($scope) {\n\t      $scope.currentTime = '00:00:00';\n\t\n\t      // We're using setInterval directly instead of $timeout, to avoid using $apply, to\n\t      // prevent the digest loop being run every second.\n\t      var currentTimer = setInterval(function () {\n\t        $scope.currentTime = (0, _moment2.default)((0, _moment2.default)() - (0, _moment2.default)($scope.timestamp)).utc().format('HH:mm:ss');\n\t        $scope.$digest();\n\t      }, 1000);\n\t\n\t      $scope.$on('$destroy', function () {\n\t        if (currentTimer) {\n\t          clearInterval(currentTimer);\n\t          currentTimer = null;\n\t        }\n\t      });\n\t    }]\n\t  };\n\t}\n\n/***/ },\n/* 310 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('rdTimeAgo', RdTimeAgo);\n\t};\n\t\n\tvar RdTimeAgo = {\n\t  bindings: {\n\t    value: '='\n\t  },\n\t  controller: function controller() {},\n\t\n\t  template: '<span>' + '<span ng-show=\"$ctrl.value\" am-time-ago=\"$ctrl.value\"></span>' + '<span ng-hide=\"$ctrl.value\">-</span>' + '</span>'\n\t};\n\n/***/ },\n/* 311 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('overlay', Overlay);\n\t};\n\t\n\tvar Overlay = {\n\t  template: '\\n  <div>\\n    <div class=\"overlay\"></div>\\n    <div style=\"width: 100%; position:absolute; top:50px; z-index:2000\">\\n      <div class=\"well well-lg\" style=\"width: 70%; margin: auto;\" ng-transclude>\\n      </div>\\n    </div>\\n  </div>\\n  ',\n\t  transclude: true\n\t};\n\n/***/ },\n/* 312 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('routeStatus', {\n\t    template: '<overlay ng-if=\"$ctrl.permissionDenied\">You do not have permission to load this page.',\n\t\n\t    controller: [\"$rootScope\", function controller($rootScope) {\n\t      var _this = this;\n\t\n\t      this.permissionDenied = false;\n\t\n\t      $rootScope.$on('$routeChangeSuccess', function () {\n\t        _this.permissionDenied = false;\n\t      });\n\t\n\t      $rootScope.$on('$routeChangeError', function (event, current, previous, rejection) {\n\t        if (rejection.status === 403) {\n\t          _this.permissionDenied = true;\n\t        }\n\t      });\n\t    }]\n\t  });\n\t};\n\n/***/ },\n/* 313 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('filters', FiltersComponent);\n\t};\n\t\n\tvar _filters = __webpack_require__(314);\n\t\n\tvar _filters2 = _interopRequireDefault(_filters);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar FiltersComponent = {\n\t  template: _filters2.default,\n\t  bindings: {\n\t    onChange: '&',\n\t    filters: '<'\n\t  },\n\t  controller: function controller() {\n\t    'ngInject';\n\t\n\t    var _this = this;\n\t\n\t    this.filterChangeListener = function (filter, modal) {\n\t      _this.onChange({ filter: filter, $modal: modal });\n\t    };\n\t  }\n\t};\n\n/***/ },\n/* 314 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"container bg-white p-5\\\" ng-show=\\\"$ctrl.filters | notEmpty\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-sm-6 m-t-5\\\" ng-repeat=\\\"filter in $ctrl.filters\\\">\\n      <ui-select ng-model=\\\"filter.current\\\" ng-if=\\\"!filter.multiple\\\" on-select=\\\"$ctrl.filterChangeListener(filter, $model)\\\" on-remove=\\\"$ctrl.filterChangeListener(filter, $model)\\\">\\n        <ui-select-match placeholder=\\\"Select value for {{filter.friendlyName}}...\\\">{{filter.friendlyName}}: {{$select.selected | filterValue:filter}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"value in filter.values | filter: $select.search\\\">\\n          {{value | filterValue:filter }}\\n        </ui-select-choices>\\n      </ui-select>\\n\\n      <ui-select ng-model=\\\"filter.current\\\" multiple ng-if=\\\"filter.multiple\\\" on-select=\\\"$ctrl.filterChangeListener(filter, $model)\\\" on-remove=\\\"$ctrl.filterChangeListener(filter, $model)\\\">\\n        <ui-select-match placeholder=\\\"Select value for {{filter.friendlyName}}...\\\">{{filter.friendlyName}}: {{$item | filterValue:filter}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"value in filter.values | filter: $select.search\\\">\\n          {{value | filterValue:filter }}\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n</div>\\n\\n\"\n\n/***/ },\n/* 315 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.durationHumanize = durationHumanize;\n\texports.scheduleHumanize = scheduleHumanize;\n\texports.toHuman = toHuman;\n\texports.colWidth = colWidth;\n\texports.capitalize = capitalize;\n\texports.linkify = linkify;\n\texports.remove = remove;\n\texports.notEmpty = notEmpty;\n\texports.showError = showError;\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tvar _capitalize2 = __webpack_require__(316);\n\t\n\tvar _capitalize3 = _interopRequireDefault(_capitalize2);\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// eslint-disable-next-line\n\tvar urlPattern = /(^|[\\s\\n]|<br\\/?>)((?:https?|ftp):\\/\\/[\\-A-Z0-9+\\u0026\\u2019@#\\/%?=()~_|!:,.;]*[\\-A-Z0-9+\\u0026@#\\/%=~()_|])/gi;\n\t\n\tfunction durationHumanize(duration) {\n\t  var humanized = '';\n\t\n\t  if (duration === undefined) {\n\t    humanized = '-';\n\t  } else if (duration < 60) {\n\t    var seconds = Math.round(duration);\n\t    humanized = seconds + 's';\n\t  } else if (duration > 3600 * 24) {\n\t    var days = Math.round(parseFloat(duration) / 60.0 / 60.0 / 24.0);\n\t    humanized = days + 'days';\n\t  } else if (duration >= 3600) {\n\t    var hours = Math.round(parseFloat(duration) / 60.0 / 60.0);\n\t    humanized = hours + 'h';\n\t  } else {\n\t    var minutes = Math.round(parseFloat(duration) / 60.0);\n\t    humanized = minutes + 'm';\n\t  }\n\t  return humanized;\n\t}\n\t\n\tfunction scheduleHumanize(schedule) {\n\t  if (schedule === null) {\n\t    return 'Never';\n\t  } else if (schedule.match(/\\d\\d:\\d\\d/) !== null) {\n\t    var parts = schedule.split(':');\n\t    var localTime = _moment2.default.utc().hour(parts[0]).minute(parts[1]).local().format('HH:mm');\n\t\n\t    return 'Every day at ' + localTime;\n\t  }\n\t\n\t  return 'Every ' + durationHumanize(parseInt(schedule, 10));\n\t}\n\t\n\tfunction toHuman(text) {\n\t  return text.replace(/_/g, ' ').replace(/(?:^|\\s)\\S/g, function (a) {\n\t    return a.toUpperCase();\n\t  });\n\t}\n\t\n\tfunction colWidth(widgetWidth) {\n\t  if (widgetWidth === 0) {\n\t    return 0;\n\t  } else if (widgetWidth === 1) {\n\t    return 6;\n\t  } else if (widgetWidth === 2) {\n\t    return 12;\n\t  }\n\t  return widgetWidth;\n\t}\n\t\n\tfunction capitalize(text) {\n\t  if (text) {\n\t    return (0, _capitalize3.default)(text);\n\t  }\n\t\n\t  return null;\n\t}\n\t\n\tfunction linkify(text) {\n\t  return text.replace(urlPattern, \"$1<a href='$2' target='_blank'>$2</a>\");\n\t}\n\t\n\tfunction remove(items, item) {\n\t  if (items === undefined) {\n\t    return items;\n\t  }\n\t\n\t  var notEquals = void 0;\n\t\n\t  if (item instanceof Array) {\n\t    notEquals = function notEquals(other) {\n\t      return item.indexOf(other) === -1;\n\t    };\n\t  } else {\n\t    notEquals = function notEquals(other) {\n\t      return item !== other;\n\t    };\n\t  }\n\t\n\t  var filtered = [];\n\t\n\t  for (var i = 0; i < items.length; i += 1) {\n\t    if (notEquals(items[i])) {\n\t      filtered.push(items[i]);\n\t    }\n\t  }\n\t\n\t  return filtered;\n\t}\n\t\n\tfunction notEmpty(collection) {\n\t  return !(0, _underscore.isEmpty)(collection);\n\t}\n\t\n\tfunction showError(field, form) {\n\t  return field.$touched && field.$invalid || form.$submitted;\n\t}\n\n/***/ },\n/* 316 */,\n/* 317 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _dashboard = __webpack_require__(318);\n\t\n\tObject.defineProperty(exports, 'Dashboard', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_dashboard).default;\n\t  }\n\t});\n\t\n\tvar _widget = __webpack_require__(319);\n\t\n\tObject.defineProperty(exports, 'Widget', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_widget).default;\n\t  }\n\t});\n\t\n\tvar _query = __webpack_require__(321);\n\t\n\tObject.defineProperty(exports, 'Query', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_query).default;\n\t  }\n\t});\n\t\n\tvar _queryResult = __webpack_require__(323);\n\t\n\tObject.defineProperty(exports, 'QueryResult', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_queryResult).default;\n\t  }\n\t});\n\t\n\tvar _events = __webpack_require__(324);\n\t\n\tObject.defineProperty(exports, 'Events', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_events).default;\n\t  }\n\t});\n\t\n\tvar _alert = __webpack_require__(325);\n\t\n\tObject.defineProperty(exports, 'Alert', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_alert).default;\n\t  }\n\t});\n\t\n\tvar _alertSubscription = __webpack_require__(326);\n\t\n\tObject.defineProperty(exports, 'AlertSubscription', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_alertSubscription).default;\n\t  }\n\t});\n\t\n\tvar _destination = __webpack_require__(327);\n\t\n\tObject.defineProperty(exports, 'Destination', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_destination).default;\n\t  }\n\t});\n\t\n\tvar _user = __webpack_require__(328);\n\t\n\tObject.defineProperty(exports, 'User', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_user).default;\n\t  }\n\t});\n\t\n\tvar _group = __webpack_require__(329);\n\t\n\tObject.defineProperty(exports, 'Group', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_group).default;\n\t  }\n\t});\n\t\n\tvar _dataSource = __webpack_require__(330);\n\t\n\tObject.defineProperty(exports, 'DataSource', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_dataSource).default;\n\t  }\n\t});\n\t\n\tvar _querySnippet = __webpack_require__(331);\n\t\n\tObject.defineProperty(exports, 'QuerySnippet', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_querySnippet).default;\n\t  }\n\t});\n\t\n\tvar _notifications = __webpack_require__(332);\n\t\n\tObject.defineProperty(exports, 'Notifications', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_notifications).default;\n\t  }\n\t});\n\t\n\tvar _keyboardShortcuts = __webpack_require__(333);\n\t\n\tObject.defineProperty(exports, 'KeyboardShortcuts', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_keyboardShortcuts).default;\n\t  }\n\t});\n\t\n\tvar _offlineListener = __webpack_require__(336);\n\t\n\tObject.defineProperty(exports, 'OfflineListener', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_offlineListener).default;\n\t  }\n\t});\n\t\n\tvar _alertDialog = __webpack_require__(337);\n\t\n\tObject.defineProperty(exports, 'AlertDialog', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_alertDialog).default;\n\t  }\n\t});\n\t\n\tvar _auth = __webpack_require__(338);\n\t\n\tObject.defineProperty(exports, 'Auth', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_auth).default;\n\t  }\n\t});\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 318 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tDashboard.$inject = [\"$resource\", \"$http\", \"currentUser\", \"Widget\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('Dashboard', Dashboard);\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tfunction Dashboard($resource, $http, currentUser, Widget) {\n\t  function transformSingle(dashboard) {\n\t    dashboard.widgets = (0, _underscore.map)(dashboard.widgets, function (row) {\n\t      return row.map(function (widget) {\n\t        return new Widget(widget);\n\t      });\n\t    });\n\t    dashboard.publicAccessEnabled = dashboard.public_url !== undefined;\n\t  }\n\t\n\t  var transform = $http.defaults.transformResponse.concat(function (data) {\n\t    if ((0, _underscore.isArray)(data)) {\n\t      data.forEach(transformSingle);\n\t    } else {\n\t      transformSingle(data);\n\t    }\n\t    return data;\n\t  });\n\t\n\t  var resource = $resource('api/dashboards/:slug', { slug: '@slug' }, {\n\t    get: { method: 'GET', transformResponse: transform },\n\t    save: { method: 'POST', transformResponse: transform },\n\t    query: { method: 'GET', isArray: true, transformResponse: transform },\n\t    recent: {\n\t      method: 'get',\n\t      isArray: true,\n\t      url: 'api/dashboards/recent',\n\t      transformResponse: transform\n\t    }\n\t  });\n\t\n\t  resource.prototype.canEdit = function canEdit() {\n\t    return currentUser.canEdit(this) || this.can_edit;\n\t  };\n\t\n\t  return resource;\n\t}\n\n/***/ },\n/* 319 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tWidget.$inject = [\"$resource\", \"Query\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('Widget', Widget);\n\t};\n\t\n\tvar _truncate = __webpack_require__(320);\n\t\n\tvar _truncate2 = _interopRequireDefault(_truncate);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Widget($resource, Query) {\n\t  var WidgetResource = $resource('api/widgets/:id', { id: '@id' });\n\t\n\t  WidgetResource.prototype.getQuery = function getQuery() {\n\t    if (!this.query && this.visualization) {\n\t      this.query = new Query(this.visualization.query);\n\t    }\n\t\n\t    return this.query;\n\t  };\n\t\n\t  WidgetResource.prototype.getName = function getName() {\n\t    if (this.visualization) {\n\t      return this.visualization.query.name + ' (' + this.visualization.name + ')';\n\t    }\n\t    return (0, _truncate2.default)(this.text, 20);\n\t  };\n\t\n\t  return WidgetResource;\n\t}\n\n/***/ },\n/* 320 */,\n/* 321 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tQueryResource.$inject = [\"$resource\", \"$http\", \"$q\", \"$location\", \"currentUser\", \"QueryResult\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('Query', QueryResource);\n\t};\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tvar _mustache = __webpack_require__(322);\n\t\n\tvar _mustache2 = _interopRequireDefault(_mustache);\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction collectParams(parts) {\n\t  var parameters = [];\n\t\n\t  parts.forEach(function (part) {\n\t    if (part[0] === 'name' || part[0] === '&') {\n\t      parameters.push(part[1]);\n\t    } else if (part[0] === '#') {\n\t      parameters = (0, _underscore.union)(parameters, collectParams(part[4]));\n\t    }\n\t  });\n\t\n\t  return parameters;\n\t}\n\t\n\tvar QueryResultError = function () {\n\t  function QueryResultError(errorMessage) {\n\t    _classCallCheck(this, QueryResultError);\n\t\n\t    this.errorMessage = errorMessage;\n\t  }\n\t\n\t  _createClass(QueryResultError, [{\n\t    key: 'getError',\n\t    value: function getError() {\n\t      return this.errorMessage;\n\t    }\n\t  }], [{\n\t    key: 'getStatus',\n\t    value: function getStatus() {\n\t      return 'failed';\n\t    }\n\t  }, {\n\t    key: 'getData',\n\t    value: function getData() {\n\t      return null;\n\t    }\n\t  }, {\n\t    key: 'getLog',\n\t    value: function getLog() {\n\t      return null;\n\t    }\n\t  }, {\n\t    key: 'getChartData',\n\t    value: function getChartData() {\n\t      return null;\n\t    }\n\t  }]);\n\t\n\t  return QueryResultError;\n\t}();\n\t\n\tvar Parameter = function () {\n\t  function Parameter(parameter) {\n\t    _classCallCheck(this, Parameter);\n\t\n\t    this.title = parameter.title;\n\t    this.name = parameter.name;\n\t    this.type = parameter.type;\n\t    this.value = parameter.value;\n\t    this.global = parameter.global;\n\t  }\n\t\n\t  _createClass(Parameter, [{\n\t    key: 'ngModel',\n\t    get: function get() {\n\t      if (this.type === 'date' || this.type === 'datetime-local' || this.type === 'datetime-with-seconds') {\n\t        this.$$value = this.$$value || (0, _moment2.default)(this.value).toDate();\n\t        return this.$$value;\n\t      } else if (this.type === 'number') {\n\t        this.$$value = this.$$value || parseInt(this.value, 10);\n\t        return this.$$value;\n\t      }\n\t\n\t      return this.value;\n\t    },\n\t    set: function set(value) {\n\t      if (value && this.type === 'date') {\n\t        this.value = (0, _moment2.default)(value).format('YYYY-MM-DD');\n\t        this.$$value = (0, _moment2.default)(this.value).toDate();\n\t      } else if (value && this.type === 'datetime-local') {\n\t        this.value = (0, _moment2.default)(value).format('YYYY-MM-DD HH:mm');\n\t        this.$$value = (0, _moment2.default)(this.value).toDate();\n\t      } else if (value && this.type === 'datetime-with-seconds') {\n\t        this.value = (0, _moment2.default)(value).format('YYYY-MM-DD HH:mm:ss');\n\t        this.$$value = (0, _moment2.default)(this.value).toDate();\n\t      } else {\n\t        this.value = this.$$value = value;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Parameter;\n\t}();\n\t\n\tvar Parameters = function () {\n\t  function Parameters(query, queryString) {\n\t    _classCallCheck(this, Parameters);\n\t\n\t    this.query = query;\n\t    this.updateParameters();\n\t    this.initFromQueryString(queryString);\n\t  }\n\t\n\t  _createClass(Parameters, [{\n\t    key: 'parseQuery',\n\t    value: function parseQuery() {\n\t      var parts = _mustache2.default.parse(this.query.query);\n\t      var parameters = (0, _underscore.uniq)(collectParams(parts));\n\t      return parameters;\n\t    }\n\t  }, {\n\t    key: 'updateParameters',\n\t    value: function updateParameters() {\n\t      var _this = this;\n\t\n\t      if (this.query.query === this.cachedQueryText) {\n\t        return;\n\t      }\n\t\n\t      this.cachedQueryText = this.query.query;\n\t      var parameterNames = this.parseQuery();\n\t\n\t      this.query.options.parameters = this.query.options.parameters || [];\n\t\n\t      var parametersMap = {};\n\t      this.query.options.parameters.forEach(function (param) {\n\t        parametersMap[param.name] = param;\n\t      });\n\t\n\t      parameterNames.forEach(function (param) {\n\t        if (!(0, _underscore.has)(parametersMap, param)) {\n\t          _this.query.options.parameters.push({\n\t            title: param,\n\t            name: param,\n\t            type: 'text',\n\t            value: null,\n\t            global: false\n\t          });\n\t        }\n\t      });\n\t\n\t      var parameterExists = function parameterExists(p) {\n\t        return (0, _underscore.contains)(parameterNames, p.name);\n\t      };\n\t      this.query.options.parameters = this.query.options.parameters.filter(parameterExists).map(function (p) {\n\t        return new Parameter(p);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'initFromQueryString',\n\t    value: function initFromQueryString(queryString) {\n\t      this.get().forEach(function (param) {\n\t        var queryStringName = 'p_' + param.name;\n\t        if ((0, _underscore.has)(queryString, queryStringName)) {\n\t          param.value = queryString[queryStringName];\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get() {\n\t      this.updateParameters();\n\t      return this.query.options.parameters;\n\t    }\n\t  }, {\n\t    key: 'getMissing',\n\t    value: function getMissing() {\n\t      return (0, _underscore.pluck)((0, _underscore.filter)(this.get(), function (p) {\n\t        return p.value === null || p.value === '';\n\t      }), 'title');\n\t    }\n\t  }, {\n\t    key: 'isRequired',\n\t    value: function isRequired() {\n\t      return !(0, _underscore.isEmpty)(this.get());\n\t    }\n\t  }, {\n\t    key: 'getValues',\n\t    value: function getValues() {\n\t      var params = this.get();\n\t      return (0, _underscore.object)((0, _underscore.pluck)(params, 'name'), (0, _underscore.pluck)(params, 'value'));\n\t    }\n\t  }]);\n\t\n\t  return Parameters;\n\t}();\n\t\n\tfunction QueryResource($resource, $http, $q, $location, currentUser, QueryResult) {\n\t  var Query = $resource('api/queries/:id', { id: '@id' }, {\n\t    search: {\n\t      method: 'get',\n\t      isArray: true,\n\t      url: 'api/queries/search'\n\t    },\n\t    recent: {\n\t      method: 'get',\n\t      isArray: true,\n\t      url: 'api/queries/recent'\n\t    },\n\t    query: {\n\t      isArray: false\n\t    },\n\t    myQueries: {\n\t      method: 'get',\n\t      isArray: false,\n\t      url: 'api/queries/my'\n\t    },\n\t    fork: {\n\t      method: 'post',\n\t      isArray: false,\n\t      url: 'api/queries/:id/fork',\n\t      params: { id: '@id' }\n\t    }\n\t  });\n\t\n\t  Query.newQuery = function newQuery() {\n\t    return new Query({\n\t      query: '',\n\t      name: 'New Query',\n\t      schedule: null,\n\t      user: currentUser,\n\t      options: {}\n\t    });\n\t  };\n\t\n\t  Query.format = function formatQuery(syntax, query) {\n\t    if (syntax === 'json') {\n\t      try {\n\t        var formatted = JSON.stringify(JSON.parse(query), ' ', 4);\n\t        return $q.resolve(formatted);\n\t      } catch (err) {\n\t        return $q.reject(String(err));\n\t      }\n\t    } else if (syntax === 'sql') {\n\t      return $http.post('api/queries/format', { query: query }).then(function (response) {\n\t        return response.data.query;\n\t      });\n\t    } else {\n\t      return $q.reject('Query formatting is not supported for your data source syntax.');\n\t    }\n\t  };\n\t\n\t  Query.prototype.getSourceLink = function getSourceLink() {\n\t    return '/queries/' + this.id + '/source';\n\t  };\n\t\n\t  Query.prototype.isNew = function isNew() {\n\t    return this.id === undefined;\n\t  };\n\t\n\t  Query.prototype.hasDailySchedule = function hasDailySchedule() {\n\t    return this.schedule && this.schedule.match(/\\d\\d:\\d\\d/) !== null;\n\t  };\n\t\n\t  Query.prototype.scheduleInLocalTime = function scheduleInLocalTime() {\n\t    var parts = this.schedule.split(':');\n\t    return _moment2.default.utc().hour(parts[0]).minute(parts[1]).local().format('HH:mm');\n\t  };\n\t\n\t  Query.prototype.hasResult = function hasResult() {\n\t    return !!(this.latest_query_data || this.latest_query_data_id);\n\t  };\n\t\n\t  Query.prototype.paramsRequired = function paramsRequired() {\n\t    return this.getParameters().isRequired();\n\t  };\n\t\n\t  Query.prototype.getQueryResult = function getQueryResult(maxAge) {\n\t    if (!this.query) {\n\t      return new QueryResultError(\"Can't execute empty query.\");\n\t    }\n\t    var queryText = this.query;\n\t\n\t    var parameters = this.getParameters();\n\t    var missingParams = parameters.getMissing();\n\t\n\t    if (missingParams.length > 0) {\n\t      var paramsWord = 'parameter';\n\t      var valuesWord = 'value';\n\t      if (missingParams.length > 1) {\n\t        paramsWord = 'parameters';\n\t        valuesWord = 'values';\n\t      }\n\t\n\t      return new QueryResult({ job: { error: 'missing ' + valuesWord + ' for ' + missingParams.join(', ') + ' ' + paramsWord + '.', status: 4 } });\n\t    }\n\t\n\t    if (parameters.isRequired()) {\n\t      queryText = _mustache2.default.render(queryText, parameters.getValues());\n\t\n\t      // Need to clear latest results, to make sure we don't use results for different params.\n\t      this.latest_query_data = null;\n\t      this.latest_query_data_id = null;\n\t    }\n\t\n\t    if (this.latest_query_data && maxAge !== 0) {\n\t      if (!this.queryResult) {\n\t        this.queryResult = new QueryResult({ query_result: this.latest_query_data });\n\t      }\n\t    } else if (this.latest_query_data_id && maxAge !== 0) {\n\t      if (!this.queryResult) {\n\t        this.queryResult = QueryResult.getById(this.latest_query_data_id);\n\t      }\n\t    } else if (this.data_source_id) {\n\t      this.queryResult = QueryResult.get(this.data_source_id, queryText, maxAge, this.id);\n\t    } else {\n\t      return new QueryResultError('Please select data source to run this query.');\n\t    }\n\t\n\t    return this.queryResult;\n\t  };\n\t\n\t  Query.prototype.getUrl = function getUrl(source, hash) {\n\t    var url = 'queries/' + this.id;\n\t\n\t    if (source) {\n\t      url += '/source';\n\t    }\n\t\n\t    var params = '';\n\t    if (this.getParameters().isRequired()) {\n\t      (0, _underscore.each)(this.getParameters().getValues(), function (value, name) {\n\t        if (value === null) {\n\t          return;\n\t        }\n\t\n\t        if (params !== '') {\n\t          params += '&';\n\t        }\n\t\n\t        params += 'p_' + encodeURIComponent(name) + '=' + encodeURIComponent(value);\n\t      });\n\t    }\n\t\n\t    if (params !== '') {\n\t      url += '?' + params;\n\t    }\n\t\n\t    if (hash) {\n\t      url += '#' + hash;\n\t    }\n\t\n\t    return url;\n\t  };\n\t\n\t  Query.prototype.getQueryResultPromise = function getQueryResultPromise() {\n\t    return this.getQueryResult().toPromise();\n\t  };\n\t\n\t  Query.prototype.getParameters = function getParameters() {\n\t    if (!this.$parameters) {\n\t      this.$parameters = new Parameters(this, $location.search());\n\t    }\n\t\n\t    return this.$parameters;\n\t  };\n\t\n\t  Query.prototype.getParametersDefs = function getParametersDefs() {\n\t    return this.getParameters().get();\n\t  };\n\t\n\t  return Query;\n\t}\n\n/***/ },\n/* 322 */,\n/* 323 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tQueryResultService.$inject = [\"$resource\", \"$timeout\", \"$q\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\texports.getColumnCleanName = getColumnCleanName;\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('QueryResult', QueryResultService);\n\t};\n\t\n\tvar _debug = __webpack_require__(19);\n\t\n\tvar _debug2 = _interopRequireDefault(_debug);\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar logger = (0, _debug2.default)('redash:services:QueryResult');\n\t\n\tfunction getColumnNameWithoutType(column) {\n\t  var typeSplit = void 0;\n\t  if (column.indexOf('::') !== -1) {\n\t    typeSplit = '::';\n\t  } else if (column.indexOf('__') !== -1) {\n\t    typeSplit = '__';\n\t  } else {\n\t    return column;\n\t  }\n\t\n\t  var parts = column.split(typeSplit);\n\t  if (parts[0] === '' && parts.length === 2) {\n\t    return parts[1];\n\t  }\n\t  return parts[0];\n\t}\n\t\n\tfunction getColumnCleanName(column) {\n\t  var name = getColumnNameWithoutType(column);\n\t  return name;\n\t}\n\t\n\tfunction getColumnFriendlyName(column) {\n\t  return getColumnNameWithoutType(column).replace(/(?:^|\\s)\\S/g, function (a) {\n\t    return a.toUpperCase();\n\t  });\n\t}\n\t\n\tfunction addPointToSeries(point, seriesCollection, seriesName) {\n\t  if (seriesCollection[seriesName] === undefined) {\n\t    seriesCollection[seriesName] = {\n\t      name: seriesName,\n\t      type: 'column',\n\t      data: []\n\t    };\n\t  }\n\t\n\t  seriesCollection[seriesName].data.push(point);\n\t}\n\t\n\tfunction QueryResultService($resource, $timeout, $q) {\n\t  var QueryResultResource = $resource('api/query_results/:id', { id: '@id' }, { post: { method: 'POST' } });\n\t  var Job = $resource('api/jobs/:id', { id: '@id' });\n\t  var statuses = {\n\t    1: 'waiting',\n\t    2: 'processing',\n\t    3: 'done',\n\t    4: 'failed'\n\t  };\n\t\n\t  var QueryResult = function () {\n\t    function QueryResult(props) {\n\t      _classCallCheck(this, QueryResult);\n\t\n\t      this.deferred = $q.defer();\n\t      this.job = {};\n\t      this.query_result = {};\n\t      this.status = 'waiting';\n\t      this.filters = undefined;\n\t      this.filterFreeze = undefined;\n\t\n\t      this.updatedAt = (0, _moment2.default)();\n\t\n\t      if (props) {\n\t        this.update(props);\n\t      }\n\t    }\n\t\n\t    _createClass(QueryResult, [{\n\t      key: 'update',\n\t      value: function update(props) {\n\t        _extends(this, props);\n\t\n\t        if ('query_result' in props) {\n\t          this.status = 'done';\n\t          this.filters = undefined;\n\t          this.filterFreeze = undefined;\n\t\n\t          var columnTypes = {};\n\t\n\t          // TODO: we should stop manipulating incoming data, and switch to relaying\n\t          // on the column type set by the backend. This logic is prone to errors,\n\t          // and better be removed. Kept for now, for backward compatability.\n\t          (0, _underscore.each)(this.query_result.data.rows, function (row) {\n\t            (0, _underscore.each)(row, function (v, k) {\n\t              if ((0, _underscore.isNumber)(v)) {\n\t                columnTypes[k] = 'float';\n\t              } else if ((0, _underscore.isString)(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}T/)) {\n\t                row[k] = _moment2.default.utc(v);\n\t                columnTypes[k] = 'datetime';\n\t              } else if ((0, _underscore.isString)(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n\t                row[k] = _moment2.default.utc(v);\n\t                columnTypes[k] = 'date';\n\t              } else if ((typeof v === 'undefined' ? 'undefined' : _typeof(v)) === 'object' && v !== null) {\n\t                row[k] = JSON.stringify(v);\n\t              }\n\t            });\n\t          });\n\t\n\t          (0, _underscore.each)(this.query_result.data.columns, function (column) {\n\t            if (columnTypes[column.name]) {\n\t              if (column.type == null || column.type === 'string') {\n\t                column.type = columnTypes[column.name];\n\t              }\n\t            }\n\t          });\n\t\n\t          this.deferred.resolve(this);\n\t        } else if (this.job.status === 3) {\n\t          this.status = 'processing';\n\t        } else {\n\t          this.status = undefined;\n\t        }\n\t      }\n\t    }, {\n\t      key: 'getId',\n\t      value: function getId() {\n\t        var id = null;\n\t        if ('query_result' in this) {\n\t          id = this.query_result.id;\n\t        }\n\t        return id;\n\t      }\n\t    }, {\n\t      key: 'cancelExecution',\n\t      value: function cancelExecution() {\n\t        Job.delete({ id: this.job.id });\n\t      }\n\t    }, {\n\t      key: 'getStatus',\n\t      value: function getStatus() {\n\t        return this.status || statuses[this.job.status];\n\t      }\n\t    }, {\n\t      key: 'getError',\n\t      value: function getError() {\n\t        // TODO: move this logic to the server...\n\t        if (this.job.error === 'None') {\n\t          return undefined;\n\t        }\n\t\n\t        return this.job.error;\n\t      }\n\t    }, {\n\t      key: 'getLog',\n\t      value: function getLog() {\n\t        if (!this.query_result.data || !this.query_result.data.log || this.query_result.data.log.length === 0) {\n\t          return null;\n\t        }\n\t\n\t        return this.query_result.data.log;\n\t      }\n\t    }, {\n\t      key: 'getUpdatedAt',\n\t      value: function getUpdatedAt() {\n\t        return this.query_result.retrieved_at || this.job.updated_at * 1000.0 || this.updatedAt;\n\t      }\n\t    }, {\n\t      key: 'getRuntime',\n\t      value: function getRuntime() {\n\t        return this.query_result.runtime;\n\t      }\n\t    }, {\n\t      key: 'getRawData',\n\t      value: function getRawData() {\n\t        if (!this.query_result.data) {\n\t          return null;\n\t        }\n\t\n\t        var data = this.query_result.data.rows;\n\t\n\t        return data;\n\t      }\n\t    }, {\n\t      key: 'getData',\n\t      value: function getData() {\n\t        if (!this.query_result.data) {\n\t          return null;\n\t        }\n\t\n\t        function filterValues(filters) {\n\t          if (!filters) {\n\t            return null;\n\t          }\n\t\n\t          return filters.reduce(function (str, filter) {\n\t            return str + filter.current;\n\t          }, '');\n\t        }\n\t\n\t        var filters = this.getFilters();\n\t        var filterFreeze = filterValues(filters);\n\t\n\t        if (this.filterFreeze !== filterFreeze) {\n\t          this.filterFreeze = filterFreeze;\n\t\n\t          if (filters) {\n\t            this.filteredData = this.query_result.data.rows.filter(function (row) {\n\t              return filters.reduce(function (memo, filter) {\n\t                if (!(0, _underscore.isArray)(filter.current)) {\n\t                  filter.current = [filter.current];\n\t                }\n\t\n\t                return memo && (0, _underscore.some)(filter.current, function (v) {\n\t                  var value = row[filter.name];\n\t                  if (_moment2.default.isMoment(value)) {\n\t                    return value.isSame(v);\n\t                  }\n\t                  // We compare with either the value or the String representation of the value,\n\t                  // because Select2 casts true/false to \"true\"/\"false\".\n\t                  return v === value || String(value) === v;\n\t                });\n\t              }, true);\n\t            });\n\t          } else {\n\t            this.filteredData = this.query_result.data.rows;\n\t          }\n\t        }\n\t\n\t        return this.filteredData;\n\t      }\n\t    }, {\n\t      key: 'isEmpty',\n\t      value: function isEmpty() {\n\t        return this.getData() === null || this.getData().length === 0;\n\t      }\n\t    }, {\n\t      key: 'getChartData',\n\t      value: function getChartData(mapping) {\n\t        var series = {};\n\t\n\t        this.getData().forEach(function (row) {\n\t          var point = {};\n\t          var seriesName = void 0;\n\t          var xValue = 0;\n\t          var yValues = {};\n\t          var eValue = null;\n\t          var sizeValue = null;\n\t\n\t          (0, _underscore.each)(row, function (v, definition) {\n\t            var name = definition.split('::')[0] || definition.split('__')[0];\n\t            var value = v;\n\t            var type = definition.split('::')[1] || definition.split('__')[1];\n\t            if (mapping) {\n\t              type = mapping[definition];\n\t            }\n\t\n\t            if (type === 'unused') {\n\t              return;\n\t            }\n\t\n\t            if (type === 'x') {\n\t              xValue = value;\n\t              point[type] = value;\n\t            }\n\t            if (type === 'y') {\n\t              if (value == null) {\n\t                value = 0;\n\t              }\n\t              yValues[name] = value;\n\t              point[type] = value;\n\t            }\n\t            if (type === 'yError') {\n\t              eValue = value;\n\t              point[type] = value;\n\t            }\n\t\n\t            if (type === 'series') {\n\t              seriesName = String(value);\n\t            }\n\t\n\t            if (type === 'size') {\n\t              point[type] = value;\n\t              sizeValue = value;\n\t            }\n\t\n\t            if (type === 'multiFilter' || type === 'multi-filter') {\n\t              seriesName = String(value);\n\t            }\n\t          });\n\t\n\t          if (seriesName === undefined) {\n\t            (0, _underscore.each)(yValues, function (yValue, ySeriesName) {\n\t              point = { x: xValue, y: yValue };\n\t              if (eValue !== null) {\n\t                point.yError = eValue;\n\t              }\n\t\n\t              if (sizeValue !== null) {\n\t                point.size = sizeValue;\n\t              }\n\t              addPointToSeries(point, series, ySeriesName);\n\t            });\n\t          } else {\n\t            addPointToSeries(point, series, seriesName);\n\t          }\n\t        });\n\t        return (0, _underscore.values)(series);\n\t      }\n\t    }, {\n\t      key: 'getColumns',\n\t      value: function getColumns() {\n\t        if (this.columns === undefined && this.query_result.data) {\n\t          this.columns = this.query_result.data.columns;\n\t        }\n\t\n\t        return this.columns;\n\t      }\n\t    }, {\n\t      key: 'getColumnNames',\n\t      value: function getColumnNames() {\n\t        if (this.columnNames === undefined && this.query_result.data) {\n\t          this.columnNames = this.query_result.data.columns.map(function (v) {\n\t            return v.name;\n\t          });\n\t        }\n\t\n\t        return this.columnNames;\n\t      }\n\t    }, {\n\t      key: 'getColumnCleanNames',\n\t      value: function getColumnCleanNames() {\n\t        return this.getColumnNames().map(function (col) {\n\t          return getColumnCleanName(col);\n\t        });\n\t      }\n\t    }, {\n\t      key: 'getColumnFriendlyNames',\n\t      value: function getColumnFriendlyNames() {\n\t        return this.getColumnNames().map(function (col) {\n\t          return getColumnFriendlyName(col);\n\t        });\n\t      }\n\t    }, {\n\t      key: 'getFilters',\n\t      value: function getFilters() {\n\t        if (!this.filters) {\n\t          this.prepareFilters();\n\t        }\n\t\n\t        return this.filters;\n\t      }\n\t    }, {\n\t      key: 'prepareFilters',\n\t      value: function prepareFilters() {\n\t        if (!this.getColumns()) {\n\t          return;\n\t        }\n\t\n\t        var filters = [];\n\t        var filterTypes = ['filter', 'multi-filter', 'multiFilter'];\n\t\n\t        this.getColumns().forEach(function (col) {\n\t          var name = col.name;\n\t          var type = name.split('::')[1] || name.split('__')[1];\n\t          if ((0, _underscore.contains)(filterTypes, type)) {\n\t            // filter found\n\t            var filter = {\n\t              name: name,\n\t              friendlyName: getColumnFriendlyName(name),\n\t              column: col,\n\t              values: [],\n\t              multiple: type === 'multiFilter' || type === 'multi-filter'\n\t            };\n\t            filters.push(filter);\n\t          }\n\t        }, this);\n\t\n\t        this.getRawData().forEach(function (row) {\n\t          filters.forEach(function (filter) {\n\t            filter.values.push(row[filter.name]);\n\t            if (filter.values.length === 1) {\n\t              if (filter.multiple) {\n\t                filter.current = [row[filter.name]];\n\t              } else {\n\t                filter.current = row[filter.name];\n\t              }\n\t            }\n\t          });\n\t        });\n\t\n\t        filters.forEach(function (filter) {\n\t          filter.values = (0, _underscore.uniq)(filter.values, function (v) {\n\t            if (_moment2.default.isMoment(v)) {\n\t              return v.unix();\n\t            }\n\t            return v;\n\t          });\n\t        });\n\t\n\t        this.filters = filters;\n\t      }\n\t    }, {\n\t      key: 'toPromise',\n\t      value: function toPromise() {\n\t        return this.deferred.promise;\n\t      }\n\t    }, {\n\t      key: 'refreshStatus',\n\t      value: function refreshStatus(query) {\n\t        var _this = this;\n\t\n\t        Job.get({ id: this.job.id }, function (jobResponse) {\n\t          _this.update(jobResponse);\n\t\n\t          if (_this.getStatus() === 'processing' && _this.job.query_result_id && _this.job.query_result_id !== 'None') {\n\t            QueryResultResource.get({ id: _this.job.query_result_id }, function (response) {\n\t              _this.update(response);\n\t            });\n\t          } else if (_this.getStatus() !== 'failed') {\n\t            $timeout(function () {\n\t              _this.refreshStatus(query);\n\t            }, 3000);\n\t          }\n\t        }, function (error) {\n\t          logger('Connection error', error);\n\t          // TODO: use QueryResultError, or better yet: exception/reject of promise.\n\t          _this.update({ job: { error: 'failed communicating with server. Please check your Internet connection and try again.', status: 4 } });\n\t        });\n\t      }\n\t    }, {\n\t      key: 'getLink',\n\t      value: function getLink(queryId, fileType, apiKey) {\n\t        var link = '/api/queries/' + queryId + '/results/' + this.getId() + '.' + fileType;\n\t        if (apiKey) {\n\t          link = link + '?api_key=' + apiKey;\n\t        }\n\t        return link;\n\t      }\n\t    }, {\n\t      key: 'getName',\n\t      value: function getName(queryName, fileType) {\n\t        return queryName.replace(' ', '_') + (0, _moment2.default)(this.getUpdatedAt()).format('_YYYY_MM_DD') + '.' + fileType;\n\t      }\n\t    }], [{\n\t      key: 'getById',\n\t      value: function getById(id) {\n\t        var queryResult = new QueryResult();\n\t\n\t        QueryResultResource.get({ id: id }, function (response) {\n\t          queryResult.update(response);\n\t        });\n\t\n\t        return queryResult;\n\t      }\n\t    }, {\n\t      key: 'get',\n\t      value: function get(dataSourceId, query, maxAge, queryId) {\n\t        var queryResult = new QueryResult();\n\t\n\t        var params = { data_source_id: dataSourceId, query: query, max_age: maxAge };\n\t        if (queryId !== undefined) {\n\t          params.query_id = queryId;\n\t        }\n\t\n\t        QueryResultResource.post(params, function (response) {\n\t          queryResult.update(response);\n\t\n\t          if ('job' in response) {\n\t            queryResult.refreshStatus(query);\n\t          }\n\t        }, function (error) {\n\t          if (error.status === 403) {\n\t            queryResult.update(error.data);\n\t          } else if (error.status === 400 && 'job' in error.data) {\n\t            queryResult.update(error.data);\n\t          } else {\n\t            logger('Unknown error', error);\n\t            queryResult.update({ job: { error: 'unknown error occurred. Please try again later.', status: 4 } });\n\t          }\n\t        });\n\t\n\t        return queryResult;\n\t      }\n\t    }]);\n\t\n\t    return QueryResult;\n\t  }();\n\t\n\t  return QueryResult;\n\t}\n\n/***/ },\n/* 324 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tEvents.$inject = [\"$http\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.service('Events', Events);\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tfunction Events($http) {\n\t  var _this = this;\n\t\n\t  this.events = [];\n\t\n\t  this.post = (0, _underscore.debounce)(function () {\n\t    var events = _this.events;\n\t    _this.events = [];\n\t\n\t    $http.post('api/events', events);\n\t  }, 1000);\n\t\n\t  this.record = function record(action, objectType, objectId, additionalProperties) {\n\t    var event = {\n\t      action: action,\n\t      object_type: objectType,\n\t      object_id: objectId,\n\t      timestamp: Date.now() / 1000.0\n\t    };\n\t    _extends(event, additionalProperties);\n\t    this.events.push(event);\n\t\n\t    this.post();\n\t  };\n\t}\n\n/***/ },\n/* 325 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tAlert.$inject = [\"$resource\", \"$http\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('Alert', Alert);\n\t};\n\t\n\tfunction Alert($resource, $http) {\n\t  var actions = {\n\t    save: {\n\t      method: 'POST',\n\t      transformRequest: [function (data) {\n\t        var newData = _extends({}, data);\n\t        if (newData.query_id === undefined) {\n\t          newData.query_id = newData.query.id;\n\t          newData.destination_id = newData.destinations;\n\t          delete newData.query;\n\t          delete newData.destinations;\n\t        }\n\t\n\t        return newData;\n\t      }].concat($http.defaults.transformRequest)\n\t    }\n\t  };\n\t  var resource = $resource('api/alerts/:id', { id: '@id' }, actions);\n\t\n\t  return resource;\n\t}\n\n/***/ },\n/* 326 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tAlertSubscription.$inject = [\"$resource\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('AlertSubscription', AlertSubscription);\n\t};\n\t\n\tfunction AlertSubscription($resource) {\n\t  var resource = $resource('api/alerts/:alertId/subscriptions/:subscriberId', { alertId: '@alert_id', subscriberId: '@id' });\n\t  return resource;\n\t}\n\n/***/ },\n/* 327 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tDestination.$inject = [\"$resource\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('Destination', Destination);\n\t};\n\t\n\tfunction Destination($resource) {\n\t  var actions = {\n\t    get: { method: 'GET', cache: false, isArray: false },\n\t    query: { method: 'GET', cache: false, isArray: true }\n\t  };\n\t\n\t  var DestinationResource = $resource('api/destinations/:id', { id: '@id' }, actions);\n\t\n\t  return DestinationResource;\n\t}\n\n/***/ },\n/* 328 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tUser.$inject = [\"$resource\", \"$http\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('User', User);\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tfunction transformSingle(user) {\n\t  if (user.groups !== undefined) {\n\t    user.admin = user.groups.indexOf('admin') !== -1;\n\t  }\n\t}\n\t\n\tfunction transform(data) {\n\t  if ((0, _underscore.isArray)(data)) {\n\t    data.forEach(transformSingle);\n\t  } else {\n\t    transformSingle(data);\n\t  }\n\t\n\t  return data;\n\t}\n\t\n\tfunction User($resource, $http) {\n\t  var transformResponse = $http.defaults.transformResponse.concat(transform);\n\t\n\t  var actions = {\n\t    get: { method: 'GET', transformResponse: transformResponse },\n\t    save: { method: 'POST', transformResponse: transformResponse },\n\t    query: { method: 'GET', isArray: true, transformResponse: transformResponse },\n\t    delete: { method: 'DELETE', transformResponse: transformResponse }\n\t  };\n\t\n\t  var UserResource = $resource('api/users/:id', { id: '@id' }, actions);\n\t\n\t  return UserResource;\n\t}\n\n/***/ },\n/* 329 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tGroup.$inject = [\"$resource\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('Group', Group);\n\t};\n\t\n\tfunction Group($resource) {\n\t  var actions = {\n\t    get: { method: 'GET', cache: false, isArray: false },\n\t    query: { method: 'GET', cache: false, isArray: true },\n\t    members: { method: 'GET', cache: false, isArray: true, url: 'api/groups/:id/members' },\n\t    dataSources: { method: 'GET', cache: false, isArray: true, url: 'api/groups/:id/data_sources' }\n\t  };\n\t  var resource = $resource('api/groups/:id', { id: '@id' }, actions);\n\t  return resource;\n\t}\n\n/***/ },\n/* 330 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tDataSource.$inject = [\"$resource\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('DataSource', DataSource);\n\t};\n\t\n\tfunction DataSource($resource) {\n\t  var actions = {\n\t    get: { method: 'GET', cache: false, isArray: false },\n\t    query: { method: 'GET', cache: false, isArray: true },\n\t    test: { method: 'POST', cache: false, isArray: false, url: 'api/data_sources/:id/test' },\n\t    getSchema: { method: 'GET', cache: false, isArray: true, url: 'api/data_sources/:id/schema' }\n\t  };\n\t\n\t  var DataSourceResource = $resource('api/data_sources/:id', { id: '@id' }, actions);\n\t\n\t  return DataSourceResource;\n\t}\n\n/***/ },\n/* 331 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tQuerySnippet.$inject = [\"$resource\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('QuerySnippet', QuerySnippet);\n\t};\n\t\n\tfunction QuerySnippet($resource) {\n\t  var resource = $resource('api/query_snippets/:id', { id: '@id' });\n\t  resource.prototype.getSnippet = function getSnippet() {\n\t    var name = this.trigger;\n\t    if (this.description !== '') {\n\t      name = this.trigger + ': ' + this.description;\n\t    }\n\t\n\t    return {\n\t      name: name,\n\t      content: this.snippet,\n\t      tabTrigger: this.trigger\n\t    };\n\t  };\n\t\n\t  return resource;\n\t}\n\n/***/ },\n/* 332 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tNotifications.$inject = [\"currentUser\", \"Events\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('Notifications', Notifications);\n\t};\n\t\n\tvar _debug = __webpack_require__(19);\n\t\n\tvar _debug2 = _interopRequireDefault(_debug);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar logger = (0, _debug2.default)('redash:notifications');\n\t\n\tfunction Notifications(currentUser, Events) {\n\t  var notificationService = { pageVisible: true };\n\t\n\t  notificationService.monitorVisibility = function monitorVisibility() {\n\t    var hidden = void 0;\n\t    var visibilityChange = void 0;\n\t\n\t    if (typeof document.hidden !== 'undefined') {\n\t      hidden = 'hidden';\n\t      visibilityChange = 'visibilitychange';\n\t    } else if (typeof document.msHidden !== 'undefined') {\n\t      hidden = 'msHidden';\n\t      visibilityChange = 'msvisibilitychange';\n\t    }\n\t\n\t    var documentHidden = document[hidden];\n\t\n\t    document.addEventListener(visibilityChange, function () {\n\t      if (documentHidden !== document[hidden]) {\n\t        if (document[hidden]) {\n\t          notificationService.pageVisible = false;\n\t        } else {\n\t          notificationService.pageVisible = true;\n\t        }\n\t\n\t        documentHidden = document[hidden];\n\t      }\n\t    });\n\t  };\n\t\n\t  notificationService.monitorVisibility();\n\t\n\t  notificationService.isSupported = function () {\n\t    if ('Notification' in window) {\n\t      return true;\n\t    }\n\t\n\t    logger('HTML5 notifications are not supported.');\n\t    return false;\n\t  };\n\t\n\t  notificationService.getPermissions = function getPermissions() {\n\t    if (!this.isSupported()) {\n\t      return;\n\t    }\n\t\n\t    if (Notification.permission === 'default') {\n\t      Notification.requestPermission(function (status) {\n\t        if (Notification.permission !== status) {\n\t          Notification.permission = status;\n\t        }\n\t      });\n\t    }\n\t  };\n\t\n\t  notificationService.showNotification = function showNotification(title, content) {\n\t    if (!this.isSupported() || this.pageVisible || Notification.permission !== 'granted') {\n\t      return;\n\t    }\n\t\n\t    // using the 'tag' to avoid showing duplicate notifications\n\t    var notification = new Notification(title, { tag: title + content, body: content, icon: '/images/redash_icon_small.png' });\n\t    setTimeout(function () {\n\t      notification.close();\n\t    }, 3000);\n\t    notification.onclick = function onClick() {\n\t      window.focus();\n\t      this.close();\n\t      Events.record('click', 'notification');\n\t    };\n\t  };\n\t\n\t  return notificationService;\n\t}\n\n/***/ },\n/* 333 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.service('KeyboardShortcuts', KeyboardShortcuts);\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _mousetrap = __webpack_require__(334);\n\t\n\tvar _mousetrap2 = _interopRequireDefault(_mousetrap);\n\t\n\t__webpack_require__(335);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction KeyboardShortcuts() {\n\t  this.bind = function bind(keymap) {\n\t    (0, _underscore.each)(keymap, function (fn, key) {\n\t      _mousetrap2.default.bindGlobal(key, function (e) {\n\t        e.preventDefault();\n\t        fn();\n\t      });\n\t    });\n\t  };\n\t\n\t  this.unbind = function unbind(keymap) {\n\t    (0, _underscore.each)(keymap, function (fn, key) {\n\t      _mousetrap2.default.unbind(key);\n\t    });\n\t  };\n\t}\n\n/***/ },\n/* 334 */,\n/* 335 */,\n/* 336 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tOfflineListener.$inject = [\"toastr\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.service('OfflineListener', OfflineListener);\n\t};\n\t\n\tfunction OfflineListener(toastr) {\n\t  function addOnlineListener(toast) {\n\t    function onlineStateHandler() {\n\t      toastr.remove(toast.toastId);\n\t      window.removeEventListener('online', onlineStateHandler);\n\t    }\n\t    window.addEventListener('online', onlineStateHandler);\n\t  }\n\t\n\t  window.addEventListener('offline', function () {\n\t    var toast = toastr.warning('<div>Please check your Internet connection.</div>', '', {\n\t      allowHtml: true,\n\t      autoDismiss: false,\n\t      timeOut: false,\n\t      tapToDismiss: true\n\t    });\n\t    addOnlineListener(toast);\n\t  });\n\t}\n\n/***/ },\n/* 337 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tAlertDialog.$inject = [\"$uibModal\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('alertDialog', AlertDialogComponent);\n\t  ngModule.factory('AlertDialog', AlertDialog);\n\t};\n\t\n\tvar AlertDialogComponent = {\n\t  template: '\\n<div class=\"modal-header\">\\n    <h4 class=\"modal-title\" ng-if=\"$ctrl.title\">{{$ctrl.title}}</h4>\\n</div>\\n<div class=\"modal-body\">\\n  <p ng-bind-html=\"$ctrl.message\"></p>\\n</div>\\n<div class=\"modal-footer\">\\n  <button class=\"btn btn-default\" ng-click=\"$ctrl.dismiss()\">Cancel</button>\\n  <button class=\"btn\" ng-class=\"$ctrl.confirm.class\" ng-click=\"$ctrl.close()\" ng-if=\"$ctrl.confirm.show\">{{$ctrl.confirm.title}}</button>\\n</div>\\n  ',\n\t  bindings: {\n\t    close: '&',\n\t    dismiss: '&',\n\t    resolve: '<'\n\t  },\n\t  controller: function controller() {\n\t    this.title = this.resolve.title;\n\t    this.message = this.resolve.message;\n\t    this.confirm = _extends({}, { class: 'btn-sucess', show: true, title: 'OK' }, this.resolve.confirm);\n\t  }\n\t};\n\t\n\tfunction AlertDialog($uibModal) {\n\t  var service = {\n\t    open: function open(_title, _message, _confirm) {\n\t      return $uibModal.open({\n\t        component: 'alertDialog',\n\t        resolve: {\n\t          title: function title() {\n\t            return _title;\n\t          },\n\t          message: function message() {\n\t            return _message;\n\t          },\n\t          confirm: function confirm() {\n\t            return _confirm;\n\t          }\n\t        }\n\t      }).result;\n\t    }\n\t  };\n\t\n\t  return service;\n\t}\n\n/***/ },\n/* 338 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tAuthService.$inject = [\"$window\", \"$location\", \"$q\", \"$http\"];\n\tapiKeyHttpInterceptor.$inject = [\"$injector\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('Auth', AuthService);\n\t  ngModule.service('currentUser', CurrentUserService);\n\t  ngModule.service('clientConfig', ClientConfigService);\n\t  ngModule.factory('apiKeyHttpInterceptor', apiKeyHttpInterceptor);\n\t\n\t  ngModule.config([\"$httpProvider\", function ($httpProvider) {\n\t    $httpProvider.interceptors.push('apiKeyHttpInterceptor');\n\t  }]);\n\t\n\t  ngModule.run([\"$location\", \"$window\", \"$rootScope\", \"$route\", \"Auth\", function ($location, $window, $rootScope, $route, Auth) {\n\t    $rootScope.$on('$routeChangeStart', function (event, to) {\n\t      if (to.authenticated && !Auth.isAuthenticated()) {\n\t        logger('Requested authenticated route: ', to);\n\t        event.preventDefault();\n\t        // maybe we only miss the session? try to load session\n\t        Auth.loadSession().then(function () {\n\t          logger('Loaded session');\n\t          $route.reload();\n\t        }).catch(function () {\n\t          logger('Need to login, redirecting');\n\t          Auth.login();\n\t        });\n\t      }\n\t    });\n\t  }]);\n\t};\n\t\n\tvar _debug = __webpack_require__(19);\n\t\n\tvar _debug2 = _interopRequireDefault(_debug);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar logger = (0, _debug2.default)('redash:auth');\n\tvar SESSION_ITEM = 'session';\n\tvar session = { loaded: false };\n\t\n\tfunction storeSession(sessionData) {\n\t  logger('Updating session to be:', sessionData);\n\t  _extends(session, sessionData, { loaded: true });\n\t}\n\t\n\tfunction getLocalSessionData() {\n\t  if (session.loaded) {\n\t    return session;\n\t  }\n\t\n\t  var sessionData = window.sessionStorage.getItem(SESSION_ITEM);\n\t  if (sessionData) {\n\t    storeSession(JSON.parse(sessionData));\n\t  }\n\t\n\t  return session;\n\t}\n\t\n\tfunction AuthService($window, $location, $q, $http) {\n\t  var Auth = {\n\t    isAuthenticated: function isAuthenticated() {\n\t      var sessionData = getLocalSessionData();\n\t      return sessionData.loaded && sessionData.user.id;\n\t    },\n\t    login: function login() {\n\t      var next = encodeURI($location.url());\n\t      logger('Calling login with next = %s', next);\n\t      window.location.href = '/login?next=' + next;\n\t    },\n\t    logout: function logout() {\n\t      logger('Logout.');\n\t      window.sessionStorage.removeItem(SESSION_ITEM);\n\t      $window.location.href = '/logout';\n\t    },\n\t    loadSession: function loadSession() {\n\t      logger('Loading session');\n\t      var sessionData = getLocalSessionData();\n\t      if (sessionData.loaded && sessionData.user.id) {\n\t        logger('Resolving with local value.');\n\t        return $q.resolve(sessionData);\n\t      }\n\t\n\t      this.setApiKey(null);\n\t      return $http.get('/api/session').then(function (response) {\n\t        storeSession(response.data);\n\t        return session;\n\t      });\n\t    },\n\t    loadConfig: function loadConfig() {\n\t      logger('Loading config');\n\t      return $http.get('/api/config').then(function (response) {\n\t        storeSession({ client_config: response.data.client_config, user: { permissions: [] } });\n\t        return response.data;\n\t      });\n\t    },\n\t    setApiKey: function setApiKey(apiKey) {\n\t      logger('Set API key to: %s', apiKey);\n\t      this.apiKey = apiKey;\n\t    },\n\t    getApiKey: function getApiKey() {\n\t      return this.apiKey;\n\t    }\n\t  };\n\t\n\t  return Auth;\n\t}\n\t\n\tfunction CurrentUserService() {\n\t  var _this = this;\n\t\n\t  var sessionData = getLocalSessionData();\n\t  _extends(this, sessionData.user);\n\t\n\t  this.canEdit = function (object) {\n\t    var userId = object.user_id || object.user && object.user.id;\n\t    return _this.hasPermission('admin') || userId && userId === _this.id;\n\t  };\n\t\n\t  this.hasPermission = function (permission) {\n\t    return _this.permissions.indexOf(permission) !== -1;\n\t  };\n\t\n\t  this.isAdmin = this.hasPermission('admin');\n\t}\n\t\n\tfunction ClientConfigService() {\n\t  _extends(this, getLocalSessionData().client_config);\n\t}\n\t\n\tfunction apiKeyHttpInterceptor($injector) {\n\t  return {\n\t    request: function request(config) {\n\t      var Auth = $injector.get('Auth');\n\t      var apiKey = Auth.getApiKey();\n\t      if (apiKey) {\n\t        config.headers.Authorization = 'Key ' + apiKey;\n\t      }\n\t\n\t      return config;\n\t    }\n\t  };\n\t}\n\n/***/ },\n/* 339 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tTitleService.$inject = [\"$rootScope\"];\n\ttitle.$inject = [\"$rootScope\", \"Title\"];\n\tautofocus.$inject = [\"$timeout\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.factory('Title', TitleService);\n\t  ngModule.directive('title', title);\n\t  ngModule.directive('compareTo', compareTo);\n\t  ngModule.directive('autofocus', autofocus);\n\t};\n\t\n\tvar _debug = __webpack_require__(19);\n\t\n\tvar _debug2 = _interopRequireDefault(_debug);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar logger = (0, _debug2.default)('redash:directives');\n\t\n\tfunction compareTo() {\n\t  return {\n\t    require: 'ngModel',\n\t    scope: {\n\t      otherModelValue: '=compareTo'\n\t    },\n\t    link: function link(scope, element, attributes, ngModel) {\n\t      var validate = function validate(value) {\n\t        ngModel.$setValidity('compareTo', value === scope.otherModelValue);\n\t      };\n\t\n\t      scope.$watch('otherModelValue', function () {\n\t        validate(ngModel.$modelValue);\n\t      });\n\t\n\t      ngModel.$parsers.push(function (value) {\n\t        validate(value);\n\t        return value;\n\t      });\n\t    }\n\t  };\n\t}\n\t\n\tfunction autofocus($timeout) {\n\t  return {\n\t    link: function link(scope, element) {\n\t      $timeout(function () {\n\t        element[0].focus();\n\t      });\n\t    }\n\t  };\n\t}\n\t\n\tfunction TitleService($rootScope) {\n\t  var Title = {\n\t    title: 'Redash',\n\t    set: function set(newTitle) {\n\t      this.title = newTitle;\n\t      $rootScope.$broadcast('$titleChange');\n\t    },\n\t    get: function get() {\n\t      return this.title;\n\t    }\n\t  };\n\t\n\t  return Title;\n\t}\n\t\n\tfunction title($rootScope, Title) {\n\t  return {\n\t    restrict: 'E',\n\t    link: function link(scope, element) {\n\t      function updateTitle() {\n\t        var newTitle = Title.get();\n\t        logger('Updating title to: %s', newTitle);\n\t        element.text(newTitle);\n\t      }\n\t\n\t      $rootScope.$on('$routeChangeSuccess', function (event, to) {\n\t        if (to.title) {\n\t          Title.set(to.title);\n\t        }\n\t      });\n\t      $rootScope.$on('$titleChange', updateTitle);\n\t    }\n\t  };\n\t}\n\n/***/ },\n/* 340 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tVisualizationRenderer.$inject = [\"Visualization\"];\n\tVisualizationOptionsEditor.$inject = [\"Visualization\"];\n\tVisualizationName.$inject = [\"Visualization\"];\n\tFilterValueFilter.$inject = [\"clientConfig\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.provider('Visualization', VisualizationProvider);\n\t  ngModule.directive('visualizationRenderer', VisualizationRenderer);\n\t  ngModule.directive('visualizationOptionsEditor', VisualizationOptionsEditor);\n\t  ngModule.directive('visualizationName', VisualizationName);\n\t  ngModule.filter('filterValue', FilterValueFilter);\n\t  (0, _editVisualizationDialog2.default)(ngModule);\n\t  (0, _chart2.default)(ngModule);\n\t  (0, _counter2.default)(ngModule);\n\t  (0, _sunburst2.default)(ngModule);\n\t  (0, _sankey2.default)(ngModule);\n\t  (0, _wordCloud2.default)(ngModule);\n\t  (0, _boxPlot2.default)(ngModule);\n\t  (0, _cohort2.default)(ngModule);\n\t  (0, _map2.default)(ngModule);\n\t  (0, _pivot2.default)(ngModule);\n\t  (0, _table2.default)(ngModule);\n\t};\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _editVisualizationDialog = __webpack_require__(341);\n\t\n\tvar _editVisualizationDialog2 = _interopRequireDefault(_editVisualizationDialog);\n\t\n\tvar _counter = __webpack_require__(343);\n\t\n\tvar _counter2 = _interopRequireDefault(_counter);\n\t\n\tvar _table = __webpack_require__(346);\n\t\n\tvar _table2 = _interopRequireDefault(_table);\n\t\n\tvar _chart = __webpack_require__(348);\n\t\n\tvar _chart2 = _interopRequireDefault(_chart);\n\t\n\tvar _sunburst = __webpack_require__(592);\n\t\n\tvar _sunburst2 = _interopRequireDefault(_sunburst);\n\t\n\tvar _sankey = __webpack_require__(595);\n\t\n\tvar _sankey2 = _interopRequireDefault(_sankey);\n\t\n\tvar _wordCloud = __webpack_require__(598);\n\t\n\tvar _wordCloud2 = _interopRequireDefault(_wordCloud);\n\t\n\tvar _boxPlot = __webpack_require__(602);\n\t\n\tvar _boxPlot2 = _interopRequireDefault(_boxPlot);\n\t\n\tvar _cohort = __webpack_require__(605);\n\t\n\tvar _cohort2 = _interopRequireDefault(_cohort);\n\t\n\tvar _map = __webpack_require__(609);\n\t\n\tvar _map2 = _interopRequireDefault(_map);\n\t\n\tvar _pivot = __webpack_require__(622);\n\t\n\tvar _pivot2 = _interopRequireDefault(_pivot);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction VisualizationProvider() {\n\t  var _this = this;\n\t\n\t  this.visualizations = {};\n\t  this.visualizationTypes = {};\n\t  var defaultConfig = {\n\t    defaultOptions: {},\n\t    skipTypes: false,\n\t    editorTemplate: null\n\t  };\n\t\n\t  this.registerVisualization = function (config) {\n\t    var visualization = _extends({}, defaultConfig, config);\n\t\n\t    // TODO: this is prone to errors; better refactor.\n\t    if ((0, _underscore.isEmpty)(_this.visualizations)) {\n\t      _this.defaultVisualization = visualization;\n\t    }\n\t\n\t    _this.visualizations[config.type] = visualization;\n\t\n\t    if (!config.skipTypes) {\n\t      _this.visualizationTypes[config.name] = config.type;\n\t    }\n\t  };\n\t\n\t  this.getSwitchTemplate = function (property) {\n\t    var pattern = /(<[a-zA-Z0-9-]*?)( |>)/;\n\t\n\t    var mergedTemplates = (0, _underscore.reduce)(_this.visualizations, function (templates, visualization) {\n\t      if (visualization[property]) {\n\t        var ngSwitch = '$1 ng-switch-when=\"' + visualization.type + '\" $2';\n\t        var template = visualization[property].replace(pattern, ngSwitch);\n\t\n\t        return templates + '\\n' + template;\n\t      }\n\t\n\t      return templates;\n\t    }, '');\n\t\n\t    mergedTemplates = '<div ng-switch on=\"visualization.type\">' + mergedTemplates + '</div>';\n\t\n\t    return mergedTemplates;\n\t  };\n\t\n\t  this.$get = [\"$resource\", function ($resource) {\n\t    var Visualization = $resource('api/visualizations/:id', { id: '@id' });\n\t    Visualization.visualizations = _this.visualizations;\n\t    Visualization.visualizationTypes = _this.visualizationTypes;\n\t    Visualization.renderVisualizationsTemplate = _this.getSwitchTemplate('renderTemplate');\n\t    Visualization.editorTemplate = _this.getSwitchTemplate('editorTemplate');\n\t    Visualization.defaultVisualization = _this.defaultVisualization;\n\t\n\t    return Visualization;\n\t  }];\n\t}\n\t\n\tfunction VisualizationName(Visualization) {\n\t  return {\n\t    restrict: 'E',\n\t    scope: {\n\t      visualization: '='\n\t    },\n\t    template: '{{name}}',\n\t    replace: false,\n\t    link: function link(scope) {\n\t      if (Visualization.visualizations[scope.visualization.type]) {\n\t        var defaultName = Visualization.visualizations[scope.visualization.type].name;\n\t        if (defaultName !== scope.visualization.name) {\n\t          scope.name = scope.visualization.name;\n\t        }\n\t      }\n\t    }\n\t  };\n\t}\n\t\n\tfunction VisualizationRenderer(Visualization) {\n\t  return {\n\t    restrict: 'E',\n\t    scope: {\n\t      visualization: '=',\n\t      queryResult: '='\n\t    },\n\t    // TODO: using switch here (and in the options editor) might introduce errors and bad\n\t    // performance wise. It's better to eventually show the correct template based on the\n\t    // visualization type and not make the browser render all of them.\n\t    template: '<filters filters=\"filters\"></filters>\\n' + Visualization.renderVisualizationsTemplate,\n\t    replace: false,\n\t    link: function link(scope) {\n\t      scope.$watch('queryResult && queryResult.getFilters()', function (filters) {\n\t        if (filters) {\n\t          scope.filters = filters;\n\t        }\n\t      });\n\t    }\n\t  };\n\t}\n\t\n\tfunction VisualizationOptionsEditor(Visualization) {\n\t  return {\n\t    restrict: 'E',\n\t    template: Visualization.editorTemplate,\n\t    replace: false,\n\t    scope: {\n\t      visualization: '=',\n\t      query: '=',\n\t      queryResult: '='\n\t    }\n\t  };\n\t}\n\t\n\tfunction FilterValueFilter(clientConfig) {\n\t  return function (value, filter) {\n\t    var firstValue = value;\n\t    if ((0, _underscore.isArray)(value)) {\n\t      firstValue = value[0];\n\t    }\n\t\n\t    // TODO: deduplicate code with table.js:\n\t    if (filter.column.type === 'date') {\n\t      if (firstValue && _moment2.default.isMoment(firstValue)) {\n\t        return firstValue.format(clientConfig.dateFormat);\n\t      }\n\t    } else if (filter.column.type === 'datetime') {\n\t      if (firstValue && _moment2.default.isMoment(firstValue)) {\n\t        return firstValue.format(clientConfig.dateTimeFormat);\n\t      }\n\t    }\n\t\n\t    return firstValue;\n\t  };\n\t}\n\n/***/ },\n/* 341 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('editVisualizationDialog', EditVisualizationDialog);\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _angular = __webpack_require__(22);\n\t\n\tvar _editVisualizationDialog = __webpack_require__(342);\n\t\n\tvar _editVisualizationDialog2 = _interopRequireDefault(_editVisualizationDialog);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar EditVisualizationDialog = {\n\t  template: _editVisualizationDialog2.default,\n\t  bindings: {\n\t    resolve: '<',\n\t    close: '&',\n\t    dismiss: '&'\n\t  },\n\t  controller: [\"$window\", \"currentUser\", \"Events\", \"Visualization\", \"toastr\", function controller($window, currentUser, Events, Visualization, toastr) {\n\t    'ngInject';\n\t\n\t    var _this = this;\n\t\n\t    this.query = this.resolve.query;\n\t    this.queryResult = this.resolve.queryResult;\n\t    this.originalVisualization = this.resolve.visualization;\n\t    this.onNewSuccess = this.resolve.onNewSuccess;\n\t    this.visualization = (0, _angular.copy)(this.originalVisualization);\n\t    this.visTypes = Visualization.visualizationTypes;\n\t\n\t    this.newVisualization = function () {\n\t      return {\n\t        type: Visualization.defaultVisualization.type,\n\t        name: Visualization.defaultVisualization.name,\n\t        description: '',\n\t        options: Visualization.defaultVisualization.defaultOptions\n\t      };\n\t    };\n\t\n\t    if (!this.visualization) {\n\t      this.visualization = this.newVisualization();\n\t    }\n\t\n\t    this.typeChanged = function (oldType) {\n\t      var type = _this.visualization.type;\n\t      // if not edited by user, set name to match type\n\t      // todo: this is wrong, because he might have edited it before.\n\t      if (type && oldType !== type && _this.visualization && !_this.visForm.name.$dirty) {\n\t        _this.visualization.name = Visualization.visualizations[_this.visualization.type].name;\n\t      }\n\t\n\t      // Bring default options\n\t      if (type && oldType !== type && _this.visualization) {\n\t        _this.visualization.options = Visualization.visualizations[_this.visualization.type].defaultOptions;\n\t      }\n\t    };\n\t\n\t    this.submit = function () {\n\t      if (_this.visualization.id) {\n\t        Events.record('update', 'visualization', _this.visualization.id, { type: _this.visualization.type });\n\t      } else {\n\t        Events.record('create', 'visualization', null, { type: _this.visualization.type });\n\t      }\n\t\n\t      _this.visualization.query_id = _this.query.id;\n\t\n\t      Visualization.save(_this.visualization, function (result) {\n\t        toastr.success('Visualization saved');\n\t\n\t        var visIds = (0, _underscore.pluck)(_this.query.visualizations, 'id');\n\t        var index = visIds.indexOf(result.id);\n\t        if (index > -1) {\n\t          _this.query.visualizations[index] = result;\n\t        } else {\n\t          // new visualization\n\t          _this.query.visualizations.push(result);\n\t          if (_this.onNewSuccess) {\n\t            _this.onNewSuccess(result);\n\t          }\n\t        }\n\t        _this.close();\n\t      }, function () {\n\t        toastr.error('Visualization could not be saved');\n\t      });\n\t    };\n\t\n\t    this.closeDialog = function () {\n\t      if (_this.visForm.$dirty) {\n\t        if ($window.confirm('Are you sure you want to close the editor without saving?')) {\n\t          _this.close();\n\t        }\n\t      } else {\n\t        _this.close();\n\t      }\n\t    };\n\t  }]\n\t};\n\n/***/ },\n/* 342 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div>\\n  <div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.closeDialog()\\\"><span aria-hidden=\\\"true\\\">&times;</span>\\n    </button>\\n    <h4 class=\\\"modal-title\\\">Visualization Editor</h4>\\n  </div>\\n  <div class=\\\"modal-body\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-5 p-r-5\\\">\\n        <div>\\n          <form name=\\\"$ctrl.visForm\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Visualization Type</label>\\n\\n              <select required ng-model=\\\"$ctrl.visualization.type\\\"\\n                      ng-options=\\\"value as key for (key, value) in $ctrl.visTypes\\\" class=\\\"form-control\\\"\\n                      ng-change=\\\"$ctrl.typeChanged('{{$ctrl.visualization.type}}')\\\"></select>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Visualization Name</label>\\n              <input name=\\\"name\\\" type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.visualization.name\\\"\\n                     placeholder=\\\"{{$ctrl.visualization.type | capitalize}}\\\">\\n            </div>\\n\\n            <visualization-options-editor visualization=\\\"$ctrl.visualization\\\"\\n                                          query-result=\\\"$ctrl.queryResult\\\"\\n                                          query=\\\"$ctrl.query\\\">\\n            </visualization-options-editor>\\n          </form>\\n        </div>\\n      </div>\\n      <div class=\\\"col-md-7\\\" style=\\\"border: 1px solid #eee\\\">\\n        <visualization-renderer visualization=\\\"$ctrl.visualization\\\" query-result=\\\"$ctrl.queryResult\\\"></visualization-renderer>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"modal-footer\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.closeDialog()\\\">Close</button>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"$ctrl.submit()\\\">Save</button>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 343 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('counterEditor', CounterEditor);\n\t  ngModule.directive('counterRenderer', CounterRenderer);\n\t\n\t  ngModule.config([\"VisualizationProvider\", function (VisualizationProvider) {\n\t    var renderTemplate = '<counter-renderer ' + 'options=\"visualization.options\" query-result=\"queryResult\">' + '</counter-renderer>';\n\t\n\t    var editTemplate = '<counter-editor></counter-editor>';\n\t    var defaultOptions = {\n\t      counterColName: 'counter',\n\t      rowNumber: 1,\n\t      targetRowNumber: 1\n\t    };\n\t\n\t    VisualizationProvider.registerVisualization({\n\t      type: 'COUNTER',\n\t      name: 'Counter',\n\t      renderTemplate: renderTemplate,\n\t      editorTemplate: editTemplate,\n\t      defaultOptions: defaultOptions\n\t    });\n\t  }]);\n\t};\n\t\n\tvar _counter = __webpack_require__(344);\n\t\n\tvar _counter2 = _interopRequireDefault(_counter);\n\t\n\tvar _counterEditor = __webpack_require__(345);\n\t\n\tvar _counterEditor2 = _interopRequireDefault(_counterEditor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction CounterRenderer() {\n\t  return {\n\t    restrict: 'E',\n\t    template: _counter2.default,\n\t    link: function link($scope) {\n\t      var refreshData = function refreshData() {\n\t        var queryData = $scope.queryResult.getData();\n\t        if (queryData) {\n\t          var rowNumber = $scope.visualization.options.rowNumber - 1;\n\t          var targetRowNumber = $scope.visualization.options.targetRowNumber - 1;\n\t          var counterColName = $scope.visualization.options.counterColName;\n\t          var targetColName = $scope.visualization.options.targetColName;\n\t\n\t          if ($scope.visualization.options.countRow) {\n\t            $scope.counterValue = queryData.length;\n\t          } else if (counterColName) {\n\t            $scope.counterValue = queryData[rowNumber][counterColName];\n\t          }\n\t          if (targetColName) {\n\t            $scope.targetValue = queryData[targetRowNumber][targetColName];\n\t\n\t            if ($scope.targetValue) {\n\t              $scope.delta = $scope.counterValue - $scope.targetValue;\n\t              $scope.trendPositive = $scope.delta >= 0;\n\t            }\n\t          } else {\n\t            $scope.targetValue = null;\n\t          }\n\t        }\n\t      };\n\t\n\t      $scope.$watch('visualization.options', refreshData, true);\n\t      $scope.$watch('queryResult && queryResult.getData()', refreshData);\n\t    }\n\t  };\n\t}\n\t\n\tfunction CounterEditor() {\n\t  return {\n\t    restrict: 'E',\n\t    template: _counterEditor2.default\n\t  };\n\t}\n\n/***/ },\n/* 344 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<counter ng-class=\\\"{'positive': targetValue && trendPositive, 'negative': targetValue && !trendPositive}\\\">\\n  <value>{{counterValue|number}}</value>\\n  <counter-target ng-if=\\\"targetValue\\\">({{targetValue|number}})</counter-target>\\n  <counter-name>{{visualization.name}}</counter-name>\\n</counter>\\n\"\n\n/***/ },\n/* 345 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Counter Value Column Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.counterColName\\\" class=\\\"form-control\\\" ng-disabled=\\\"visualization.options.countRow\\\"></select>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Counter Value Row Number</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"number\\\" ng-model=\\\"visualization.options.rowNumber\\\" min=\\\"1\\\" class=\\\"form-control\\\" ng-disabled=\\\"visualization.options.countRow\\\">\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Target Value Column Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.targetColName\\\" class=\\\"form-control\\\">\\n        <option value=\\\"\\\">No target value</option>\\n      </select>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\" ng-if=\\\"visualization.options.targetColName\\\">\\n    <label class=\\\"col-lg-6\\\">Target Value Row Number</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"number\\\" ng-model=\\\"visualization.options.targetRowNumber\\\" min=\\\"1\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.countRow\\\">\\n      <i class=\\\"input-helper\\\"></i> Count Rows\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 346 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tGridRenderer.$inject = [\"clientConfig\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.config([\"VisualizationProvider\", function (VisualizationProvider) {\n\t    VisualizationProvider.registerVisualization({\n\t      type: 'TABLE',\n\t      name: 'Table',\n\t      renderTemplate: '<grid-renderer options=\"visualization.options\" query-result=\"queryResult\"></grid-renderer>',\n\t      skipTypes: true\n\t    });\n\t  }]);\n\t  ngModule.directive('gridRenderer', GridRenderer);\n\t};\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _queryResult = __webpack_require__(323);\n\t\n\tvar _table = __webpack_require__(347);\n\t\n\tvar _table2 = _interopRequireDefault(_table);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction formatValue($filter, clientConfig, value, type) {\n\t  var formattedValue = value;\n\t  switch (type) {\n\t    case 'integer':\n\t      formattedValue = $filter('number')(value, 0);\n\t      break;\n\t    case 'float':\n\t      formattedValue = $filter('number')(value, 2);\n\t      break;\n\t    case 'boolean':\n\t      if (value !== undefined) {\n\t        formattedValue = String(value);\n\t      }\n\t      break;\n\t    case 'date':\n\t      if (value && _moment2.default.isMoment(value)) {\n\t        formattedValue = value.format(clientConfig.dateFormat);\n\t      }\n\t      break;\n\t    case 'datetime':\n\t      if (value && _moment2.default.isMoment(value)) {\n\t        formattedValue = value.format(clientConfig.dateTimeFormat);\n\t      }\n\t      break;\n\t    default:\n\t      if ((0, _underscore.isString)(value)) {\n\t        formattedValue = $filter('linkify')(value);\n\t      }\n\t      break;\n\t  }\n\t\n\t  return formattedValue;\n\t}\n\t\n\tfunction GridRenderer(clientConfig) {\n\t  return {\n\t    restrict: 'E',\n\t    scope: {\n\t      queryResult: '=',\n\t      itemsPerPage: '='\n\t    },\n\t    template: _table2.default,\n\t    replace: false,\n\t    controller: [\"$scope\", \"$filter\", function controller($scope, $filter) {\n\t      $scope.gridColumns = [];\n\t      $scope.gridRows = [];\n\t\n\t      $scope.$watch('queryResult && queryResult.getData()', function (queryResult) {\n\t        if (!queryResult) {\n\t          return;\n\t        }\n\t\n\t        if ($scope.queryResult.getData() == null) {\n\t          $scope.gridColumns = [];\n\t          $scope.filters = [];\n\t        } else {\n\t          $scope.filters = $scope.queryResult.getFilters();\n\t\n\t          var columns = $scope.queryResult.getColumns();\n\t          columns.forEach(function (col) {\n\t            col.title = (0, _queryResult.getColumnCleanName)(col.name);\n\t            col.formatFunction = (0, _underscore.partial)(formatValue, $filter, clientConfig, _underscore._, col.type);\n\t          });\n\t\n\t          $scope.gridRows = $scope.queryResult.getData();\n\t          $scope.gridColumns = columns;\n\t        }\n\t      });\n\t    }]\n\t  };\n\t}\n\n/***/ },\n/* 347 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<dynamic-table rows=\\\"gridRows\\\" columns=\\\"gridColumns\\\"></dynamic-table>\\n\"\n\n/***/ },\n/* 348 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tChartEditor.$inject = [\"ColorPalette\", \"clientConfig\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.component('colorBox', ColorBox);\n\t  ngModule.directive('chartRenderer', ChartRenderer);\n\t  ngModule.directive('chartEditor', ChartEditor);\n\t  ngModule.config([\"VisualizationProvider\", function (VisualizationProvider) {\n\t    var renderTemplate = '<chart-renderer options=\"visualization.options\" query-result=\"queryResult\"></chart-renderer>';\n\t    var editTemplate = '<chart-editor options=\"visualization.options\" query-result=\"queryResult\"></chart-editor>';\n\t\n\t    var defaultOptions = {\n\t      globalSeriesType: 'column',\n\t      sortX: true,\n\t      legend: { enabled: true },\n\t      yAxis: [{ type: 'linear' }, { type: 'linear', opposite: true }],\n\t      xAxis: { type: 'datetime', labels: { enabled: true } },\n\t      error_y: { type: 'data', visible: true },\n\t      series: { stacking: null, error_y: { type: 'data', visible: true } },\n\t      seriesOptions: {},\n\t      columnMapping: {},\n\t      bottomMargin: 50\n\t    };\n\t\n\t    VisualizationProvider.registerVisualization({\n\t      type: 'CHART',\n\t      name: 'Chart',\n\t      renderTemplate: renderTemplate,\n\t      editorTemplate: editTemplate,\n\t      defaultOptions: defaultOptions\n\t    });\n\t  }]);\n\t  (0, _plotly2.default)(ngModule);\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _plotly = __webpack_require__(349);\n\t\n\tvar _plotly2 = _interopRequireDefault(_plotly);\n\t\n\tvar _chart = __webpack_require__(590);\n\t\n\tvar _chart2 = _interopRequireDefault(_chart);\n\t\n\tvar _chartEditor = __webpack_require__(591);\n\t\n\tvar _chartEditor2 = _interopRequireDefault(_chartEditor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction ChartRenderer() {\n\t  return {\n\t    restrict: 'E',\n\t    scope: {\n\t      queryResult: '=',\n\t      options: '=?'\n\t    },\n\t    template: _chart2.default,\n\t    replace: false,\n\t    controller: [\"$scope\", function controller($scope) {\n\t      $scope.chartSeries = [];\n\t\n\t      function zIndexCompare(series) {\n\t        if ($scope.options.seriesOptions[series.name]) {\n\t          return $scope.options.seriesOptions[series.name].zIndex;\n\t        }\n\t        return 0;\n\t      }\n\t\n\t      function reloadData() {\n\t        if (!(0, _underscore.isUndefined)($scope.queryResult) && $scope.queryResult.getData()) {\n\t          var data = $scope.queryResult.getChartData($scope.options.columnMapping);\n\t          $scope.chartSeries = (0, _underscore.sortBy)(data, zIndexCompare);\n\t        }\n\t      }\n\t\n\t      function reloadChart() {\n\t        reloadData();\n\t        $scope.plotlyOptions = $scope.options;\n\t      }\n\t\n\t      $scope.$watch('options', reloadChart, true);\n\t      $scope.$watch('queryResult && queryResult.getData()', reloadData);\n\t    }]\n\t  };\n\t}\n\t\n\tfunction ChartEditor(ColorPalette, clientConfig) {\n\t  return {\n\t    restrict: 'E',\n\t    template: _chartEditor2.default,\n\t    scope: {\n\t      queryResult: '=',\n\t      options: '=?'\n\t    },\n\t    link: function link(scope) {\n\t      scope.currentTab = 'general';\n\t      scope.colors = (0, _underscore.extend)({ Automatic: null }, ColorPalette);\n\t\n\t      scope.stackingOptions = {\n\t        Disabled: null,\n\t        Enabled: 'normal',\n\t        Percent: 'percent'\n\t      };\n\t\n\t      scope.changeTab = function (tab) {\n\t        scope.currentTab = tab;\n\t      };\n\t\n\t      scope.chartTypes = {\n\t        line: { name: 'Line', icon: 'line-chart' },\n\t        column: { name: 'Bar', icon: 'bar-chart' },\n\t        area: { name: 'Area', icon: 'area-chart' },\n\t        pie: { name: 'Pie', icon: 'pie-chart' },\n\t        scatter: { name: 'Scatter', icon: 'circle-o' },\n\t        bubble: { name: 'Bubble', icon: 'circle-o' }\n\t      };\n\t\n\t      if (clientConfig.allowCustomJSVisualizations) {\n\t        scope.chartTypes.custom = { name: 'Custom', icon: 'code' };\n\t      }\n\t\n\t      scope.xAxisScales = ['datetime', 'linear', 'logarithmic', 'category'];\n\t      scope.yAxisScales = ['linear', 'logarithmic', 'datetime'];\n\t\n\t      scope.chartTypeChanged = function () {\n\t        (0, _underscore.keys)(scope.options.seriesOptions).forEach(function (key) {\n\t          scope.options.seriesOptions[key].type = scope.options.globalSeriesType;\n\t        });\n\t      };\n\t\n\t      scope.showSizeColumnPicker = function () {\n\t        return (0, _underscore.some)(scope.options.seriesOptions, function (options) {\n\t          return options.type === 'bubble';\n\t        });\n\t      };\n\t\n\t      scope.options.customCode = '// Available variables are x, ys, element, and Plotly\\n// Type console.log(x, ys); for more info about x and ys\\n// To plot your graph call Plotly.plot(element, ...)\\n// Plotly examples and docs: https://plot.ly/javascript/';\n\t\n\t      function refreshColumns() {\n\t        scope.columns = scope.queryResult.getColumns();\n\t        scope.columnNames = (0, _underscore.pluck)(scope.columns, 'name');\n\t        if (scope.columnNames.length > 0) {\n\t          (0, _underscore.each)((0, _underscore.difference)((0, _underscore.keys)(scope.options.columnMapping), scope.columnNames), function (column) {\n\t            delete scope.options.columnMapping[column];\n\t          });\n\t        }\n\t      }\n\t\n\t      function refreshColumnsAndForm() {\n\t        refreshColumns();\n\t        if (!scope.queryResult.getData() || scope.queryResult.getData().length === 0 || scope.columns.length === 0) {\n\t          return;\n\t        }\n\t        scope.form.yAxisColumns = (0, _underscore.intersection)(scope.form.yAxisColumns, scope.columnNames);\n\t        if (!(0, _underscore.contains)(scope.columnNames, scope.form.xAxisColumn)) {\n\t          scope.form.xAxisColumn = undefined;\n\t        }\n\t        if (!(0, _underscore.contains)(scope.columnNames, scope.form.groupby)) {\n\t          scope.form.groupby = undefined;\n\t        }\n\t      }\n\t\n\t      function refreshSeries() {\n\t        var seriesNames = (0, _underscore.pluck)(scope.queryResult.getChartData(scope.options.columnMapping), 'name');\n\t        var existing = (0, _underscore.keys)(scope.options.seriesOptions);\n\t        (0, _underscore.each)((0, _underscore.difference)(seriesNames, existing), function (name) {\n\t          scope.options.seriesOptions[name] = {\n\t            type: scope.options.globalSeriesType,\n\t            yAxis: 0\n\t          };\n\t          scope.form.seriesList.push(name);\n\t        });\n\t        (0, _underscore.each)((0, _underscore.difference)(existing, seriesNames), function (name) {\n\t          scope.form.seriesList = (0, _underscore.without)(scope.form.seriesList, name);\n\t          delete scope.options.seriesOptions[name];\n\t        });\n\t      }\n\t\n\t      function setColumnRole(role, column) {\n\t        scope.options.columnMapping[column] = role;\n\t      }\n\t\n\t      function unsetColumn(column) {\n\t        setColumnRole('unused', column);\n\t      }\n\t\n\t      refreshColumns();\n\t\n\t      scope.$watch('options.columnMapping', function () {\n\t        if (scope.queryResult.status === 'done') {\n\t          refreshSeries();\n\t        }\n\t      }, true);\n\t\n\t      scope.$watch(function () {\n\t        return [scope.queryResult.getId(), scope.queryResult.status];\n\t      }, function (changed) {\n\t        if (!changed[0] || changed[1] !== 'done') {\n\t          return;\n\t        }\n\t\n\t        refreshColumnsAndForm();\n\t        refreshSeries();\n\t      }, true);\n\t\n\t      scope.form = {\n\t        yAxisColumns: [],\n\t        seriesList: (0, _underscore.sortBy)((0, _underscore.keys)(scope.options.seriesOptions), function (name) {\n\t          return scope.options.seriesOptions[name].zIndex;\n\t        })\n\t      };\n\t\n\t      scope.$watchCollection('form.seriesList', function (value) {\n\t        (0, _underscore.each)(value, function (name, index) {\n\t          scope.options.seriesOptions[name].zIndex = index;\n\t          scope.options.seriesOptions[name].index = 0; // is this needed?\n\t        });\n\t      });\n\t\n\t      scope.$watchCollection('form.yAxisColumns', function (value, old) {\n\t        (0, _underscore.each)(old, unsetColumn);\n\t        (0, _underscore.each)(value, (0, _underscore.partial)(setColumnRole, 'y'));\n\t      });\n\t\n\t      scope.$watch('form.xAxisColumn', function (value, old) {\n\t        if (old !== undefined) {\n\t          unsetColumn(old);\n\t        }\n\t        if (value !== undefined) {\n\t          setColumnRole('x', value);\n\t        }\n\t      });\n\t\n\t      scope.$watch('form.errorColumn', function (value, old) {\n\t        if (old !== undefined) {\n\t          unsetColumn(old);\n\t        }\n\t        if (value !== undefined) {\n\t          setColumnRole('yError', value);\n\t        }\n\t      });\n\t\n\t      scope.$watch('form.sizeColumn', function (value, old) {\n\t        if (old !== undefined) {\n\t          unsetColumn(old);\n\t        }\n\t        if (value !== undefined) {\n\t          setColumnRole('size', value);\n\t        }\n\t      });\n\t\n\t      scope.$watch('form.groupby', function (value, old) {\n\t        if (old !== undefined) {\n\t          unsetColumn(old);\n\t        }\n\t        if (value !== undefined) {\n\t          setColumnRole('series', value);\n\t        }\n\t      });\n\t\n\t      if (!(0, _underscore.has)(scope.options, 'legend')) {\n\t        scope.options.legend = { enabled: true };\n\t      }\n\t\n\t      if (!(0, _underscore.has)(scope.options, 'bottomMargin')) {\n\t        scope.options.bottomMargin = 50;\n\t      }\n\t\n\t      if (scope.columnNames) {\n\t        (0, _underscore.each)(scope.options.columnMapping, function (value, key) {\n\t          if (scope.columnNames.length > 0 && !(0, _underscore.contains)(scope.columnNames, key)) {\n\t            return;\n\t          }\n\t          if (value === 'x') {\n\t            scope.form.xAxisColumn = key;\n\t          } else if (value === 'y') {\n\t            scope.form.yAxisColumns.push(key);\n\t          } else if (value === 'series') {\n\t            scope.form.groupby = key;\n\t          } else if (value === 'yError') {\n\t            scope.form.errorColumn = key;\n\t          } else if (value === 'size') {\n\t            scope.form.sizeColumn = key;\n\t          }\n\t        });\n\t      }\n\t    }\n\t  };\n\t}\n\t\n\tvar ColorBox = {\n\t  bindings: {\n\t    color: '<'\n\t  },\n\t  template: \"<span style='width: 12px; height: 12px; background-color: {{$ctrl.color}}; display: inline-block; margin-right: 5px;'></span>\"\n\t};\n\n/***/ },\n/* 349 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.constant('ColorPalette', ColorPalette);\n\t  ngModule.directive('plotlyChart', PlotlyChart);\n\t  ngModule.directive('customPlotlyChart', CustomPlotlyChart);\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _d = __webpack_require__(350);\n\t\n\tvar _d2 = _interopRequireDefault(_d);\n\t\n\tvar _core = __webpack_require__(351);\n\t\n\tvar _core2 = _interopRequireDefault(_core);\n\t\n\tvar _bar = __webpack_require__(555);\n\t\n\tvar _bar2 = _interopRequireDefault(_bar);\n\t\n\tvar _pie = __webpack_require__(569);\n\t\n\tvar _pie2 = _interopRequireDefault(_pie);\n\t\n\tvar _histogram = __webpack_require__(580);\n\t\n\tvar _histogram2 = _interopRequireDefault(_histogram);\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\t_core2.default.register([_bar2.default, _pie2.default, _histogram2.default]);\n\t_core2.default.setPlotConfig({\n\t  modeBarButtonsToRemove: ['sendDataToCloud']\n\t});\n\t\n\t// The following colors will be used if you pick \"Automatic\" color.\n\tvar BaseColors = {\n\t  Blue: '#4572A7',\n\t  Red: '#AA4643',\n\t  Green: '#89A54E',\n\t  Purple: '#80699B',\n\t  Cyan: '#3D96AE',\n\t  Orange: '#DB843D',\n\t  'Light Blue': '#92A8CD',\n\t  Lilac: '#A47D7C',\n\t  'Light Green': '#B5CA92',\n\t  Brown: '#A52A2A',\n\t  Black: '#000000',\n\t  Gray: '#808080',\n\t  Pink: '#FFC0CB',\n\t  'Dark Blue': '#00008b'\n\t};\n\t\n\t// Additional colors for the user to choose from:\n\tvar ColorPalette = _extends({}, BaseColors, {\n\t  'Indian Red': '#F8766D',\n\t  'Green 2': '#53B400',\n\t  'Green 3': '#00C094',\n\t  DarkTurquoise: '#00B6EB',\n\t  'Dark Violet': '#A58AFF',\n\t  'Pink 2': '#FB61D7'\n\t});\n\t\n\tvar ColorPaletteArray = (0, _underscore.values)(BaseColors);\n\t\n\tfunction fillXValues(seriesList) {\n\t  var xValues = (0, _underscore.sortBy)(_underscore.union.apply(undefined, _toConsumableArray((0, _underscore.pluck)(seriesList, 'x'))), _underscore.identity);\n\t  seriesList.forEach(function (series) {\n\t    series.x = (0, _underscore.sortBy)(series.x, _underscore.identity);\n\t\n\t    (0, _underscore.each)(xValues, function (value, index) {\n\t      if (series.x[index] !== value) {\n\t        series.x.splice(index, 0, value);\n\t        series.y.splice(index, 0, null);\n\t      }\n\t    });\n\t  });\n\t}\n\t\n\tfunction storeOriginalHeightForEachSeries(seriesList) {\n\t  seriesList.forEach(function (series) {\n\t    if (!(0, _underscore.has)(series, 'visible')) {\n\t      series.visible = true;\n\t      series.original_y = series.y.slice();\n\t    }\n\t  });\n\t}\n\t\n\tfunction getEnabledSeries(seriesList) {\n\t  return seriesList.filter(function (series) {\n\t    return series.visible === true;\n\t  });\n\t}\n\t\n\tfunction initializeTextAndHover(seriesList) {\n\t  seriesList.forEach(function (series) {\n\t    series.text = [];\n\t    series.hoverinfo = 'text+name';\n\t  });\n\t}\n\t\n\tfunction normalAreaStacking(seriesList) {\n\t  fillXValues(seriesList);\n\t  storeOriginalHeightForEachSeries(seriesList);\n\t  initializeTextAndHover(seriesList);\n\t\n\t  var enabledSeriesList = getEnabledSeries(seriesList);\n\t\n\t  (0, _underscore.each)(enabledSeriesList, function (series, seriesIndex, list) {\n\t    (0, _underscore.each)(series.y, function (_, yIndex) {\n\t      var cumulativeHeightOfPreviousSeries = seriesIndex > 0 ? list[seriesIndex - 1].y[yIndex] : 0;\n\t      var cumulativeHeightWithThisSeries = cumulativeHeightOfPreviousSeries + series.original_y[yIndex];\n\t\n\t      series.y[yIndex] = cumulativeHeightWithThisSeries;\n\t      series.text.push('Value: ' + series.original_y[yIndex] + '<br>Sum: ' + cumulativeHeightWithThisSeries);\n\t    });\n\t  });\n\t}\n\t\n\tfunction lastVisibleY(seriesList, lastSeriesIndex, yIndex) {\n\t  for (var i = lastSeriesIndex; i >= 0; i -= 1) {\n\t    if (seriesList[i].visible === true) {\n\t      return seriesList[i].y[yIndex];\n\t    }\n\t  }\n\t  return 0;\n\t}\n\t\n\tfunction percentAreaStacking(seriesList) {\n\t  if (seriesList.length === 0) {\n\t    return;\n\t  }\n\t  fillXValues(seriesList);\n\t  storeOriginalHeightForEachSeries(seriesList);\n\t  initializeTextAndHover(seriesList);\n\t\n\t  (0, _underscore.each)(seriesList[0].y, function (seriesY, yIndex) {\n\t    var sumOfCorrespondingDataPoints = seriesList.reduce(function (total, series) {\n\t      return total + series.original_y[yIndex];\n\t    }, 0);\n\t\n\t    (0, _underscore.each)(seriesList, function (series, seriesIndex) {\n\t      var percentage = series.original_y[yIndex] / sumOfCorrespondingDataPoints * 100;\n\t      var previousVisiblePercentage = lastVisibleY(seriesList, seriesIndex - 1, yIndex);\n\t      series.y[yIndex] = percentage + previousVisiblePercentage;\n\t      series.text.push('Value: ' + series.original_y[yIndex] + '<br>Relative: ' + percentage.toFixed(2) + '%');\n\t    });\n\t  });\n\t}\n\t\n\tfunction percentBarStacking(seriesList) {\n\t  if (seriesList.length === 0) {\n\t    return;\n\t  }\n\t  fillXValues(seriesList);\n\t  initializeTextAndHover(seriesList);\n\t\n\t  for (var i = 0; i < seriesList[0].y.length; i += 1) {\n\t    var sum = 0;\n\t    for (var j = 0; j < seriesList.length; j += 1) {\n\t      sum += seriesList[j].y[i];\n\t    }\n\t    for (var _j = 0; _j < seriesList.length; _j += 1) {\n\t      var value = seriesList[_j].y[i] / sum * 100;\n\t      seriesList[_j].text.push('Value: ' + seriesList[_j].y[i] + '<br>Relative: ' + value.toFixed(2) + '%');\n\t      seriesList[_j].y[i] = value;\n\t    }\n\t  }\n\t}\n\t\n\tfunction normalizeValue(value) {\n\t  if (_moment2.default.isMoment(value)) {\n\t    return value.format('YYYY-MM-DD HH:mm:ss');\n\t  }\n\t  return value;\n\t}\n\t\n\tfunction seriesMinValue(series) {\n\t  return (0, _underscore.min)(series.map(function (s) {\n\t    return (0, _underscore.min)(s.y);\n\t  }));\n\t}\n\t\n\tfunction seriesMaxValue(series) {\n\t  return (0, _underscore.max)(series.map(function (s) {\n\t    return (0, _underscore.max)(s.y);\n\t  }));\n\t}\n\t\n\tfunction leftAxisSeries(series) {\n\t  return series.filter(function (s) {\n\t    return s.yaxis !== 'y2';\n\t  });\n\t}\n\t\n\tfunction rightAxisSeries(series) {\n\t  return series.filter(function (s) {\n\t    return s.yaxis === 'y2';\n\t  });\n\t}\n\t\n\tfunction getScaleType(scale) {\n\t  if (scale === 'datetime') {\n\t    return 'date';\n\t  }\n\t  if (scale === 'logarithmic') {\n\t    return 'log';\n\t  }\n\t  return scale;\n\t}\n\t\n\tfunction getColor(index) {\n\t  return ColorPaletteArray[index % ColorPaletteArray.length];\n\t}\n\t\n\tvar PlotlyChart = function PlotlyChart() {\n\t  var bottomMargin = 50;\n\t  return {\n\t    restrict: 'E',\n\t    template: '<div></div>',\n\t    scope: {\n\t      options: '=',\n\t      series: '=',\n\t      height: '='\n\t    },\n\t    link: function link(scope, element) {\n\t      function calculateHeight() {\n\t        var height = Math.max(scope.height, scope.height - 50 + bottomMargin);\n\t        return height;\n\t      }\n\t\n\t      function setType(series, type) {\n\t        if (type === 'column') {\n\t          series.type = 'bar';\n\t        } else if (type === 'line') {\n\t          series.mode = 'lines';\n\t        } else if (type === 'area') {\n\t          series.fill = scope.options.series.stacking === null ? 'tozeroy' : 'tonexty';\n\t          series.mode = 'lines';\n\t        } else if (type === 'scatter') {\n\t          series.type = 'scatter';\n\t          series.mode = 'markers';\n\t        } else if (type === 'bubble') {\n\t          series.mode = 'markers';\n\t        }\n\t      }\n\t\n\t      function getTitle(axis) {\n\t        if (!(0, _underscore.isUndefined)(axis) && !(0, _underscore.isUndefined)(axis.title)) {\n\t          return axis.title.text;\n\t        }\n\t        return null;\n\t      }\n\t\n\t      function recalculateOptions() {\n\t        scope.data.length = 0;\n\t        scope.layout.showlegend = (0, _underscore.has)(scope.options, 'legend') ? scope.options.legend.enabled : true;\n\t        if ((0, _underscore.has)(scope.options, 'bottomMargin')) {\n\t          bottomMargin = parseInt(scope.options.bottomMargin, 10);\n\t          scope.layout.margin.b = bottomMargin;\n\t        }\n\t        delete scope.layout.barmode;\n\t        delete scope.layout.xaxis;\n\t        delete scope.layout.yaxis;\n\t        delete scope.layout.yaxis2;\n\t\n\t        if (scope.options.globalSeriesType === 'pie') {\n\t          var hasX = (0, _underscore.contains)((0, _underscore.values)(scope.options.columnMapping), 'x');\n\t          var rows = scope.series.length > 2 ? 2 : 1;\n\t          var cellsInRow = Math.ceil(scope.series.length / rows);\n\t          var cellWidth = 1 / cellsInRow;\n\t          var cellHeight = 1 / rows;\n\t          var xPadding = 0.02;\n\t          var yPadding = 0.05;\n\t\n\t          (0, _underscore.each)(scope.series, function (series, index) {\n\t            var xPosition = index % cellsInRow * cellWidth;\n\t            var yPosition = Math.floor(index / cellsInRow) * cellHeight;\n\t            var plotlySeries = {\n\t              values: [],\n\t              labels: [],\n\t              type: 'pie',\n\t              hole: 0.4,\n\t              marker: { colors: ColorPaletteArray },\n\t              text: series.name,\n\t              textposition: 'inside',\n\t              name: series.name,\n\t              domain: {\n\t                x: [xPosition, xPosition + cellWidth - xPadding],\n\t                y: [yPosition, yPosition + cellHeight - yPadding]\n\t              }\n\t            };\n\t\n\t            series.data.forEach(function (row) {\n\t              plotlySeries.values.push(row.y);\n\t              plotlySeries.labels.push(hasX ? row.x : 'Slice ' + index);\n\t            });\n\t\n\t            scope.data.push(plotlySeries);\n\t          });\n\t          return;\n\t        }\n\t\n\t        var hasY2 = false;\n\t        var sortX = scope.options.sortX === true || scope.options.sortX === undefined;\n\t        var useUnifiedXaxis = sortX && scope.options.xAxis.type === 'category';\n\t\n\t        var unifiedX = null;\n\t        if (useUnifiedXaxis) {\n\t          unifiedX = (0, _underscore.sortBy)(_underscore.union.apply(undefined, _toConsumableArray(scope.series.map(function (s) {\n\t            return (0, _underscore.pluck)(s.data, 'x');\n\t          }))), _underscore.identity);\n\t        }\n\t\n\t        (0, _underscore.each)(scope.series, function (series, index) {\n\t          var seriesOptions = scope.options.seriesOptions[series.name] || { type: scope.options.globalSeriesType };\n\t\n\t          var plotlySeries = {\n\t            x: [],\n\t            y: [],\n\t            error_y: { array: [] },\n\t            name: seriesOptions.name || series.name,\n\t            marker: { color: seriesOptions.color ? seriesOptions.color : getColor(index) }\n\t          };\n\t\n\t          if (seriesOptions.yAxis === 1 && (scope.options.series.stacking === null || seriesOptions.type === 'line')) {\n\t            hasY2 = true;\n\t            plotlySeries.yaxis = 'y2';\n\t          }\n\t\n\t          setType(plotlySeries, seriesOptions.type);\n\t          var data = series.data;\n\t          if (sortX) {\n\t            data = (0, _underscore.sortBy)(data, 'x');\n\t          }\n\t\n\t          if (useUnifiedXaxis && index === 0) {\n\t            var yValues = {};\n\t            var eValues = {};\n\t\n\t            data.forEach(function (row) {\n\t              yValues[row.x] = row.y;\n\t              if (row.yError) {\n\t                eValues[row.x] = row.yError;\n\t              }\n\t            });\n\t\n\t            unifiedX.forEach(function (x) {\n\t              plotlySeries.x.push(normalizeValue(x));\n\t              plotlySeries.y.push(normalizeValue(yValues[x] || null));\n\t              if (!(0, _underscore.isUndefined)(eValues[x])) {\n\t                plotlySeries.error_y.array.push(normalizeValue(eValues[x] || null));\n\t              }\n\t            });\n\t          } else {\n\t            data.forEach(function (row) {\n\t              plotlySeries.x.push(normalizeValue(row.x));\n\t              plotlySeries.y.push(normalizeValue(row.y));\n\t              if (row.yError) {\n\t                plotlySeries.error_y.array.push(normalizeValue(row.yError));\n\t              }\n\t            });\n\t          }\n\t          if (!plotlySeries.error_y.length) {\n\t            delete plotlySeries.error_y.length;\n\t          }\n\t\n\t          if (seriesOptions.type === 'bubble') {\n\t            plotlySeries.marker = {\n\t              size: (0, _underscore.pluck)(data, 'size')\n\t            };\n\t          }\n\t          scope.data.push(plotlySeries);\n\t        });\n\t\n\t        scope.layout.xaxis = {\n\t          title: getTitle(scope.options.xAxis),\n\t          type: getScaleType(scope.options.xAxis.type)\n\t        };\n\t\n\t        if (!(0, _underscore.isUndefined)(scope.options.xAxis.labels)) {\n\t          scope.layout.xaxis.showticklabels = scope.options.xAxis.labels.enabled;\n\t        }\n\t\n\t        if ((0, _underscore.isArray)(scope.options.yAxis)) {\n\t          scope.layout.yaxis = {\n\t            title: getTitle(scope.options.yAxis[0]),\n\t            type: getScaleType(scope.options.yAxis[0].type)\n\t          };\n\t\n\t          if ((0, _underscore.isNumber)(scope.options.yAxis[0].rangeMin) || (0, _underscore.isNumber)(scope.options.yAxis[0].rangeMax)) {\n\t            var minY = scope.options.yAxis[0].rangeMin || Math.min(0, seriesMinValue(leftAxisSeries(scope.data)));\n\t            var maxY = scope.options.yAxis[0].rangeMax || seriesMaxValue(leftAxisSeries(scope.data));\n\t\n\t            scope.layout.yaxis.range = [minY, maxY];\n\t          }\n\t        }\n\t        if (hasY2 && !(0, _underscore.isUndefined)(scope.options.yAxis)) {\n\t          scope.layout.yaxis2 = {\n\t            title: getTitle(scope.options.yAxis[1]),\n\t            type: getScaleType(scope.options.yAxis[1].type),\n\t            overlaying: 'y',\n\t            side: 'right'\n\t          };\n\t\n\t          if ((0, _underscore.isNumber)(scope.options.yAxis[1].rangeMin) || (0, _underscore.isNumber)(scope.options.yAxis[1].rangeMax)) {\n\t            var _minY = scope.options.yAxis[1].rangeMin || Math.min(0, seriesMinValue(rightAxisSeries(scope.data)));\n\t            var _maxY = scope.options.yAxis[1].rangeMax || seriesMaxValue(rightAxisSeries(scope.data));\n\t\n\t            scope.layout.yaxis2.range = [_minY, _maxY];\n\t          }\n\t        } else {\n\t          delete scope.layout.yaxis2;\n\t        }\n\t\n\t        if (scope.options.series.stacking === 'normal') {\n\t          scope.layout.barmode = 'stack';\n\t          if (scope.options.globalSeriesType === 'area') {\n\t            normalAreaStacking(scope.data);\n\t          }\n\t        } else if (scope.options.series.stacking === 'percent') {\n\t          scope.layout.barmode = 'stack';\n\t          if (scope.options.globalSeriesType === 'area') {\n\t            percentAreaStacking(scope.data);\n\t          } else if (scope.options.globalSeriesType === 'column') {\n\t            percentBarStacking(scope.data);\n\t          }\n\t        }\n\t\n\t        scope.layout.margin.b = bottomMargin;\n\t        scope.layout.height = calculateHeight();\n\t      }\n\t\n\t      scope.$watch('series', recalculateOptions);\n\t      scope.$watch('options', recalculateOptions, true);\n\t\n\t      scope.layout = {\n\t        margin: { l: 50, r: 50, b: bottomMargin, t: 20, pad: 4 },\n\t        height: calculateHeight(),\n\t        autosize: true\n\t      };\n\t      scope.plotlyOptions = { showLink: false, displaylogo: false };\n\t      scope.data = [];\n\t\n\t      var plotlyElement = element[0].children[0];\n\t      _core2.default.newPlot(plotlyElement, scope.data, scope.layout, scope.plotlyOptions);\n\t\n\t      plotlyElement.on('plotly_afterplot', function () {\n\t        if (scope.options.globalSeriesType === 'area' && (scope.options.series.stacking === 'normal' || scope.options.series.stacking === 'percent')) {\n\t          document.querySelectorAll('.legendtoggle').forEach(function (rectDiv, i) {\n\t            _d2.default.select(rectDiv).on('click', function () {\n\t              var maxIndex = scope.data.length - 1;\n\t              var itemClicked = scope.data[maxIndex - i];\n\t\n\t              itemClicked.visible = itemClicked.visible === true ? 'legendonly' : true;\n\t              if (scope.options.series.stacking === 'normal') {\n\t                normalAreaStacking(scope.data);\n\t              } else if (scope.options.series.stacking === 'percent') {\n\t                percentAreaStacking(scope.data);\n\t              }\n\t              _core2.default.redraw(plotlyElement);\n\t            });\n\t          });\n\t        }\n\t      });\n\t      scope.$watch('layout', function (layout, old) {\n\t        if ((0, _underscore.isEqual)(layout, old)) {\n\t          return;\n\t        }\n\t        _core2.default.relayout(plotlyElement, layout);\n\t      }, true);\n\t\n\t      scope.$watch('data', function (data) {\n\t        if (!(0, _underscore.isEmpty)(data)) {\n\t          _core2.default.redraw(plotlyElement);\n\t        }\n\t      }, true);\n\t    }\n\t  };\n\t};\n\t\n\tvar CustomPlotlyChart = function CustomPlotlyChart(clientConfig) {\n\t  var customChart = {\n\t    restrict: 'E',\n\t    template: '<div></div>',\n\t    scope: {\n\t      series: '=',\n\t      options: '=',\n\t      height: '='\n\t    },\n\t    link: function link(scope, element) {\n\t      if (!clientConfig.allowCustomJSVisualizations) {\n\t        return;\n\t      }\n\t      var refresh = function refresh() {\n\t        // eslint-disable-next-line no-eval\n\t        var codeCall = eval('codeCall = function(x, ys, element, Plotly){ ' + scope.options.customCode + ' }');\n\t        codeCall(scope.x, scope.ys, element[0].children[0], _core2.default);\n\t      };\n\t      var timeSeriesToPlotlySeries = function timeSeriesToPlotlySeries() {\n\t        scope.x = [];\n\t        scope.ys = {};\n\t        (0, _underscore.each)(scope.series, function (series) {\n\t          scope.ys[series.name] = [];\n\t          (0, _underscore.each)(series.data, function (point) {\n\t            scope.x.push(normalizeValue(point.x));\n\t            scope.ys[series.name].push(normalizeValue(point.y));\n\t          });\n\t        });\n\t      };\n\t      scope.$watch('options.customCode', function () {\n\t        try {\n\t          refresh();\n\t        } catch (err) {\n\t          if (scope.options.enableConsoleLogs) {\n\t            // eslint-disable-next-line no-console\n\t            console.log('Error while executing custom graph: ' + err);\n\t          }\n\t        }\n\t      }, true);\n\t      scope.$watch('series', function () {\n\t        timeSeriesToPlotlySeries();\n\t        refresh();\n\t      }, true);\n\t    }\n\t  };\n\t  return customChart;\n\t};\n\tCustomPlotlyChart.$inject = [\"clientConfig\"];\n\n/***/ },\n/* 350 */,\n/* 351 */,\n/* 352 */,\n/* 353 */,\n/* 354 */,\n/* 355 */,\n/* 356 */,\n/* 357 */,\n/* 358 */,\n/* 359 */,\n/* 360 */,\n/* 361 */,\n/* 362 */,\n/* 363 */,\n/* 364 */,\n/* 365 */,\n/* 366 */,\n/* 367 */,\n/* 368 */,\n/* 369 */,\n/* 370 */,\n/* 371 */,\n/* 372 */,\n/* 373 */,\n/* 374 */,\n/* 375 */,\n/* 376 */,\n/* 377 */,\n/* 378 */,\n/* 379 */,\n/* 380 */,\n/* 381 */,\n/* 382 */,\n/* 383 */,\n/* 384 */,\n/* 385 */,\n/* 386 */,\n/* 387 */,\n/* 388 */,\n/* 389 */,\n/* 390 */,\n/* 391 */,\n/* 392 */,\n/* 393 */,\n/* 394 */,\n/* 395 */,\n/* 396 */,\n/* 397 */,\n/* 398 */,\n/* 399 */,\n/* 400 */,\n/* 401 */,\n/* 402 */,\n/* 403 */,\n/* 404 */,\n/* 405 */,\n/* 406 */,\n/* 407 */,\n/* 408 */,\n/* 409 */,\n/* 410 */,\n/* 411 */,\n/* 412 */,\n/* 413 */,\n/* 414 */,\n/* 415 */,\n/* 416 */,\n/* 417 */,\n/* 418 */,\n/* 419 */,\n/* 420 */,\n/* 421 */,\n/* 422 */,\n/* 423 */,\n/* 424 */,\n/* 425 */,\n/* 426 */,\n/* 427 */,\n/* 428 */,\n/* 429 */,\n/* 430 */,\n/* 431 */,\n/* 432 */,\n/* 433 */,\n/* 434 */,\n/* 435 */,\n/* 436 */,\n/* 437 */,\n/* 438 */,\n/* 439 */,\n/* 440 */,\n/* 441 */,\n/* 442 */,\n/* 443 */,\n/* 444 */,\n/* 445 */,\n/* 446 */,\n/* 447 */,\n/* 448 */,\n/* 449 */,\n/* 450 */,\n/* 451 */,\n/* 452 */,\n/* 453 */,\n/* 454 */,\n/* 455 */,\n/* 456 */,\n/* 457 */,\n/* 458 */,\n/* 459 */,\n/* 460 */,\n/* 461 */,\n/* 462 */,\n/* 463 */\n/***/ function(module, exports) {\n\n\t/* (ignored) */\n\n/***/ },\n/* 464 */,\n/* 465 */,\n/* 466 */,\n/* 467 */,\n/* 468 */,\n/* 469 */,\n/* 470 */,\n/* 471 */,\n/* 472 */,\n/* 473 */,\n/* 474 */,\n/* 475 */,\n/* 476 */,\n/* 477 */,\n/* 478 */,\n/* 479 */,\n/* 480 */,\n/* 481 */,\n/* 482 */,\n/* 483 */,\n/* 484 */,\n/* 485 */,\n/* 486 */,\n/* 487 */,\n/* 488 */,\n/* 489 */,\n/* 490 */,\n/* 491 */,\n/* 492 */,\n/* 493 */,\n/* 494 */,\n/* 495 */,\n/* 496 */,\n/* 497 */,\n/* 498 */,\n/* 499 */,\n/* 500 */,\n/* 501 */,\n/* 502 */,\n/* 503 */,\n/* 504 */,\n/* 505 */,\n/* 506 */,\n/* 507 */,\n/* 508 */,\n/* 509 */,\n/* 510 */,\n/* 511 */,\n/* 512 */,\n/* 513 */,\n/* 514 */,\n/* 515 */,\n/* 516 */,\n/* 517 */,\n/* 518 */,\n/* 519 */,\n/* 520 */,\n/* 521 */,\n/* 522 */,\n/* 523 */,\n/* 524 */,\n/* 525 */,\n/* 526 */,\n/* 527 */,\n/* 528 */,\n/* 529 */,\n/* 530 */,\n/* 531 */,\n/* 532 */,\n/* 533 */,\n/* 534 */,\n/* 535 */,\n/* 536 */,\n/* 537 */,\n/* 538 */,\n/* 539 */,\n/* 540 */,\n/* 541 */,\n/* 542 */,\n/* 543 */,\n/* 544 */,\n/* 545 */,\n/* 546 */,\n/* 547 */,\n/* 548 */,\n/* 549 */,\n/* 550 */,\n/* 551 */,\n/* 552 */,\n/* 553 */,\n/* 554 */,\n/* 555 */,\n/* 556 */,\n/* 557 */,\n/* 558 */,\n/* 559 */,\n/* 560 */,\n/* 561 */,\n/* 562 */,\n/* 563 */,\n/* 564 */,\n/* 565 */,\n/* 566 */,\n/* 567 */,\n/* 568 */,\n/* 569 */,\n/* 570 */,\n/* 571 */,\n/* 572 */,\n/* 573 */,\n/* 574 */,\n/* 575 */,\n/* 576 */,\n/* 577 */,\n/* 578 */,\n/* 579 */,\n/* 580 */,\n/* 581 */,\n/* 582 */,\n/* 583 */,\n/* 584 */,\n/* 585 */,\n/* 586 */,\n/* 587 */,\n/* 588 */,\n/* 589 */,\n/* 590 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div ng-if=\\\"plotlyOptions.globalSeriesType != 'custom'\\\">\\n  <plotly-chart options='plotlyOptions' series='chartSeries' height=\\\"300\\\"></plotly-chart>\\n</div>\\n<div ng-if=\\\"plotlyOptions.globalSeriesType == 'custom'\\\">\\n  <custom-plotly-chart series='chartSeries' options='plotlyOptions' height=\\\"300\\\"></custom-plotly-chart>\\n</div>\\n\"\n\n/***/ },\n/* 591 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\">\\n      <a ng-click=\\\"changeTab('general')\\\">General</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'xAxis'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('xAxis')\\\">X Axis</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'yAxis'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('yAxis')\\\">Y Axis</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'series'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('series')\\\">Series</a>\\n    </li>\\n  </ul>\\n  <div ng-show=\\\"currentTab == 'general'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Chart Type</label>\\n      <div ng-if=\\\"chartTypes\\\"><!--the if is a weird workaround-->\\n        <ui-select ng-model=\\\"options.globalSeriesType\\\" on-select=\\\"chartTypeChanged()\\\">\\n          <ui-select-match placeholder=\\\"Choose chart type...\\\">\\n            <div>\\n              <i class=\\\"fa fa-{{$select.selected.value.icon}}\\\"></i>\\n              {{$select.selected.value.name}}\\n            </div>\\n          </ui-select-match>\\n          <ui-select-choices repeat=\\\"info.chartType as (chartType, info) in chartTypes\\\">\\n            <div><i class=\\\"fa fa-{{info.value.icon}}\\\"></i><span> </span><span\\n              ng-bind-html=\\\"info.value.name | highlight: $select.search\\\"></span></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n\\n\\n    <div class=\\\"form-group\\\" ng-class=\\\"{'has-error': chartEditor.xAxisColumn.$invalid}\\\">\\n      <label class=\\\"control-label\\\">X Column</label>\\n\\n      <ui-select name=\\\"xAxisColumn\\\" required ng-model=\\\"form.xAxisColumn\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <!-- not using regular validation (chartEditor.yAxisColumns.$invalid) due to a bug in ui-select with multiple choices-->\\n    <div class=\\\"form-group\\\" ng-class=\\\"{'has-error': !form.yAxisColumns || form.yAxisColumns.length == 0}\\\">\\n      <label class=\\\"control-label\\\">Y Columns</label>\\n\\n      <ui-select multiple name=\\\"yAxisColumns\\\" required ng-model=\\\"form.yAxisColumns\\\">\\n        <ui-select-match placeholder=\\\"Choose columns...\\\">{{$item}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.groupby | remove:form.xAxisColumn\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label class=\\\"control-label\\\">Group by</label>\\n      <ui-select name=\\\"groupby\\\" ng-model=\\\"form.groupby\\\" class=\\\"clearable\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">\\n          {{$select.selected}}\\n        </ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.xAxisColumn\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"showSizeColumnPicker()\\\">\\n      <label class=\\\"control-label\\\">Bubble size column</label>\\n\\n      <ui-select name=\\\"sizeColumn\\\" ng-model=\\\"form.sizeColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label class=\\\"control-label\\\">Errors column</label>\\n\\n      <ui-select name=\\\"errorColumn\\\" ng-model=\\\"form.errorColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.legend.enabled\\\">\\n        <i class=\\\"input-helper\\\"></i> Show Legend\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label class=\\\"control-label\\\">Stacking</label>\\n\\n      <div ng-if=\\\"stackingOptions\\\"><!--the if is a weird workaround-->\\n        <ui-select ng-model=\\\"options.series.stacking\\\"\\n                   ng-disabled=\\\"['line', 'area', 'column'].indexOf(options.globalSeriesType) == -1\\\">\\n          <ui-select-match placeholder=\\\"Choose Stacking...\\\">{{$select.selected.key | capitalize}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"value.value as (key, value) in stackingOptions\\\">\\n            <div ng-bind-html=\\\"value.key | highlight: $select.search\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType == 'custom'\\\">\\n    <label class=\\\"control-label\\\">Custom code</label>\\n    <textarea ng-model=\\\"options.customCode\\\" class=\\\"form-control\\\" rows=\\\"10\\\">\\n    </textarea>\\n  </div>\\n\\n  <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType == 'custom'\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.enableConsoleLogs\\\">\\n        <i class=\\\"input-helper\\\"></i> Show errors in the console\\n      </label>\\n    </div>\\n\\n\\n  <div ng-show=\\\"currentTab == 'xAxis'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Scale</label>\\n      <ui-select ng-model=\\\"options.xAxis.type\\\">\\n        <ui-select-match placeholder=\\\"Choose Scale...\\\">{{$select.selected | capitalize}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"scaleType in xAxisScales\\\">\\n          <div ng-bind-html=\\\"scaleType | capitalize | highlight: $select.search\\\"></div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Name</label>\\n      <input ng-model=\\\"options.xAxis.title.text\\\" type=\\\"text\\\" class=\\\"form-control\\\"></input>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.sortX\\\">\\n        <i class=\\\"input-helper\\\"></i> Sort Values\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.xAxis.labels.enabled\\\">\\n        <i class=\\\"input-helper\\\"></i> Show Labels\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Height</label>\\n      <input name=\\\"x-axis-height\\\" type=\\\"number\\\" class=\\\"form-control\\\" ng-model=\\\"options.bottomMargin\\\">\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'yAxis'\\\">\\n    <div ng-repeat=\\\"yAxis in options.yAxis\\\">\\n      <h4>{{$index == 0 ? 'Left' : 'Right'}} Y Axis</h4>\\n\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Scale</label>\\n        <ui-select ng-model=\\\"yAxis.type\\\">\\n          <ui-select-match placeholder=\\\"Choose Scale...\\\">{{$select.selected | capitalize}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"scaleType in yAxisScales\\\">\\n            <div ng-bind-html=\\\"scaleType | capitalize | highlight: $select.search\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Name</label>\\n        <input ng-model=\\\"yAxis.title.text\\\" type=\\\"text\\\" class=\\\"form-control\\\"></input>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Min Value</label>\\n        <input ng-model=\\\"yAxis.rangeMin\\\" type=\\\"number\\\" step=\\\"any\\\" placeholder=\\\"Auto\\\" class=\\\"form-control\\\"></input>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Max Value</label>\\n        <input ng-model=\\\"yAxis.rangeMax\\\" type=\\\"number\\\" step=\\\"any\\\" placeholder=\\\"Auto\\\" class=\\\"form-control\\\"></input>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab=='series'\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <thead>\\n      <th>zIndex</th>\\n      <th>Left Y Axis</th>\\n      <th>Right Y Axis</th>\\n      <th>Label</th>\\n      <th>Color</th>\\n      <th>Type</th>\\n      </thead>\\n      <tbody ui-sortable ng-model=\\\"form.seriesList\\\">\\n      <tr ng-repeat=\\\"name in form.seriesList\\\">\\n        <td style=\\\"cursor: move;\\\"><i class=\\\"fa fa-arrows-v\\\"></i> <span\\n          ng-bind=\\\"options.seriesOptions[name].zIndex + 1\\\"></span></td>\\n        <td>\\n          <input type=\\\"radio\\\" ng-value=\\\"0\\\" ng-model=\\\"options.seriesOptions[name].yAxis\\\">\\n        </td>\\n        <td>\\n          <input type=\\\"radio\\\" ng-value=\\\"1\\\" ng-model=\\\"options.seriesOptions[name].yAxis\\\">\\n        </td>\\n        <td style=\\\"padding: 3px; width: 140px;\\\">\\n          <input placeholder=\\\"{{name}}\\\" class=\\\"form-control input-sm super-small-input\\\" type=\\\"text\\\"\\n                 ng-model=\\\"options.seriesOptions[name].name\\\">\\n        </td>\\n        <td style=\\\"padding: 3px; width: 35px;\\\">\\n          <ui-select ng-model=\\\"options.seriesOptions[name].color\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </td>\\n        <td style=\\\"padding: 3px; width: 105px;\\\">\\n          <ui-select ng-model=\\\"options.seriesOptions[name].type\\\">\\n            <ui-select-match placeholder=\\\"Chart Type\\\">\\n              <div>\\n                <i class=\\\"fa fa-{{$select.selected.value.icon}}\\\"></i>\\n                {{$select.selected.value.name}}\\n              </div>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"info.chartType as (chartType, info) in chartTypes\\\">\\n              <div><i class=\\\"fa fa-{{info.value.icon}}\\\"></i><span> </span><span\\n                ng-bind-html=\\\"info.value.name | highlight: $select.search\\\"></span></div>\\n            </ui-select-choices>\\n          </ui-select>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\"\n\n/***/ },\n/* 592 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('sunburstSequenceRenderer', sunburstSequenceRenderer);\n\t  ngModule.directive('sunburstSequenceEditor', sunburstSequenceEditor);\n\t\n\t  ngModule.config([\"VisualizationProvider\", function (VisualizationProvider) {\n\t    var renderTemplate = '<sunburst-sequence-renderer options=\"visualization.options\" query-result=\"queryResult\"></sunburst-sequence-renderer>';\n\t\n\t    var editTemplate = '<sunburst-sequence-editor></sunburst-sequence-editor>';\n\t    var defaultOptions = {\n\t      height: 300\n\t    };\n\t\n\t    VisualizationProvider.registerVisualization({\n\t      type: 'SUNBURST_SEQUENCE',\n\t      name: 'Sunburst Sequence',\n\t      renderTemplate: renderTemplate,\n\t      editorTemplate: editTemplate,\n\t      defaultOptions: defaultOptions\n\t    });\n\t  }]);\n\t};\n\t\n\tvar _jquery = __webpack_require__(157);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _sunburst = __webpack_require__(593);\n\t\n\tvar _sunburst2 = _interopRequireDefault(_sunburst);\n\t\n\tvar _sunburstSequenceEditor = __webpack_require__(594);\n\t\n\tvar _sunburstSequenceEditor2 = _interopRequireDefault(_sunburstSequenceEditor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction sunburstSequenceRenderer() {\n\t  return {\n\t    restrict: 'E',\n\t    link: function link(scope, element) {\n\t      var sunburst = new _sunburst2.default(scope, element);\n\t\n\t      function resize() {\n\t        sunburst.remove();\n\t        sunburst = new _sunburst2.default(scope, element);\n\t      }\n\t\n\t      (0, _jquery2.default)(window).on('resize', resize);\n\t      scope.$watch('visualization.options.height', function (oldValue, newValue) {\n\t        if (oldValue !== newValue) {\n\t          resize();\n\t        }\n\t      });\n\t    }\n\t  };\n\t}\n\t\n\tfunction sunburstSequenceEditor() {\n\t  return {\n\t    restrict: 'E',\n\t    template: _sunburstSequenceEditor2.default\n\t  };\n\t}\n\n/***/ },\n/* 593 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Sunburst;\n\t\n\tvar _d = __webpack_require__(350);\n\t\n\tvar _d2 = _interopRequireDefault(_d);\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _angular = __webpack_require__(22);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar exitNode = '<<<Exit>>>';\n\tvar colors = _d2.default.scale.category10();\n\t\n\t// helper function colorMap - color gray if \"end\" is detected\n\tfunction colorMap(d) {\n\t  return colors(d.name);\n\t}\n\t\n\t// Return array of ancestors of nodes, highest first, but excluding the root.\n\tfunction getAncestors(node) {\n\t  var path = [];\n\t  var current = node;\n\t\n\t  while (current.parent) {\n\t    path.unshift(current);\n\t    current = current.parent;\n\t  }\n\t  return path;\n\t}\n\t\n\t// The following is based on @chrisrzhou's example from: http://bl.ocks.org/chrisrzhou/d5bdd8546f64ca0e4366.\n\tfunction Sunburst(scope, element) {\n\t  this.element = element;\n\t  this.watches = [];\n\t\n\t  // svg dimensions\n\t  var width = element[0].parentElement.clientWidth;\n\t  var height = scope.visualization.options.height;\n\t  var radius = Math.min(width, height) / 2;\n\t\n\t  // Breadcrumb dimensions: width, height, spacing, width of tip/tail.\n\t  var b = {\n\t    w: width / 6,\n\t    h: 30,\n\t    s: 3,\n\t    t: 10\n\t  };\n\t\n\t  // margins\n\t  var margin = {\n\t    top: radius,\n\t    bottom: 50,\n\t    left: radius,\n\t    right: 0\n\t  };\n\t\n\t  /**\n\t   * Drawing variables:\n\t   *\n\t   * e.g. colors, totalSize, partitions, arcs\n\t   */\n\t  // Mapping of nodes to colorscale.\n\t\n\t  // Total size of all nodes, to be used later when data is loaded\n\t  var totalSize = 0;\n\t\n\t  // create d3.layout.partition\n\t  var partition = _d2.default.layout.partition().size([2 * Math.PI, radius * radius]).value(function (d) {\n\t    return d.size;\n\t  });\n\t\n\t  // create arcs for drawing D3 paths\n\t  var arc = _d2.default.svg.arc().startAngle(function (d) {\n\t    return d.x;\n\t  }).endAngle(function (d) {\n\t    return d.x + d.dx;\n\t  }).innerRadius(function (d) {\n\t    return Math.sqrt(d.y);\n\t  }).outerRadius(function (d) {\n\t    return Math.sqrt(d.y + d.dy);\n\t  });\n\t\n\t  /**\n\t   * Define and initialize D3 select references and div-containers\n\t   *\n\t   * e.g. vis, breadcrumbs, lastCrumb, summary, sunburst, legend\n\t   */\n\t  // create main vis selection\n\t  var vis = _d2.default.select(element[0]).append('div').classed('vis-container', true).style('position', 'relative').style('margin-top', '5px').style('height', height + 2 * b.h + 'px');\n\t\n\t  // create and position breadcrumbs container and svg\n\t  var breadcrumbs = vis.append('div').classed('breadcrumbs-container', true).append('svg').attr('width', width).attr('height', b.h).attr('fill', 'white').attr('font-weight', 600);\n\t\n\t  var marginLeft = (width - radius * 2) / 2;\n\t\n\t  // create and position SVG\n\t  var sunburst = vis.append('div').classed('sunburst-container', true).style('z-index', '2')\n\t  // .style(\"margin-left\", marginLeft + \"px\")\n\t  .style('left', marginLeft + 'px').style('position', 'absolute').append('svg').attr('width', width).attr('height', height).append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t  // create last breadcrumb element\n\t  var lastCrumb = breadcrumbs.append('text').classed('lastCrumb', true);\n\t\n\t  // create and position summary container\n\t  var summary = vis.append('div').classed('summary-container', true).style('position', 'absolute').style('top', b.h + radius * 0.80 + 'px').style('left', marginLeft + radius / 2 + 'px').style('width', radius + 'px').style('height', radius + 'px').style('text-align', 'center').style('font-size', '11px').style('color', '#666').style('z-index', '1');\n\t\n\t  // Generate a string representation for drawing a breadcrumb polygon.\n\t  function breadcrumbPoints(d, i) {\n\t    var points = [];\n\t    points.push('0,0');\n\t    points.push(b.w + ',0');\n\t    points.push(b.w + b.t + ',' + b.h / 2);\n\t    points.push(b.w + ',' + b.h);\n\t    points.push('0,' + b.h);\n\t\n\t    if (i > 0) {\n\t      // Leftmost breadcrumb; don't include 6th vertex.\n\t      points.push(b.t + ',' + b.h / 2);\n\t    }\n\t    return points.join(' ');\n\t  }\n\t\n\t  // Update the breadcrumb breadcrumbs to show the current sequence and percentage.\n\t  function updateBreadcrumbs(ancestors, percentageString) {\n\t    // Data join, where primary key = name + depth.\n\t    var g = breadcrumbs.selectAll('g').data(ancestors, function (d) {\n\t      return d.name + d.depth;\n\t    });\n\t\n\t    // Add breadcrumb and label for entering nodes.\n\t    var breadcrumb = g.enter().append('g');\n\t\n\t    breadcrumb.append('polygon').classed('breadcrumbs-shape', true).attr('points', breadcrumbPoints).attr('fill', colorMap);\n\t\n\t    breadcrumb.append('text').classed('breadcrumbs-text', true).attr('x', (b.w + b.t) / 2).attr('y', b.h / 2).attr('dy', '0.35em').attr('font-size', '10px').attr('text-anchor', 'middle').text(function (d) {\n\t      return d.name;\n\t    });\n\t\n\t    // Set position for entering and updating nodes.\n\t    g.attr('transform', function (d, i) {\n\t      return 'translate(' + i * (b.w + b.s) + ', 0)';\n\t    });\n\t\n\t    // Remove exiting nodes.\n\t    g.exit().remove();\n\t\n\t    // Update percentage at the lastCrumb.\n\t    lastCrumb.attr('x', (ancestors.length + 0.5) * (b.w + b.s)).attr('y', b.h / 2).attr('dy', '0.35em').attr('text-anchor', 'middle').attr('fill', 'black').attr('font-weight', 600).text(percentageString);\n\t  }\n\t\n\t  // helper function mouseover to handle mouseover events/animations and calculation\n\t  // of ancestor nodes etc\n\t  function mouseover(d) {\n\t    // build percentage string\n\t    var percentage = (100 * d.value / totalSize).toPrecision(3);\n\t    var percentageString = percentage + '%';\n\t    if (percentage < 1) {\n\t      percentageString = '< 1.0%';\n\t    }\n\t\n\t    // update breadcrumbs (get all ancestors)\n\t    var ancestors = getAncestors(d);\n\t    updateBreadcrumbs(ancestors, percentageString);\n\t\n\t    // update sunburst (Fade all the segments and highlight only ancestors of current segment)\n\t    sunburst.selectAll('path').attr('opacity', 0.3);\n\t    sunburst.selectAll('path').filter(function (node) {\n\t      return ancestors.indexOf(node) >= 0;\n\t    }).attr('opacity', 1);\n\t\n\t    // update summary\n\t    summary.html('Stage: ' + d.depth + '<br />' + ('<span class=\\'percentage\\' style=\\'font-size: 2em;\\'>' + percentageString + '</span><br />' + d.value + ' of ' + totalSize + '<br />'));\n\t\n\t    // display summary and breadcrumbs if hidden\n\t    summary.style('visibility', '');\n\t    breadcrumbs.style('visibility', '');\n\t  }\n\t\n\t  // helper function click to handle mouseleave events/animations\n\t  function click() {\n\t    // Deactivate all segments then retransition each segment to full opacity.\n\t    sunburst.selectAll('path').on('mouseover', null);\n\t    sunburst.selectAll('path').transition().duration(1000).attr('opacity', 1).each('end', function endClick() {\n\t      _d2.default.select(this).on('mouseover', mouseover);\n\t    });\n\t\n\t    // hide summary and breadcrumbs if visible\n\t    breadcrumbs.style('visibility', 'hidden');\n\t    summary.style('visibility', 'hidden');\n\t  }\n\t\n\t  // helper function to draw the sunburst and breadcrumbs\n\t  function drawSunburst(json) {\n\t    // Build only nodes of a threshold \"visible\" sizes to improve efficiency\n\t    var nodes = partition.nodes(json).filter(function (d) {\n\t      return d.dx > 0.005 && d.name !== exitNode;\n\t    } // 0.005 radians = 0.29 degrees\n\t    );\n\t\n\t    // this section is required to update the colors.domain() every time the data updates\n\t    var uniqueNames = function uniqueNames(a) {\n\t      var output = [];\n\t      a.forEach(function (d) {\n\t        if (output.indexOf(d.name) === -1) output.push(d.name);\n\t      });\n\t      return output;\n\t    }(nodes);\n\t    colors.domain(uniqueNames); // update domain colors\n\t\n\t    // create path based on nodes\n\t    var path = sunburst.data([json]).selectAll('path').data(nodes).enter().append('path').classed('nodePath', true).attr('display', function (d) {\n\t      return d.depth ? null : 'none';\n\t    }).attr('d', arc).attr('fill', colorMap).attr('opacity', 1).attr('stroke', 'white').on('mouseover', mouseover);\n\t\n\t    // // trigger mouse click over sunburst to reset visualization summary\n\t    vis.on('click', click);\n\t\n\t    // Update totalSize of the tree = value of root node from partition.\n\t    totalSize = path.node().__data__.value;\n\t  }\n\t\n\t  // visualize json tree structure\n\t  function createVisualization(json) {\n\t    drawSunburst(json); // draw sunburst\n\t  }\n\t\n\t  function removeVisualization() {\n\t    sunburst.selectAll('.nodePath').remove();\n\t    // legend.selectAll(\"g\").remove();\n\t  }\n\t\n\t  function buildNodes(raw) {\n\t    var values = void 0;\n\t\n\t    if (_underscore2.default.has(raw[0], 'sequence') && _underscore2.default.has(raw[0], 'stage') && _underscore2.default.has(raw[0], 'node') && _underscore2.default.has(raw[0], 'value')) {\n\t      var grouped = _underscore2.default.groupBy(raw, 'sequence');\n\t\n\t      values = _underscore2.default.map(grouped, function (value) {\n\t        var sorted = _underscore2.default.sortBy(value, 'stage');\n\t        return {\n\t          size: value[0].value,\n\t          sequence: value[0].sequence,\n\t          nodes: _underscore2.default.pluck(sorted, 'node')\n\t        };\n\t      });\n\t    } else {\n\t      var validKey = function validKey(key) {\n\t        return key !== 'value' && key.indexOf('$$') !== 0;\n\t      };\n\t      var keys = _underscore2.default.sortBy(_underscore2.default.filter(_underscore2.default.keys(raw[0]), validKey), _underscore2.default.identity);\n\t\n\t      values = _underscore2.default.map(raw, function (row, sequence) {\n\t        return {\n\t          size: row.value,\n\t          sequence: sequence,\n\t          nodes: _underscore2.default.compact(_underscore2.default.map(keys, function (key) {\n\t            return row[key];\n\t          }))\n\t        };\n\t      });\n\t    }\n\t\n\t    return values;\n\t  }\n\t\n\t  function buildHierarchy(csv) {\n\t    var data = buildNodes(csv);\n\t\n\t    // build tree\n\t    var root = {\n\t      name: 'root',\n\t      children: []\n\t    };\n\t\n\t    data.forEach(function (d) {\n\t      var nodes = d.nodes;\n\t      var size = parseInt(d.size, 10);\n\t\n\t      // build graph, nodes, and child nodes\n\t      var currentNode = root;\n\t\n\t      var _loop = function _loop(j) {\n\t        var children = currentNode.children;\n\t        var nodeName = nodes[j];\n\t        var isLeaf = j + 1 === nodes.length;\n\t\n\t        if (!children) {\n\t          currentNode.children = children = [];\n\t          children.push({\n\t            name: exitNode,\n\t            size: currentNode.size\n\t          });\n\t        }\n\t\n\t        var childNode = _underscore2.default.find(children, function (child) {\n\t          return child.name === nodeName;\n\t        });\n\t\n\t        if (isLeaf && childNode) {\n\t          childNode.children.push({\n\t            name: exitNode,\n\t            size: size\n\t          });\n\t        } else if (isLeaf) {\n\t          children.push({\n\t            name: nodeName,\n\t            size: size\n\t          });\n\t        } else {\n\t          if (!childNode) {\n\t            childNode = {\n\t              name: nodeName,\n\t              children: []\n\t            };\n\t            children.push(childNode);\n\t          }\n\t\n\t          currentNode = childNode;\n\t        }\n\t      };\n\t\n\t      for (var j = 0; j < nodes.length; j += 1) {\n\t        _loop(j);\n\t      }\n\t    });\n\t\n\t    return root;\n\t  }\n\t\n\t  function render(data) {\n\t    var json = buildHierarchy(data); // build json tree\n\t    removeVisualization(); // remove existing visualization if any\n\t    createVisualization(json); // visualize json tree\n\t  }\n\t\n\t  function refreshData() {\n\t    var queryData = scope.queryResult.getData();\n\t    if (queryData) {\n\t      render(queryData);\n\t    }\n\t  }\n\t\n\t  refreshData();\n\t  this.watches.push(scope.$watch('visualization.options', refreshData, true));\n\t  this.watches.push(scope.$watch('queryResult && queryResult.getData()', refreshData));\n\t}\n\t\n\tSunburst.prototype.remove = function remove() {\n\t  this.watches.forEach(function (unregister) {\n\t    unregister();\n\t  });\n\t  _angular2.default.element(this.element[0]).empty('.vis-container');\n\t};\n\n/***/ },\n/* 594 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Height</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"number\\\" ng-model=\\\"visualization.options.height\\\" min=\\\"1\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div>\\n    <hr>\\n    This visualization expects the query result to have rows in one of the following formats:\\n\\n    <strong>Option 1:</strong>\\n    <ul>\\n      <li><strong>sequence</strong> - sequence id</li>\\n      <li><strong>stage</strong> - what stage in sequence this is (1, 2, ...)</li>\\n      <li><strong>node</strong> - stage name</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n\\n    <strong>Option 2:</strong>\\n    <ul>\\n      <li><strong>stage1</strong> - stage 1 value</li>\\n      <li><strong>stage1</strong> - stage 2 value (or null)</li>\\n      <li><strong>stage3</strong> - stage 3 value (or null)</li>\\n      <li><strong>stage4</strong> - stage 4 value (or null)</li>\\n      <li><strong>stage5</strong> - stage 5 value (or null)</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 595 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('sankeyRenderer', sankeyRenderer);\n\t  ngModule.directive('sankeyEditor', sankeyEditor);\n\t\n\t  ngModule.config([\"VisualizationProvider\", function (VisualizationProvider) {\n\t    var renderTemplate = '<sankey-renderer options=\"visualization.options\" query-result=\"queryResult\"></sankey-renderer>';\n\t\n\t    var editTemplate = '<sankey-editor></sankey-editor>';\n\t    var defaultOptions = {\n\t      height: 300\n\t    };\n\t\n\t    VisualizationProvider.registerVisualization({\n\t      type: 'SANKEY',\n\t      name: 'Sankey',\n\t      renderTemplate: renderTemplate,\n\t      editorTemplate: editTemplate,\n\t      defaultOptions: defaultOptions\n\t    });\n\t  }]);\n\t};\n\t\n\tvar _angular = __webpack_require__(22);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _jquery = __webpack_require__(157);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _d = __webpack_require__(350);\n\t\n\tvar _d2 = _interopRequireDefault(_d);\n\t\n\tvar _d3sankey = __webpack_require__(596);\n\t\n\tvar _d3sankey2 = _interopRequireDefault(_d3sankey);\n\t\n\tvar _sankeyEditor = __webpack_require__(597);\n\t\n\tvar _sankeyEditor2 = _interopRequireDefault(_sankeyEditor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getConnectedNodes(node) {\n\t  // source link = this node is the source, I need the targets\n\t  var nodes = [];\n\t  node.sourceLinks.forEach(function (link) {\n\t    nodes.push(link.target);\n\t  });\n\t  node.targetLinks.forEach(function (link) {\n\t    nodes.push(link.source);\n\t  });\n\t\n\t  return nodes;\n\t}\n\t\n\tfunction graph(data) {\n\t  var nodesDict = {};\n\t  var links = {};\n\t  var nodes = [];\n\t\n\t  var validKey = function validKey(key) {\n\t    return key !== 'value' && key.indexOf('$$') !== 0;\n\t  };\n\t  var keys = _underscore2.default.sortBy(_underscore2.default.filter(_underscore2.default.keys(data[0]), validKey), _underscore2.default.identity);\n\t\n\t  function normalizeName(name) {\n\t    if (name) {\n\t      return name;\n\t    }\n\t\n\t    return 'Exit';\n\t  }\n\t\n\t  function getNode(name, level) {\n\t    name = normalizeName(name);\n\t    var key = name + ':' + String(level);\n\t    var node = nodesDict[key];\n\t    if (!node) {\n\t      node = { name: name };\n\t      var id = nodes.push(node) - 1;\n\t      node.id = id;\n\t      nodesDict[key] = node;\n\t    }\n\t    return node;\n\t  }\n\t\n\t  function getLink(source, target) {\n\t    var link = links[[source, target]];\n\t    if (!link) {\n\t      link = { target: target, source: source, value: 0 };\n\t      links[[source, target]] = link;\n\t    }\n\t\n\t    return link;\n\t  }\n\t\n\t  function addLink(sourceName, targetName, value, depth) {\n\t    if ((sourceName === '' || !sourceName) && depth > 1) {\n\t      return;\n\t    }\n\t\n\t    var source = getNode(sourceName, depth);\n\t    var target = getNode(targetName, depth + 1);\n\t    var link = getLink(source.id, target.id);\n\t    link.value += parseInt(value, 10);\n\t  }\n\t\n\t  data.forEach(function (row) {\n\t    addLink(row[keys[0]], row[keys[1]], row.value, 1);\n\t    addLink(row[keys[1]], row[keys[2]], row.value, 2);\n\t    addLink(row[keys[2]], row[keys[3]], row.value, 3);\n\t    addLink(row[keys[3]], row[keys[4]], row.value, 4);\n\t  });\n\t\n\t  return { nodes: nodes, links: _underscore2.default.values(links) };\n\t}\n\t\n\tfunction spreadNodes(height, data) {\n\t  var nodesByBreadth = _d2.default.nest().key(function (d) {\n\t    return d.x;\n\t  }).entries(data.nodes).map(function (d) {\n\t    return d.values;\n\t  });\n\t\n\t  nodesByBreadth.forEach(function (nodes) {\n\t    nodes = _underscore2.default.filter(_underscore2.default.sortBy(nodes, function (node) {\n\t      return -node.value;\n\t    }), function (node) {\n\t      return node.name !== 'Exit';\n\t    });\n\t\n\t    var sum = _d2.default.sum(nodes, function (o) {\n\t      return o.dy;\n\t    });\n\t    var padding = (height - sum) / nodes.length;\n\t\n\t    _underscore2.default.reduce(nodes, function (y0, node) {\n\t      node.y = y0;\n\t      return y0 + node.dy + padding;\n\t    }, 0);\n\t  });\n\t}\n\t\n\tfunction createSankey(element, sankeyHeight, data) {\n\t  var margin = { top: 10, right: 10, bottom: 10, left: 10 };\n\t  var width = (0, _jquery2.default)(element).parent().width() - margin.left - margin.right;\n\t  var height = sankeyHeight - margin.top - margin.bottom;\n\t\n\t  data = graph(data);\n\t\n\t  var format = function format(d) {\n\t    return _d2.default.format(',.0f')(d);\n\t  };\n\t  var color = _d2.default.scale.category20();\n\t\n\t  // append the svg canvas to the page\n\t  var svg = _d2.default.select(element).append('svg').attr('class', 'sankey').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t  // Set the sankey diagram properties\n\t  var sankey = (0, _d3sankey2.default)().nodeWidth(15).nodePadding(10).size([width, height]);\n\t\n\t  var path = sankey.link();\n\t\n\t  sankey.nodes(data.nodes).links(data.links).layout(0);\n\t\n\t  spreadNodes(height, data);\n\t  sankey.relayout();\n\t\n\t  // add in the links\n\t  var link = svg.append('g').selectAll('.link').data(data.links).enter().append('path').filter(function (l) {\n\t    return l.target.name !== 'Exit';\n\t  }).attr('class', 'link').attr('d', path).style('stroke-width', function (d) {\n\t    return Math.max(1, d.dy);\n\t  }).sort(function (a, b) {\n\t    return b.dy - a.dy;\n\t  });\n\t\n\t  // add the link titles\n\t  link.append('title').text(function (d) {\n\t    return d.source.name + ' \\u2192 ' + d.target.name + '\\n' + format(d.value);\n\t  });\n\t\n\t  var node = svg.append('g').selectAll('.node').data(data.nodes).enter().append('g').filter(function (n) {\n\t    return n.name !== 'Exit';\n\t  }).attr('class', 'node').attr('transform', function (d) {\n\t    return 'translate(' + d.x + ',' + d.y + ')';\n\t  });\n\t\n\t  function nodeMouseOver(currentNode) {\n\t    var nodes = getConnectedNodes(currentNode);\n\t    nodes = _underscore2.default.pluck(nodes, 'id');\n\t    node.filter(function (d) {\n\t      if (d === currentNode) {\n\t        return false;\n\t      }\n\t\n\t      if (_underscore2.default.contains(nodes, d.id)) {\n\t        return false;\n\t      }\n\t\n\t      return true;\n\t    }).style('opacity', 0.2);\n\t    link.filter(function (l) {\n\t      return !(_underscore2.default.include(currentNode.sourceLinks, l) || _underscore2.default.include(currentNode.targetLinks, l));\n\t    }).style('opacity', 0.2);\n\t  }\n\t\n\t  function nodeMouseOut() {\n\t    node.style('opacity', 1);\n\t    link.style('opacity', 1);\n\t  }\n\t\n\t  // add in the nodes\n\t  node.on('mouseover', nodeMouseOver).on('mouseout', nodeMouseOut);\n\t\n\t  // add the rectangles for the nodes\n\t  node.append('rect').attr('height', function (d) {\n\t    return d.dy;\n\t  }).attr('width', sankey.nodeWidth()).style('fill', function (d) {\n\t    return d.color = color(d.name.replace(/ .*/, ''));\n\t  }).style('stroke', function (d) {\n\t    return _d2.default.rgb(d.color).darker(2);\n\t  }).append('title').text(function (d) {\n\t    return d.name + '\\n' + format(d.value);\n\t  });\n\t\n\t  // add in the title for the nodes\n\t  node.append('text').attr('x', -6).attr('y', function (d) {\n\t    return d.dy / 2;\n\t  }).attr('dy', '.35em').attr('text-anchor', 'end').attr('transform', null).text(function (d) {\n\t    return d.name;\n\t  }).filter(function (d) {\n\t    return d.x < width / 2;\n\t  }).attr('x', 6 + sankey.nodeWidth()).attr('text-anchor', 'start');\n\t}\n\t\n\tfunction sankeyRenderer() {\n\t  return {\n\t    restrict: 'E',\n\t    link: function link(scope, element) {\n\t      function refreshData() {\n\t        var queryData = scope.queryResult.getData();\n\t        if (queryData) {\n\t          // do the render logic.\n\t          _angular2.default.element(element[0]).empty();\n\t          createSankey(element[0], scope.visualization.options.height, queryData);\n\t        }\n\t      }\n\t\n\t      _angular2.default.element(window).on('resize', refreshData);\n\t      scope.$watch('queryResult && queryResult.getData()', refreshData);\n\t      scope.$watch('visualization.options.height', function (oldValue, newValue) {\n\t        if (oldValue !== newValue) {\n\t          refreshData();\n\t        }\n\t      });\n\t    }\n\t  };\n\t}\n\t\n\tfunction sankeyEditor() {\n\t  return {\n\t    restrict: 'E',\n\t    template: _sankeyEditor2.default\n\t  };\n\t}\n\n/***/ },\n/* 596 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function () {\n\t  var sankey = {};\n\t  var nodeWidth = 24;\n\t  var nodePadding = 8;\n\t  var size = [1, 1];\n\t  var nodes = [];\n\t  var links = [];\n\t\n\t  // Populate the sourceLinks and targetLinks for each node.\n\t  // Also, if the source and target are not objects, assume they are indices.\n\t  function computeNodeLinks() {\n\t    nodes.forEach(function (node) {\n\t      node.sourceLinks = [];\n\t      node.targetLinks = [];\n\t    });\n\t    links.forEach(function (link) {\n\t      var source = link.source;\n\t      var target = link.target;\n\t      if (typeof source === 'number') source = link.source = nodes[link.source];\n\t      if (typeof target === 'number') target = link.target = nodes[link.target];\n\t      source.sourceLinks.push(link);\n\t      target.targetLinks.push(link);\n\t    });\n\t  }\n\t\n\t  // Compute the value (size) of each node by summing the associated links.\n\t  function computeNodeValues() {\n\t    nodes.forEach(function (node) {\n\t      node.value = Math.max(_d2.default.sum(node.sourceLinks, value), _d2.default.sum(node.targetLinks, value));\n\t    });\n\t  }\n\t\n\t  function moveSinksRight(x) {\n\t    nodes.forEach(function (node) {\n\t      if (!node.sourceLinks.length) {\n\t        node.x = x - 1;\n\t      }\n\t    });\n\t  }\n\t\n\t  function scaleNodeBreadths(kx) {\n\t    nodes.forEach(function (node) {\n\t      node.x *= kx;\n\t    });\n\t  }\n\t\n\t  // Iteratively assign the breadth (x-position) for each node.\n\t  // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n\t  // nodes with no incoming links are assigned breadth zero, while\n\t  // nodes with no outgoing links are assigned the maximum breadth.\n\t  function computeNodeBreadths() {\n\t    var remainingNodes = nodes;\n\t    var nextNodes = void 0;\n\t    var x = 0;\n\t\n\t    function assignBreadth(node) {\n\t      node.x = x;\n\t      node.dx = nodeWidth;\n\t      node.sourceLinks.forEach(function (link) {\n\t        if (nextNodes.indexOf(link.target) < 0) {\n\t          nextNodes.push(link.target);\n\t        }\n\t      });\n\t    }\n\t\n\t    while (remainingNodes.length) {\n\t      nextNodes = [];\n\t      remainingNodes.forEach(assignBreadth);\n\t      remainingNodes = nextNodes;\n\t      x += 1;\n\t    }\n\t\n\t    //\n\t    moveSinksRight(x);\n\t    scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n\t  }\n\t\n\t  function moveSourcesRight() {\n\t    nodes.forEach(function (node) {\n\t      if (!node.targetLinks.length) {\n\t        node.x = _d2.default.min(node.sourceLinks, function (d) {\n\t          return d.target.x;\n\t        }) - 1;\n\t      }\n\t    });\n\t  }\n\t\n\t  function computeNodeDepths(iterations) {\n\t    var nodesByBreadth = _d2.default.nest().key(function (d) {\n\t      return d.x;\n\t    }).sortKeys(_d2.default.ascending).entries(nodes).map(function (d) {\n\t      return d.values;\n\t    });\n\t\n\t    function initializeNodeDepth() {\n\t      var ky = _d2.default.min(nodesByBreadth, function (n) {\n\t        return (size[1] - (n.length - 1) * nodePadding) / _d2.default.sum(n, value);\n\t      });\n\t\n\t      nodesByBreadth.forEach(function (n) {\n\t        n.forEach(function (node, i) {\n\t          node.y = i;\n\t          node.dy = node.value * ky;\n\t        });\n\t      });\n\t\n\t      links.forEach(function (link) {\n\t        link.dy = link.value * ky;\n\t      });\n\t    }\n\t\n\t    function relaxLeftToRight(alpha) {\n\t      function weightedSource(link) {\n\t        return center(link.source) * link.value;\n\t      }\n\t\n\t      nodesByBreadth.forEach(function (n) {\n\t        n.forEach(function (node) {\n\t          if (node.targetLinks.length) {\n\t            var y = _d2.default.sum(node.targetLinks, weightedSource) / _d2.default.sum(node.targetLinks, value);\n\t            node.y += (y - center(node)) * alpha;\n\t          }\n\t        });\n\t      });\n\t    }\n\t\n\t    function resolveCollisions() {\n\t      nodesByBreadth.forEach(function (nodes) {\n\t        var n = nodes.length;\n\t        var node = void 0;\n\t        var dy = void 0;\n\t        var y0 = 0;\n\t        var i = void 0;\n\t\n\t        // Push any overlapping nodes down.\n\t        nodes.sort(ascendingDepth);\n\t        for (i = 0; i < n; ++i) {\n\t          node = nodes[i];\n\t          dy = y0 - node.y;\n\t          if (dy > 0) node.y += dy;\n\t          y0 = node.y + node.dy + nodePadding;\n\t        }\n\t\n\t        // If the bottommost node goes outside the bounds, push it back up.\n\t        dy = y0 - nodePadding - size[1];\n\t        if (dy > 0) {\n\t          y0 = node.y -= dy;\n\t\n\t          // Push any overlapping nodes back up.\n\t          for (i = n - 2; i >= 0; --i) {\n\t            node = nodes[i];\n\t            dy = node.y + node.dy + nodePadding - y0;\n\t            if (dy > 0) node.y -= dy;\n\t            y0 = node.y;\n\t          }\n\t        }\n\t      });\n\t    }\n\t\n\t    function resolveCollisions() {\n\t      nodesByBreadth.forEach(function (nodes) {\n\t        var node = void 0,\n\t            dy = void 0,\n\t            y0 = 0,\n\t            n = nodes.length,\n\t            i = void 0;\n\t\n\t        // Push any overlapping nodes down.\n\t        nodes.sort(ascendingDepth);\n\t        for (i = 0; i < n; ++i) {\n\t          node = nodes[i];\n\t          dy = y0 - node.y;\n\t          if (dy > 0) node.y += dy;\n\t          y0 = node.y + node.dy + nodePadding;\n\t        }\n\t\n\t        // If the bottommost node goes outside the bounds, push it back up.\n\t        dy = y0 - nodePadding - size[1];\n\t        if (dy > 0) {\n\t          y0 = node.y -= dy;\n\t\n\t          // Push any overlapping nodes back up.\n\t          for (i = n - 2; i >= 0; --i) {\n\t            node = nodes[i];\n\t            dy = node.y + node.dy + nodePadding - y0;\n\t            if (dy > 0) node.y -= dy;\n\t            y0 = node.y;\n\t          }\n\t        }\n\t      });\n\t    }\n\t\n\t    initializeNodeDepth();\n\t    resolveCollisions();\n\t\n\t    for (var alpha = 1; iterations > 0; iterations -= 1) {\n\t      relaxRightToLeft(alpha *= 0.99);\n\t      resolveCollisions();\n\t      relaxLeftToRight(alpha);\n\t      resolveCollisions();\n\t    }\n\t\n\t    function relaxRightToLeft(alpha) {\n\t      nodesByBreadth.slice().reverse().forEach(function (nodes) {\n\t        nodes.forEach(function (node) {\n\t          if (node.sourceLinks.length) {\n\t            var y = _d2.default.sum(node.sourceLinks, weightedTarget) / _d2.default.sum(node.sourceLinks, value);\n\t            node.y += (y - center(node)) * alpha;\n\t          }\n\t        });\n\t      });\n\t\n\t      function weightedTarget(link) {\n\t        return center(link.target) * link.value;\n\t      }\n\t    }\n\t\n\t    function ascendingDepth(a, b) {\n\t      return a.y - b.y;\n\t    }\n\t  }\n\t\n\t  function computeLinkDepths() {\n\t    nodes.forEach(function (node) {\n\t      node.sourceLinks.sort(ascendingTargetDepth);\n\t      node.targetLinks.sort(ascendingSourceDepth);\n\t    });\n\t    nodes.forEach(function (node) {\n\t      var sy = 0,\n\t          ty = 0;\n\t      node.sourceLinks.forEach(function (link) {\n\t        link.sy = sy;\n\t        sy += link.dy;\n\t      });\n\t      node.targetLinks.forEach(function (link) {\n\t        link.ty = ty;\n\t        ty += link.dy;\n\t      });\n\t    });\n\t\n\t    function ascendingSourceDepth(a, b) {\n\t      return a.source.y - b.source.y;\n\t    }\n\t\n\t    function ascendingTargetDepth(a, b) {\n\t      return a.target.y - b.target.y;\n\t    }\n\t  }\n\t\n\t  sankey.nodeWidth = function (_) {\n\t    if (!arguments.length) return nodeWidth;\n\t    nodeWidth = +_;\n\t    return sankey;\n\t  };\n\t\n\t  sankey.nodePadding = function (_) {\n\t    if (!arguments.length) return nodePadding;\n\t    nodePadding = +_;\n\t    return sankey;\n\t  };\n\t\n\t  sankey.nodes = function (_) {\n\t    if (!arguments.length) return nodes;\n\t    nodes = _;\n\t    return sankey;\n\t  };\n\t\n\t  sankey.links = function (_) {\n\t    if (!arguments.length) return links;\n\t    links = _;\n\t    return sankey;\n\t  };\n\t\n\t  sankey.size = function (_) {\n\t    if (!arguments.length) return size;\n\t    size = _;\n\t    return sankey;\n\t  };\n\t\n\t  sankey.layout = function (iterations) {\n\t    computeNodeLinks();\n\t    computeNodeValues();\n\t    computeNodeBreadths();\n\t    computeNodeDepths(iterations);\n\t    computeLinkDepths();\n\t    return sankey;\n\t  };\n\t\n\t  sankey.relayout = function () {\n\t    computeLinkDepths();\n\t    return sankey;\n\t  };\n\t\n\t  sankey.link = function () {\n\t    var _arguments = arguments;\n\t\n\t    var curvature = 0.5;\n\t\n\t    function link(d) {\n\t      var x0 = d.source.x + d.source.dx;\n\t      var x1 = d.target.x;\n\t      var xi = _d2.default.interpolateNumber(x0, x1);\n\t      var x2 = xi(curvature);\n\t      var x3 = xi(1 - curvature);\n\t      var y0 = d.source.y + d.sy + d.dy / 2;\n\t      var y1 = d.target.y + d.ty + d.dy / 2;\n\t\n\t      return 'M' + x0 + ',' + y0 + 'C' + x2 + ',' + y0 + ' ' + x3 + ',' + y1 + ' ' + x1 + ',' + y1;\n\t    }\n\t\n\t    link.curvature = function (_) {\n\t      if (!_arguments.length) return curvature;\n\t      curvature = +_;\n\t      return link;\n\t    };\n\t\n\t    return link;\n\t  };\n\t\n\t  return sankey;\n\t};\n\t\n\tvar _d = __webpack_require__(350);\n\t\n\tvar _d2 = _interopRequireDefault(_d);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction center(node) {\n\t  return node.y + node.dy / 2;\n\t} /* eslint-disable */\n\t\n\tfunction value(link) {\n\t  return link.value;\n\t}\n\t\n\t;\n\n/***/ },\n/* 597 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Height</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"number\\\" ng-model=\\\"visualization.options.height\\\" min=\\\"1\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div>\\n    <hr>\\n    This visualization expects the query result to have rows in the following format:\\n\\n    <ul>\\n      <li><strong>stage1</strong> - stage 1 value</li>\\n      <li><strong>stage1</strong> - stage 2 value (or null)</li>\\n      <li><strong>stage3</strong> - stage 3 value (or null)</li>\\n      <li><strong>stage4</strong> - stage 4 value (or null)</li>\\n      <li><strong>stage5</strong> - stage 5 value (or null)</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 598 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('wordCloudEditor', wordCloudEditor);\n\t  ngModule.directive('wordCloudRenderer', wordCloudRenderer);\n\t\n\t  ngModule.config([\"VisualizationProvider\", function (VisualizationProvider) {\n\t    VisualizationProvider.registerVisualization({\n\t      type: 'WORD_CLOUD',\n\t      name: 'Word Cloud',\n\t      renderTemplate: '<word-cloud-renderer options=\"visualization.options\" query-result=\"queryResult\"></word-cloud-renderer>',\n\t      editorTemplate: '<word-cloud-editor></word-cloud-editor>'\n\t    });\n\t  }]);\n\t};\n\t\n\tvar _d = __webpack_require__(350);\n\t\n\tvar _d2 = _interopRequireDefault(_d);\n\t\n\tvar _angular = __webpack_require__(22);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _d3Cloud = __webpack_require__(599);\n\t\n\tvar _d3Cloud2 = _interopRequireDefault(_d3Cloud);\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _wordCloudEditor = __webpack_require__(601);\n\t\n\tvar _wordCloudEditor2 = _interopRequireDefault(_wordCloudEditor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction findWordFrequencies(data, columnName) {\n\t  var wordsHash = {};\n\t\n\t  data.forEach(function (row) {\n\t    var wordsList = row[columnName].toString().split(' ');\n\t    wordsList.forEach(function (d) {\n\t      if (d in wordsHash) {\n\t        wordsHash[d] += 1;\n\t      } else {\n\t        wordsHash[d] = 1;\n\t      }\n\t    });\n\t  });\n\t\n\t  return wordsHash;\n\t}\n\t\n\tfunction wordCloudRenderer() {\n\t  return {\n\t    restrict: 'E',\n\t    link: function link($scope, elem) {\n\t      function reloadCloud() {\n\t        if (!_angular2.default.isDefined($scope.queryResult)) return;\n\t\n\t        var data = $scope.queryResult.getData();\n\t        var wordsHash = {};\n\t\n\t        if ($scope.visualization.options.column) {\n\t          wordsHash = findWordFrequencies(data, $scope.visualization.options.column);\n\t        }\n\t\n\t        var wordList = [];\n\t        (0, _underscore.each)(wordsHash, function (v, key) {\n\t          wordList.push({ text: key, size: 10 + Math.pow(v, 2) });\n\t        });\n\t\n\t        var fill = _d2.default.scale.category20();\n\t        var layout = (0, _d3Cloud2.default)().size([500, 500]).words(wordList).padding(5).rotate(function () {\n\t          return Math.floor(Math.random() * 2) * 90;\n\t        }).font('Impact').fontSize(function (d) {\n\t          return d.size;\n\t        });\n\t\n\t        function draw(words) {\n\t          _d2.default.select(elem[0].parentNode).select('svg').remove();\n\t\n\t          _d2.default.select(elem[0].parentNode).append('svg').attr('width', layout.size()[0]).attr('height', layout.size()[1]).append('g').attr('transform', 'translate(' + layout.size()[0] / 2 + ',' + layout.size()[1] / 2 + ')').selectAll('text').data(words).enter().append('text').style('font-size', function (d) {\n\t            return d.size + 'px';\n\t          }).style('font-family', 'Impact').style('fill', function (d, i) {\n\t            return fill(i);\n\t          }).attr('text-anchor', 'middle').attr('transform', function (d) {\n\t            return 'translate(' + [d.x, d.y] + ')rotate(' + d.rotate + ')';\n\t          }).text(function (d) {\n\t            return d.text;\n\t          });\n\t        }\n\t\n\t        layout.on('end', draw);\n\t\n\t        layout.start();\n\t      }\n\t\n\t      $scope.$watch('queryResult && queryResult.getData()', reloadCloud);\n\t      $scope.$watch('visualization.options.column', reloadCloud);\n\t    }\n\t  };\n\t}\n\t\n\tfunction wordCloudEditor() {\n\t  return {\n\t    restrict: 'E',\n\t    template: _wordCloudEditor2.default\n\t  };\n\t}\n\n/***/ },\n/* 599 */,\n/* 600 */,\n/* 601 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Word Cloud Column Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.column\\\" class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 602 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('boxplotRenderer', boxPlotRenderer);\n\t  ngModule.directive('boxplotEditor', boxPlotEditor);\n\t\n\t  ngModule.config([\"VisualizationProvider\", function (VisualizationProvider) {\n\t    var renderTemplate = '<boxplot-renderer ' + 'options=\"visualization.options\" query-result=\"queryResult\">' + '</boxplot-renderer>';\n\t\n\t    var editTemplate = '<boxplot-editor></boxplot-editor>';\n\t\n\t    VisualizationProvider.registerVisualization({\n\t      type: 'BOXPLOT',\n\t      name: 'Boxplot',\n\t      renderTemplate: renderTemplate,\n\t      editorTemplate: editTemplate\n\t    });\n\t  }]);\n\t};\n\t\n\tvar _d = __webpack_require__(350);\n\t\n\tvar _d2 = _interopRequireDefault(_d);\n\t\n\tvar _d3box = __webpack_require__(603);\n\t\n\tvar _d3box2 = _interopRequireDefault(_d3box);\n\t\n\tvar _boxPlotEditor = __webpack_require__(604);\n\t\n\tvar _boxPlotEditor2 = _interopRequireDefault(_boxPlotEditor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction boxPlotRenderer() {\n\t  return {\n\t    restrict: 'E',\n\t    template: '<div></div>',\n\t    link: function link($scope, elm) {\n\t      function calcIqr(k) {\n\t        return function (d) {\n\t          var q1 = d.quartiles[0];\n\t          var q3 = d.quartiles[2];\n\t          var iqr = (q3 - q1) * k;\n\t\n\t          var i = -1;\n\t          var j = d.length;\n\t\n\t          // eslint-disable-next-line no-plusplus\n\t          while (d[++i] < q1 - iqr) {}\n\t          // eslint-disable-next-line no-plusplus\n\t          while (d[--j] > q3 + iqr) {}\n\t          return [i, j];\n\t        };\n\t      }\n\t\n\t      $scope.$watch('[queryResult && queryResult.getData(), visualization.options]', function () {\n\t        if ($scope.queryResult.getData() === null) {\n\t          return;\n\t        }\n\t\n\t        var data = $scope.queryResult.getData();\n\t        var parentWidth = _d2.default.select(elm[0].parentNode).node().getBoundingClientRect().width;\n\t        var margin = { top: 10, right: 50, bottom: 40, left: 50, inner: 25 };\n\t        var width = parentWidth - margin.right - margin.left;\n\t        var height = 500 - margin.top - margin.bottom;\n\t\n\t        var min = Infinity;\n\t        var max = -Infinity;\n\t        var mydata = [];\n\t        var value = 0;\n\t        var d = [];\n\t        var xAxisLabel = $scope.visualization.options.xAxisLabel;\n\t        var yAxisLabel = $scope.visualization.options.yAxisLabel;\n\t\n\t        var columns = $scope.queryResult.getColumnNames();\n\t        var xscale = _d2.default.scale.ordinal().domain(columns).rangeBands([0, parentWidth - margin.left - margin.right]);\n\t\n\t        var boxWidth = void 0;\n\t        if (columns.length > 1) {\n\t          boxWidth = Math.min(xscale(columns[1]), 120.0);\n\t        } else {\n\t          boxWidth = 120.0;\n\t        }\n\t        margin.inner = boxWidth / 3.0;\n\t\n\t        columns.forEach(function (column, i) {\n\t          d = mydata[i] = [];\n\t          data.forEach(function (row) {\n\t            value = row[column];\n\t            d.push(value);\n\t            if (value > max) max = Math.ceil(value);\n\t            if (value < min) min = Math.floor(value);\n\t          });\n\t        });\n\t\n\t        var yscale = _d2.default.scale.linear().domain([min * 0.99, max * 1.01]).range([height, 0]);\n\t\n\t        var chart = (0, _d3box2.default)().whiskers(calcIqr(1.5)).width(boxWidth - 2 * margin.inner).height(height).domain([min * 0.99, max * 1.01]);\n\t        var xAxis = _d2.default.svg.axis().scale(xscale).orient('bottom');\n\t\n\t        var yAxis = _d2.default.svg.axis().scale(yscale).orient('left');\n\t\n\t        var xLines = _d2.default.svg.axis().scale(xscale).tickSize(height).orient('bottom');\n\t\n\t        var yLines = _d2.default.svg.axis().scale(yscale).tickSize(width).orient('right');\n\t\n\t        function barOffset(i) {\n\t          return xscale(columns[i]) + (xscale(columns[1]) - margin.inner) / 2.0;\n\t        }\n\t\n\t        _d2.default.select(elm[0]).selectAll('svg').remove();\n\t\n\t        var plot = _d2.default.select(elm[0]).append('svg').attr('width', parentWidth).attr('height', height + margin.bottom + margin.top).append('g').attr('width', parentWidth - margin.left - margin.right).attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\t\n\t        _d2.default.select('svg').append('text').attr('class', 'box').attr('x', parentWidth / 2.0).attr('text-anchor', 'middle').attr('y', height + margin.bottom).text(xAxisLabel);\n\t\n\t        _d2.default.select('svg').append('text').attr('class', 'box').attr('transform', 'translate(10,' + (height + margin.top + margin.bottom) / 2.0 + ')rotate(-90)').attr('text-anchor', 'middle').text(yAxisLabel);\n\t\n\t        plot.append('rect').attr('class', 'grid-background').attr('width', width).attr('height', height);\n\t\n\t        plot.append('g').attr('class', 'grid').call(yLines);\n\t\n\t        plot.append('g').attr('class', 'grid').call(xLines);\n\t\n\t        plot.append('g').attr('class', 'x axis').attr('transform', 'translate(0,' + height + ')').call(xAxis);\n\t\n\t        plot.append('g').attr('class', 'y axis').call(yAxis);\n\t\n\t        plot.selectAll('.box').data(mydata).enter().append('g').attr('class', 'box').attr('width', boxWidth).attr('height', height).attr('transform', function (_, i) {\n\t          return 'translate(' + barOffset(i) + ',' + 0 + ')';\n\t        }).call(chart);\n\t      }, true);\n\t    }\n\t  };\n\t}\n\t\n\tfunction boxPlotEditor() {\n\t  return {\n\t    restrict: 'E',\n\t    template: _boxPlotEditor2.default\n\t  };\n\t}\n\n/***/ },\n/* 603 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = box;\n\t/* eslint-disable */\n\t// Inspired by http://informationandvisualization.de/blog/box-plot\n\tfunction box() {\n\t    var width = 1,\n\t        height = 1,\n\t        duration = 0,\n\t        domain = null,\n\t        value = Number,\n\t        whiskers = boxWhiskers,\n\t        quartiles = boxQuartiles,\n\t        tickFormat = null;\n\t\n\t    // For each small multiple…\n\t    function box(g) {\n\t        g.each(function (d, i) {\n\t            d = d.map(value).sort(d3.ascending);\n\t            var g = d3.select(this),\n\t                n = d.length,\n\t                min = d[0],\n\t                max = d[n - 1];\n\t\n\t            // Compute quartiles. Must return exactly 3 elements.\n\t            var quartileData = d.quartiles = quartiles(d);\n\t\n\t            // Compute whiskers. Must return exactly 2 elements, or null.\n\t            var whiskerIndices = whiskers && whiskers.call(this, d, i),\n\t                whiskerData = whiskerIndices && whiskerIndices.map(function (i) {\n\t                return d[i];\n\t            });\n\t\n\t            // Compute outliers. If no whiskers are specified, all data are \"outliers\".\n\t            // We compute the outliers as indices, so that we can join across transitions!\n\t            var outlierIndices = whiskerIndices ? d3.range(0, whiskerIndices[0]).concat(d3.range(whiskerIndices[1] + 1, n)) : d3.range(n);\n\t\n\t            // Compute the new x-scale.\n\t            var x1 = d3.scale.linear().domain(domain && domain.call(this, d, i) || [min, max]).range([height, 0]);\n\t\n\t            // Retrieve the old x-scale, if this is an update.\n\t            var x0 = this.__chart__ || d3.scale.linear().domain([0, Infinity]).range(x1.range());\n\t\n\t            // Stash the new scale.\n\t            this.__chart__ = x1;\n\t\n\t            // Note: the box, median, and box tick elements are fixed in number,\n\t            // so we only have to handle enter and update. In contrast, the outliers\n\t            // and other elements are variable, so we need to exit them! Variable\n\t            // elements also fade in and out.\n\t\n\t            // Update center line: the vertical line spanning the whiskers.\n\t            var center = g.selectAll('line.center').data(whiskerData ? [whiskerData] : []);\n\t\n\t            center.enter().insert('line', 'rect').attr('class', 'center').attr('x1', width / 2).attr('y1', function (d) {\n\t                return x0(d[0]);\n\t            }).attr('x2', width / 2).attr('y2', function (d) {\n\t                return x0(d[1]);\n\t            }).style('opacity', 1e-6).transition().duration(duration).style('opacity', 1).attr('y1', function (d) {\n\t                return x1(d[0]);\n\t            }).attr('y2', function (d) {\n\t                return x1(d[1]);\n\t            });\n\t\n\t            center.transition().duration(duration).style('opacity', 1).attr('y1', function (d) {\n\t                return x1(d[0]);\n\t            }).attr('y2', function (d) {\n\t                return x1(d[1]);\n\t            });\n\t\n\t            center.exit().transition().duration(duration).style('opacity', 1e-6).attr('y1', function (d) {\n\t                return x1(d[0]);\n\t            }).attr('y2', function (d) {\n\t                return x1(d[1]);\n\t            }).remove();\n\t\n\t            // Update innerquartile box.\n\t            var box = g.selectAll('rect.box').data([quartileData]);\n\t\n\t            box.enter().append('rect').attr('class', 'box').attr('x', 0).attr('y', function (d) {\n\t                return x0(d[2]);\n\t            }).attr('width', width).attr('height', function (d) {\n\t                return x0(d[0]) - x0(d[2]);\n\t            }).transition().duration(duration).attr('y', function (d) {\n\t                return x1(d[2]);\n\t            }).attr('height', function (d) {\n\t                return x1(d[0]) - x1(d[2]);\n\t            });\n\t\n\t            box.transition().duration(duration).attr('y', function (d) {\n\t                return x1(d[2]);\n\t            }).attr('height', function (d) {\n\t                return x1(d[0]) - x1(d[2]);\n\t            });\n\t\n\t            box.exit().remove();\n\t\n\t            // Update median line.\n\t            var medianLine = g.selectAll('line.median').data([quartileData[1]]);\n\t\n\t            medianLine.enter().append('line').attr('class', 'median').attr('x1', 0).attr('y1', x0).attr('x2', width).attr('y2', x0).transition().duration(duration).attr('y1', x1).attr('y2', x1);\n\t\n\t            medianLine.transition().duration(duration).attr('y1', x1).attr('y2', x1);\n\t\n\t            medianLine.exit().remove();\n\t\n\t            // Update whiskers.\n\t            var whisker = g.selectAll('line.whisker').data(whiskerData || []);\n\t\n\t            whisker.enter().insert('line', 'circle, text').attr('class', 'whisker').attr('x1', 0).attr('y1', x0).attr('x2', width).attr('y2', x0).style('opacity', 1e-6).transition().duration(duration).attr('y1', x1).attr('y2', x1).style('opacity', 1);\n\t\n\t            whisker.transition().duration(duration).attr('y1', x1).attr('y2', x1).style('opacity', 1);\n\t\n\t            whisker.exit().transition().duration(duration).attr('y1', x1).attr('y2', x1).style('opacity', 1e-6).remove();\n\t\n\t            // Update outliers.\n\t            var outlier = g.selectAll('circle.outlier').data(outlierIndices, Number);\n\t\n\t            outlier.enter().insert('circle', 'text').attr('class', 'outlier').attr('r', 5).attr('cx', width / 2).attr('cy', function (i) {\n\t                return x0(d[i]);\n\t            }).style('opacity', 1e-6).transition().duration(duration).attr('cy', function (i) {\n\t                return x1(d[i]);\n\t            }).style('opacity', 1);\n\t\n\t            outlier.transition().duration(duration).attr('cy', function (i) {\n\t                return x1(d[i]);\n\t            }).style('opacity', 1);\n\t\n\t            outlier.exit().transition().duration(duration).attr('cy', function (i) {\n\t                return x1(d[i]);\n\t            }).style('opacity', 1e-6).remove();\n\t\n\t            // Compute the tick format.\n\t            var format = tickFormat || x1.tickFormat(8);\n\t\n\t            // Update box ticks.\n\t            var boxTick = g.selectAll('text.box').data(quartileData);\n\t\n\t            boxTick.enter().append('text').attr('class', 'box').attr('dy', '.3em').attr('dx', function (d, i) {\n\t                return i & 1 ? 6 : -6;\n\t            }).attr('x', function (d, i) {\n\t                return i & 1 ? width : 0;\n\t            }).attr('y', x0).attr('text-anchor', function (d, i) {\n\t                return i & 1 ? 'start' : 'end';\n\t            }).text(format).transition().duration(duration).attr('y', x1);\n\t\n\t            boxTick.transition().duration(duration).text(format).attr('y', x1);\n\t\n\t            boxTick.exit().remove();\n\t\n\t            // Update whisker ticks. These are handled separately from the box\n\t            // ticks because they may or may not exist, and we want don't want\n\t            // to join box ticks pre-transition with whisker ticks post-.\n\t            var whiskerTick = g.selectAll('text.whisker').data(whiskerData || []);\n\t\n\t            whiskerTick.enter().append('text').attr('class', 'whisker').attr('dy', '.3em').attr('dx', 6).attr('x', width).attr('y', x0).text(format).style('opacity', 1e-6).transition().duration(duration).attr('y', x1).style('opacity', 1);\n\t\n\t            whiskerTick.transition().duration(duration).text(format).attr('y', x1).style('opacity', 1);\n\t\n\t            whiskerTick.exit().transition().duration(duration).attr('y', x1).style('opacity', 1e-6).remove();\n\t        });\n\t        d3.timer.flush();\n\t    }\n\t\n\t    box.width = function (x) {\n\t        if (!arguments.length) return width;\n\t        width = x;\n\t        return box;\n\t    };\n\t\n\t    box.height = function (x) {\n\t        if (!arguments.length) return height;\n\t        height = x;\n\t        return box;\n\t    };\n\t\n\t    box.tickFormat = function (x) {\n\t        if (!arguments.length) return tickFormat;\n\t        tickFormat = x;\n\t        return box;\n\t    };\n\t\n\t    box.duration = function (x) {\n\t        if (!arguments.length) return duration;\n\t        duration = x;\n\t        return box;\n\t    };\n\t\n\t    box.domain = function (x) {\n\t        if (!arguments.length) return domain;\n\t        domain = x == null ? x : d3.functor(x);\n\t        return box;\n\t    };\n\t\n\t    box.value = function (x) {\n\t        if (!arguments.length) return value;\n\t        value = x;\n\t        return box;\n\t    };\n\t\n\t    box.whiskers = function (x) {\n\t        if (!arguments.length) return whiskers;\n\t        whiskers = x;\n\t        return box;\n\t    };\n\t\n\t    box.quartiles = function (x) {\n\t        if (!arguments.length) return quartiles;\n\t        quartiles = x;\n\t        return box;\n\t    };\n\t\n\t    return box;\n\t}\n\t\n\tfunction boxWhiskers(d) {\n\t    return [0, d.length - 1];\n\t}\n\t\n\tfunction boxQuartiles(d) {\n\t    return [d3.quantile(d, 0.25), d3.quantile(d, 0.5), d3.quantile(d, 0.75)];\n\t}\n\n/***/ },\n/* 604 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">X Axis Label</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"visualization.options.xAxisLabel\\\" class=\\\"form-control\\\"></input>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Y Axis Label</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"visualization.options.yAxisLabel\\\" class=\\\"form-control\\\"></input>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n/* 605 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('cohortRenderer', cohortRenderer);\n\t  ngModule.directive('cohortEditor', cohortEditor);\n\t\n\t  ngModule.config([\"VisualizationProvider\", function (VisualizationProvider) {\n\t    var editTemplate = '<cohort-editor></cohort-editor>';\n\t    var defaultOptions = {\n\t      timeInterval: 'daily'\n\t    };\n\t\n\t    VisualizationProvider.registerVisualization({\n\t      type: 'COHORT',\n\t      name: 'Cohort',\n\t      renderTemplate: '<cohort-renderer options=\"visualization.options\" query-result=\"queryResult\"></cohort-renderer>',\n\t      editorTemplate: editTemplate,\n\t      defaultOptions: defaultOptions\n\t    });\n\t  }]);\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tvar _angular = __webpack_require__(22);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\t__webpack_require__(606);\n\t\n\t__webpack_require__(607);\n\t\n\tvar _cohortEditor = __webpack_require__(608);\n\t\n\tvar _cohortEditor2 = _interopRequireDefault(_cohortEditor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/* global Cornelius */\n\tfunction cohortRenderer() {\n\t  return {\n\t    restrict: 'E',\n\t    scope: {\n\t      queryResult: '=',\n\t      options: '='\n\t    },\n\t    template: '',\n\t    replace: false,\n\t    link: function link($scope, element) {\n\t      $scope.options.timeInterval = $scope.options.timeInterval || 'daily';\n\t\n\t      function updateCohort() {\n\t        if ($scope.queryResult.getData() === null) {\n\t          return;\n\t        }\n\t\n\t        var sortedData = _underscore2.default.sortBy($scope.queryResult.getData(), function (r) {\n\t          return r.date + r.day_number;\n\t        });\n\t\n\t        var grouped = _underscore2.default.groupBy(sortedData, 'date');\n\t\n\t        var maxColumns = _underscore2.default.reduce(grouped, function (memo, data) {\n\t          return data.length > memo ? data.length : memo;\n\t        }, 0);\n\t\n\t        var data = _underscore2.default.map(grouped, function (values) {\n\t          var row = [values[0].total];\n\t          _underscore2.default.each(values, function (value) {\n\t            row.push(value.value);\n\t          });\n\t          _underscore2.default.each(_underscore2.default.range(values.length, maxColumns), function () {\n\t            row.push(null);\n\t          });\n\t          return row;\n\t        });\n\t\n\t        var initialDate = (0, _moment2.default)(sortedData[0].date).toDate();\n\t        var container = _angular2.default.element(element)[0];\n\t\n\t        Cornelius.draw({\n\t          initialDate: initialDate,\n\t          container: container,\n\t          cohort: data,\n\t          title: null,\n\t          timeInterval: $scope.options.timeInterval,\n\t          labels: {\n\t            time: 'Time',\n\t            people: 'Users',\n\t            weekOf: 'Week of'\n\t          }\n\t        });\n\t      }\n\t\n\t      $scope.$watch('queryResult && queryResult.getData()', updateCohort);\n\t      $scope.$watch('options.timeInterval', updateCohort);\n\t    }\n\t  };\n\t}\n\t\n\tfunction cohortEditor() {\n\t  return {\n\t    restrict: 'E',\n\t    template: _cohortEditor2.default\n\t  };\n\t}\n\n/***/ },\n/* 606 */,\n/* 607 */\n1,\n/* 608 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Time Interval</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"visualization.options.timeInterval\\\">\\n      <option value=\\\"daily\\\">Daily</option>\\n      <option value=\\\"weekly\\\">Weekly</option>\\n      <option value=\\\"monthly\\\">Monthly</option>\\n    </select>\\n</div>\\n\"\n\n/***/ },\n/* 609 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('mapRenderer', mapRenderer);\n\t  ngModule.directive('mapEditor', mapEditor);\n\t  ngModule.config([\"VisualizationProvider\", function (VisualizationProvider) {\n\t    var renderTemplate = '<map-renderer ' + 'options=\"visualization.options\" query-result=\"queryResult\">' + '</map-renderer>';\n\t\n\t    var editTemplate = '<map-editor></map-editor>';\n\t    var defaultOptions = {\n\t      height: 500,\n\t      classify: 'none',\n\t      clusterMarkers: true\n\t    };\n\t\n\t    VisualizationProvider.registerVisualization({\n\t      type: 'MAP',\n\t      name: 'Map',\n\t      renderTemplate: renderTemplate,\n\t      editorTemplate: editTemplate,\n\t      defaultOptions: defaultOptions\n\t    });\n\t  }]);\n\t};\n\t\n\tvar _underscore = __webpack_require__(155);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _d = __webpack_require__(350);\n\t\n\tvar _d2 = _interopRequireDefault(_d);\n\t\n\tvar _angular = __webpack_require__(22);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _leaflet = __webpack_require__(610);\n\t\n\tvar _leaflet2 = _interopRequireDefault(_leaflet);\n\t\n\t__webpack_require__(611);\n\t\n\t__webpack_require__(612);\n\t\n\t__webpack_require__(616);\n\t\n\t__webpack_require__(617);\n\t\n\tvar _markerIcon = __webpack_require__(615);\n\t\n\tvar _markerIcon2 = _interopRequireDefault(_markerIcon);\n\t\n\tvar _markerIcon2x = __webpack_require__(618);\n\t\n\tvar _markerIcon2x2 = _interopRequireDefault(_markerIcon2x);\n\t\n\tvar _markerShadow = __webpack_require__(619);\n\t\n\tvar _markerShadow2 = _interopRequireDefault(_markerShadow);\n\t\n\tvar _map = __webpack_require__(620);\n\t\n\tvar _map2 = _interopRequireDefault(_map);\n\t\n\tvar _mapEditor = __webpack_require__(621);\n\t\n\tvar _mapEditor2 = _interopRequireDefault(_mapEditor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/*\n\tThis is a workaround for an issue with giving Leaflet load the icon on its own.\n\t*/\n\t_leaflet2.default.Icon.Default.mergeOptions({\n\t  iconUrl: _markerIcon2.default,\n\t  iconRetinaUrl: _markerIcon2x2.default,\n\t  shadowUrl: _markerShadow2.default\n\t});\n\t\n\tdelete _leaflet2.default.Icon.Default.prototype._getIconUrl;\n\t\n\tfunction mapRenderer() {\n\t  return {\n\t    restrict: 'E',\n\t    template: _map2.default,\n\t    link: function link($scope, elm) {\n\t      var colorScale = _d2.default.scale.category10();\n\t      var map = _leaflet2.default.map(elm[0].children[0].children[0], { scrollWheelZoom: false });\n\t      var mapControls = _leaflet2.default.control.layers().addTo(map);\n\t      var layers = {};\n\t      var tileLayer = _leaflet2.default.tileLayer('//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n\t        attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n\t      }).addTo(map);\n\t\n\t      function getBounds() {\n\t        $scope.visualization.options.bounds = map.getBounds();\n\t      }\n\t\n\t      function setBounds() {\n\t        var b = $scope.visualization.options.bounds;\n\t\n\t        if (b) {\n\t          map.fitBounds([[b._southWest.lat, b._southWest.lng], [b._northEast.lat, b._northEast.lng]]);\n\t        } else if (layers) {\n\t          var allMarkers = _underscore2.default.flatten(_underscore2.default.map(_underscore2.default.values(layers), function (l) {\n\t            return l.getLayers();\n\t          }));\n\t          // eslint-disable-next-line new-cap\n\t          var group = new _leaflet2.default.featureGroup(allMarkers);\n\t          map.fitBounds(group.getBounds());\n\t        }\n\t      }\n\t\n\t      map.on('focus', function () {\n\t        map.on('moveend', getBounds);\n\t      });\n\t      map.on('blur', function () {\n\t        map.off('moveend', getBounds);\n\t      });\n\t\n\t      function resize() {\n\t        if (!map) return;\n\t        map.invalidateSize(false);\n\t        setBounds();\n\t      }\n\t\n\t      var createMarker = function createMarker(lat, lon) {\n\t        return _leaflet2.default.marker([lat, lon]);\n\t      };\n\t\n\t      var heatpoint = function heatpoint(lat, lon, color) {\n\t        var style = {\n\t          fillColor: color,\n\t          fillOpacity: 0.9,\n\t          stroke: false\n\t        };\n\t\n\t        return _leaflet2.default.circleMarker([lat, lon], style);\n\t      };\n\t\n\t      function createDescription(latCol, lonCol, row) {\n\t        var lat = row[latCol];\n\t        var lon = row[lonCol];\n\t\n\t        var description = '<ul style=\"list-style-type: none;padding-left: 0\">';\n\t        description += '<li><strong>' + lat + ', ' + lon + '</strong>';\n\t\n\t        _underscore2.default.each(row, function (v, k) {\n\t          if (!(k === latCol || k === lonCol)) {\n\t            description += '<li>' + k + ': ' + v + '</li>';\n\t          }\n\t        });\n\t\n\t        return description;\n\t      }\n\t\n\t      function removeLayer(layer) {\n\t        if (layer) {\n\t          mapControls.removeLayer(layer);\n\t          map.removeLayer(layer);\n\t        }\n\t      }\n\t\n\t      function addLayer(name, points) {\n\t        var latCol = $scope.visualization.options.latColName || 'lat';\n\t        var lonCol = $scope.visualization.options.lonColName || 'lon';\n\t        var classify = $scope.visualization.options.classify;\n\t\n\t        var markers = void 0;\n\t        if ($scope.visualization.options.clusterMarkers) {\n\t          var color = $scope.visualization.options.groups[name].color;\n\t          var options = {};\n\t\n\t          if (classify) {\n\t            options.iconCreateFunction = function (cluster) {\n\t              var childCount = cluster.getChildCount();\n\t\n\t              var c = ' marker-cluster-';\n\t              if (childCount < 10) {\n\t                c += 'small';\n\t              } else if (childCount < 100) {\n\t                c += 'medium';\n\t              } else {\n\t                c += 'large';\n\t              }\n\t\n\t              c = '';\n\t\n\t              var style = 'color: white; background-color: ' + color + ';';\n\t              return _leaflet2.default.divIcon({ html: '<div style=\"' + style + '\"><span>' + childCount + '</span></div>', className: 'marker-cluster' + c, iconSize: new _leaflet2.default.Point(40, 40) });\n\t            };\n\t          }\n\t\n\t          markers = _leaflet2.default.markerClusterGroup(options);\n\t        } else {\n\t          markers = _leaflet2.default.layerGroup();\n\t        }\n\t\n\t        // create markers\n\t        _underscore2.default.each(points, function (row) {\n\t          var marker = void 0;\n\t\n\t          var lat = row[latCol];\n\t          var lon = row[lonCol];\n\t\n\t          if (lat === null || lon === null) return;\n\t\n\t          if (classify && classify !== 'none') {\n\t            var groupColor = $scope.visualization.options.groups[name].color;\n\t            marker = heatpoint(lat, lon, groupColor);\n\t          } else {\n\t            marker = createMarker(lat, lon);\n\t          }\n\t\n\t          marker.bindPopup(createDescription(latCol, lonCol, row));\n\t          markers.addLayer(marker);\n\t        });\n\t\n\t        markers.addTo(map);\n\t\n\t        layers[name] = markers;\n\t        mapControls.addOverlay(markers, name);\n\t      }\n\t\n\t      function render() {\n\t        var queryData = $scope.queryResult.getData();\n\t        var classify = $scope.visualization.options.classify;\n\t\n\t        $scope.visualization.options.mapTileUrl = $scope.visualization.options.mapTileUrl || '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\t\n\t        tileLayer.setUrl($scope.visualization.options.mapTileUrl);\n\t\n\t        if ($scope.visualization.options.clusterMarkers === undefined) {\n\t          $scope.visualization.options.clusterMarkers = true;\n\t        }\n\t\n\t        if (queryData) {\n\t          var pointGroups = void 0;\n\t          if (classify && classify !== 'none') {\n\t            pointGroups = _underscore2.default.groupBy(queryData, classify);\n\t          } else {\n\t            pointGroups = { All: queryData };\n\t          }\n\t\n\t          var groupNames = _underscore2.default.keys(pointGroups);\n\t          var options = _underscore2.default.map(groupNames, function (group) {\n\t            if ($scope.visualization.options.groups && $scope.visualization.options.groups[group]) {\n\t              return $scope.visualization.options.groups[group];\n\t            }\n\t            return { color: colorScale(group) };\n\t          });\n\t\n\t          $scope.visualization.options.groups = _underscore2.default.object(groupNames, options);\n\t\n\t          _underscore2.default.each(layers, function (v) {\n\t            removeLayer(v);\n\t          });\n\t\n\t          _underscore2.default.each(pointGroups, function (v, k) {\n\t            addLayer(k, v);\n\t          });\n\t\n\t          setBounds();\n\t        }\n\t      }\n\t\n\t      $scope.$watch('queryResult && queryResult.getData()', render);\n\t      $scope.$watch('visualization.options', render, true);\n\t      _angular2.default.element(window).on('resize', resize);\n\t      $scope.$watch('visualization.options.height', resize);\n\t    }\n\t  };\n\t}\n\t\n\tfunction mapEditor() {\n\t  return {\n\t    restrict: 'E',\n\t    template: _mapEditor2.default,\n\t    link: function link($scope) {\n\t      $scope.currentTab = 'general';\n\t      $scope.columns = $scope.queryResult.getColumns();\n\t      $scope.columnNames = _underscore2.default.pluck($scope.columns, 'name');\n\t      $scope.classify_columns = $scope.columnNames.concat('none');\n\t      $scope.mapTiles = [{\n\t        name: 'OpenStreetMap',\n\t        url: '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'\n\t      }, {\n\t        name: 'OpenStreetMap BW',\n\t        url: '//{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png'\n\t      }, {\n\t        name: 'OpenStreetMap DE',\n\t        url: '//{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png'\n\t      }, {\n\t        name: 'OpenStreetMap FR',\n\t        url: '//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png'\n\t      }, {\n\t        name: 'OpenStreetMap Hot',\n\t        url: '//{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png'\n\t      }, {\n\t        name: 'Thunderforest',\n\t        url: '//{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png'\n\t      }, {\n\t        name: 'Thunderforest Spinal',\n\t        url: '//{s}.tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png'\n\t      }, {\n\t        name: 'OpenMapSurfer',\n\t        url: '//korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}'\n\t      }, {\n\t        name: 'Stamen Toner',\n\t        url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png'\n\t      }, {\n\t        name: 'Stamen Toner Background',\n\t        url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.png'\n\t      }, {\n\t        name: 'Stamen Toner Lite',\n\t        url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png'\n\t      }, {\n\t        name: 'OpenTopoMap',\n\t        url: '//{s}.tile.opentopomap.org/{z}/{x}/{y}.png'\n\t      }];\n\t    }\n\t  };\n\t}\n\n/***/ },\n/* 610 */,\n/* 611 */,\n/* 612 */\n1,\n/* 613 */,\n/* 614 */,\n/* 615 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=\"\n\n/***/ },\n/* 616 */\n1,\n/* 617 */\n1,\n/* 618 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7c3grY3grg8hJo3grY4g7c4g7c3grU0gLI4grY9hrpBi79HkMM2frE0daA0fq82gbROlslbo9Vgp9dcpNZQmcxFjsIwd6QzeKk3gbRfptdepdZcpdY2gLMtd5s3gLNZotVSntNPnNJLmtFImdBZodU1f7A2f7A1frA2f7I2f7FHmNBUnM9Wn9VGmNAydaNYoNJOm9M9hLc0e6w3fa46f7BKmdFFltBVndE1fK1Els82fq41fK1Dlc89g7RClc9XoNVUndQ0eqxClM9Jl9FRms81eqo0eqpHltFBk89Fi75Qm9M/k89KkcYzealSjbadvdPH2ufz9/r4+vzP3+qlxNljmL08gLNSnNQzeKgydqUzeKg/ks6NtM/////+/v8+kc/f6fFAgK1CiLwydKIzd6c8kM6Tt9C1zd5OmdNBh7pTjLRzn78xdKIydqU7j86jwdbM3egxdKIydaQydaMydKNGlNE6js5OiLAxc6FKkshDk9E5jc09e6Zekrcxc6I4jc03eagyc6FIldI3jM0wcaBMl9J+psNKltIwcZ82i83k7fMubJhLlc81is1Lg6pklbZNl9I/j9AvbJlEjcVdkLPt8/cwcZ4ubZkwcJ00icy0y9swcJwvb5wzicxHkcpTh60ubZhCkNAyiMwvbpoxh8xAicBHj8hGk9FHks0+jdAubJcubJdEkdEwhsw6i88ubJgta5cvhswxapgubJcuhcstbJcubZcuhMsubJcvbJZBjMgthMsubJcvbZkubJcrg8stbJctbZcubJgrgssua5gubJc6is8qgcs8i9A9iMYtg8spgcoogMo7hcMrbZcubJcngMonf8olfsoubJc4gr8kfckua5g5iM8jfMk4iM8he8k1froua5g7itAgeskubJc2hs8eecgzfLcofssdeMg0hc4ubJccd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqjbZ8obAAAA7HRSTlMAHDdTb4yPA+L/7ZxE/////yYLgvb///////8SYf/////qB/////////+1wNHd//////8s////r/////////+O/P///////////8f///////////////////////+P2P///////////3f//////////5j/////tczn//////L///////////////////////8+////////R/////Ww////tf////9q////////////4P/////Yd/8W+P/xov+UNv///STN/7hc1P/AUv//////////MMT///+m//+e//////+M//+C////////6cqo94AAAAXmSURBVHgBrNKDoipBGADgbHMRpjuKi2xOdu//MHe2Y6tvOdZvuhGzxWqzO2xWi9lp+g6L3eV+5PH6vmpltrv8nDsQDIWCAbef83jDpo9FojFeJxhPJO8JosQzYnb5oxYpVzodiCcyhiwA2esPEAPpdM727vT+eSH0x7McwoTmOUpxIcvF/RAWI29byCUIpUQ2m8A0/xwx8kIQls2vW4QrihIHQMDqGyQBgAiVnOXVTuWUtAaAnq++I48B0PxKrPZiq8qKvy4IpPqBhiDUm0rl+ca12h1NQN3eh7pI6MN26WnfooNBPIHU4SdUlBAHg9Hj0seDEEJ08pxKqfoio4tQaDAOP0xrMEWIzB4NCWaIK8xJ7ymXItQcFO/jcLGIF+bLRytW4LS18Wbd5SNcEBcLn8mw2TYZ2+3vLRuMaYdme7sdTA8iY8flQ0mPscC2fB1ku12z4+necs7YebDlri9JZ3rvoazB1tutxdiuy1TXl4/Zer95ufzneq7524qBAIBr61TmtxXX/MK4FC6cKIwvViozXMDMzLbCTF+1JBn/4/EtLi2vrK6tbywsbE506vVxnZ3fF7YIIQamdX7dVqb/RtnCr1X+n3F9gA2MdA7Vsl87nzEDId2MTUCHSdr+As/Y1DKvM1uYFWBGpTtggrFuYrMPApgc0jhMTNmdvInLbn8NqNImgEG7jWzZnwB1KAg79t1V3mzPvgm6Q+n9m98n/e5ZQI+iw6Dby1v43AzApPIIs24/Cbg1GFcRE+h29xpvseJ2v4cxjzQOmjtAgqF5PRyRZvTXIfcqbxUNPdOnI1JYnw8FSSwUp4mklKDzoRRvkw7N0vF6QTwUI4aMRsNZyUQnMhkzb2HMZeJ0RhUMUy1jIP68lRaKUpLSXN7FW5jz+QnqKEoFas37yX6pD8tFpYybpQpv4S3lEGv5KvaV9olNDPwNHUhh1ETex5scpsQOVg8UxAFhI0dCHKPjRIogDorT1aZPzkTuHC9U2oPnQlySRzFxhYkTJYHHIXFt5srNnhBxLDSyV+L2IyF395vnhQflpHCuifv80g3/a+UPIXWNEDEAQEE0HR23weEk6XGnwR1iH3eJu7udbt26fe30I17x/PYH+9iv+CB5qT1v+YhlL5WeS5ZV72RZftvlNF6Wj75Zdn2kHcl6e5Sy/A3D7DsBMP0gd/DkC/Bp9l3gW5Y7a5asWVCm3WcaAFSHnFtxAXivwwAsWf9E25dl+TiwhwIKPVRgD33Ct6wvom0ijKapOBllpkEcf6ZCMsqjyCgjuvKIoajXYgya8vhIJ7rKKnKOP+sxjOPJZmV0DRRHGIZx/KW6npaOvor3M/G+pqalS00TT5q4G7qzPGe4O+wu7mxw59wt8p3LCre//pn/J+iupIwe1HKcpVdXI8c9QB9l9QMDnHVQF8+9xdAw5YzgBmfuHdVh4bj7GKO8cZYxW/UmvHkAeEl5pgncMJt7JzVZzOYaTFGh6WRGEDVJ5pniCDOCWw0Ns3MaLA0NdRijYm+AmQZhXoO1YQFYpBJLqGloGF1W1ZuMfKRSL1OZFVXJyNBlUhhD7evXk6sqZl+/rscaKfUDC68FtYn19Xr64xU+oo7nxQ2FWZ6vxyapuTyEdV5WTgR+HZ3DpGoN9Szzu8Qkzz9CH6kbZhlpa7uELO2gs4I0bOKRJInFC1GyPsMuaanoxPre1n6hbXlvB90dpKkPj4Q9sXAi7gnfcEDaOjqxIxwe5e1vCcforiIdu/gkyyenOSeyrBthqrpxvHV2lF0cHW4d47ySdB3g29bWiSPjZMvZBDvpqzxPZk7Ti9PDLZcyomBHk/PwxJ1ycsgiv4guzrgOz9wexn126EVbNV3oVzLj8zBaEYXqNnjP/G4W8Z8F0GYiKisTPGMZ31kQGKdymGwIhMIeTzgUgM1EZRkHgmGfL8wi01Qe0wQCYSaAESrXNBCJRiN6EYURxKLRmF5E4Q0QjwNvyIAlJBKYIiNegnlJhowBY2RMP9BPBn38SEYtLpKG/+tgQe8M5cY7AAAAAElFTkSuQmCC\"\n\n/***/ },\n/* 619 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC\"\n\n/***/ },\n/* 620 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div style='margin:1%;width:98%;height:{{visualization.options.height}}px'>\\n    <div style=\\\"width:100%; height:100%;\\\"></div>\\n</div>\\n\"\n\n/***/ },\n/* 621 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\"><a ng-click=\\\"currentTab='general'\\\">General</a></li>\\n    <li ng-class=\\\"{active: currentTab == 'groups'}\\\"><a ng-click=\\\"currentTab='groups'\\\">Groups</a></li>\\n    <li ng-class=\\\"{active: currentTab == 'map'}\\\"><a ng-click=\\\"currentTab='map'\\\">Map Settings</a></li>\\n  </ul>\\n\\n  <div ng-show=\\\"currentTab == 'general'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Latitude Column Name</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.latColName\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:visualization.options.classify | remove:visualization.options.lonColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Longitude Column Name</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.lonColName\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:visualization.options.classify | remove:visualization.options.latColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Group By</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.classify\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in classify_columns | remove:visualization.options.lonColName | remove:visualization.options.latColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'groups'\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <thead>\\n      <th>Name</th>\\n      <th>Color</th>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"(name, options) in visualization.options.groups\\\">\\n        <td>{{name}}</td>\\n        <td>\\n            <input class=\\\"form-control\\\" type=\\\"color\\\" ng-model=\\\"options.color\\\"/>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'map'\\\">\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.clusterMarkers\\\">\\n        <i class=\\\"input-helper\\\"></i> Cluster Markers\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Map Height (px)</label>\\n      <input class=\\\"form-control\\\" type=\\\"number\\\" ng-model=\\\"visualization.options.height\\\"/>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Map Tiles</label>\\n      <select ng-options=\\\"tile.url as tile.name for tile in mapTiles\\\" ng-model=\\\"visualization.options.mapTileUrl\\\"\\n              class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n\\n</div>\\n\"\n\n/***/ },\n/* 622 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.directive('pivotTableRenderer', pivotTableRenderer);\n\t\n\t  ngModule.config([\"VisualizationProvider\", function (VisualizationProvider) {\n\t    var editTemplate = '<div/>';\n\t    var defaultOptions = {};\n\t\n\t    VisualizationProvider.registerVisualization({\n\t      type: 'PIVOT',\n\t      name: 'Pivot Table',\n\t      renderTemplate: '<pivot-table-renderer visualization=\"visualization\" query-result=\"queryResult\"></pivot-table-renderer>',\n\t      editorTemplate: editTemplate,\n\t      defaultOptions: defaultOptions\n\t    });\n\t  }]);\n\t};\n\t\n\tvar _angular = __webpack_require__(22);\n\t\n\tvar _angular2 = _interopRequireDefault(_angular);\n\t\n\tvar _jquery = __webpack_require__(157);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\t__webpack_require__(623);\n\t\n\t__webpack_require__(624);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction pivotTableRenderer() {\n\t  return {\n\t    restrict: 'E',\n\t    scope: {\n\t      queryResult: '=',\n\t      visualization: '='\n\t    },\n\t    template: '',\n\t    replace: false,\n\t    link: function link($scope, element) {\n\t      $scope.$watch('queryResult && queryResult.getData()', function (data) {\n\t        if (!data) {\n\t          return;\n\t        }\n\t\n\t        if ($scope.queryResult.getData() !== null) {\n\t          // We need to give the pivot table its own copy of the data, because it changes\n\t          // it which interferes with other visualizations.\n\t          data = _angular2.default.copy($scope.queryResult.getData());\n\t          var options = {\n\t            renderers: _jquery2.default.pivotUtilities.renderers,\n\t            onRefresh: function onRefresh(config) {\n\t              var configCopy = _extends({}, config);\n\t              // delete some values which are functions\n\t              delete configCopy.aggregators;\n\t              delete configCopy.renderers;\n\t              delete configCopy.onRefresh;\n\t              // delete some bulky default values\n\t              delete configCopy.rendererOptions;\n\t              delete configCopy.localeStrings;\n\t\n\t              if ($scope.visualization) {\n\t                $scope.visualization.options = configCopy;\n\t              }\n\t            }\n\t          };\n\t\n\t          if ($scope.visualization) {\n\t            _extends(options, $scope.visualization.options);\n\t          }\n\t          (0, _jquery2.default)(element).pivotUI(data, options, true);\n\t        }\n\t      });\n\t    }\n\t  };\n\t}\n\n/***/ },\n/* 623 */,\n/* 624 */\n1,\n/* 625 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.filter('markdown', [\"$sce\", \"clientConfig\", function ($sce, clientConfig) {\n\t    return function markdown(text) {\n\t      if (!text) {\n\t        return '';\n\t      }\n\t\n\t      var html = (0, _marked2.default)(String(text));\n\t      if (clientConfig.allowScriptsInUserInput) {\n\t        html = $sce.trustAsHtml(html);\n\t      }\n\t\n\t      return html;\n\t    };\n\t  }]);\n\t};\n\t\n\tvar _marked = __webpack_require__(626);\n\t\n\tvar _marked2 = _interopRequireDefault(_marked);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 626 */,\n/* 627 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (ngModule) {\n\t  ngModule.filter('toMilliseconds', function () {\n\t    return function (value) {\n\t      return value * 1000.0;\n\t    };\n\t  });\n\t\n\t  ngModule.filter('dateTime', [\"clientConfig\", function (clientConfig) {\n\t    return function dateTime(value) {\n\t      if (!value) {\n\t        return '-';\n\t      }\n\t\n\t      return (0, _moment2.default)(value).format(clientConfig.dateTimeFormat);\n\t    };\n\t  }]);\n\t};\n\t\n\tvar _moment = __webpack_require__(42);\n\t\n\tvar _moment2 = _interopRequireDefault(_moment);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n/* 628 */\n/***/ function(module, exports, __webpack_require__, __webpack_module_template_argument_0__, __webpack_module_template_argument_1__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function (ngModule) {\n\t  return _extends({}, (0, _list2.default)(ngModule), (0, _show2.default)(ngModule));\n\t};\n\t\n\tvar _list = __webpack_require__(__webpack_module_template_argument_0__);\n\t\n\tvar _list2 = _interopRequireDefault(_list);\n\t\n\tvar _show = __webpack_require__(__webpack_module_template_argument_1__);\n\t\n\tvar _show2 = _interopRequireDefault(_show);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }\n]);\n\n\n// WEBPACK FOOTER //\n// app.15512cfcb29455603e73.js","import 'material-design-iconic-font/dist/css/material-design-iconic-font.css';\nimport 'font-awesome/css/font-awesome.css';\nimport 'ui-select/dist/select.css';\nimport 'angular-toastr/dist/angular-toastr.css';\nimport 'angular-resizable/src/angular-resizable.css';\nimport 'angular-gridster/dist/angular-gridster.css';\nimport 'pace-progress/themes/blue/pace-theme-minimal.css';\n\nimport 'pace-progress';\nimport debug from 'debug';\nimport angular from 'angular';\nimport ngSanitize from 'angular-sanitize';\nimport ngRoute from 'angular-route';\nimport ngResource from 'angular-resource';\nimport uiBootstrap from 'angular-ui-bootstrap';\nimport uiSelect from 'ui-select';\nimport ngMessages from 'angular-messages';\nimport toastr from 'angular-toastr';\nimport ngUpload from 'angular-base64-upload';\nimport vsRepeat from 'angular-vs-repeat';\nimport 'angular-moment';\nimport 'brace';\nimport 'angular-ui-ace';\nimport 'angular-resizable';\nimport ngGridster from 'angular-gridster';\nimport { each } from 'underscore';\n\nimport './sortable';\n\nimport './assets/css/superflat_redash.css';\nimport './assets/css/redash.css';\nimport './assets/css/main.scss';\n\nimport * as pages from './pages';\nimport * as components from './components';\nimport * as filters from './filters';\nimport * as services from './services';\nimport registerDirectives from './directives';\nimport registerVisualizations from './visualizations';\nimport markdownFilter from './filters/markdown';\nimport dateTimeFilter from './filters/datetime';\n\nconst logger = debug('redash');\n\nconst requirements = [\n  ngRoute, ngResource, ngSanitize, uiBootstrap, ngMessages, uiSelect, 'angularMoment', toastr, 'ui.ace',\n  ngUpload, 'angularResizable', vsRepeat, 'ui.sortable', ngGridster.name,\n];\n\nconst ngModule = angular.module('app', requirements);\n\nfunction registerComponents() {\n  each(components, (register) => {\n    register(ngModule);\n  });\n}\n\nfunction registerServices() {\n  each(services, (register) => {\n    register(ngModule);\n  });\n}\n\nfunction registerPages() {\n  each(pages, (registerPage) => {\n    const routes = registerPage(ngModule);\n\n    ngModule.config(($routeProvider) => {\n      each(routes, (route, path) => {\n        logger('Route: ', path);\n        // This is a workaround, to make sure app-header and footer are loaded only\n        // for the authenticated routes.\n        // We should look into switching to ui-router, that has built in support for\n        // such things.\n        route.template = `<app-header></app-header><route-status></route-status>${route.template}<footer></footer>`;\n        route.authenticated = true;\n        $routeProvider.when(path, route);\n      });\n    });\n  });\n}\n\nfunction registerFilters() {\n  each(filters, (filter, name) => {\n    ngModule.filter(name, () => filter);\n  });\n}\n\nregisterDirectives(ngModule);\nregisterServices();\nregisterFilters();\nmarkdownFilter(ngModule);\ndateTimeFilter(ngModule);\nregisterComponents();\nregisterPages();\nregisterVisualizations(ngModule);\n\nngModule.config(($routeProvider, $locationProvider, $compileProvider,\n  uiSelectConfig, toastrConfig) => {\n  $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|http|data):/);\n  $locationProvider.html5Mode(true);\n  uiSelectConfig.theme = 'bootstrap';\n\n  Object.assign(toastrConfig, {\n    positionClass: 'toast-bottom-right',\n    timeOut: 2000,\n  });\n});\n\n// Update ui-select's template to use Font-Awesome instead of glyphicon.\nngModule.run(($templateCache, OfflineListener) => { // eslint-disable-line no-unused-vars\n  const templateName = 'bootstrap/match.tpl.html';\n  let template = $templateCache.get(templateName);\n  template = template.replace('glyphicon glyphicon-remove', 'fa fa-remove');\n  $templateCache.put(templateName, template);\n});\n\nexport default ngModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/index.js","var map = {\n\t\"./af\": 45,\n\t\"./af.js\": 45,\n\t\"./ar\": 46,\n\t\"./ar-ly\": 47,\n\t\"./ar-ly.js\": 47,\n\t\"./ar-ma\": 48,\n\t\"./ar-ma.js\": 48,\n\t\"./ar-sa\": 49,\n\t\"./ar-sa.js\": 49,\n\t\"./ar-tn\": 50,\n\t\"./ar-tn.js\": 50,\n\t\"./ar.js\": 46,\n\t\"./az\": 51,\n\t\"./az.js\": 51,\n\t\"./be\": 52,\n\t\"./be.js\": 52,\n\t\"./bg\": 53,\n\t\"./bg.js\": 53,\n\t\"./bn\": 54,\n\t\"./bn.js\": 54,\n\t\"./bo\": 55,\n\t\"./bo.js\": 55,\n\t\"./br\": 56,\n\t\"./br.js\": 56,\n\t\"./bs\": 57,\n\t\"./bs.js\": 57,\n\t\"./ca\": 58,\n\t\"./ca.js\": 58,\n\t\"./cs\": 59,\n\t\"./cs.js\": 59,\n\t\"./cv\": 60,\n\t\"./cv.js\": 60,\n\t\"./cy\": 61,\n\t\"./cy.js\": 61,\n\t\"./da\": 62,\n\t\"./da.js\": 62,\n\t\"./de\": 63,\n\t\"./de-at\": 64,\n\t\"./de-at.js\": 64,\n\t\"./de.js\": 63,\n\t\"./dv\": 65,\n\t\"./dv.js\": 65,\n\t\"./el\": 66,\n\t\"./el.js\": 66,\n\t\"./en-au\": 67,\n\t\"./en-au.js\": 67,\n\t\"./en-ca\": 68,\n\t\"./en-ca.js\": 68,\n\t\"./en-gb\": 69,\n\t\"./en-gb.js\": 69,\n\t\"./en-ie\": 70,\n\t\"./en-ie.js\": 70,\n\t\"./en-nz\": 71,\n\t\"./en-nz.js\": 71,\n\t\"./eo\": 72,\n\t\"./eo.js\": 72,\n\t\"./es\": 73,\n\t\"./es-do\": 74,\n\t\"./es-do.js\": 74,\n\t\"./es.js\": 73,\n\t\"./et\": 75,\n\t\"./et.js\": 75,\n\t\"./eu\": 76,\n\t\"./eu.js\": 76,\n\t\"./fa\": 77,\n\t\"./fa.js\": 77,\n\t\"./fi\": 78,\n\t\"./fi.js\": 78,\n\t\"./fo\": 79,\n\t\"./fo.js\": 79,\n\t\"./fr\": 80,\n\t\"./fr-ca\": 81,\n\t\"./fr-ca.js\": 81,\n\t\"./fr-ch\": 82,\n\t\"./fr-ch.js\": 82,\n\t\"./fr.js\": 80,\n\t\"./fy\": 83,\n\t\"./fy.js\": 83,\n\t\"./gd\": 84,\n\t\"./gd.js\": 84,\n\t\"./gl\": 85,\n\t\"./gl.js\": 85,\n\t\"./he\": 86,\n\t\"./he.js\": 86,\n\t\"./hi\": 87,\n\t\"./hi.js\": 87,\n\t\"./hr\": 88,\n\t\"./hr.js\": 88,\n\t\"./hu\": 89,\n\t\"./hu.js\": 89,\n\t\"./hy-am\": 90,\n\t\"./hy-am.js\": 90,\n\t\"./id\": 91,\n\t\"./id.js\": 91,\n\t\"./is\": 92,\n\t\"./is.js\": 92,\n\t\"./it\": 93,\n\t\"./it.js\": 93,\n\t\"./ja\": 94,\n\t\"./ja.js\": 94,\n\t\"./jv\": 95,\n\t\"./jv.js\": 95,\n\t\"./ka\": 96,\n\t\"./ka.js\": 96,\n\t\"./kk\": 97,\n\t\"./kk.js\": 97,\n\t\"./km\": 98,\n\t\"./km.js\": 98,\n\t\"./ko\": 99,\n\t\"./ko.js\": 99,\n\t\"./ky\": 100,\n\t\"./ky.js\": 100,\n\t\"./lb\": 101,\n\t\"./lb.js\": 101,\n\t\"./lo\": 102,\n\t\"./lo.js\": 102,\n\t\"./lt\": 103,\n\t\"./lt.js\": 103,\n\t\"./lv\": 104,\n\t\"./lv.js\": 104,\n\t\"./me\": 105,\n\t\"./me.js\": 105,\n\t\"./mi\": 106,\n\t\"./mi.js\": 106,\n\t\"./mk\": 107,\n\t\"./mk.js\": 107,\n\t\"./ml\": 108,\n\t\"./ml.js\": 108,\n\t\"./mr\": 109,\n\t\"./mr.js\": 109,\n\t\"./ms\": 110,\n\t\"./ms-my\": 111,\n\t\"./ms-my.js\": 111,\n\t\"./ms.js\": 110,\n\t\"./my\": 112,\n\t\"./my.js\": 112,\n\t\"./nb\": 113,\n\t\"./nb.js\": 113,\n\t\"./ne\": 114,\n\t\"./ne.js\": 114,\n\t\"./nl\": 115,\n\t\"./nl.js\": 115,\n\t\"./nn\": 116,\n\t\"./nn.js\": 116,\n\t\"./pa-in\": 117,\n\t\"./pa-in.js\": 117,\n\t\"./pl\": 118,\n\t\"./pl.js\": 118,\n\t\"./pt\": 119,\n\t\"./pt-br\": 120,\n\t\"./pt-br.js\": 120,\n\t\"./pt.js\": 119,\n\t\"./ro\": 121,\n\t\"./ro.js\": 121,\n\t\"./ru\": 122,\n\t\"./ru.js\": 122,\n\t\"./se\": 123,\n\t\"./se.js\": 123,\n\t\"./si\": 124,\n\t\"./si.js\": 124,\n\t\"./sk\": 125,\n\t\"./sk.js\": 125,\n\t\"./sl\": 126,\n\t\"./sl.js\": 126,\n\t\"./sq\": 127,\n\t\"./sq.js\": 127,\n\t\"./sr\": 128,\n\t\"./sr-cyrl\": 129,\n\t\"./sr-cyrl.js\": 129,\n\t\"./sr.js\": 128,\n\t\"./ss\": 130,\n\t\"./ss.js\": 130,\n\t\"./sv\": 131,\n\t\"./sv.js\": 131,\n\t\"./sw\": 132,\n\t\"./sw.js\": 132,\n\t\"./ta\": 133,\n\t\"./ta.js\": 133,\n\t\"./te\": 134,\n\t\"./te.js\": 134,\n\t\"./th\": 135,\n\t\"./th.js\": 135,\n\t\"./tl-ph\": 136,\n\t\"./tl-ph.js\": 136,\n\t\"./tlh\": 137,\n\t\"./tlh.js\": 137,\n\t\"./tr\": 138,\n\t\"./tr.js\": 138,\n\t\"./tzl\": 139,\n\t\"./tzl.js\": 139,\n\t\"./tzm\": 140,\n\t\"./tzm-latn\": 141,\n\t\"./tzm-latn.js\": 141,\n\t\"./tzm.js\": 140,\n\t\"./uk\": 142,\n\t\"./uk.js\": 142,\n\t\"./uz\": 143,\n\t\"./uz.js\": 143,\n\t\"./vi\": 144,\n\t\"./vi.js\": 144,\n\t\"./x-pseudo\": 145,\n\t\"./x-pseudo.js\": 145,\n\t\"./zh-cn\": 146,\n\t\"./zh-cn.js\": 146,\n\t\"./zh-hk\": 147,\n\t\"./zh-hk.js\": 147,\n\t\"./zh-tw\": 148,\n\t\"./zh-tw.js\": 148\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 44;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/moment/locale ^\\.\\/.*$\n// module id = 44\n// module chunks = 0","/* eslint-disable */\n/*\nTODO:\n1. export module name.\n2. publish into its own repo?\n3. fix lint errors.\n*/\nimport angular from 'angular';\nimport jQuery from 'jquery';\nimport sortable from 'jquery-ui/ui/widgets/sortable';\n\n/*\n jQuery UI Sortable plugin wrapper\n\n @param [ui-sortable] {object} Options to pass to $.fn.sortable() merged onto ui.config\n */\nangular.module('ui.sortable', [])\n  .value('uiSortableConfig', {\n    // the default for jquery-ui sortable is \"> *\", we need to restrict this to\n    // ng-repeat items\n    // if the user uses\n    items: '> [ng-repeat],> [data-ng-repeat],> [x-ng-repeat]',\n  })\n  .directive('uiSortable', [\n    'uiSortableConfig', '$timeout', '$log',\n    function (uiSortableConfig, $timeout, $log) {\n      return {\n        require: '?ngModel',\n        scope: {\n          ngModel: '=',\n          uiSortable: '=',\n        },\n        link(scope, element, attrs, ngModel) {\n          let savedNodes;\n          element = jQuery(element);\n\n          function combineCallbacks(first, second) {\n            const firstIsFunc = typeof first === 'function';\n            const secondIsFunc = typeof second === 'function';\n            if (firstIsFunc && secondIsFunc) {\n              return function () {\n                first.apply(this, arguments);\n                second.apply(this, arguments);\n              };\n            } else if (secondIsFunc) {\n              return second;\n            }\n            return first;\n          }\n\n          function getSortableWidgetInstance(element) {\n            // this is a fix to support jquery-ui prior to v1.11.x\n            // otherwise we should be using `element.sortable('instance')`\n            const data = element.data('ui-sortable');\n            if (data && typeof data === 'object' && data.widgetFullName === 'ui-sortable') {\n              return data;\n            }\n            return null;\n          }\n\n          function patchSortableOption(key, value) {\n            if (callbacks[key]) {\n              if (key === 'stop') {\n                // call apply after stop\n                value = combineCallbacks(\n                  value, () => { scope.$apply(); });\n\n                value = combineCallbacks(value, afterStop);\n              }\n              // wrap the callback\n              value = combineCallbacks(callbacks[key], value);\n            } else if (wrappers[key]) {\n              value = wrappers[key](value);\n            }\n\n            // patch the options that need to have values set\n            if (!value && (key === 'items' || key === 'ui-model-items')) {\n              value = uiSortableConfig.items;\n            }\n\n            return value;\n          }\n\n          function patchUISortableOptions(newVal, oldVal, sortableWidgetInstance) {\n            function addDummyOptionKey(value, key) {\n              if (!(key in opts)) {\n                // add the key in the opts object so that\n                // the patch function detects and handles it\n                opts[key] = null;\n              }\n            }\n            // for this directive to work we have to attach some callbacks\n            angular.forEach(callbacks, addDummyOptionKey);\n\n            // only initialize it in case we have to\n            // update some options of the sortable\n            let optsDiff = null;\n\n            if (oldVal) {\n              // reset deleted options to default\n              let defaultOptions;\n              angular.forEach(oldVal, (oldValue, key) => {\n                if (!newVal || !(key in newVal)) {\n                  if (key in directiveOpts) {\n                    if (key === 'ui-floating') {\n                      opts[key] = 'auto';\n                    } else {\n                      opts[key] = patchSortableOption(key, undefined);\n                    }\n                    return;\n                  }\n\n                  if (!defaultOptions) {\n                    defaultOptions = sortable().options;\n                  }\n                  let defaultValue = defaultOptions[key];\n                  defaultValue = patchSortableOption(key, defaultValue);\n\n                  if (!optsDiff) {\n                    optsDiff = {};\n                  }\n                  optsDiff[key] = defaultValue;\n                  opts[key] = defaultValue;\n                }\n              });\n            }\n\n            // update changed options\n            angular.forEach(newVal, (value, key) => {\n              // if it's a custom option of the directive,\n              // handle it approprietly\n              if (key in directiveOpts) {\n                if (key === 'ui-floating' && (value === false || value === true) && sortableWidgetInstance) {\n                  sortableWidgetInstance.floating = value;\n                }\n\n                opts[key] = patchSortableOption(key, value);\n                return;\n              }\n\n              value = patchSortableOption(key, value);\n\n              if (!optsDiff) {\n                optsDiff = {};\n              }\n              optsDiff[key] = value;\n              opts[key] = value;\n            });\n\n            return optsDiff;\n          }\n\n          function getPlaceholderElement(element) {\n            const placeholder = element.sortable('option', 'placeholder');\n\n            // placeholder.element will be a function if the placeholder, has\n            // been created (placeholder will be an object).  If it hasn't\n            // been created, either placeholder will be false if no\n            // placeholder class was given or placeholder.element will be\n            // undefined if a class was given (placeholder will be a string)\n            if (placeholder && placeholder.element && typeof placeholder.element === 'function') {\n              let result = placeholder.element();\n              // workaround for jquery ui 1.9.x,\n              // not returning jquery collection\n              result = jQuery(result);\n              return result;\n            }\n            return null;\n          }\n\n          function getPlaceholderExcludesludes(element, placeholder) {\n            // exact match with the placeholder's class attribute to handle\n            // the case that multiple connected sortables exist and\n            // the placeholder option equals the class of sortable items\n            const notCssSelector = opts['ui-model-items'].replace(/[^,]*>/g, '');\n            const excludes = element.find(`[class=\"${placeholder.attr('class')}\"]:not(${notCssSelector})`);\n            return excludes;\n          }\n\n          function hasSortingHelper(element, ui) {\n            const helperOption = element.sortable('option', 'helper');\n            return helperOption === 'clone' || (typeof helperOption === 'function' && ui.item.sortable.isCustomHelperUsed());\n          }\n\n          function getSortingHelper(element, ui, savedNodes) {\n            let result = null;\n            if (hasSortingHelper(element, ui) &&\n                element.sortable('option', 'appendTo') === 'parent') {\n              // The .ui-sortable-helper element (that's the default class name)\n              // is placed last.\n              result = savedNodes.last();\n            }\n            return result;\n          }\n\n          // thanks jquery-ui\n          function isFloating(item) {\n            return (/left|right/).test(item.css('float')) || (/inline|table-cell/).test(item.css('display'));\n          }\n\n          function getElementScope(elementScopes, element) {\n            let result = null;\n            for (let i = 0; i < elementScopes.length; i++) {\n              const x = elementScopes[i];\n              if (x.element[0] === element[0]) {\n                result = x.scope;\n                break;\n              }\n            }\n            return result;\n          }\n\n          function afterStop(e, ui) {\n            ui.item.sortable._destroy();\n          }\n\n          // return the index of ui.item among the items\n          // we can't just do ui.item.index() because there it might have siblings\n          // which are not items\n          function getItemIndex(item) {\n            return item.parent()\n              .find(opts['ui-model-items'])\n              .index(item);\n          }\n\n          let opts = {};\n\n          // directive specific options\n          let directiveOpts = {\n            'ui-floating': undefined,\n            'ui-model-items': uiSortableConfig.items,\n          };\n\n          let callbacks = {\n            receive: null,\n            remove: null,\n            start: null,\n            stop: null,\n            update: null,\n          };\n\n          let wrappers = {\n            helper: null,\n          };\n\n          angular.extend(opts, directiveOpts, uiSortableConfig, scope.uiSortable);\n\n          function wireUp() {\n            // When we add or remove elements, we need the sortable to 'refresh'\n            // so it can find the new/removed elements.\n            scope.$watchCollection('ngModel', () => {\n              // Timeout to let ng-repeat modify the DOM\n              $timeout(() => {\n                // ensure that the jquery-ui-sortable widget instance\n                // is still bound to the directive's element\n                if (!!getSortableWidgetInstance(element)) {\n                  element.sortable('refresh');\n                }\n              }, 0, false);\n            });\n\n            callbacks.start = function (e, ui) {\n              if (opts['ui-floating'] === 'auto') {\n                // since the drag has started, the element will be\n                // absolutely positioned, so we check its siblings\n                const siblings = ui.item.siblings();\n                const sortableWidgetInstance = getSortableWidgetInstance(jQuery(e.target));\n                sortableWidgetInstance.floating = isFloating(siblings);\n              }\n\n              // Save the starting position of dragged item\n              const index = getItemIndex(ui.item);\n              ui.item.sortable = {\n                model: ngModel.$modelValue[index],\n                index,\n                source: ui.item.parent(),\n                sourceModel: ngModel.$modelValue,\n                cancel() {\n                  ui.item.sortable._isCanceled = true;\n                },\n                isCanceled() {\n                  return ui.item.sortable._isCanceled;\n                },\n                isCustomHelperUsed() {\n                  return !!ui.item.sortable._isCustomHelperUsed;\n                },\n                _isCanceled: false,\n                _isCustomHelperUsed: ui.item.sortable._isCustomHelperUsed,\n                _destroy() {\n                  angular.forEach(ui.item.sortable, (value, key) => {\n                    ui.item.sortable[key] = undefined;\n                  });\n                },\n              };\n            };\n\n            callbacks.activate = function (e, ui) {\n              // We need to make a copy of the current element's contents so\n              // we can restore it after sortable has messed it up.\n              // This is inside activate (instead of start) in order to save\n              // both lists when dragging between connected lists.\n              savedNodes = element.contents();\n\n              // If this list has a placeholder (the connected lists won't),\n              // don't inlcude it in saved nodes.\n              const placeholder = getPlaceholderElement(element);\n              if (placeholder && placeholder.length) {\n                const excludes = getPlaceholderExcludesludes(element, placeholder);\n                savedNodes = savedNodes.not(excludes);\n              }\n\n              // save the directive's scope so that it is accessible from ui.item.sortable\n              const connectedSortables = ui.item.sortable._connectedSortables || [];\n\n              connectedSortables.push({\n                element,\n                scope,\n              });\n\n              ui.item.sortable._connectedSortables = connectedSortables;\n            };\n\n            callbacks.update = function (e, ui) {\n              // Save current drop position but only if this is not a second\n              // update that happens when moving between lists because then\n              // the value will be overwritten with the old value\n              if (!ui.item.sortable.received) {\n                ui.item.sortable.dropindex = getItemIndex(ui.item);\n                const droptarget = ui.item.parent();\n                ui.item.sortable.droptarget = droptarget;\n\n                const droptargetScope = getElementScope(ui.item.sortable._connectedSortables, droptarget);\n                ui.item.sortable.droptargetModel = droptargetScope.ngModel;\n\n                // Cancel the sort (let ng-repeat do the sort for us)\n                // Don't cancel if this is the received list because it has\n                // already been canceled in the other list, and trying to cancel\n                // here will mess up the DOM.\n                element.sortable('cancel');\n              }\n\n              // Put the nodes back exactly the way they started (this is very\n              // important because ng-repeat uses comment elements to delineate\n              // the start and stop of repeat sections and sortable doesn't\n              // respect their order (even if we cancel, the order of the\n              // comments are still messed up).\n              const sortingHelper = !ui.item.sortable.received && getSortingHelper(element, ui, savedNodes);\n              if (sortingHelper && sortingHelper.length) {\n                // Restore all the savedNodes except from the sorting helper element.\n                // That way it will be garbage collected.\n                savedNodes = savedNodes.not(sortingHelper);\n              }\n              savedNodes.appendTo(element);\n\n              // If this is the target connected list then\n              // it's safe to clear the restored nodes since:\n              // update is currently running and\n              // stop is not called for the target list.\n              if (ui.item.sortable.received) {\n                savedNodes = null;\n              }\n\n              // If received is true (an item was dropped in from another list)\n              // then we add the new item to this list otherwise wait until the\n              // stop event where we will know if it was a sort or item was\n              // moved here from another list\n              if (ui.item.sortable.received && !ui.item.sortable.isCanceled()) {\n                scope.$apply(() => {\n                  ngModel.$modelValue.splice(ui.item.sortable.dropindex, 0,\n                                             ui.item.sortable.moved);\n                });\n              }\n            };\n\n            callbacks.stop = function (e, ui) {\n              // If the received flag hasn't be set on the item, this is a\n              // normal sort, if dropindex is set, the item was moved, so move\n              // the items in the list.\n              if (!ui.item.sortable.received &&\n                 ('dropindex' in ui.item.sortable) &&\n                 !ui.item.sortable.isCanceled()) {\n                scope.$apply(() => {\n                  ngModel.$modelValue.splice(\n                    ui.item.sortable.dropindex, 0,\n                    ngModel.$modelValue.splice(ui.item.sortable.index, 1)[0]);\n                });\n              } else {\n                // if the item was not moved, then restore the elements\n                // so that the ngRepeat's comment are correct.\n                if ((!('dropindex' in ui.item.sortable) || ui.item.sortable.isCanceled()) &&\n                    !angular.equals(element.contents(), savedNodes)) {\n                  const sortingHelper = getSortingHelper(element, ui, savedNodes);\n                  if (sortingHelper && sortingHelper.length) {\n                    // Restore all the savedNodes except from the sorting helper element.\n                    // That way it will be garbage collected.\n                    savedNodes = savedNodes.not(sortingHelper);\n                  }\n                  savedNodes.appendTo(element);\n                }\n              }\n\n              // It's now safe to clear the savedNodes\n              // since stop is the last callback.\n              savedNodes = null;\n            };\n\n            callbacks.receive = function (e, ui) {\n              // An item was dropped here from another list, set a flag on the\n              // item.\n              ui.item.sortable.received = true;\n            };\n\n            callbacks.remove = function (e, ui) {\n              // Workaround for a problem observed in nested connected lists.\n              // There should be an 'update' event before 'remove' when moving\n              // elements. If the event did not fire, cancel sorting.\n              if (!('dropindex' in ui.item.sortable)) {\n                element.sortable('cancel');\n                ui.item.sortable.cancel();\n              }\n\n              // Remove the item from this list's model and copy data into item,\n              // so the next list can retrive it\n              if (!ui.item.sortable.isCanceled()) {\n                scope.$apply(() => {\n                  ui.item.sortable.moved = ngModel.$modelValue.splice(\n                    ui.item.sortable.index, 1)[0];\n                });\n              }\n            };\n\n            wrappers.helper = function (inner) {\n              if (inner && typeof inner === 'function') {\n                return function (e, item) {\n                  const oldItemSortable = item.sortable;\n                  const index = getItemIndex(item);\n                  item.sortable = {\n                    model: ngModel.$modelValue[index],\n                    index,\n                    source: item.parent(),\n                    sourceModel: ngModel.$modelValue,\n                    _restore() {\n                      angular.forEach(item.sortable, (value, key) => {\n                        item.sortable[key] = undefined;\n                      });\n\n                      item.sortable = oldItemSortable;\n                    },\n                  };\n\n                  const innerResult = inner.apply(this, arguments);\n                  item.sortable._restore();\n                  item.sortable._isCustomHelperUsed = item !== innerResult;\n                  return innerResult;\n                };\n              }\n              return inner;\n            };\n\n            scope.$watchCollection('uiSortable', (newVal, oldVal) => {\n              // ensure that the jquery-ui-sortable widget instance\n              // is still bound to the directive's element\n              const sortableWidgetInstance = getSortableWidgetInstance(element);\n              if (!!sortableWidgetInstance) {\n                const optsDiff = patchUISortableOptions(newVal, oldVal, sortableWidgetInstance);\n\n                if (optsDiff) {\n                  element.sortable('option', optsDiff);\n                }\n              }\n            }, true);\n\n            patchUISortableOptions(opts);\n          }\n\n          function init() {\n            if (ngModel) {\n              wireUp();\n            } else {\n              $log.info('ui.sortable: ngModel not provided!', element);\n            }\n\n            // Create sortable\n            element.sortable(opts);\n          }\n\n          function initIfEnabled() {\n            if (scope.uiSortable && scope.uiSortable.disabled) {\n              return false;\n            }\n\n            init();\n\n            // Stop Watcher\n            initIfEnabled.cancelWatcher();\n            initIfEnabled.cancelWatcher = angular.noop;\n\n            return true;\n          }\n\n          initIfEnabled.cancelWatcher = angular.noop;\n\n          if (!initIfEnabled()) {\n            initIfEnabled.cancelWatcher = scope.$watch('uiSortable.disabled', initIfEnabled);\n          }\n        },\n      };\n    },\n  ]);\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/sortable.js","export { default as home } from './home';\nexport { default as queriesList } from './queries-list';\nexport { default as alertsList } from './alerts-list';\nexport { default as alert } from './alert';\nexport { default as admin } from './admin';\nexport { default as dashboards } from './dashboards';\nexport { default as querySnippets } from './query-snippets';\nexport { default as users } from './users';\nexport { default as groups } from './groups';\nexport { default as destinations } from './destinations';\nexport { default as dataSources } from './data-sources';\nexport { default as queries } from './queries';\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/index.js","import template from './home.html';\n\nfunction HomeCtrl($scope, $uibModal, currentUser, Events, Dashboard, Query) {\n  Events.record('view', 'page', 'personal_homepage');\n\n  // todo: maybe this should come from some serivce as we have this logic elsewhere.\n  this.canCreateQuery = currentUser.hasPermission('create_query');\n  this.canCreateDashboard = currentUser.hasPermission('create_dashboard');\n\n  this.recentQueries = Query.recent();\n  this.recentDashboards = Dashboard.recent();\n\n  this.newDashboard = () => {\n    $uibModal.open({\n      component: 'editDashboardDialog',\n      resolve: {\n        dashboard: () => ({ name: null, layout: null }),\n      },\n    });\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.component('homePage', {\n    template,\n    controller: HomeCtrl,\n  });\n\n  return {\n    '/': {\n      template: '<home-page></home-page>',\n      title: 'Redash',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/home/index.js","module.exports = \"<div class=\\\"container\\\">\\n  <div class=\\\"tile m-t-10 m-b-5\\\">\\n    <div class=\\\"t-body p-5\\\">\\n      <a href=\\\"queries/new\\\" ng-show=\\\"$ctrl.canCreateQuery\\\" class=\\\"btn btn-default\\\">New Query</a>\\n      <button ng-show=\\\"$ctrl.canCreateDashboard\\\" class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.newDashboard()\\\">New Dashboard\\n      </button>\\n      <a href=\\\"alerts/new\\\" class=\\\"btn btn-default\\\">New Alert</a>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"tile\\\">\\n    <div class=\\\"t-body tb-padding\\\">\\n      <div class=\\\"row\\\">\\n          <div class=\\\"col-md-6\\\">\\n            <p class=\\\"f-500 m-b-20 c-black\\\">Recent Dashboards</p>\\n            <div class=\\\"list-group\\\">\\n              <a ng-href=\\\"dashboard/{{dashboard.slug}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"dashboard in $ctrl.recentDashboards\\\">\\n                {{dashboard.name}} <span class=\\\"label label-default\\\" ng-if=\\\"dashboard.is_draft\\\">Unpublished</span>\\n              </a>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"col-md-6\\\">\\n            <p class=\\\"f-500 m-b-20 c-black\\\">Recent Queries</p>\\n            <div class=\\\"list-group\\\">\\n              <a ng-href=\\\"queries/{{query.id}}\\\" class=\\\"list-group-item\\\"\\n                 ng-repeat=\\\"query in $ctrl.recentQueries\\\">{{query.name}} <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span></a>\\n            </div>\\n          </div>\\n      </div>\\n\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/home/home.html\n// module id = 186\n// module chunks = 0","import moment from 'moment';\n\nimport { LivePaginator } from '../../utils';\nimport template from './queries-list.html';\n\nclass QueriesListCtrl {\n  constructor($location, Title, Query) {\n    const page = parseInt($location.search().page || 1, 10);\n\n    this.defaultOptions = {};\n\n    const self = this;\n\n    switch ($location.path()) {\n      case '/queries':\n        Title.set('Queries');\n        this.resource = Query.query;\n        break;\n      case '/queries/my':\n        Title.set('My Queries');\n        this.resource = Query.myQueries;\n        break;\n      default:\n        break;\n    }\n\n    function queriesFetcher(requestedPage, itemsPerPage, paginator) {\n      $location.search('page', requestedPage);\n\n      const request = Object.assign({}, self.defaultOptions,\n        { page: requestedPage, page_size: itemsPerPage });\n\n      return self.resource(request).$promise.then((data) => {\n        const rows = data.results.map((query) => {\n          query.created_at = moment(query.created_at);\n          query.retrieved_at = moment(query.retrieved_at);\n          return query;\n        });\n\n        paginator.updateRows(rows, data.count);\n      });\n    }\n\n    this.paginator = new LivePaginator(queriesFetcher, { page });\n\n    this.tabs = [\n      { name: 'My Queries', path: 'queries/my' },\n      { path: 'queries', name: 'All Queries', isActive: path => path === '/queries' },\n    ];\n  }\n}\n\nexport default function (ngModule) {\n  ngModule.component('pageQueriesList', {\n    template,\n    controller: QueriesListCtrl,\n  });\n\n  const route = {\n    template: '<page-queries-list></page-queries-list>',\n    reloadOnSearch: false,\n  };\n\n  return {\n    '/queries': route,\n    '/queries/my': route,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries-list/index.js","export { default as Paginator } from './paginator';\nexport { default as LivePaginator } from './live-paginator';\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/utils/index.js","export default class Paginator {\n  constructor(rows, { page = 1, itemsPerPage = 20, totalCount = undefined } = {}) {\n    this.page = page;\n    this.itemsPerPage = itemsPerPage;\n    this.updateRows(rows, totalCount);\n  }\n\n  setPage(page) {\n    this.page = page;\n  }\n\n  getPageRows() {\n    const first = this.itemsPerPage * (this.page - 1);\n    const last = this.itemsPerPage * (this.page);\n\n    return this.rows.slice(first, last);\n  }\n\n  updateRows(rows, totalCount = undefined) {\n    this.rows = rows;\n    if (this.rows) {\n      this.totalCount = totalCount || rows.length;\n    } else {\n      this.totalCount = 0;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/utils/paginator.js","export default class LivePaginator {\n  constructor(rowsFetcher, { page = 1, itemsPerPage = 20 } = {}) {\n    this.page = page;\n    this.itemsPerPage = itemsPerPage;\n    this.rowsFetcher = rowsFetcher;\n    this.rowsFetcher(this.page, this.itemsPerPage, this);\n  }\n\n  setPage(page) {\n    this.page = page;\n    this.rowsFetcher(page, this.itemsPerPage, this);\n  }\n\n  getPageRows() {\n    return this.rows;\n  }\n\n  updateRows(rows, totalCount = undefined) {\n    this.rows = rows;\n    if (this.rows) {\n      this.totalCount = totalCount || rows.length;\n    } else {\n      this.totalCount = 0;\n    }\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/utils/live-paginator.js","module.exports = \"<div class=\\\"container\\\">\\n  <page-header title=\\\"Queries\\\"></page-header>\\n  <tab-nav tabs=\\\"$ctrl.tabs\\\"></tab-nav>\\n\\n  <div class=\\\"bg-white\\\">\\n    <table class=\\\"table table-condensed table-hover\\\">\\n      <thead>\\n      <tr>\\n        <th>Name</th>\\n        <th>Created By</th>\\n        <th>Created At</th>\\n        <th>Runtime</th>\\n        <th>Last Executed At</th>\\n        <th>Update Schedule</th>\\n      </tr>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"query in $ctrl.paginator.getPageRows()\\\">\\n        <td><a href=\\\"queries/{{query.id}}\\\">{{query.name}}</a> <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span></td>\\n        <td>{{query.user.name}}</td>\\n        <td>{{query.created_at | dateTime}}</td>\\n        <td>{{query.runtime | durationHumanize}}</td>\\n        <td>{{query.retrieved_at | dateTime}}</td>\\n        <td>{{query.schedule | scheduleHumanize}}</td>\\n      </tr>\\n      </tbody>\\n    </table>\\n    <paginator paginator=\\\"$ctrl.paginator\\\"></paginator>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/queries-list/queries-list.html\n// module id = 191\n// module chunks = 0","import { Paginator } from '../../utils';\nimport template from './alerts-list.html';\n\nclass AlertsListCtrl {\n  constructor(Events, Alert) {\n    Events.record('view', 'page', 'alerts');\n\n    this.alerts = new Paginator([], { itemsPerPage: 20 });\n\n    Alert.query((alerts) => {\n      const stateClass = {\n        ok: 'label label-success',\n        triggered: 'label label-danger',\n        unknown: 'label label-warning',\n      };\n\n      alerts.forEach((alert) => {\n        alert.class = stateClass[alert.state];\n      });\n\n      this.alerts.updateRows(alerts);\n    });\n  }\n}\n\nexport default function (ngModule) {\n  ngModule.component('alertsListPage', {\n    template,\n    controller: AlertsListCtrl,\n  });\n\n  return {\n    '/alerts': {\n      template: '<alerts-list-page></alerts-list-page>',\n      title: 'Alerts',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/alerts-list/index.js","module.exports = \"<div>\\n  <page-header title=\\\"Alerts\\\">\\n    <a href=\\\"alerts/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Alert</a>\\n  </page-header>\\n\\n  <div class=\\\"container\\\">\\n    <div class=\\\"container bg-white\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n        <tr>\\n          <th>Name</th>\\n          <th>Created By</th>\\n          <th>State</th>\\n          <th>Created At</th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"row in $ctrl.alerts.getPageRows()\\\">\\n          <td><a href=\\\"alerts/{{row.id}}\\\">{{row.name}}</a></td>\\n          <td>{{row.user.name}}</td>\\n          <td><span ng-class=\\\"row.class\\\">{{row.state | uppercase}}</span> since <span am-time-ago=\\\"row.updated_at\\\"></span></td>\\n          <td><span am-time-ago=\\\"row.created_at\\\"></span></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.alerts\\\"></paginator>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/alerts-list/alerts-list.html\n// module id = 193\n// module chunks = 0","import { template as templateBuilder } from 'underscore';\nimport template from './alert.html';\nimport alertSubscriptions from './alert-subscriptions';\n\nfunction AlertCtrl($routeParams, $location, $sce, toastr, currentUser, Query, Events, Alert) {\n  this.alertId = $routeParams.alertId;\n\n  if (this.alertId === 'new') {\n    Events.record('view', 'page', 'alerts/new');\n  } else {\n    Events.record('view', 'alert', this.alertId);\n  }\n\n  this.trustAsHtml = html => $sce.trustAsHtml(html);\n\n  this.onQuerySelected = (item) => {\n    this.selectedQuery = item;\n    item.getQueryResultPromise().then((result) => {\n      this.queryResult = result;\n      this.alert.options.column = this.alert.options.column || result.getColumnNames()[0];\n    });\n  };\n\n  if (this.alertId === 'new') {\n    this.alert = new Alert({ options: {} });\n    this.canEdit = true;\n  } else {\n    this.alert = Alert.get({ id: this.alertId }, (alert) => {\n      this.onQuerySelected(new Query(alert.query));\n      this.canEdit = currentUser.canEdit(this.alert);\n    });\n  }\n\n  this.ops = ['greater than', 'less than', 'equals'];\n  this.selectedQuery = null;\n\n  const defaultNameBuilder = templateBuilder('<%= query.name %>: <%= options.column %> <%= options.op %> <%= options.value %>');\n\n  this.getDefaultName = () => {\n    if (!this.alert.query) {\n      return undefined;\n    }\n    return defaultNameBuilder(this.alert);\n  };\n\n  this.searchQueries = (term) => {\n    if (!term || term.length < 3) {\n      return;\n    }\n\n    Query.search({ q: term }, (results) => {\n      this.queries = results;\n    });\n  };\n\n  this.saveChanges = () => {\n    if (this.alert.name === undefined || this.alert.name === '') {\n      this.alert.name = this.getDefaultName();\n    }\n    if (this.alert.rearm === '' || this.alert.rearm === 0) {\n      this.alert.rearm = null;\n    }\n    this.alert.$save((alert) => {\n      toastr.success('Saved.');\n      if (this.alertId === 'new') {\n        $location.path(`/alerts/${alert.id}`).replace();\n      }\n    }, () => {\n      toastr.error('Failed saving alert.');\n    });\n  };\n\n  this.delete = () => {\n    this.alert.$delete(() => {\n      $location.path('/alerts');\n      toastr.success('Alert deleted.');\n    }, () => {\n      toastr.error('Failed deleting alert.');\n    });\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.component('alertPage', {\n    template,\n    controller: AlertCtrl,\n  });\n\n  ngModule.directive('alertSubscriptions', alertSubscriptions);\n\n  return {\n    '/alerts/:alertId': {\n      template: '<alert-page></alert-page>',\n      title: 'Alerts',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/alert/index.js","module.exports = \"<page-header title='{{$ctrl.alert.name || $ctrl.getDefaultName() || \\\"New\\\" }}'>\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <email-settings-warning function=\\\"'alert emails'\\\"></email-settings-warning>\\n\\n  <div class=\\\"container\\\">\\n    <div class=\\\"row bg-white p-10\\\">\\n      <div class=\\\"col-md-8\\\">\\n        <form name=\\\"alertForm\\\" class=\\\"form\\\">\\n          <div class=\\\"form-group\\\">\\n            <label>Query</label>\\n            <ui-select ng-model=\\\"$ctrl.alert.query\\\" reset-search-input=\\\"false\\\" on-select=\\\"$ctrl.onQuerySelected($item)\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n              <ui-select-match placeholder=\\\"Search a query by name\\\">{{$select.selected.name}}</ui-select-match>\\n              <ui-select-choices repeat=\\\"q in $ctrl.queries\\\"\\n                                 refresh=\\\"$ctrl.searchQueries($select.search)\\\"\\n                                 refresh-delay=\\\"0\\\">\\n                <div ng-bind-html=\\\"$ctrl.trustAsHtml(q.name | highlight: $select.search)\\\"></div>\\n              </ui-select-choices>\\n            </ui-select>\\n          </div>\\n\\n          <div class=\\\"form-group\\\" ng-show=\\\"$ctrl.selectedQuery\\\">\\n            <label>Name</label>\\n            <input type=\\\"string\\\" placeholder=\\\"{{$ctrl.getDefaultName()}}\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.name\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n          </div>\\n\\n          <div ng-show=\\\"$ctrl.queryResult\\\" class=\\\"form-horizontal\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Value column</label>\\n              <div class=\\\"col-md-4\\\">\\n                <select ng-options=\\\"name for name in $ctrl.queryResult.getColumnNames()\\\" ng-model=\\\"$ctrl.alert.options.column\\\"\\n                        class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"></select>\\n              </div>\\n              <label class=\\\"control-label col-md-2\\\">Value</label>\\n              <div class=\\\"col-md-4\\\">\\n                <p class=\\\"form-control-static\\\">{{$ctrl.queryResult.getData()[0][$ctrl.alert.options.column]}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Op</label>\\n              <div class=\\\"col-md-4\\\">\\n                <select ng-options=\\\"name for name in $ctrl.ops\\\" ng-model=\\\"$ctrl.alert.options.op\\\" class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"></select>\\n              </div>\\n              <label class=\\\"control-label col-md-2\\\">Reference</label>\\n              <div class=\\\"col-md-4\\\">\\n                <input type=\\\"number\\\" step=\\\"any\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.options.value\\\" placeholder=\\\"reference value\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"\\n                       required/>\\n              </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Rearm seconds</label>\\n              <div class=\\\"col-md-4\\\">\\n                <input type=\\\"number\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.rearm\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"/>\\n              </div>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.canEdit\\\">\\n            <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!alertForm.$valid\\\" ng-click=\\\"$ctrl.saveChanges()\\\">Save</button>\\n            <button class=\\\"btn btn-danger\\\" ng-if=\\\"$ctrl.alert.id\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button>\\n          </div>\\n        </form>\\n      </div>\\n      <div class=\\\"col-md-4\\\" ng-if=\\\"$ctrl.alert.id\\\">\\n        <alert-subscriptions alert-id=\\\"$ctrl.alert.id\\\"></alert-subscriptions>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/alert/alert.html\n// module id = 195\n// module chunks = 0","import { contains, without, compact } from 'underscore';\nimport template from './alert-subscriptions.html';\n\nfunction controller($scope, $q, $sce, currentUser, AlertSubscription, Destination, toastr) {\n  'ngInject';\n\n  $scope.newSubscription = {};\n  $scope.subscribers = [];\n  $scope.destinations = [];\n  $scope.currentUser = currentUser;\n\n  $q.all([Destination.query().$promise,\n    AlertSubscription.query({ alertId: $scope.alertId }).$promise]).then((responses) => {\n      const destinations = responses[0];\n      const subscribers = responses[1];\n\n      const subscribedDestinations =\n        compact(subscribers.map(s => s.destination && s.destination.id));\n\n      const subscribedUsers =\n        compact(subscribers.map(s => !s.destination && s.user.id));\n\n      $scope.destinations = destinations.filter(d => !contains(subscribedDestinations, d.id));\n\n      if (!contains(subscribedUsers, currentUser.id)) {\n        $scope.destinations.unshift({ user: { name: currentUser.name } });\n      }\n\n      $scope.newSubscription.destination = $scope.destinations[0];\n      $scope.subscribers = subscribers;\n    });\n\n  $scope.destinationsDisplay = (d) => {\n    if (!d) {\n      return '';\n    }\n\n    let destination = d;\n    if (d.destination) {\n      destination = destination.destination;\n    } else if (destination.user) {\n      destination = {\n        name: `${d.user.name} (Email)`,\n        icon: 'fa-envelope',\n        type: 'user',\n      };\n    }\n\n    return $sce.trustAsHtml(`<i class=\"fa ${destination.icon}\"></i>&nbsp;${destination.name}`);\n  };\n\n  $scope.saveSubscriber = () => {\n    const sub = new AlertSubscription({ alert_id: $scope.alertId });\n    if ($scope.newSubscription.destination.id) {\n      sub.destination_id = $scope.newSubscription.destination.id;\n    }\n\n    sub.$save(() => {\n      toastr.success('Subscribed.');\n      $scope.subscribers.push(sub);\n      $scope.destinations = without($scope.destinations, $scope.newSubscription.destination);\n      if ($scope.destinations.length > 0) {\n        $scope.newSubscription.destination = $scope.destinations[0];\n      } else {\n        $scope.newSubscription.destination = undefined;\n      }\n    }, () => {\n      toastr.error('Failed saving subscription.');\n    });\n  };\n\n  $scope.unsubscribe = (subscriber) => {\n    const destination = subscriber.destination;\n    const user = subscriber.user;\n\n    subscriber.$delete(() => {\n      toastr.success('Unsubscribed');\n      $scope.subscribers = without($scope.subscribers, subscriber);\n      if (destination) {\n        $scope.destinations.push(destination);\n      } else if (user.id === currentUser.id) {\n        $scope.destinations.push({ user: { name: currentUser.name } });\n      }\n\n      if ($scope.destinations.length === 1) {\n        $scope.newSubscription.destination = $scope.destinations[0];\n      }\n    }, () => {\n      toastr.error('Failed unsubscribing.');\n    });\n  };\n}\n\nexport default () => ({\n  restrict: 'E',\n  replace: true,\n  scope: {\n    alertId: '=',\n  },\n  template,\n  controller,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/alert/alert-subscriptions/index.js","module.exports = \"<div class=\\\"p-5\\\">\\n  <h4>Notifications</h4>\\n\\n  <div>\\n    <ui-select ng-model=\\\"newSubscription.destination\\\" ng-disabled=\\\"destinations.length == 0\\\">\\n      <ui-select-match><span ng-bind-html=\\\"destinationsDisplay($select.selected)\\\"></span></ui-select-match>\\n      <ui-select-choices repeat=\\\"d in destinations\\\">\\n        <span ng-bind-html=\\\"destinationsDisplay(d)\\\"></span>\\n      </ui-select-choices>\\n    </ui-select>\\n  </div>\\n  <div class=\\\"m-t-5\\\">\\n    <button class=\\\"btn btn-default\\\" ng-click=\\\"saveSubscriber()\\\" ng-disabled=\\\"destinations.length == 0\\\" style=\\\"width:50%;\\\">Add</button>\\n    <span class=\\\"pull-right m-t-5\\\">\\n      <a href=\\\"destinations/new\\\" ng-if=\\\"currentUser.isAdmin\\\">Create New Destination</a>\\n    </span>\\n  </div>\\n\\n  <hr/>\\n\\n  <div>\\n    <div class=\\\"list-group-item\\\" ng-repeat=\\\"subscriber in subscribers\\\">\\n      <span ng-bind-html=\\\"destinationsDisplay(subscriber)\\\"></span>\\n      <button class=\\\"btn btn-xs btn-danger pull-right\\\" ng-click=\\\"unsubscribe(subscriber)\\\" ng-if=\\\"currentUser.isAdmin || currentUser.id == subscriber.user.id\\\">Remove</button>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/alert/alert-subscriptions/alert-subscriptions.html\n// module id = 197\n// module chunks = 0","import registerStatusPage from './status';\nimport registerOutdatedQueriesPage from './outdated-queries';\nimport registerTasksPage from './tasks';\n\nexport default function (ngModule) {\n  const routes = Object.assign({}, registerStatusPage(ngModule),\n                                   registerOutdatedQueriesPage(ngModule),\n                                   registerTasksPage(ngModule));\n  return routes;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/admin/index.js","import template from './status.html';\n\n// TODO: switch to $ctrl instead of $scope.\nfunction AdminStatusCtrl($scope, $http, $timeout, currentUser, Events) {\n  Events.record('view', 'page', 'admin/status');\n\n  const refresh = () => {\n    $http.get('/status.json').success((data) => {\n      $scope.workers = data.workers;\n      delete data.workers;\n      $scope.manager = data.manager;\n      delete data.manager;\n      $scope.status = data;\n    });\n\n    const timer = $timeout(refresh, 59 * 1000);\n\n    $scope.$on('$destroy', () => {\n      if (timer) {\n        $timeout.cancel(timer);\n      }\n    });\n  };\n\n  refresh();\n}\n\nexport default function (ngModule) {\n  ngModule.component('statusPage', {\n    template,\n    controller: AdminStatusCtrl,\n  });\n\n  return {\n    '/admin/status': {\n      template: '<status-page></status-page>',\n      title: 'System Status',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/admin/status/index.js","module.exports = \"<page-header title=\\\"Admin\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li class=\\\"active\\\"><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li><a href=\\\"admin/queries/tasks\\\">Queries Queue</a></li>\\n      <li><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <div>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">General</li>\\n        <li class=\\\"list-group-item\\\" ng-repeat=\\\"(name, value) in status\\\">\\n          <span class=\\\"badge\\\">{{value}}</span>\\n          {{name | toHuman}}\\n        </li>\\n      </ul>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">Manager</li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\" am-time-ago=\\\"manager.last_refresh_at*1000.0\\\"></span>\\n          Last Refresh\\n        </li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\" am-time-ago=\\\"manager.started_at*1000.0\\\"></span>\\n          Started\\n        </li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\">{{manager.outdated_queries_count}}</span>\\n          Outdated Queries Count\\n        </li>\\n      </ul>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">Queues</li>\\n        <li class=\\\"list-group-item\\\" ng-repeat=\\\"(name, value) in manager.queues\\\">\\n          <span class=\\\"badge\\\">{{value.size}}</span>\\n          {{name}} <span uib-popover=\\\"{{value.data_sources}}\\\" popover-trigger=\\\"'mouseenter'\\\"><i class=\\\"fa fa-question-circle\\\"></i></span>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/admin/status/status.html\n// module id = 200\n// module chunks = 0","import moment from 'moment';\n\nimport { Paginator } from '../../../utils';\nimport template from './outdated-queries.html';\n\nfunction OutdatedQueriesCtrl($scope, Events, $http, $timeout) {\n  Events.record('view', 'page', 'admin/outdated_queries');\n  $scope.autoUpdate = true;\n\n  this.queries = new Paginator([], { itemsPerPage: 50 });\n\n  const refresh = () => {\n    if ($scope.autoUpdate) {\n      $scope.refresh_time = moment().add(1, 'minutes');\n      $http.get('/api/admin/queries/outdated').success((data) => {\n        this.queries.updateRows(data.queries);\n        $scope.updatedAt = data.updated_at * 1000.0;\n      });\n    }\n\n    const timer = $timeout(refresh, 59 * 1000);\n\n    $scope.$on('$destroy', () => {\n      if (timer) {\n        $timeout.cancel(timer);\n      }\n    });\n  };\n\n  refresh();\n}\n\nexport default function (ngModule) {\n  ngModule.component('outdatedQueriesPage', {\n    template,\n    controller: OutdatedQueriesCtrl,\n  });\n\n  return {\n    '/admin/queries/outdated': {\n      template: '<outdated-queries-page></outdated-queries-page>',\n      title: 'Outdated Queries',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/admin/outdated-queries/index.js","module.exports = \"<page-header title=\\\"Admin\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li><a href=\\\"admin/queries/tasks\\\">Queries Queue</a></li>\\n      <li class=\\\"active\\\"><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <table class=\\\"table table-condensed table-hover\\\">\\n      <thead>\\n      <tr>\\n        <th>Name</th>\\n        <th>Created By</th>\\n        <th>Runtime</th>\\n        <th>Last Executed At</th>\\n        <th>Created At</th>\\n        <th>Update Schedule</th>\\n      </tr>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"row in $ctrl.queries.getPageRows()\\\">\\n        <td>\\n          {{row.data_source_id}}\\n        </td>\\n        <td>\\n          <a ng-href=\\\"queries/{{row.id}}\\\">{{row.name}}</a>\\n        </td>\\n        <td>{{row.user.name}}</td>\\n        <td>{{row.runtime | durationHumanize}}</td>\\n        <td>{{row.retrieved_at | dateTime}}</td>\\n        <td>{{row.created_at | dateTime }}</td>\\n        <td>{{row.schedule | scheduleHumanize}}</td>\\n      </tr>\\n      </tbody>\\n    </table>\\n    <paginator paginator=\\\"$ctrl.queries\\\"></paginator>\\n\\n    <div class=\\\"badge\\\">\\n      Last update: <span am-time-ago=\\\"updatedAt\\\"></span>\\n    </div>\\n    (<label><input type=\\\"checkbox\\\" ng-model=\\\"autoUpdate\\\"> Auto Update</label>)\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/admin/outdated-queries/outdated-queries.html\n// module id = 202\n// module chunks = 0","import moment from 'moment';\n\nimport { Paginator } from '../../../utils';\nimport template from './tasks.html';\nimport registerCancelQueryButton from './cancel-query-button';\n\nfunction TasksCtrl($scope, $location, $http, $timeout, Events) {\n  Events.record('view', 'page', 'admin/tasks');\n  $scope.autoUpdate = true;\n\n  $scope.selectedTab = 'in_progress';\n\n  $scope.tasks = {\n    waiting: [],\n    in_progress: [],\n    done: [],\n  };\n\n  this.tasksPaginator = new Paginator([], { itemsPerPage: 50 });\n\n  $scope.setTab = (tab) => {\n    $scope.selectedTab = tab;\n    this.tasksPaginator.updateRows($scope.tasks[tab]);\n  };\n\n  $scope.setTab($location.hash() || 'in_progress');\n\n  const refresh = () => {\n    if ($scope.autoUpdate) {\n      $scope.refresh_time = moment().add(1, 'minutes');\n      $http.get('/api/admin/queries/tasks').success((data) => {\n        $scope.tasks = data;\n        this.tasksPaginator.updateRows($scope.tasks[$scope.selectedTab]);\n      });\n    }\n\n    const timer = $timeout(refresh, 5 * 1000);\n\n    $scope.$on('$destroy', () => {\n      if (timer) {\n        $timeout.cancel(timer);\n      }\n    });\n  };\n\n  refresh();\n}\n\nexport default function (ngModule) {\n  ngModule.component('tasksPage', {\n    template,\n    controller: TasksCtrl,\n  });\n\n  registerCancelQueryButton(ngModule);\n\n  return {\n    '/admin/queries/tasks': {\n      template: '<tasks-page></tasks-page>',\n      title: 'Running Queries',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/admin/tasks/index.js","module.exports = \"<page-header title=\\\"Admin\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li class=\\\"active\\\"><a href=\\\"admin/queries/tasks\\\">Queries Queue</a></li>\\n      <li><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <ul class=\\\"tab-nav\\\">\\n      <rd-tab tab-id=\\\"in_progress\\\" name=\\\"In Progress ({{tasks.in_progress.length}})\\\" ng-click=\\\"setTab('in_progress')\\\"></rd-tab>\\n      <rd-tab tab-id=\\\"waiting\\\" name=\\\"Waiting ({{tasks.waiting.length}})\\\" ng-click=\\\"setTab('waiting')\\\"></rd-tab>\\n      <rd-tab tab-id=\\\"done\\\" name=\\\"Done\\\" ng-click=\\\"setTab('done')\\\"></rd-tab>\\n    </ul>\\n\\n    <table class=\\\"table table-condensed table-hover\\\">\\n      <thead>\\n      <tr>\\n        <th>Data Source ID</th>\\n        <th>Username</th>\\n        <th>State</th>\\n        <th>Query ID</th>\\n        <th>Query Hash</th>\\n        <th>Runtime</th>\\n        <th>Created At</th>\\n        <th>Started At</th>\\n        <th>Updated At</th>\\n        <th ng-if=\\\"selectedTab === 'in_progress'\\\"></th>\\n      </tr>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"row in $ctrl.tasksPaginator.getPageRows()\\\">\\n        <td>{{row.data_source_id}}</td>\\n        <td>{{row.username}}</td>\\n        <td>{{row.state}} <span ng-if=\\\"row.state === 'failed'\\\" uib-popover=\\\"{{row.error}}\\\" popover-trigger=\\\"mouseenter\\\" class=\\\"zmdi zmdi-help\\\"></span></td>\\n        <td>{{row.query_id}}</td>\\n        <td>{{row.query_hash}}</td>\\n        <td>{{row.run_time | durationHumanize}}</td>\\n        <td>{{row.created_at | toMilliseconds | dateTime }}</td>\\n        <td>{{row.started_at | toMilliseconds | dateTime }}</td>\\n        <td>{{row.updated_at | toMilliseconds | dateTime }}</td>\\n        <td ng-if=\\\"selectedTab === 'in_progress'\\\">\\n          <cancel-query-button query-id=\\\"dataRow.query_id\\\" task-id=\\\"dataRow.task_id\\\"></cancel-query-button>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n    <paginator paginator=\\\"$ctrl.tasksPaginator\\\"></paginator>\\n\\n    <label><input type=\\\"checkbox\\\" ng-model=\\\"autoUpdate\\\"> Auto Update</label>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/admin/tasks/tasks.html\n// module id = 204\n// module chunks = 0","function cancelQueryButton() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryId: '=',\n      taskId: '=',\n    },\n    transclude: true,\n    template: '<button class=\"btn btn-default\" ng-disabled=\"inProgress\" ng-click=\"cancelExecution()\"><i class=\"zmdi zmdi-spinner zmdi-hc-spin\" ng-if=\"inProgress\"></i> Cancel</button>',\n    replace: true,\n    controller($scope, $http, currentUser, Events) {\n      $scope.inProgress = false;\n\n      $scope.cancelExecution = () => {\n        $http.delete(`api/jobs/${$scope.taskId}`).success(() => {\n        });\n\n        let queryId = $scope.queryId;\n        if ($scope.queryId === 'adhoc') {\n          queryId = null;\n        }\n\n        Events.record('cancel_execute', 'query', queryId, { admin: true });\n        $scope.inProgress = true;\n      };\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('cancelQueryButton', cancelQueryButton);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/admin/tasks/cancel-query-button/index.js","import dashboardPage from './dashboard';\nimport dashboardList from './dashboard-list';\nimport widgetComponent from './widget';\nimport addWidgetDialog from './add-widget-dialog';\nimport registerEditDashboardDialog from './edit-dashboard-dialog';\nimport publicDashboardPage from './public-dashboard-page';\n\nexport default function (ngModule) {\n  addWidgetDialog(ngModule);\n  widgetComponent(ngModule);\n  publicDashboardPage(ngModule);\n  registerEditDashboardDialog(ngModule);\n  return Object.assign({}, dashboardPage(ngModule), dashboardList(ngModule));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/dashboards/index.js","import * as _ from 'underscore';\nimport template from './dashboard.html';\nimport shareDashboardTemplate from './share-dashboard.html';\n\nfunction DashboardCtrl($rootScope, $routeParams, $location, $timeout, $q, $uibModal,\n  Title, AlertDialog, Dashboard, currentUser, clientConfig, Events) {\n  this.isFullscreen = false;\n  this.refreshRate = null;\n  this.showPermissionsControl = clientConfig.showPermissionsControl;\n  this.currentUser = currentUser;\n  this.globalParameters = [];\n  this.refreshRates = [\n    { name: '10 seconds', rate: 10 },\n    { name: '30 seconds', rate: 30 },\n    { name: '1 minute', rate: 60 },\n    { name: '5 minutes', rate: 60 * 5 },\n    { name: '10 minutes', rate: 60 * 10 },\n    { name: '30 minutes', rate: 60 * 30 },\n    { name: '1 hour', rate: 60 * 60 },\n  ];\n\n  this.setRefreshRate = (rate) => {\n    this.refreshRate = rate;\n    if (rate !== null) {\n      this.loadDashboard(true);\n      this.autoRefresh();\n    }\n  };\n\n  this.extractGlobalParameters = () => {\n    let globalParams = {};\n    this.dashboard.widgets.forEach(row =>\n      row.forEach((widget) => {\n        if (widget.getQuery()) {\n          widget.getQuery().getParametersDefs().filter(p => p.global).forEach((param) => {\n            const defaults = {};\n            defaults[param.name] = _.create(Object.getPrototypeOf(param), param);\n            defaults[param.name].locals = [];\n            globalParams = _.defaults(globalParams, defaults);\n            globalParams[param.name].locals.push(param);\n          });\n        }\n      })\n    );\n    this.globalParameters = _.values(globalParams);\n  };\n\n  this.onGlobalParametersChange = () => {\n    this.globalParameters.forEach((global) => {\n      global.locals.forEach((local) => {\n        local.value = global.value;\n      });\n    });\n  };\n\n  const renderDashboard = (dashboard, force) => {\n    Title.set(dashboard.name);\n    const promises = [];\n\n    this.dashboard.widgets.forEach(row =>\n       row.forEach((widget) => {\n         if (widget.visualization) {\n           const maxAge = force ? 0 : undefined;\n           const queryResult = widget.getQuery().getQueryResult(maxAge);\n           if (!_.isUndefined(queryResult)) {\n             promises.push(queryResult.toPromise());\n           }\n         }\n       })\n    );\n\n    this.extractGlobalParameters();\n\n    $q.all(promises).then((queryResults) => {\n      const filters = {};\n      queryResults.forEach((queryResult) => {\n        const queryFilters = queryResult.getFilters();\n        queryFilters.forEach((queryFilter) => {\n          const hasQueryStringValue = _.has($location.search(), queryFilter.name);\n\n          if (!(hasQueryStringValue || dashboard.dashboard_filters_enabled)) {\n            // If dashboard filters not enabled, or no query string value given,\n            // skip filters linking.\n            return;\n          }\n\n          if (hasQueryStringValue) {\n            queryFilter.current = $location.search()[queryFilter.name];\n          }\n\n          if (!_.has(filters, queryFilter.name)) {\n            const filter = _.extend({}, queryFilter);\n            filters[filter.name] = filter;\n            filters[filter.name].originFilters = [];\n          }\n\n          // TODO: merge values.\n          filters[queryFilter.name].originFilters.push(queryFilter);\n        });\n      });\n\n      this.filters = _.values(filters);\n      this.filtersOnChange = (filter) => {\n        _.each(filter.originFilters, (originFilter) => {\n          originFilter.current = filter.current;\n        });\n      };\n    });\n  };\n\n  this.loadDashboard = _.throttle((force) => {\n    this.dashboard = Dashboard.get({ slug: $routeParams.dashboardSlug }, (dashboard) => {\n      Events.record('view', 'dashboard', dashboard.id);\n      renderDashboard(dashboard, force);\n    }, () => {\n        // error...\n        // try again. we wrap loadDashboard with throttle so it doesn't happen too often.\n        // we might want to consider exponential backoff and also move this as a general\n        // solution in $http/$resource for all AJAX calls.\n      this.loadDashboard();\n    });\n  }, 1000);\n\n  this.loadDashboard();\n\n  this.autoRefresh = () => {\n    $timeout(() => {\n      this.loadDashboard(true);\n    }, this.refreshRate.rate * 1000\n    ).then(() => this.autoRefresh());\n  };\n\n  this.archiveDashboard = () => {\n    const archive = () => {\n      Events.record('archive', 'dashboard', this.dashboard.id);\n      this.dashboard.$delete(() => {\n        $rootScope.$broadcast('reloadDashboards');\n      });\n    };\n\n    const title = 'Archive Dashboard';\n    const message = `Are you sure you want to archive the \"${this.dashboard.name}\" dashboard?`;\n    const confirm = { class: 'btn-warning', title: 'Archive' };\n\n    AlertDialog.open(title, message, confirm).then(archive);\n  };\n\n  this.showManagePermissionsModal = () => {\n    $uibModal.open({\n      component: 'permissionsEditor',\n      resolve: {\n        aclUrl: { url: `api/dashboards/${this.dashboard.id}/acl` },\n      },\n    });\n  };\n\n  this.editDashboard = () => {\n    $uibModal.open({\n      component: 'editDashboardDialog',\n      resolve: {\n        dashboard: () => this.dashboard,\n      },\n    }).result.then((dashboard) => { this.dashboard = dashboard; });\n  };\n\n  this.addWidget = () => {\n    $uibModal.open({\n      component: 'addWidgetDialog',\n      resolve: {\n        dashboard: () => this.dashboard,\n      },\n    }).result.then(() => this.extractGlobalParameters());\n  };\n\n  this.toggleFullscreen = () => {\n    this.isFullscreen = !this.isFullscreen;\n    document.querySelector('body').classList.toggle('headless');\n\n    if (this.isFullscreen) {\n      $location.search('fullscreen', true);\n    } else {\n      $location.search('fullscreen', null);\n    }\n  };\n\n  this.togglePublished = () => {\n    Events.record('toggle_published', 'dashboard', this.dashboard.id);\n    this.dashboard.is_draft = !this.dashboard.is_draft;\n    this.saveInProgress = true;\n    Dashboard.save({\n      slug: this.dashboard.id,\n      name: this.dashboard.name,\n      layout: JSON.stringify(this.dashboard.layout),\n      is_draft: this.dashboard.is_draft,\n    }, (dashboard) => {\n      this.saveInProgress = false;\n      this.dashboard.version = dashboard.version;\n      $rootScope.$broadcast('reloadDashboards');\n    });\n  };\n\n  if (_.has($location.search(), 'fullscreen')) {\n    this.toggleFullscreen();\n  }\n\n  this.openShareForm = () => {\n    $uibModal.open({\n      component: 'shareDashboard',\n      resolve: {\n        dashboard: this.dashboard,\n      },\n    });\n  };\n}\n\nconst ShareDashboardComponent = {\n  template: shareDashboardTemplate,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($http) {\n    'ngInject';\n\n    this.dashboard = this.resolve.dashboard;\n\n    this.toggleSharing = () => {\n      const url = `api/dashboards/${this.dashboard.id}/share`;\n\n      if (!this.dashboard.publicAccessEnabled) {\n        // disable\n        $http.delete(url).success(() => {\n          this.dashboard.publicAccessEnabled = false;\n          delete this.dashboard.public_url;\n        }).error(() => {\n          this.dashboard.publicAccessEnabled = true;\n          // TODO: show message\n        });\n      } else {\n        $http.post(url).success((data) => {\n          this.dashboard.publicAccessEnabled = true;\n          this.dashboard.public_url = data.public_url;\n        }).error(() => {\n          this.dashboard.publicAccessEnabled = false;\n          // TODO: show message\n        });\n      }\n    };\n  },\n};\n\nexport default function (ngModule) {\n  ngModule.component('shareDashboard', ShareDashboardComponent);\n  ngModule.component('dashboardPage', {\n    template,\n    controller: DashboardCtrl,\n  });\n\n  return {\n    '/dashboard/:dashboardSlug': {\n      template: '<dashboard-page></dashboard-page>',\n      reloadOnSearch: false,\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/dashboards/dashboard.js","module.exports = \"<div class=\\\"container\\\">\\n  <div class=\\\"row bg-white p-t-10 p-b-10 m-b-10\\\">\\n    <div class=\\\"col-sm-9\\\">\\n      <h3>{{$ctrl.dashboard.name}}\\n        <span class=\\\"label label-default\\\" ng-if=\\\"$ctrl.dashboard.is_draft && !$ctrl.dashboard.is_archived\\\">Unpublished</span>\\n        <span class=\\\"label label-warning\\\" ng-if=\\\"$ctrl.dashboard.is_archived\\\" uib-popover=\\\"This dashboard is archived and and won't appear in the dashboards list or search results.\\\" popover-placement=\\\"right\\\" popover-trigger=\\\"'mouseenter'\\\">Archived</span>\\n      </h3>\\n    </div>\\n    <div class=\\\"col-sm-3 text-right\\\">\\n      <h3>\\n        <span ng-if=\\\"!$ctrl.dashboard.is_archived && !public\\\" class=\\\"hidden-print\\\">\\n            <div class=\\\"btn-group\\\" uib-dropdown>\\n              <button id=\\\"split-button\\\" type=\\\"button\\\"\\n                      ng-class=\\\"{'btn-default': $ctrl.refreshRate === null,'btn-primary':$ctrl.refreshRate !== null}\\\"\\n                      class=\\\"btn\\\" ng-click=\\\"$ctrl.loadDashboard(true)\\\">\\n                <i class=\\\"zmdi zmdi-refresh\\\"></i> {{$ctrl.refreshRate === null ? 'Refresh' : $ctrl.refreshRate.name}}\\n              </button>\\n              <button type=\\\"button\\\" class=\\\"btn\\\" uib-dropdown-toggle\\n                      ng-class=\\\"{'btn-default': $ctrl.refreshRate === null,'btn-primary':$ctrl.refreshRate !== null}\\\">\\n                <span class=\\\"caret\\\"></span>\\n                <span class=\\\"sr-only\\\">Split button!</span>\\n              </button>\\n              <ul class=\\\"dropdown-menu\\\" ng-model=\\\"$ctrl.refreshRate\\\" uib-dropdown-menu role=\\\"menu\\\" aria-labelledby=\\\"split-button\\\">\\n                <li role=\\\"menuitem\\\" ng-repeat=\\\"refreshRate in $ctrl.refreshRates\\\">\\n                  <a href=\\\"#\\\" ng-click=\\\"$ctrl.setRefreshRate(refreshRate)\\\">{{refreshRate.name}}</a>\\n                </li>\\n                <li role=\\\"menuitem\\\" ng-if=\\\"$ctrl.refreshRate !== null\\\">\\n                  <a href=\\\"#\\\" ng-click=\\\"$ctrl.setRefreshRate(null)\\\">Stop auto refresh</a>\\n                </li>\\n              </ul>\\n            </div>\\n            <button type=\\\"button\\\" class=\\\"btn btn-sm\\\" ng-class=\\\"{'btn-default': !$ctrl.isFullscreen, 'btn-primary': $ctrl.isFullscreen}\\\" tooltip=\\\"Enable/Disable Fullscreen display\\\" ng-click=\\\"$ctrl.toggleFullscreen()\\\">\\n              <span class=\\\"zmdi zmdi-fullscreen\\\"></span>\\n            </button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-sm\\\" ng-class=\\\"{'btn-default': !$ctrl.dashboard.publicAccessEnabled, 'btn-primary': $ctrl.dashboard.publicAccessEnabled}\\\" tooltip=\\\"Enable/Disable Share URL\\\" ng-click=\\\"$ctrl.openShareForm()\\\" ng-if=\\\"$ctrl.dashboard.canEdit() || $ctrl.dashboard.publicAccessEnabled\\\">\\n              <span class=\\\"zmdi zmdi-share\\\"></span>\\n            </button>\\n        </span>\\n            <div class=\\\"btn-group hidden-print\\\" role=\\\"group\\\" ng-show=\\\"$ctrl.dashboard.canEdit()\\\" uib-dropdown ng-if=\\\"!$ctrl.dashboard.is_archived\\\">\\n              <button class=\\\"btn btn-default btn-sm dropdown-toggle\\\" uib-dropdown-toggle>\\n                <span class=\\\"zmdi zmdi-more\\\"></span>\\n              </button>\\n              <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.editDashboard()\\\">Edit Dashboard</a></li>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.addWidget()\\\">Add Widget</a></li>\\n                <li ng-if=\\\"$ctrl.showPermissionsControl\\\"><a ng-click=\\\"$ctrl.showManagePermissionsModal()\\\">Manage Permissions</a></li>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_draft\\\"><a ng-click=\\\"$ctrl.togglePublished()\\\">Unpublish Dashboard</a></li>\\n                <li ng-if=\\\"$ctrl.dashboard.is_draft\\\"><a ng-click=\\\"$ctrl.togglePublished()\\\">Publish Dashboard</a></li>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.archiveDashboard()\\\">Archive Dashboard</a></li>\\n              </ul>\\n            </div>\\n      </h3>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <parameters parameters=\\\"$ctrl.globalParameters\\\" on-change=\\\"$ctrl.onGlobalParametersChange()\\\"></parameters>\\n  </div>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <filters ng-if=\\\"$ctrl.dashboard.dashboard_filters_enabled\\\" filters=\\\"$ctrl.filters\\\" on-change=\\\"$ctrl.filtersOnChange(filter, $modal)\\\"></filters>\\n  </div>\\n\\n  <div ng-repeat=\\\"row in $ctrl.dashboard.widgets\\\" class=\\\"row\\\">\\n    <dashboard-widget ng-repeat=\\\"widget in row\\\" widget=\\\"widget\\\" dashboard=\\\"$ctrl.dashboard\\\" on-delete=\\\"$ctrl.extractGlobalParameters()\\\"></dashboard-widget>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/dashboards/dashboard.html\n// module id = 208\n// module chunks = 0","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span>\\n  </button>\\n  <h4 class=\\\"modal-title\\\"><i class=\\\"fa fa-share-alt\\\"></i> Share</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div class=\\\"checkbox\\\">\\n    <label>\\n      <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.dashboard.publicAccessEnabled\\\" ng-click=\\\"$ctrl.toggleSharing()\\\" ng-disabled=\\\"!$ctrl.dashboard.canEdit()\\\">\\n      Allow public access (using a secret URL).\\n    </label>\\n  </div>\\n\\n  <div ng-if=\\\"$ctrl.dashboard.publicAccessEnabled\\\">\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" value=\\\"{{$ctrl.dashboard.public_url}}\\\">\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/dashboards/share-dashboard.html\n// module id = 209\n// module chunks = 0","import _ from 'underscore';\n\nimport { Paginator } from '../../utils';\nimport template from './dashboard-list.html';\nimport './dashboard-list.css';\n\n\nfunction DashboardListCtrl(Dashboard, $location, clientConfig) {\n  const TAGS_REGEX = /(^[\\w\\s]+):|(#[\\w-]+)/ig;\n\n  this.logoUrl = clientConfig.logoUrl;\n  const page = parseInt($location.search().page || 1, 10);\n\n  this.defaultOptions = {};\n  this.dashboards = Dashboard.query({}); // shared promise\n\n  this.selectedTags = []; // in scope because it needs to be accessed inside a table refresh\n  this.searchText = '';\n\n  this.tagIsSelected = tag => this.selectedTags.indexOf(tag) > -1;\n\n  this.toggleTag = ($event, tag) => {\n    if (this.tagIsSelected(tag)) {\n      if ($event.shiftKey) {\n        this.selectedTags = this.selectedTags.filter(e => e !== tag);\n      } else {\n        this.selectedTags = [];\n      }\n    } else if ($event.shiftKey) {\n      this.selectedTags.push(tag);\n    } else {\n      this.selectedTags = [tag];\n    }\n\n    this.update();\n  };\n\n  this.allTags = [];\n  this.dashboards.$promise.then((data) => {\n    const out = data.map(dashboard => dashboard.name.match(TAGS_REGEX));\n    this.allTags = _.unique(_.flatten(out)).filter(e => e).map(tag => tag.replace(/:$/, ''));\n    this.allTags.sort();\n  });\n\n  this.paginator = new Paginator([], { page });\n\n  this.update = () => {\n    this.dashboards.$promise.then((data) => {\n      const filteredDashboards = data.map((dashboard) => {\n        dashboard.tags = (dashboard.name.match(TAGS_REGEX) || []).map(tag => tag.replace(/:$/, ''));\n        dashboard.untagged_name = dashboard.name.replace(TAGS_REGEX, '').trim();\n        return dashboard;\n      }).filter((value) => {\n        if (this.selectedTags.length) {\n          const valueTags = new Set(value.tags);\n          const tagMatch = this.selectedTags;\n          const filteredMatch = tagMatch.filter(x => valueTags.has(x));\n          if (tagMatch.length !== filteredMatch.length) {\n            return false;\n          }\n        }\n        if (this.searchText && this.searchText.length) {\n          if (!value.untagged_name.toLowerCase().includes(this.searchText.toLowerCase())) {\n            return false;\n          }\n        }\n        return true;\n      });\n\n      this.paginator.updateRows(filteredDashboards, data.count);\n    });\n  };\n\n  this.update();\n}\n\nexport default function (ngModule) {\n  ngModule.component('pageDashboardList', {\n    template,\n    controller: DashboardListCtrl,\n  });\n\n  const route = {\n    template: '<page-dashboard-list></page-dashboard-list>',\n    reloadOnSearch: false,\n    title: 'Dashboards',\n  };\n\n  return {\n    '/dashboards': route,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/dashboards/dashboard-list.js","module.exports = \"<div class='container row'>\\n  <page-header title=\\\"Dashboards\\\"></page-header>\\n  <div class=\\\"col-lg-3\\\">\\n    <input type='text' class='form-control' placeholder=\\\"Search Dashboards...\\\" \\n      ng-change=\\\"$ctrl.update()\\\" ng-model=\\\"$ctrl.searchText\\\"/>\\n    <div class='list-group m-t-20 tags-list'>\\n      <a ng-repeat='tag in $ctrl.allTags' ng-class='{\\\"active\\\": $ctrl.tagIsSelected(tag)}'\\n      class='list-group-item' ng-click='$ctrl.toggleTag($event, tag)'>\\n        {{ tag }}\\n      </a>\\n    </div>\\n  </div>\\n  <div class=\\\"col-lg-9\\\">\\n    <div class=\\\"bg-white\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n        <tr>\\n          <th>Name</th>\\n          <th>Created At</th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"dashboard in $ctrl.paginator.getPageRows()\\\">\\n          <td>\\n            <a href=\\\"dashboard/{{ dashboard.slug }}\\\">\\n              <span class=\\\"label label-primary m-2\\\" ng-bind=\\\"tag\\\" ng-repeat=\\\"tag in dashboard.tags\\\"></span> {{ dashboard.untagged_name }}\\n              <span class=\\\"label label-default\\\" ng-if=\\\"dashboard.is_draft\\\">Unpublished</span>\\n            </a>\\n          </td>\\n          <td>{{ dashboard.created_at | dateTime }}</td>\\n        </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.paginator\\\"></paginator>\\n    </div>\\n  </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/dashboards/dashboard-list.html\n// module id = 211\n// module chunks = 0","import template from './widget.html';\nimport editTextBoxTemplate from './edit-text-box.html';\n\nconst EditTextBoxComponent = {\n  template: editTextBoxTemplate,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller(toastr) {\n    'ngInject';\n\n    this.saveInProgress = false;\n    this.widget = this.resolve.widget;\n    this.saveWidget = () => {\n      this.saveInProgress = true;\n      this.widget.$save().then(() => {\n        this.close();\n      }).catch(() => {\n        toastr.error('Widget can not be updated');\n      }).finally(() => {\n        this.saveInProgress = false;\n      });\n    };\n  },\n};\n\nfunction DashboardWidgetCtrl($location, $uibModal, $window, Events, currentUser) {\n  this.canViewQuery = currentUser.hasPermission('view_query');\n\n  this.editTextBox = () => {\n    $uibModal.open({\n      component: 'editTextBox',\n      resolve: {\n        widget: this.widget,\n      },\n    });\n  };\n\n  this.localParametersDefs = () => {\n    if (!this.localParameters) {\n      this.localParameters = this.widget.query.getParametersDefs().filter(p => !p.global);\n    }\n    return this.localParameters;\n  };\n\n  this.deleteWidget = () => {\n    if (!$window.confirm(`Are you sure you want to remove \"${this.widget.getName()}\" from the dashboard?`)) {\n      return;\n    }\n\n    Events.record('delete', 'widget', this.widget.id);\n\n    this.widget.$delete((response) => {\n      this.dashboard.widgets =\n        this.dashboard.widgets.map(row => row.filter(widget => widget.id !== undefined));\n\n      this.dashboard.widgets = this.dashboard.widgets.filter(row => row.length > 0);\n\n      this.dashboard.layout = response.layout;\n      this.dashboard.version = response.version;\n\n      if (this.deleted) {\n        this.deleted({});\n      }\n    });\n  };\n\n  Events.record('view', 'widget', this.widget.id);\n\n  this.reload = (force) => {\n    let maxAge = $location.search().maxAge;\n    if (force) {\n      maxAge = 0;\n    }\n    this.queryResult = this.query.getQueryResult(maxAge);\n  };\n\n  if (this.widget.visualization) {\n    Events.record('view', 'query', this.widget.visualization.query.id);\n    Events.record('view', 'visualization', this.widget.visualization.id);\n\n    this.query = this.widget.getQuery();\n    this.reload(false);\n\n    this.type = 'visualization';\n  } else if (this.widget.restricted) {\n    this.type = 'restricted';\n  } else {\n    this.type = 'textbox';\n  }\n}\n\nexport default function (ngModule) {\n  ngModule.component('editTextBox', EditTextBoxComponent);\n  ngModule.component('dashboardWidget', {\n    template,\n    controller: DashboardWidgetCtrl,\n    bindings: {\n      widget: '<',\n      public: '<',\n      dashboard: '<',\n      deleted: '&onDelete',\n    },\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/dashboards/widget.js","module.exports = \"<div class=\\\"col-lg-{{$ctrl.widget.width | colWidth}}\\\">\\n    <div class=\\\"tile\\\" ng-if=\\\"$ctrl.type=='visualization'\\\">\\n        <div class=\\\"t-header widget\\\">\\n            <div class=\\\"th-title\\\">\\n                <p class=\\\"hidden-print\\\">\\n                    <span ng-hide=\\\"$ctrl.canViewQuery\\\">{{$ctrl.query.name}}</span>\\n                    <query-link query=\\\"$ctrl.query\\\" visualization=\\\"$ctrl.widget.visualization\\\" ng-show=\\\"$ctrl.canViewQuery\\\"></query-link>\\n                    <small><visualization-name visualization=\\\"$ctrl.widget.visualization\\\"/></small>\\n                </p>\\n                <p class=\\\"visible-print\\\">\\n                  {{$ctrl.query.name}}\\n                  <visualization-name visualization=\\\"$ctrl.widget.visualization\\\"/>\\n                </p>\\n                <div class=\\\"text-muted\\\" ng-bind-html=\\\"$ctrl.query.description | markdown\\\"></div>\\n            </div>\\n          <div class=\\\"actions dropdown\\\" uib-dropdown ng-if=\\\"!$ctrl.public\\\">\\n            <a data-toggle=\\\"dropdown\\\" uib-dropdown-toggle><i class=\\\"zmdi zmdi-more\\\"></i></a>\\n\\n            <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu style=\\\"z-index:1000000\\\">\\n              <li ng-class=\\\"{'disabled': $ctrl.queryResult.isEmpty()}\\\"><a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'csv')}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'csv')}}\\\" target=\\\"_self\\\">Download as CSV File</a></li>\\n              <li ng-class=\\\"{'disabled': $ctrl.queryResult.isEmpty()}\\\"><a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'xlsx')}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'xlsx')}}\\\" target=\\\"_self\\\">Download as Excel File</a></li>\\n              <li><a ng-href=\\\"queries/{{$ctrl.query.id}}#{{$ctrl.widget.visualization.id}}\\\" ng-show=\\\"$ctrl.canViewQuery\\\">View Query</a></li>\\n              <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.deleteWidget()\\\">Remove From Dashboard</a></li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <parameters parameters=\\\"$ctrl.localParametersDefs()\\\"></parameters>\\n\\n        <div ng-switch=\\\"$ctrl.queryResult.getStatus()\\\">\\n          <div ng-switch-when=\\\"failed\\\">\\n            <div class=\\\"alert alert-danger m-5\\\" ng-show=\\\"$ctrl.queryResult.getError()\\\">Error running query: <strong>{{$ctrl.queryResult.getError()}}</strong></div>\\n          </div>\\n          <div ng-switch-when=\\\"done\\\">\\n              <visualization-renderer visualization=\\\"$ctrl.widget.visualization\\\" query-result=\\\"$ctrl.queryResult\\\" class=\\\"t-body\\\"></visualization-renderer>\\n          </div>\\n          <div ng-switch-default class=\\\"text-center\\\">\\n            <i class=\\\"zmdi zmdi-refresh zmdi-hc-spin zmdi-hc-5x\\\"></i>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"p-5 clearfix\\\" style=\\\"line-height:28px;\\\">\\n            <span class=\\\"small hidden-print\\\">Updated: <span am-time-ago=\\\"$ctrl.queryResult.getUpdatedAt()\\\"></span></span>\\n            <span class=\\\"visible-print\\\">\\n              Updated: {{$ctrl.queryResult.getUpdatedAt() | dateTime}}\\n            </span>\\n            <button class=\\\"btn btn-sm btn-default pull-right hidden-print\\\" ng-click=\\\"$ctrl.reload(true)\\\" ng-if=\\\"!$ctrl.public\\\"><i class=\\\"zmdi zmdi-refresh\\\"></i></button>\\n        </div>\\n    </div>\\n\\n  <div class=\\\"tile\\\" ng-if=\\\"$ctrl.type=='restricted'\\\">\\n    <div class=\\\"t-body\\\">\\n      <div class=\\\"text-center\\\">\\n        <h1><span class=\\\"zmdi zmdi-lock\\\"></span></h1>\\n        <p class=\\\"text-muted\\\">\\n          This widget requires access to a data source you don't have access to.\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"tile\\\" ng-hide=\\\"$ctrl.widget.width === 0\\\" ng-if=\\\"$ctrl.type=='textbox'\\\">\\n    <div class=\\\"t-body\\\">\\n      <div class=\\\"dropdown\\\" uib-dropdown ng-if=\\\"!$ctrl.public && $ctrl.dashboard.canEdit()\\\">\\n        <div class=\\\"dropdown-header\\\">\\n          <a data-toggle=\\\"dropdown\\\" uib-dropdown-toggle class=\\\"actions\\\"><i class=\\\"zmdi zmdi-more\\\"></i></a>\\n        </div>\\n\\n        <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu style=\\\"z-index:1000000\\\">\\n          <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.editTextBox()\\\">Edit</a></li>\\n          <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.deleteWidget()\\\">Remove From Dashboard</a></li>\\n        </ul>\\n      </div>\\n      <p ng-bind-html=\\\"$ctrl.widget.text | markdown\\\" class=\\\"p-5\\\"></p>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/dashboards/widget.html\n// module id = 214\n// module chunks = 0","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n  <h4 class=\\\"modal-title\\\">Edit TextBox</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div class=\\\"form-group\\\">\\n    <textarea class=\\\"form-control\\\" ng-model=\\\"$ctrl.widget.text\\\" rows=\\\"3\\\"></textarea>\\n  </div>\\n  <div ng-show=\\\"$ctrl.widget.text\\\">\\n    <strong>Preview:</strong>\\n    <p ng-bind-html=\\\"$ctrl.widget.text | markdown\\\"></p>\\n  </div>\\n</div>\\n\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.close()\\\">Close</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.saveWidget()\\\">Save</button>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/dashboards/edit-text-box.html\n// module id = 215\n// module chunks = 0","import template from './add-widget-dialog.html';\n\nconst AddWidgetDialog = {\n  template,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($sce, toastr, Query, Widget) {\n    'ngInject';\n\n    this.dashboard = this.resolve.dashboard;\n    this.saveInProgress = false;\n    this.widgetSize = 1;\n    this.selectedVis = null;\n    this.query = {};\n    this.selected_query = undefined;\n    this.text = '';\n    this.widgetSizes = [{\n      name: 'Regular',\n      value: 1,\n    }, {\n      name: 'Double',\n      value: 2,\n    }];\n\n    this.type = 'visualization';\n\n    this.trustAsHtml = html => $sce.trustAsHtml(html);\n    this.isVisualization = () => this.type === 'visualization';\n    this.isTextBox = () => this.type === 'textbox';\n\n    this.setType = (type) => {\n      this.type = type;\n      if (type === 'textbox') {\n        this.widgetSizes.push({ name: 'Hidden', value: 0 });\n      } else if (this.widgetSizes.length > 2) {\n        this.widgetSizes.pop();\n      }\n    };\n\n    this.onQuerySelect = () => {\n      if (!this.query.selected) {\n        return;\n      }\n\n      Query.get({ id: this.query.selected.id }, (query) => {\n        if (query) {\n          this.selected_query = query;\n          if (query.visualizations.length) {\n            this.selectedVis = query.visualizations[0];\n          }\n        }\n      });\n    };\n\n    this.searchQueries = (term) => {\n      if (!term || term.length < 3) {\n        return;\n      }\n\n      Query.search({ q: term }, (results) => {\n        this.queries = results;\n      });\n    };\n\n    this.saveWidget = () => {\n      this.saveInProgress = true;\n      const widget = new Widget({\n        visualization_id: this.selectedVis && this.selectedVis.id,\n        dashboard_id: this.dashboard.id,\n        options: {},\n        width: this.widgetSize,\n        text: this.text,\n      });\n\n      widget.$save().then((response) => {\n        // update dashboard layout\n        this.dashboard.layout = response.layout;\n        this.dashboard.version = response.version;\n        const newWidget = new Widget(response.widget);\n        if (response.new_row) {\n          this.dashboard.widgets.push([newWidget]);\n        } else {\n          this.dashboard.widgets[this.dashboard.widgets.length - 1].push(newWidget);\n        }\n        this.close();\n      }).catch(() => {\n        toastr.error('Widget can not be added');\n      }).finally(() => {\n        this.saveInProgress = false;\n      });\n    };\n  },\n};\n\nexport default function (ngModule) {\n  ngModule.component('addWidgetDialog', AddWidgetDialog);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/dashboards/add-widget-dialog.js","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" aria-hidden=\\\"true\\\" ng-click=\\\"$ctrl.dismiss()\\\">&times;</button>\\n  <h4 class=\\\"modal-title\\\">Add Widget</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <p class=\\\"btn-group\\\">\\n      <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-class=\\\"{active: $ctrl.isVisualization()}\\\" ng-click=\\\"$ctrl.setType('visualization')\\\">Visualization</button>\\n      <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-class=\\\"{active: $ctrl.isTextBox()}\\\" ng-click=\\\"$ctrl.setType('textbox')\\\">Text Box</button>\\n  </p>\\n\\n  <div ng-show=\\\"$ctrl.isTextBox()\\\">\\n      <div class=\\\"form-group\\\">\\n          <textarea class=\\\"form-control\\\" ng-model=\\\"$ctrl.text\\\" rows=\\\"3\\\"></textarea>\\n      </div>\\n      <div ng-show=\\\"$ctrl.text\\\">\\n          <strong>Preview:</strong>\\n          <p ng-bind-html=\\\"$ctrl.text | markdown\\\"></p>\\n      </div>\\n  </div>\\n\\n  <div ng-show=\\\"$ctrl.isVisualization()\\\">\\n      <div class=\\\"form-group\\\">\\n          <ui-select ng-model=\\\"$ctrl.query.selected\\\" theme=\\\"bootstrap\\\" reset-search-input=\\\"false\\\" on-select=\\\"$ctrl.onQuerySelect($item, $model)\\\">\\n              <ui-select-match placeholder=\\\"Search a query by name\\\">{{$select.selected.name}}</ui-select-match>\\n              <ui-select-choices repeat=\\\"q in $ctrl.queries\\\"\\n                                 refresh=\\\"$ctrl.searchQueries($select.search)\\\"\\n                                 refresh-delay=\\\"0\\\">\\n                  <div ng-bind-html=\\\"$ctrl.trustAsHtml(q.name | highlight: $select.search)\\\"></div>\\n              </ui-select-choices>\\n          </ui-select>\\n      </div>\\n\\n      <div ng-show=\\\"$ctrl.selected_query\\\">\\n          <div class=\\\"form-group\\\">\\n              <label for=\\\"\\\">Choose Visualization</label>\\n              <select ng-model=\\\"$ctrl.selectedVis\\\" ng-options=\\\"vis as vis.name group by vis.type for vis in $ctrl.selected_query.visualizations\\\" class=\\\"form-control\\\"></select>\\n          </div>\\n      </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n      <label for=\\\"\\\">Widget Size</label>\\n      <select class=\\\"form-control\\\" ng-model=\\\"$ctrl.widgetSize\\\"\\n              ng-options=\\\"c.value as c.name for c in $ctrl.widgetSizes\\\"></select>\\n  </div>\\n</div>\\n\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.dismiss()\\\">Close</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress || !($ctrl.selectedVis || $ctrl.isTextBox())\\\" ng-click=\\\"$ctrl.saveWidget()\\\">Add to Dashboard</button>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/dashboards/add-widget-dialog.html\n// module id = 217\n// module chunks = 0","import { sortBy } from 'underscore';\nimport template from './edit-dashboard-dialog.html';\n\nconst EditDashboardDialog = {\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  template,\n  controller($rootScope, $location, $http, toastr, Events, Dashboard) {\n    'ngInject';\n\n    this.dashboard = this.resolve.dashboard;\n    this.gridsterOptions = {\n      margins: [5, 5],\n      rowHeight: 100,\n      colWidth: 260,\n      columns: 2,\n      mobileModeEnabled: false,\n      swapping: true,\n      minRows: 1,\n      draggable: {\n        enabled: true,\n      },\n      resizable: {\n        enabled: false,\n      },\n    };\n\n    this.items = [];\n\n    if (this.dashboard.widgets) {\n      this.dashboard.widgets.forEach((row, rowIndex) => {\n        row.forEach((widget, colIndex) => {\n          this.items.push({\n            id: widget.id,\n            col: colIndex,\n            row: rowIndex,\n            sizeY: 1,\n            sizeX: widget.width,\n            name: widget.getName(), // visualization.query.name\n          });\n        });\n      });\n    }\n\n    this.saveDashboard = () => {\n      this.saveInProgress = true;\n\n      if (this.dashboard.id) {\n        const layout = [];\n        const sortedItems = sortBy(this.items, item => item.row * 10 + item.col);\n\n        sortedItems.forEach((item) => {\n          layout[item.row] = layout[item.row] || [];\n          if (item.col > 0 && layout[item.row][item.col - 1] === undefined) {\n            layout[item.row][item.col - 1] = item.id;\n          } else {\n            layout[item.row][item.col] = item.id;\n          }\n        });\n\n        const request = {\n          slug: this.dashboard.id,\n          name: this.dashboard.name,\n          version: this.dashboard.version,\n          layout: JSON.stringify(layout),\n        };\n\n        Dashboard.save(request, (dashboard) => {\n          this.dashboard = dashboard;\n          this.saveInProgress = false;\n          this.close({ $value: this.dashboard });\n          $rootScope.$broadcast('reloadDashboards');\n        }, (error) => {\n          this.saveInProgress = false;\n          if (error.status === 403) {\n            toastr.error('Unable to save dashboard: Permission denied.');\n          } else if (error.status === 409) {\n            toastr.error('It seems like the dashboard has been modified by another user. ' +\n                'Please copy/backup your changes and reload this page.', { autoDismiss: false });\n          }\n        });\n        Events.record('edit', 'dashboard', this.dashboard.id);\n      } else {\n        $http.post('api/dashboards', {\n          name: this.dashboard.name,\n        }).success((response) => {\n          this.close();\n          $location.path(`/dashboard/${response.slug}`).replace();\n        });\n        Events.record('create', 'dashboard');\n      }\n    };\n  },\n};\n\nexport default function (ngModule) {\n  ngModule.component('editDashboardDialog', EditDashboardDialog);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/dashboards/edit-dashboard-dialog.js","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" ng-click=\\\"$ctrl.dismiss()\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" aria-hidden=\\\"true\\\">&times;</button>\\n  <h4 class=\\\"modal-title\\\">Edit: {{$ctrl.dashboard.name}}</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <p>\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Dashboard Name\\\" ng-model=\\\"$ctrl.dashboard.name\\\">\\n  </p>\\n\\n  <div gridster=\\\"$ctrl.gridsterOptions\\\" ng-if=\\\"$ctrl.items | notEmpty\\\">\\n    <ul>\\n      <li gridster-item=\\\"item\\\" ng-repeat=\\\"item in $ctrl.items\\\" class=\\\"widget panel panel-default gs-w\\\">\\n        <div class=\\\"heading\\\">{{item.name}}</div>\\n      </li>\\n    </ul>\\n  </div>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.dismiss()\\\">Close</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.saveDashboard()\\\">Save</button>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/dashboards/edit-dashboard-dialog.html\n// module id = 219\n// module chunks = 0","import template from './public-dashboard-page.html';\nimport logoUrl from '../../assets/images/redash_icon_small.png';\n\nconst PublicDashboardPage = {\n  template,\n  bindings: {\n    dashboard: '<',\n  },\n  controller($routeParams, Widget) {\n    'ngInject';\n\n    // embed in params == headless\n    this.logoUrl = logoUrl;\n    this.headless = $routeParams.embed;\n    if (this.headless) {\n      document.querySelector('body').classList.add('headless');\n    }\n    this.public = true;\n    this.dashboard.widgets = this.dashboard.widgets.map(row =>\n       row.map(widget =>\n         new Widget(widget)\n      )\n    );\n  },\n};\n\nexport default function (ngModule) {\n  ngModule.component('publicDashboardPage', PublicDashboardPage);\n\n  function loadPublicDashboard($http, $route) {\n    'ngInject';\n\n    const token = $route.current.params.token;\n    return $http.get(`/api/dashboards/public/${token}`).then(response =>\n       response.data\n    );\n  }\n\n  function session($http, $route, Auth) {\n    const token = $route.current.params.token;\n    Auth.setApiKey(token);\n    return Auth.loadConfig();\n  }\n\n  ngModule.config(($routeProvider) => {\n    $routeProvider.when('/public/dashboards/:token', {\n      template: '<public-dashboard-page dashboard=\"$resolve.dashboard\"></public-dashboard-page>',\n      reloadOnSearch: false,\n      resolve: {\n        dashboard: loadPublicDashboard,\n        session,\n      },\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/dashboards/public-dashboard-page.js","module.exports = \"<!-- simple nav bar -->\\n<nav class=\\\"navbar navbar-inverse navbar-fixed-top\\\" role=\\\"navigation\\\" ng-if=\\\"!$ctrl.headless\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"navbar-header\\\">\\n      <a class=\\\"navbar-brand\\\" href=\\\"/\\\" target=\\\"_self\\\"><img ng-src=\\\"{{$ctrl.logoUrl}}\\\"/></a>\\n    </div>\\n  </div>\\n</nav>\\n\\n<div class=\\\"container\\\">\\n  <page-header title=\\\"{{$ctrl.dashboard.name}}\\\">\\n  </page-header>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <filters ng-if=\\\"$ctrl.dashboard.dashboard_filters_enabled\\\"></filters>\\n  </div>\\n\\n    <div ng-repeat=\\\"row in $ctrl.dashboard.widgets\\\" class=\\\"row\\\">\\n      <dashboard-widget ng-repeat=\\\"widget in row\\\" widget=\\\"widget\\\" dashboard=\\\"$ctrl.dashboard\\\" public=\\\"true\\\"></dashboard-widget>\\n    </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/dashboards/public-dashboard-page.html\n// module id = 221\n// module chunks = 0","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAABl9pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+NTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MTAwPC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjEwMDwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+MTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOkEzNjMxNjc5RUZGQTExRTRCODg4OThENzNBNThGM0VDPC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOkEzNjMxNjdBRUZGQTExRTRCODg4OThENzNBNThGM0VDPC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOkEzNjMxNjc3RUZGQTExRTRCODg4OThENzNBNThGM0VDPC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOkEzNjMxNjc4RUZGQTExRTRCODg4OThENzNBNThGM0VDPC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8ZGM6c3ViamVjdD4KICAgICAgICAgICAgPHJkZjpTZXEvPgogICAgICAgICA8L2RjOnN1YmplY3Q+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE1OjA1OjEyIDEwOjA1OjU4PC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5QaXhlbG1hdG9yIDMuMy4yPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpLVWDGAAARGUlEQVR4Ae1dCYwcxRX91T3XXt7DYAsbYyfhEAEMOECCgCBEzJmgWML4CFeMYwjYHAkJNkhoOQIOuZB314mcBUUCedfaYCScgAIRCIIgCGESxBFuFtkG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\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/assets/images/redash_icon_small.png\n// module id = 222\n// module chunks = 0","import registerList from './list';\nimport registerEdit from './edit';\n\nexport default function (ngModule) {\n  const routes = Object.assign({}, registerList(ngModule),\n                                   registerEdit(ngModule));\n  return routes;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/query-snippets/index.js","import { Paginator } from '../../utils';\nimport template from './list.html';\n\nfunction SnippetsCtrl($location, currentUser, Events, QuerySnippet) {\n  Events.record('view', 'page', 'query_snippets');\n\n  this.snippets = new Paginator([], { itemsPerPage: 20 });\n  QuerySnippet.query((snippets) => {\n    this.snippets.updateRows(snippets);\n  });\n}\n\nexport default function (ngModule) {\n  ngModule.component('snippetsListPage', {\n    template,\n    controller: SnippetsCtrl,\n  });\n\n  return {\n    '/query_snippets': {\n      template: '<snippets-list-page></snippets-list-page>',\n      title: 'Query Snippets',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/query-snippets/list.js","module.exports = \"<settings-screen>\\n    <div class=\\\"row voffset1\\\">\\n        <div class=\\\"col-md-12\\\">\\n          <p>\\n            <a href=\\\"query_snippets/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Snippet</a>\\n          </p>\\n\\n          <table class=\\\"table table-condensed table-hover\\\">\\n            <thead>\\n              <tr>\\n                <th>Trigger</th>\\n                <th>Description</th>\\n                <th>Snippet</th>\\n                <th>Created By</th>\\n                <th>Updated At</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr ng-repeat=\\\"row in $ctrl.snippets.getPageRows()\\\">\\n                <td>\\n                  <a href=\\\"query_snippets/{{row.id}}\\\">{{row.trigger}}</a>\\n                </td>\\n                <td>\\n                  {{row.description}}\\n                </td>\\n                <td>\\n                  {{row.snippet}}\\n                </td>\\n                <td>\\n                  {{row.user.name}}\\n                </td>\\n                <td>\\n                  <span am-time-ago=\\\"row.created_at\\\"></span>\\n                </td>\\n              </tr>\\n            </tbody>\\n          </table>\\n          <paginator paginator=\\\"$ctrl.snippets\\\"></paginator>\\n        </div>\\n    </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/query-snippets/list.html\n// module id = 225\n// module chunks = 0","import 'brace/mode/snippets';\nimport template from './edit.html';\n\nfunction SnippetCtrl($routeParams, $http, $location, toastr, currentUser, Events, QuerySnippet) {\n  this.snippetId = $routeParams.snippetId;\n  Events.record('view', 'query_snippet', this.snippetId);\n\n  this.editorOptions = {\n    mode: 'snippets',\n    advanced: {\n      behavioursEnabled: true,\n      enableSnippets: false,\n      autoScrollEditorIntoView: true,\n    },\n    onLoad(editor) {\n      editor.$blockScrolling = Infinity;\n      editor.getSession().setUseWrapMode(true);\n      editor.setShowPrintMargin(false);\n    },\n  };\n\n  this.saveChanges = () => {\n    this.snippet.$save((snippet) => {\n      toastr.success('Saved.');\n      if (this.snippetId === 'new') {\n        $location.path(`/query_snippets/${snippet.id}`).replace();\n      }\n    }, () => {\n      toastr.error('Failed saving snippet.');\n    });\n  };\n\n  this.delete = () => {\n    this.snippet.$delete(() => {\n      $location.path('/query_snippets');\n      toastr.sucess('Query snippet deleted.');\n    }, () => {\n      toastr.error('Failed deleting query snippet.');\n    });\n  };\n\n  if (this.snippetId === 'new') {\n    this.snippet = new QuerySnippet({ description: '' });\n    this.canEdit = true;\n  } else {\n    this.snippet = QuerySnippet.get({ id: this.snippetId }, (snippet) => {\n      this.canEdit = currentUser.canEdit(snippet);\n    });\n  }\n}\n\nexport default function (ngModule) {\n  ngModule.component('snippetPage', {\n    template,\n    controller: SnippetCtrl,\n  });\n\n  return {\n    '/query_snippets/:snippetId': {\n      template: '<snippet-page></snippet-page>',\n      title: 'Query Snippets',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/query-snippets/edit.js","module.exports = \"<settings-screen>\\n  <div class=\\\"\\\">\\n    <form name=\\\"snippetForm\\\" class=\\\"form\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>Trigger</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.snippet.trigger\\\" ng-disabled=\\\"!$ctrl.canEdit\\\" required>\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Description</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.snippet.description\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Snippet</label>\\n        <pre ng-if=\\\"!$ctrl.canEdit\\\">{{$ctrl.snippet.snippet}}</pre>\\n        <div ui-ace=\\\"$ctrl.editorOptions\\\" ng-model=\\\"$ctrl.snippet.snippet\\\" style=\\\"height:300px\\\" ng-if=\\\"$ctrl.canEdit\\\"></div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.canEdit\\\">\\n        <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!snippetForm.$valid\\\" ng-click=\\\"$ctrl.saveChanges()\\\">Save</button>\\n        <button class=\\\"btn btn-danger\\\" ng-if=\\\"$ctrl.snippet.id\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button>\\n      </div>\\n      <small ng-if=\\\"$ctrl.snippet.user\\\">\\n        Created by: {{$ctrl.snippet.user.name}}\\n      </small>\\n    </form>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/query-snippets/edit.html\n// module id = 228\n// module chunks = 0","import registerList from './list';\nimport registerShow from './show';\nimport registerNew from './new';\n\nexport default function (ngModule) {\n  const routes = Object.assign({}, registerList(ngModule),\n                                   registerNew(ngModule),\n                                   registerShow(ngModule));\n  return routes;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/users/index.js","import { Paginator } from '../../utils';\nimport template from './list.html';\n\nfunction UsersCtrl(currentUser, Events, User) {\n  Events.record('view', 'page', 'users');\n\n  this.currentUser = currentUser;\n  this.users = new Paginator([], { itemsPerPage: 20 });\n  User.query((users) => {\n    this.users.updateRows(users);\n  });\n}\n\nexport default function (ngModule) {\n  ngModule.component('usersListPage', {\n    controller: UsersCtrl,\n    template,\n  });\n\n  return {\n    '/users': {\n      template: '<users-list-page></users-list-page>',\n      title: 'Users',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/users/list.js","module.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <p ng-if=\\\"$ctrl.currentUser.hasPermission('admin')\\\">\\n        <a href=\\\"users/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New User</a>\\n      </p>\\n\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th>Name</th>\\n            <th>Joined</th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n          <tr ng-repeat=\\\"row in $ctrl.users.getPageRows()\\\">\\n            <td>\\n              <img ng-src=\\\"{{row.gravatar_url}}\\\" height=\\\"40px\\\"/> <a href=\\\"users/{{row.id}}\\\">{{row.name}}</a>\\n            </td>\\n            <td>\\n              <span am-time-ago=\\\"row.created_at\\\"></span>\\n            </td>\\n          </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.users\\\"></paginator>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/users/list.html\n// module id = 231\n// module chunks = 0","import { each } from 'underscore';\nimport template from './show.html';\n\nfunction UserCtrl($scope, $routeParams, $http, $location, toastr,\n  clientConfig, currentUser, Events, User) {\n  $scope.userId = $routeParams.userId;\n  $scope.currentUser = currentUser;\n  $scope.clientConfig = clientConfig;\n\n  if ($scope.userId === 'me') {\n    $scope.userId = currentUser.id;\n  }\n\n  Events.record('view', 'user', $scope.userId);\n  $scope.canEdit = currentUser.hasPermission('admin') || currentUser.id === parseInt($scope.userId, 10);\n  $scope.showSettings = false;\n  $scope.showPasswordSettings = false;\n\n  $scope.selectTab = (tab) => {\n    $scope.selectedTab = tab;\n    each($scope.tabs, (v, k) => {\n      $scope.tabs[k] = (k === tab);\n    });\n  };\n\n  $scope.setTab = (tab) => {\n    $scope.selectedTab = tab;\n    $location.hash(tab);\n  };\n\n  $scope.tabs = {\n    profile: false,\n    apiKey: false,\n    settings: false,\n    password: false,\n  };\n\n  $scope.selectTab($location.hash() || 'profile');\n\n  $scope.user = User.get({ id: $scope.userId }, (user) => {\n    if (user.auth_type === 'password') {\n      $scope.showSettings = $scope.canEdit;\n      $scope.showPasswordSettings = $scope.canEdit;\n    }\n  });\n\n  $scope.password = {\n    current: '',\n    new: '',\n    newRepeat: '',\n  };\n\n  $scope.savePassword = (form) => {\n    if (!form.$valid) {\n      return;\n    }\n\n    const data = {\n      id: $scope.user.id,\n      password: $scope.password.new,\n      old_password: $scope.password.current,\n    };\n\n    User.save(data, () => {\n      toastr.success('Password Saved.');\n      $scope.password = {\n        current: '',\n        new: '',\n        newRepeat: '',\n      };\n    }, (error) => {\n      const message = error.data.message || 'Failed saving password.';\n      toastr.error(message);\n    });\n  };\n\n  $scope.updateUser = (form) => {\n    if (!form.$valid) {\n      return;\n    }\n\n    const data = {\n      id: $scope.user.id,\n      name: $scope.user.name,\n      email: $scope.user.email,\n    };\n\n    User.save(data, (user) => {\n      toastr.success('Saved.');\n      $scope.user = user;\n    }, (error) => {\n      const message = error.data.message || 'Failed saving.';\n      toastr.error(message);\n    });\n  };\n\n  $scope.sendPasswordReset = () => {\n    $scope.disablePasswordResetButton = true;\n    $http.post(`api/users/${$scope.user.id}/reset_password`).success((data) => {\n      $scope.disablePasswordResetButton = false;\n      $scope.passwordResetLink = data.reset_link;\n    });\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.controller('UserCtrl', UserCtrl);\n\n  return {\n    '/users/:userId': {\n      template,\n      reloadOnSearch: false,\n      controller: 'UserCtrl',\n      title: 'Users',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/users/show.js","module.exports = \"<settings-screen>\\n  <email-settings-warning function=\\\"'invite emails'\\\"></email-settings-warning>\\n\\n  <h3 class=\\\"p-l-5\\\">{{user.name}}</h3>\\n\\n  <ul class=\\\"tab-nav\\\">\\n    <rd-tab tab-id=\\\"profile\\\" name=\\\"Profile\\\" ng-click=\\\"selectTab('profile')\\\"></rd-tab>\\n    <rd-tab tab-id=\\\"apiKey\\\" name=\\\"API Key\\\" ng-click=\\\"selectTab('apiKey')\\\" ng-if=\\\"user.api_key\\\"></rd-tab>\\n    <rd-tab tab-id=\\\"settings\\\" name=\\\"Settings\\\" ng-click=\\\"selectTab('settings')\\\" ng-if=\\\"showSettings\\\"></rd-tab>\\n    <rd-tab tab-id=\\\"password\\\" name=\\\"Password\\\" ng-click=\\\"selectTab('password')\\\" ng-if=\\\"showPasswordSettings\\\"></rd-tab>\\n  </ul>\\n\\n  <div ng-show=\\\"selectedTab == 'profile'\\\" class=\\\"p-10\\\">\\n    <p>\\n      <img ng-src=\\\"{{user.gravatar_url}}\\\"/>\\n    </p>\\n\\n    <p>\\n      <strong>{{user.name}}</strong>\\n    </p>\\n\\n    <p>\\n      {{user.email}}\\n    </p>\\n    <div ng-if=\\\"currentUser.isAdmin\\\">\\n      <hr/>\\n      <div class=\\\"form-group\\\">\\n        <button class=\\\"btn btn-default\\\" ng-click=\\\"sendPasswordReset()\\\" ng-disabled=\\\"disablePasswordResetButton\\\">Send\\n          Password Reset Email\\n        </button>\\n      </div>\\n\\n      <div ng-if=\\\"passwordResetLink\\\" class=\\\"alert alert-success\\\">\\n        <p ng-if=\\\"!clientConfig.mailSettingMissing\\\">\\n          <strong>The user should receive a link to reset his password by email soon.</strong>\\n        </p>\\n        <p ng-if=\\\"clientConfig.mailSettingsMissing\\\">\\n          You don't have mail server configured, please send the following link\\n          to {{user.name}} to reset their password:<br/>\\n          <a ng-href=\\\"passwordResetLink\\\">{{passwordResetLink}}</a>\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n  <div ng-show=\\\"selectedTab == 'apiKey'\\\" class=\\\"p-10\\\">\\n    API Key:\\n    <input type=\\\"text\\\" value=\\\"{{user.api_key}}\\\" size=\\\"44\\\" readonly/>\\n  </div>\\n  <div ng-show=\\\"selectedTab == 'settings'\\\" class=\\\"p-10\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <form class=\\\"form\\\" name=\\\"userSettingsForm\\\" ng-submit=\\\"updateUser(userSettingsForm)\\\" novalidate>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userSettingsForm.name | showError:userSettingsForm )}\\\">\\n          <label class=\\\"control-label\\\">Name</label>\\n          <input name=\\\"name\\\" type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"user.name\\\" required/>\\n          <error-messages input=\\\"userSettingsForm.name\\\" form=\\\"userSettingsForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userSettingsForm.email | showError:userSettingsForm )}\\\">\\n          <label class=\\\"control-label\\\">Email</label>\\n          <input name=\\\"email\\\" type=\\\"email\\\" class=\\\"form-control\\\" ng-model=\\\"user.email\\\" required/>\\n          <error-messages input=\\\"userSettingsForm.email\\\" form=\\\"userSettingsForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <button class=\\\"btn btn-primary\\\">Save</button>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n  <div ng-show=\\\"selectedTab == 'password'\\\" class=\\\"p-10\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <form class=\\\"form\\\" name=\\\"userPasswordForm\\\" ng-submit=\\\"savePassword(userPasswordForm)\\\" novalidate>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userPasswordForm.currentPassword | showError:userPasswordForm )}\\\">\\n          <label class=\\\"control-label\\\">Current Password</label>\\n          <input name=\\\"currentPassword\\\" class=\\\"form-control\\\" type=\\\"password\\\" ng-model=\\\"password.current\\\" required/>\\n          <error-messages input=\\\"userPasswordForm.currentPassword\\\" form=\\\"userPasswordForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userPasswordForm.newPassword | showError:userPasswordForm )}\\\">\\n          <label class=\\\"control-label\\\">New Password</label>\\n          <input name=\\\"newPassword\\\" class=\\\"form-control\\\" type=\\\"password\\\" ng-model=\\\"password.new\\\" ng-minlength=\\\"6\\\"\\n                 required/>\\n          <error-messages input=\\\"userPasswordForm.newPassword\\\" form=\\\"userPasswordForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userPasswordForm.passwordRepeat | showError:userPasswordForm )}\\\">\\n          <label class=\\\"control-label\\\">Repeat New Password</label>\\n          <input name=\\\"passwordRepeat\\\" class=\\\"form-control\\\" type=\\\"password\\\" ng-model=\\\"password.newRepeat\\\"\\n                 compare-to=\\\"password.new\\\"/>\\n          <span class=\\\"help-block error\\\"\\n                ng-if=\\\"userPasswordForm.passwordRepeat.$error.compareTo\\\">Passwords don't match.</span>\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <button class=\\\"btn btn-primary\\\">Save</button>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/users/show.html\n// module id = 233\n// module chunks = 0","import template from './new.html';\n\nfunction NewUserCtrl($scope, $location, toastr, currentUser, Events, User) {\n  Events.record('view', 'page', 'users/new');\n\n  $scope.user = new User({});\n  $scope.saveUser = () => {\n    if (!this.userForm.$valid) {\n      return;\n    }\n\n    $scope.user.$save((user) => {\n      $scope.user = user;\n      $scope.user.created = true;\n      toastr.success('Saved.');\n    }, (error) => {\n      const message = error.data.message || 'Failed saving.';\n      toastr.error(message);\n    });\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.controller('NewUserCtrl', NewUserCtrl);\n\n  return {\n    '/users/new': {\n      template,\n      controller: 'NewUserCtrl',\n      controllerAs: '$ctrl',\n      bindToController: 'true',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/users/new.js","module.exports = \"<settings-screen>\\n  <email-settings-warning function=\\\"'invite emails'\\\"></email-settings-warning>\\n  <form class=\\\"form\\\" name=\\\"$ctrl.userForm\\\" ng-submit=\\\"saveUser()\\\" novalidate>\\n    <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  ($ctrl.userForm.email | showError:$ctrl.userForm )}\\\">\\n      <label class=\\\"control-label\\\">Name</label>\\n      <input type=\\\"text\\\" name=\\\"name\\\" class=\\\"form-control\\\" ng-model=\\\"user.name\\\" ng-disabled=\\\"user.created\\\" required/>\\n\\n      <error-messages input=\\\"$ctrl.userForm.name\\\" form=\\\"$ctrl.userForm\\\"></error-messages>\\n    </div>\\n\\n    <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error': ($ctrl.userForm.email | showError:$ctrl.userForm ) }\\\">\\n      <label class=\\\"control-label\\\">Email</label>\\n      <input name=\\\"email\\\" type=\\\"email\\\" class=\\\"form-control\\\" ng-model=\\\"user.email\\\" ng-disabled=\\\"user.created\\\" required/>\\n\\n      <error-messages input=\\\"$ctrl.userForm.email\\\" form=\\\"$ctrl.userForm\\\"></error-messages>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"!user.created\\\">\\n      <button class=\\\"btn btn-primary\\\">Create</button>\\n    </div>\\n\\n\\n    <div ng-if=\\\"user.created\\\" class=\\\"alert alert-success\\\">\\n      <p>\\n        <strong>The user has been created and should receive an invite email soon.</strong>\\n      </p>\\n      <p>\\n        You can use the following link to invite them yourself:<br/>\\n        {{user.invite_link}}\\n      </p>\\n    </div>\\n  </form>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/users/new.html\n// module id = 235\n// module chunks = 0","import registerList from './list';\nimport registerShow from './show';\nimport registerDataSources from './data-sources';\nimport registerEditGroupDialog from './edit-group-dialog';\nimport registerGroupName from './group-name';\n\nexport default function (ngModule) {\n  registerEditGroupDialog(ngModule);\n  registerGroupName(ngModule);\n\n  return Object.assign({}, registerList(ngModule),\n                           registerShow(ngModule),\n                           registerDataSources(ngModule));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/groups/index.js","import { Paginator } from '../../utils';\nimport template from './list.html';\n\nfunction GroupsCtrl($scope, $uibModal, currentUser, Events, Group) {\n  Events.record('view', 'page', 'groups');\n  $scope.currentUser = currentUser;\n  $scope.groups = new Paginator([], { itemsPerPage: 20 });\n  Group.query((groups) => {\n    $scope.groups.updateRows(groups);\n  });\n\n  $scope.newGroup = () => {\n    $uibModal.open({\n      component: 'editGroupDialog',\n      size: 'sm',\n      resolve: {\n        group() {\n          return new Group({});\n        },\n      },\n    });\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.controller('GroupsCtrl', GroupsCtrl);\n\n  return {\n    '/groups': {\n      template,\n      controller: 'GroupsCtrl',\n      title: 'Groups',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/groups/list.js","module.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <p ng-if=\\\"currentUser.hasPermission('admin')\\\">\\n        <a ng-click=\\\"newGroup()\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Group</a>\\n      </p>\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th>Name</th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n          <tr ng-repeat=\\\"row in groups.getPageRows()\\\">\\n            <td>\\n              <a href=\\\"groups/{{row.id}}\\\">{{row.name}}</a>\\n            </td>\\n          </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"groups\\\"></paginator>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/groups/list.html\n// module id = 238\n// module chunks = 0","import { contains } from 'underscore';\nimport template from './show.html';\n\nfunction GroupCtrl($scope, $routeParams, $http, currentUser, Events, Group, User) {\n  Events.record('view', 'group', $scope.groupId);\n\n  $scope.currentUser = currentUser;\n  $scope.group = Group.get({ id: $routeParams.groupId });\n  $scope.members = Group.members({ id: $routeParams.groupId });\n  $scope.newMember = {};\n\n  $scope.findUser = (search) => {\n    if (search === '') {\n      return;\n    }\n\n    if ($scope.foundUsers === undefined) {\n      User.query((users) => {\n        const existingIds = $scope.members.map(m => m.id);\n        users.forEach((user) => { user.alreadyMember = contains(existingIds, user.id); });\n        $scope.foundUsers = users;\n      });\n    }\n  };\n\n  $scope.addMember = (user) => {\n    // Clear selection, to clear up the input control.\n    $scope.newMember.selected = undefined;\n\n    $http.post(`api/groups/${$routeParams.groupId}/members`, { user_id: user.id }).success(() => {\n      $scope.members.unshift(user);\n      user.alreadyMember = true;\n    });\n  };\n\n  $scope.removeMember = (member) => {\n    $http.delete(`api/groups/${$routeParams.groupId}/members/${member.id}`).success(() => {\n      $scope.members = $scope.members.filter(m => m !== member);\n\n      if ($scope.foundUsers) {\n        $scope.foundUsers.forEach((user) => {\n          if (user.id === member.id) { user.alreadyMember = false; }\n        });\n      }\n    });\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.controller('GroupCtrl', GroupCtrl);\n  return {\n    '/groups/:groupId': {\n      template,\n      controller: 'GroupCtrl',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/groups/show.js","module.exports = \"<settings-screen>\\n  <group-name group=\\\"group\\\"></group-name>\\n\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-lg-4\\\">\\n      <ul class=\\\"tab-nav\\\">\\n        <li role=\\\"presentation\\\" class=\\\"active\\\"><a href=\\\"groups/{{group.id}}\\\">Members</a></li>\\n        <li role=\\\"presentation\\\" ng-if=\\\"currentUser.isAdmin\\\"><a href=\\\"groups/{{group.id}}/data_sources\\\">Data Sources</a></li>\\n      </ul>\\n    </div>\\n\\n    <div class=\\\"col-lg-8\\\" ng-if=\\\"currentUser.isAdmin\\\">\\n      <ui-select ng-model=\\\"newMember.selected\\\" on-select=\\\"addMember($item)\\\">\\n        <ui-select-match placeholder=\\\"Add New Member\\\"></ui-select-match>\\n        <ui-select-choices repeat=\\\"user in foundUsers | filter:$select.search\\\"\\n                           refresh=\\\"findUser($select.search)\\\"\\n                           refresh-delay=\\\"0\\\"\\n                           ui-disable-choice=\\\"user.alreadyMember\\\">\\n          <div>\\n            <img ng-src=\\\"{{user.gravatar_url}}\\\" height=\\\"24px\\\">&nbsp;{{user.name}}\\n            <small ng-if=\\\"user.alreadyMember\\\">(already member in this group)</small>\\n          </div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-lg-12\\\">\\n      <table class=\\\"table table-condensed table-hover\\\" ng-show=\\\"members\\\">\\n        <tbody>\\n        <tr ng-repeat=\\\"member in members\\\">\\n          <td width=\\\"50px\\\"><img ng-src=\\\"{{member.gravatar_url}}\\\" height=\\\"40px\\\"/></td>\\n          <td>{{member.name}} <button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"removeMember(member)\\\" ng-if=\\\"currentUser.isAdmin\\\">Remove</button></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n\\n      <div ng-hide=\\\"members.length\\\">\\n        No members.\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/groups/show.html\n// module id = 240\n// module chunks = 0","import { contains } from 'underscore';\nimport template from './data-sources.html';\n\nfunction GroupDataSourcesCtrl($scope, $routeParams, $http, Events, Group, DataSource) {\n  Events.record('view', 'group_data_sources', $scope.groupId);\n  $scope.group = Group.get({ id: $routeParams.groupId });\n  $scope.dataSources = Group.dataSources({ id: $routeParams.groupId });\n  $scope.newDataSource = {};\n\n  $scope.findDataSource = () => {\n    if ($scope.foundDataSources === undefined) {\n      DataSource.query((dataSources) => {\n        const existingIds = $scope.dataSources.map(m => m.id);\n        $scope.foundDataSources = dataSources.filter(ds => !contains(existingIds, ds.id));\n      });\n    }\n  };\n\n  $scope.addDataSource = (dataSource) => {\n    // Clear selection, to clear up the input control.\n    $scope.newDataSource.selected = undefined;\n\n    $http.post(`api/groups/${$routeParams.groupId}/data_sources`, { data_source_id: dataSource.id }).success(() => {\n      dataSource.view_only = false;\n      $scope.dataSources.unshift(dataSource);\n\n      if ($scope.foundDataSources) {\n        $scope.foundDataSources = $scope.foundDataSources.filter(ds => ds !== dataSource);\n      }\n    });\n  };\n\n  $scope.changePermission = (dataSource, viewOnly) => {\n    $http.post(`api/groups/${$routeParams.groupId}/data_sources/${dataSource.id}`, { view_only: viewOnly }).success(() => {\n      dataSource.view_only = viewOnly;\n    });\n  };\n\n  $scope.removeDataSource = (dataSource) => {\n    $http.delete(`api/groups/${$routeParams.groupId}/data_sources/${dataSource.id}`).success(() => {\n      $scope.dataSources = $scope.dataSources.filter(ds => dataSource !== ds);\n    });\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.controller('GroupDataSourcesCtrl', GroupDataSourcesCtrl);\n\n  return {\n    '/groups/:groupId/data_sources': {\n      template,\n      controller: 'GroupDataSourcesCtrl',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/groups/data-sources.js","module.exports = \"<settings-screen>\\n  <group-name group=\\\"group\\\"></group-name>\\n\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-lg-4\\\">\\n      <ul class=\\\"tab-nav\\\">\\n        <li role=\\\"presentation\\\"><a href=\\\"groups/{{group.id}}\\\">Members</a></li>\\n        <li role=\\\"presentation\\\" class=\\\"active\\\"><a href=\\\"groups/{{group.id}}/data_sources\\\">Data Sources</a></li>\\n      </ul>\\n    </div>\\n    <div class=\\\"col-lg-8\\\">\\n      <ui-select ng-model=\\\"newDataSource.selected\\\" on-select=\\\"addDataSource($item)\\\">\\n        <ui-select-match placeholder=\\\"Add Data Source\\\"></ui-select-match>\\n        <ui-select-choices repeat=\\\"dataSource in foundDataSources | filter:$select.search\\\"\\n                           refresh=\\\"findDataSource($select.search)\\\"\\n                           refresh-delay=\\\"0\\\">\\n          <div>\\n            {{dataSource.name}}\\n          </div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-lg-12\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"dataSource in dataSources\\\">\\n          <td> {{dataSource.name}}</td>\\n          <td width=\\\"280px\\\" class=\\\"text-right\\\">\\n            <div class=\\\"btn-group\\\" uib-dropdown>\\n              <button type=\\\"button\\\" class=\\\"btn btn-sm btn-default dropdown-toggle\\\" uib-dropdown-toggle ng-if=\\\"dataSource.view_only\\\">\\n                View Only <span class=\\\"caret\\\"></span>\\n              </button>\\n\\n              <button type=\\\"button\\\" class=\\\"btn btn-sm btn-success dropdown-toggle\\\" uib-dropdown-toggle ng-if=\\\"!dataSource.view_only\\\">\\n                Full Access <span class=\\\"caret\\\"></span>\\n              </button>\\n\\n              <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\" uib-dropdown-menu>\\n                <li><a ng-click=\\\"changePermission(dataSource, false)\\\"><small ng-if=\\\"!dataSource.view_only\\\"><span class=\\\"fa fa-check\\\"/></small> Full Access<br/></a></li>\\n                <li><a ng-click=\\\"changePermission(dataSource, true)\\\"><small ng-if=\\\"dataSource.view_only\\\"><span class=\\\"fa fa-check\\\"/></small> View Only</a></li>\\n              </ul>\\n            </div>\\n\\n            <button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"removeDataSource(dataSource)\\\">Remove</button>\\n          </td>\\n        </tr>\\n        </tbody>\\n      </table>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/groups/data-sources.html\n// module id = 242\n// module chunks = 0","import template from './edit-group-dialog.html';\n\nconst EditGroupDialogComponent = {\n  template,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($location) {\n    'ngInject';\n\n    this.group = this.resolve.group;\n    const newGroup = this.group.id === undefined;\n\n    if (newGroup) {\n      this.saveButtonText = 'Create';\n      this.title = 'Create a New Group';\n    } else {\n      this.saveButtonText = 'Save';\n      this.title = 'Edit Group';\n    }\n\n    this.ok = () => {\n      this.group.$save((group) => {\n        if (newGroup) {\n          $location.path(`/groups/${group.id}`).replace();\n          this.close();\n        } else {\n          this.close();\n        }\n      });\n    };\n  },\n};\n\nexport default function (ngModule) {\n  ngModule.component('editGroupDialog', EditGroupDialogComponent);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/groups/edit-group-dialog.js","module.exports = \"<div class=\\\"modal-header\\\">\\n    <h3 class=\\\"modal-title\\\">{{$ctrl.title}}</h3>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <form class=\\\"form\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"$ctrl.group.name\\\" placeholder=\\\"Group Name\\\" class=\\\"form-control\\\"/>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <button class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.close()\\\">Cancel</button>\\n    <button class=\\\"btn btn-primary\\\" ng-click=\\\"$ctrl.ok()\\\">{{$ctrl.saveButtonText}}</button>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/groups/edit-group-dialog.html\n// module id = 244\n// module chunks = 0","function controller($window, $location, toastr, currentUser) {\n  this.canEdit = () => currentUser.isAdmin && this.group.type !== 'builtin';\n\n  this.saveName = () => {\n    this.group.$save();\n  };\n\n  this.deleteGroup = () => {\n    if ($window.confirm('Are you sure you want to delete this group?')) {\n      this.group.$delete(() => {\n        $location.path('/groups').replace();\n        toastr.success('Group deleted successfully.');\n      });\n    }\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.component('groupName', {\n    bindings: {\n      group: '<',\n    },\n    transclude: true,\n    template: `\n      <h2 class=\"p-l-5\">\n        <edit-in-place editable=\"$ctrl.canEdit()\" done=\"$ctrl.saveName\" ignore-blanks='true' value=\"$ctrl.group.name\"></edit-in-place>&nbsp;\n        <button class=\"btn btn-xs btn-danger\" ng-if=\"$ctrl.canEdit()\" ng-click=\"$ctrl.deleteGroup()\">Delete this group</button>\n      </h2>\n    `,\n    replace: true,\n    controller,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/groups/group-name.js","import template from './list.html';\n\nfunction DestinationsCtrl($scope, $location, toastr, currentUser, Events, Destination) {\n  Events.record('view', 'page', 'admin/destinations');\n\n  $scope.destinations = Destination.query();\n}\n\nexport default function (ngModule) {\n  ngModule.controller('DestinationsCtrl', DestinationsCtrl);\n\n  return {\n    '/destinations': {\n      template,\n      controller: 'DestinationsCtrl',\n      title: 'Destinations',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/destinations/list.js","module.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-4\\\">\\n      <p>\\n        <a href=\\\"destinations/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Alert Destination</a>\\n      </p>\\n      <div class=\\\"list-group\\\">\\n        <a ng-href=\\\"destinations/{{destination.id}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"destination in destinations\\\"><i class=\\\"fa {{destination.icon}}\\\"></i> {{destination.name}}</a>\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/destinations/list.html\n// module id = 248\n// module chunks = 0","import debug from 'debug';\n\nimport template from './show.html';\n\nconst logger = debug('redash:http');\n\nfunction DestinationCtrl($scope, $routeParams, $http, $location, toastr,\n                         currentUser, Events, Destination) {\n  Events.record('view', 'page', 'admin/destination');\n\n  $scope.destinationId = $routeParams.destinationId;\n\n  if ($scope.destinationId === 'new') {\n    $scope.destination = new Destination({ options: {} });\n  } else {\n    $scope.destination = Destination.get({ id: $routeParams.destinationId });\n  }\n\n  $scope.$watch('destination.id', (id) => {\n    if (id !== $scope.destinationId && id !== undefined) {\n      $location.path(`/destinations/${id}`).replace();\n    }\n  });\n\n  $scope.delete = () => {\n    Events.record('delete', 'destination', $scope.destination.id);\n\n    $scope.destination.$delete(() => {\n      toastr.success('Destination deleted successfully.');\n      $location.path('/destinations/');\n    }, (httpResponse) => {\n      logger('Failed to delete destination: ', httpResponse.status, httpResponse.statusText, httpResponse.data);\n      toastr.error('Failed to delete destination.');\n    });\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.controller('DestinationCtrl', DestinationCtrl);\n\n  return {\n    '/destinations/:destinationId': {\n      template,\n      controller: 'DestinationCtrl',\n      title: 'Destinations',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/destinations/show.js","module.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <dynamic-form target=\\\"destination\\\" type=\\\"destinations\\\">\\n        <button class=\\\"btn btn-danger\\\" ng-if=\\\"destination.id\\\" ng-click=\\\"delete()\\\">Delete</button>\\n      </dynamic-form>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/destinations/show.html\n// module id = 250\n// module chunks = 0","import template from './list.html';\n\nfunction DataSourcesCtrl($scope, $location, currentUser, Events, DataSource) {\n  Events.record('view', 'page', 'admin/data_sources');\n\n  $scope.dataSources = DataSource.query();\n}\n\nexport default function (ngModule) {\n  ngModule.controller('DataSourcesCtrl', DataSourcesCtrl);\n\n  return {\n    '/data_sources': {\n      template,\n      controller: 'DataSourcesCtrl',\n      title: 'Data Sources',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/data-sources/list.js","module.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-4\\\">\\n      <p>\\n        <a href=\\\"data_sources/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Data Source</a>\\n      </p>\\n      <div class=\\\"list-group\\\">\\n        <a ng-href=\\\"data_sources/{{dataSource.id}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"dataSource in dataSources\\\"><i class=\\\"fa fa-database\\\"></i> {{dataSource.name}}</a>\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/data-sources/list.html\n// module id = 253\n// module chunks = 0","import debug from 'debug';\nimport template from './show.html';\n\nconst logger = debug('redash:http');\n\nfunction DataSourceCtrl($scope, $routeParams, $http, $location, toastr,\n  currentUser, Events, DataSource) {\n  Events.record('view', 'page', 'admin/data_source');\n\n  $scope.dataSourceId = $routeParams.dataSourceId;\n\n  if ($scope.dataSourceId === 'new') {\n    $scope.dataSource = new DataSource({ options: {} });\n  } else {\n    $scope.dataSource = DataSource.get({ id: $routeParams.dataSourceId });\n  }\n\n  $scope.$watch('dataSource.id', (id) => {\n    if (id !== $scope.dataSourceId && id !== undefined) {\n      $location.path(`/data_sources/${id}`).replace();\n    }\n  });\n\n  function deleteDataSource() {\n    Events.record('delete', 'datasource', $scope.dataSource.id);\n\n    $scope.dataSource.$delete(() => {\n      toastr.success('Data source deleted successfully.');\n      $location.path('/data_sources/');\n    }, (httpResponse) => {\n      logger('Failed to delete data source: ', httpResponse.status, httpResponse.statusText, httpResponse.data);\n      toastr.error('Failed to delete data source.');\n    });\n  }\n\n  function testConnection(callback) {\n    Events.record('test', 'datasource', $scope.dataSource.id);\n\n    DataSource.test({ id: $scope.dataSource.id }, (httpResponse) => {\n      if (httpResponse.ok) {\n        toastr.success('Success');\n      } else {\n        toastr.error(httpResponse.message, 'Connection Test Failed:', { timeOut: 10000 });\n      }\n      callback();\n    }, (httpResponse) => {\n      logger('Failed to test data source: ', httpResponse.status, httpResponse.statusText, httpResponse);\n      toastr.error('Unknown error occurred while performing connection test. Please try again later.', 'Connection Test Failed:', { timeOut: 10000 });\n      callback();\n    });\n  }\n\n  $scope.actions = [\n    { name: 'Delete', class: 'btn-danger', callback: deleteDataSource },\n    { name: 'Test Connection', class: 'btn-default', callback: testConnection, disableWhenDirty: true },\n  ];\n}\n\nexport default function (ngModule) {\n  ngModule.controller('DataSourceCtrl', DataSourceCtrl);\n\n  return {\n    '/data_sources/:dataSourceId': {\n      template,\n      controller: 'DataSourceCtrl',\n      title: 'Datasources',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/data-sources/show.js","module.exports = \"<settings-screen>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-8\\\">\\n      <dynamic-form target=\\\"dataSource\\\" type=\\\"data_sources\\\" actions=\\\"actions\\\">\\n      </dynamic-form>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/data-sources/show.html\n// module id = 255\n// module chunks = 0","import registerSourceView from './source-view';\nimport registerView from './view';\nimport registerQueryResultsLink from './query-results-link';\nimport registerQueryEditor from './query-editor';\nimport registerSchemaBrowser from './schema-browser';\nimport registerEmbedCodeDialog from './embed-code-dialog';\nimport registerScheduleDialog from './schedule-dialog';\nimport registerAlertUnsavedChanges from './alert-unsaved-changes';\nimport registerQuerySearchResultsPage from './queries-search-results-page';\nimport registerVisualizationEmbed from './visualization-embed';\n\nexport default function (ngModule) {\n  registerQueryResultsLink(ngModule);\n  registerQueryEditor(ngModule);\n  registerSchemaBrowser(ngModule);\n  registerEmbedCodeDialog(ngModule);\n  registerScheduleDialog(ngModule);\n  registerAlertUnsavedChanges(ngModule);\n  registerVisualizationEmbed(ngModule);\n\n  return Object.assign({}, registerQuerySearchResultsPage(ngModule),\n                           registerSourceView(ngModule),\n                           registerView(ngModule));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/index.js","import template from './query.html';\n\nfunction QuerySourceCtrl(Events, toastr, $controller, $scope, $location, $http, $q,\n  AlertDialog, currentUser, Query, Visualization, KeyboardShortcuts) {\n  // extends QueryViewCtrl\n  $controller('QueryViewCtrl', { $scope });\n  // TODO:\n  // This doesn't get inherited. Setting it on this didn't work either (which is weird).\n  // Obviously it shouldn't be repeated, but we got bigger fish to fry.\n  const DEFAULT_TAB = 'table';\n\n  Events.record('view_source', 'query', $scope.query.id);\n\n  const isNewQuery = !$scope.query.id;\n  let queryText = $scope.query.query;\n  const saveQuery = $scope.saveQuery;\n\n  $scope.sourceMode = true;\n  $scope.canEdit = currentUser.canEdit($scope.query) || $scope.query.can_edit;\n  $scope.isDirty = false;\n  $scope.base_url = `${$location.protocol()}://${$location.host()}:${$location.port()}`;\n\n  $scope.newVisualization = undefined;\n\n  // @override\n  Object.defineProperty($scope, 'showDataset', {\n    get() {\n      return $scope.queryResult && $scope.queryResult.getStatus() === 'done';\n    },\n  });\n\n  const shortcuts = {\n    'mod+s': function save() {\n      if ($scope.canEdit) {\n        $scope.saveQuery();\n      }\n    },\n  };\n\n  KeyboardShortcuts.bind(shortcuts);\n\n  $scope.$on('$destroy', () => {\n    KeyboardShortcuts.unbind(shortcuts);\n  });\n\n  // @override\n  $scope.saveQuery = (options, data) => {\n    const savePromise = saveQuery(options, data);\n\n    savePromise.then((savedQuery) => {\n      queryText = savedQuery.query;\n      $scope.isDirty = $scope.query.query !== queryText;\n      // update to latest version number\n      $scope.query.version = savedQuery.version;\n\n      if (isNewQuery) {\n        // redirect to new created query (keep hash)\n        $location.path(savedQuery.getSourceLink());\n      }\n    });\n\n    return savePromise;\n  };\n\n  $scope.formatQuery = () => {\n    Query.format($scope.dataSource.syntax, $scope.query.query)\n      .then((query) => { $scope.query.query = query; })\n      .catch(error => toastr.error(error));\n  };\n\n  $scope.duplicateQuery = () => {\n    Events.record('fork', 'query', $scope.query.id);\n\n    Query.fork({ id: $scope.query.id }, (newQuery) => {\n      $location.url(newQuery.getSourceLink()).replace();\n    });\n  };\n\n  $scope.deleteVisualization = ($e, vis) => {\n    $e.preventDefault();\n\n    const title = undefined;\n    const message = `Are you sure you want to delete ${vis.name} ?`;\n    const confirm = { class: 'btn-danger', title: 'Delete' };\n\n    AlertDialog.open(title, message, confirm).then(() => {\n      Events.record('delete', 'visualization', vis.id);\n\n      Visualization.delete({ id: vis.id }, () => {\n        if ($scope.selectedTab === String(vis.id)) {\n          $scope.selectedTab = DEFAULT_TAB;\n          $location.hash($scope.selectedTab);\n        }\n        $scope.query.visualizations = $scope.query.visualizations.filter(v => vis.id !== v.id);\n      }, () => {\n        toastr.error(\"Error deleting visualization. Maybe it's used in a dashboard?\");\n      });\n    });\n  };\n\n  $scope.$watch('query.query', (newQueryText) => {\n    $scope.isDirty = (newQueryText !== queryText);\n  });\n}\n\nexport default function (ngModule) {\n  ngModule.controller('QuerySourceCtrl', QuerySourceCtrl);\n\n  return {\n    '/queries/new': {\n      template,\n      controller: 'QuerySourceCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: function newQuery(Query) {\n          'ngInject';\n\n          return Query.newQuery();\n        },\n        dataSources(DataSource) {\n          'ngInject';\n\n          return DataSource.query().$promise;\n        },\n      },\n    },\n    '/queries/:queryId/source': {\n      template,\n      controller: 'QuerySourceCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: (Query, $route) => {\n          'ngInject';\n\n          return Query.get({ id: $route.current.params.queryId }).$promise;\n        },\n      },\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/source-view.js","module.exports = \"<div class=\\\"container\\\">\\n  <overlay ng-if=\\\"canCreateQuery === false && query.isNew()\\\">\\n    You don't have permission to create new queries on any of the data sources available to you. You can either <a\\n    href=\\\"queries\\\">browse existing queries</a>, or ask for additional permissions from your Redash admin.\\n  </overlay>\\n  <overlay ng-if=\\\"noDataSources && currentUser.isAdmin\\\">\\n    Looks like no data sources were created yet (or none of them available to the group(s) you're member of). Please\\n    create one first, and then start querying.\\n    <br/>\\n    <a href=\\\"data_sources/new\\\" class=\\\"btn btn-primary\\\">Create Data Source</a> <a href=\\\"groups\\\" class=\\\"btn btn-default\\\">Manage\\n    Group Permissions</a>\\n  </overlay>\\n  <overlay ng-if=\\\"noDataSources && !currentUser.isAdmin\\\">\\n    Looks like no data sources were created yet (or none of them available to the group(s) you're member of). Please ask\\n    your Redash admin to create one first.\\n  </overlay>\\n\\n  <alert-unsaved-changes ng-if=\\\"canEdit\\\" is-dirty=\\\"isDirty\\\"></alert-unsaved-changes>\\n\\n  <div class=\\\"row bg-white p-10 m-b-10\\\">\\n    <div class=\\\"col-sm-9\\\">\\n      <h3>\\n        <edit-in-place editable=\\\"canEdit\\\" done=\\\"saveName\\\" ignore-blanks=\\\"true\\\" value=\\\"query.name\\\"></edit-in-place>\\n        <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft && !query.is_archived\\\">Unpublished</span>\\n        <span class=\\\"label label-warning\\\" ng-if=\\\"query.is_archived\\\" uib-popover=\\\"This query is archived and can't be used in dashboards, and won't appear in search results.\\\" popover-placement=\\\"right\\\" popover-trigger=\\\"'mouseenter'\\\">Archived</span>\\n      </h3>\\n      <p>\\n        <em>\\n          <edit-in-place editable=\\\"canEdit\\\"\\n                         done=\\\"saveDescription\\\"\\n                         editor=\\\"textarea\\\"\\n                         placeholder=\\\"No description\\\"\\n                         ignore-blanks='false'\\n                         value=\\\"query.description\\\"\\n                         markdown=\\\"true\\\">\\n          </edit-in-place>\\n        </em>\\n\\n      <ul class=\\\"list-inline m-t-20\\\">\\n        <li>\\n          <span class=\\\"zmdi zmdi-account\\\"></span>\\n          <span class=\\\"text-muted\\\">Created By </span>\\n          <strong>{{query.user.name}}</strong>\\n        </li>\\n        <li ng-if=\\\"query.last_modified_by && query.user.id != query.last_modified_by.id\\\">\\n          <span class=\\\"zmdi zmdi-account\\\"></span>\\n          <span class=\\\"text-muted\\\">Last Modified By </span>\\n          <strong>{{query.last_modified_by.name}}</strong>\\n        </li>\\n        <li>\\n          <span class=\\\"zmdi zmdi-time\\\"></span>\\n          <span class=\\\"text-muted\\\">Updated at </span>\\n          <strong>\\n            <rd-time-ago value=\\\"query.updated_at\\\"></rd-time-ago>\\n          </strong>\\n        </li>\\n        <li>\\n          <span class=\\\"zmdi zmdi-time\\\"></span>\\n          <span class=\\\"text-muted\\\">Created at </span>\\n          <strong>\\n            <rd-time-ago value=\\\"query.created_at\\\"></rd-time-ago>\\n          </strong>\\n        </li>\\n      </ul>\\n      </p>\\n    </div>\\n    <div class=\\\"col-sm-3 text-right\\\">\\n      <h3>\\n        <span ng-show=\\\"query.id && canViewSource\\\">\\n            <a ng-show=\\\"!sourceMode\\\"\\n              ng-href=\\\"{{query.getUrl(true, selectedTab)}}\\\" class=\\\"btn btn-default\\\">Show Source\\n            </a>\\n            <a ng-show=\\\"sourceMode\\\"\\n              ng-href=\\\"{{query.getUrl(false, selectedTab)}}\\\" class=\\\"btn btn-default\\\">Hide Source\\n            </a>\\n        </span>\\n      </h3>\\n    </div>\\n  </div>\\n\\n  <!-- editor -->\\n  <div class=\\\"container\\\">\\n      <div class=\\\"row bg-white p-b-5\\\" ng-if=\\\"sourceMode\\\" resizable r-directions=\\\"['bottom']\\\" r-height=\\\"300\\\" style=\\\"min-height:100px;\\\">\\n        <schema-browser class=\\\"col-md-3 hidden-sm hidden-xs schema-container\\\"\\n                        schema=\\\"schema\\\"\\n                        on-refresh=\\\"refreshSchema()\\\"\\n                        ng-show=\\\"hasSchema\\\">\\n        </schema-browser>\\n\\n        <div ng-class=\\\"editorSize\\\" style=\\\"height:100%;\\\">\\n            <div class=\\\"p-5\\\">\\n              <button type=\\\"button\\\" class=\\\"btn btn-primary btn-s\\\" ng-disabled=\\\"queryExecuting || !canExecuteQuery()\\\"\\n                      ng-click=\\\"executeQuery()\\\">\\n                <span class=\\\"zmdi zmdi-play\\\"></span> Execute\\n              </button>\\n\\n              <button type=\\\"button\\\" class=\\\"btn btn-default btn-s\\\" ng-click=\\\"formatQuery()\\\">\\n                <span class=\\\"zmdi zmdi-format-indent-increase\\\"></span> Format Query\\n              </button>\\n\\n              <i class=\\\"fa fa-database\\\"></i>\\n              <span class=\\\"text-muted\\\">Data Source</span>\\n              <select ng-disabled=\\\"!isQueryOwner\\\" ng-model=\\\"query.data_source_id\\\" ng-change=\\\"updateDataSource()\\\"\\n                      ng-options=\\\"ds.id as ds.name for ds in dataSources\\\"></select>\\n\\n              <div class=\\\"pull-right\\\">\\n                <button class=\\\"btn btn-s btn-default\\\" ng-click=\\\"togglePublished()\\\" ng-if=\\\"query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\">\\n                  <span class=\\\"fa fa-paper-plane\\\"></span> Publish\\n                </button>\\n                <button class=\\\"btn btn-s btn-default\\\" ng-click=\\\"duplicateQuery()\\\" ng-disabled=\\\"query.id === undefined\\\">\\n                  <span class=\\\"zmdi zmdi-arrow-split\\\"></span> Fork\\n                </button>\\n                <button class=\\\"btn btn-default\\\" ng-show=\\\"canEdit\\\" ng-click=\\\"saveQuery()\\\">\\n                  <span class=\\\"fa fa-floppy-o\\\"> </span> Save<span\\n                  ng-show=\\\"isDirty\\\">&#42;</span>\\n                </button>\\n                <div class=\\\"btn-group\\\" role=\\\"group\\\" uib-dropdown>\\n                  <button class=\\\"btn btn-default btn-sm dropdown-toggle\\\" uib-dropdown-toggle>\\n                    <span class=\\\"zmdi zmdi-more\\\"></span>\\n                  </button>\\n                  <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n                    <li ng-if=\\\"!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\"><a ng-click=\\\"archiveQuery()\\\">Archive Query</a></li>\\n                    <li ng-if=\\\"!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin')) && showPermissionsControl\\\"><a ng-click=\\\"showManagePermissionsModal()\\\">Manage Permissions</a></li>\\n                    <li ng-if=\\\"!query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\"><a ng-click=\\\"togglePublished()\\\">Unpublish Query</a></li>\\n                    <li ng-if=\\\"query.id != undefined\\\"><a ng-click=\\\"showApiKey()\\\">Show API Key</a></li>\\n                  </ul>\\n                </div>\\n              </div>\\n            </div>\\n            <p style=\\\"height:calc(100% - 40px);\\\">\\n              <query-editor query=\\\"query\\\"\\n                            schema=\\\"schema\\\"\\n                            syntax=\\\"dataSource.syntax\\\"></query-editor>\\n            </p>\\n        </div>\\n      </div>\\n  </div>\\n  <!-- end of editor -->\\n\\n  <!-- Query Details-->\\n  <div class=\\\"container m-b-5 p-t-5 bg-ace\\\" ng-if=\\\"sourceMode\\\">\\n  </div>\\n  <!-- End of Query Details-->\\n\\n  <div class=\\\"tile\\\">\\n    <div class=\\\"t-header bg-ace\\\">\\n      <div class=\\\"pull-right\\\">\\n        <button class=\\\"btn btn-sm btn-default\\\" ng-click=\\\"executeQuery()\\\"\\n                ng-disabled=\\\"queryExecuting || !canExecuteQuery()\\\" title=\\\"Refresh Dataset\\\"\\n                ng-if=\\\"!sourceMode\\\"><span\\n          class=\\\"zmdi zmdi-refresh\\\"></span></button>\\n        <div class=\\\"btn-group\\\" uib-dropdown>\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-sm dropdown-toggle\\\"\\n                  ng-disabled=\\\"queryExecuting || !queryResult.getData()\\\" aria-haspopup=\\\"true\\\"\\n                  uib-dropdown-toggle aria-expanded=\\\"false\\\">\\n            Download Dataset <span class=\\\"caret\\\"></span>\\n          </button>\\n          <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n            <li>\\n              <a query-result-link target=\\\"_self\\\">\\n                <span class=\\\"fa fa-file-o\\\"></span> Download as CSV File\\n              </a>\\n            </li>\\n            <li>\\n              <a query-result-link file-type=\\\"xlsx\\\" target=\\\"_self\\\">\\n                <span class=\\\"fa fa-file-excel-o\\\"></span> Download as Excel File\\n              </a>\\n            </li>\\n          </ul>\\n        </div>\\n      </div>\\n      <ul class=\\\"list-inline\\\">\\n        <li>\\n          <!-- runtime -->\\n          <span class=\\\"zmdi zmdi-timer\\\"></span>\\n          <span class=\\\"text-muted\\\">Runtime </span>\\n          <strong ng-show=\\\"!queryExecuting\\\">{{queryResult.getRuntime() | durationHumanize}}</strong>\\n          <span ng-show=\\\"queryExecuting\\\">Running&hellip;</span>\\n        </li>\\n        <li>\\n          <!-- rows -->\\n          <span class=\\\"zmdi zmdi-format-align-justify\\\"></span>\\n          <span class=\\\"text-muted\\\">Rows </span><strong>{{queryResult.getData().length}}</strong>\\n        </li>\\n        <li>\\n          <!-- refresh schedule -->\\n          <span class=\\\"zmdi zmdi-refresh\\\"></span>\\n          <span class=\\\"text-muted\\\">Refresh Schedule</span>\\n          <a ng-click=\\\"openScheduleForm()\\\" ng-if=\\\"!query.isNew()\\\">{{query.schedule | scheduleHumanize}}</a>\\n          <span ng-if=\\\"query.isNew()\\\">Never</span>\\n        </li>\\n        <li>\\n          <!-- last update -->\\n          <span class=\\\"zmdi zmdi-time\\\"></span>\\n          <span class=\\\"text-muted\\\">Last update </span>\\n          <strong>\\n            <rd-time-ago value=\\\"queryResult.query_result.retrieved_at\\\"></rd-time-ago>\\n          </strong>\\n        </li>\\n      </ul>\\n\\n    </div>\\n    <div class=\\\"t-body\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-lg-12\\\">\\n          <parameters parameters=\\\"query.getParametersDefs()\\\" sync-values=\\\"!query.isNew()\\\" editable=\\\"sourceMode && canEdit\\\"></parameters>\\n          <!-- Query Execution Status -->\\n          <div class=\\\"alert alert-info\\\" ng-show=\\\"queryResult.getStatus() == 'processing'\\\">\\n            Executing query&hellip;\\n            <rd-timer timestamp=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n            <button type=\\\"button\\\" class=\\\"btn btn-warning btn-xs pull-right\\\" ng-disabled=\\\"cancelling\\\"\\n                    ng-click=\\\"cancelExecution()\\\">Cancel\\n            </button>\\n          </div>\\n          <div class=\\\"alert alert-info\\\" ng-show=\\\"queryResult.getStatus() == 'waiting'\\\">\\n            Query in queue&hellip;\\n            <rd-timer timestamp=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n            <button type=\\\"button\\\" class=\\\"btn btn-warning btn-xs pull-right\\\" ng-disabled=\\\"cancelling\\\"\\n                    ng-click=\\\"cancelExecution()\\\">Cancel\\n            </button>\\n          </div>\\n          <div class=\\\"alert alert-danger\\\" ng-show=\\\"queryResult.getError()\\\">Error running query: <strong>{{queryResult.getError()}}</strong>\\n          </div>\\n          <!-- End of Query Execution Status -->\\n\\n          <!-- tabs and data -->\\n          <div ng-if=\\\"showDataset\\\">\\n            <div class=\\\"row p-10\\\" ng-show=\\\"showLog\\\">\\n              <div class=\\\"col-lg-12\\\">\\n                <p>Log Information:</p>\\n                <p ng-repeat=\\\"l in queryResult.getLog()\\\">{{l}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-lg-12\\\">\\n                <ul class=\\\"tab-nav\\\">\\n                  <rd-tab tab-id=\\\"table\\\" name=\\\"Table\\\" base-path=\\\"query.getUrl(sourceMode)\\\"></rd-tab>\\n                  <rd-tab tab-id=\\\"{{vis.id}}\\\" name=\\\"{{vis.name}}\\\" ng-if=\\\"vis.type!='TABLE'\\\" base-path=\\\"query.getUrl(sourceMode)\\\"\\n                          ng-repeat=\\\"vis in query.visualizations\\\">\\n                          <span class=\\\"remove\\\" ng-click=\\\"deleteVisualization($event, vis)\\\"\\n                                ng-show=\\\"canEdit\\\"> &times;</span>\\n                  </rd-tab>\\n                  <li class=\\\"rd-tab\\\"><a ng-click=\\\"openVisualizationEditor()\\\" ng-if=\\\"sourceMode && canEdit\\\">&plus; New Visualization</a></li>\\n                </ul>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-lg-12\\\">\\n                <div ng-show=\\\"selectedTab == 'table'\\\">\\n                  <filters filters=\\\"filters\\\"></filters>\\n                  <grid-renderer query-result=\\\"queryResult\\\" items-per-page=\\\"50\\\"></grid-renderer>\\n                  <!-- the ng-repeat is a lame hack to find the table visualization... -->\\n                  <div class=\\\"bg-ace p-5\\\" ng-repeat=\\\"vis in query.visualizations\\\" ng-if=\\\"vis.type == 'TABLE'\\\">\\n                    <button class=\\\"btn btn-default\\\" ng-if=\\\"!query.isNew()\\\" ng-click=\\\"showEmbedDialog(query, vis)\\\"><i class=\\\"zmdi zmdi-code\\\"></i> Embed</button>\\n                  </div>\\n                </div>\\n                <div ng-if=\\\"selectedTab == vis.id\\\" ng-repeat=\\\"vis in query.visualizations\\\">\\n                  <visualization-renderer visualization=\\\"vis\\\" query-result=\\\"queryResult\\\"></visualization-renderer>\\n                  <div class=\\\"bg-ace p-5\\\">\\n                    <button class=\\\"btn btn-default\\\" ng-click=\\\"openVisualizationEditor(vis)\\\" ng-if=\\\"canEdit\\\">Edit</button>\\n                    <button class=\\\"btn btn-default\\\" ng-click=\\\"showEmbedDialog(query, vis)\\\"><i class=\\\"zmdi zmdi-code\\\"></i> Embed</button>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/queries/query.html\n// module id = 258\n// module chunks = 0","import { pick, any, some, find } from 'underscore';\nimport template from './query.html';\n\nfunction QueryViewCtrl($scope, Events, $route, $routeParams, $location, $window, $q,\n  KeyboardShortcuts, Title, AlertDialog, Notifications, clientConfig, toastr, $uibModal,\n  currentUser, Query, DataSource) {\n  const DEFAULT_TAB = 'table';\n\n  function getQueryResult(maxAge) {\n    if (maxAge === undefined) {\n      maxAge = $location.search().maxAge;\n    }\n\n    if (maxAge === undefined) {\n      maxAge = -1;\n    }\n\n    $scope.showLog = false;\n    $scope.queryResult = $scope.query.getQueryResult(maxAge);\n  }\n\n  function getDataSourceId() {\n    // Try to get the query's data source id\n    let dataSourceId = $scope.query.data_source_id;\n\n    // If there is no source yet, then parse what we have in localStorage\n    //   e.g. `null` -> `NaN`, malformed data -> `NaN`, \"1\" -> 1\n    if (dataSourceId === undefined) {\n      dataSourceId = parseInt(localStorage.lastSelectedDataSourceId, 10);\n    }\n\n    // If we had an invalid value in localStorage (e.g. nothing, deleted source),\n    // then use the first data source\n    const isValidDataSourceId = !isNaN(dataSourceId) && some($scope.dataSources, ds =>\n       ds.id === dataSourceId\n    );\n\n    if (!isValidDataSourceId) {\n      dataSourceId = $scope.dataSources[0].id;\n    }\n\n    // Return our data source id\n    return dataSourceId;\n  }\n\n  function toggleSchemaBrowser(hasSchema) {\n    $scope.hasSchema = hasSchema;\n    $scope.editorSize = hasSchema ? 'col-md-9' : 'col-md-12';\n  }\n\n  function getSchema(refresh = undefined) {\n    DataSource.getSchema({ id: $scope.query.data_source_id, refresh }, (data) => {\n      const hasPrevSchema = refresh ? ($scope.schema && ($scope.schema.length > 0)) : false;\n      const hasSchema = data && (data.length > 0);\n\n      if (hasSchema) {\n        $scope.schema = data;\n        data.forEach((table) => {\n          table.collapsed = true;\n        });\n      } else if (hasPrevSchema) {\n        toastr.error('Schema refresh failed. Please try again later.');\n      }\n\n      toggleSchemaBrowser(hasSchema || hasPrevSchema);\n    });\n  }\n\n  function updateSchema() {\n    toggleSchemaBrowser(false);\n    getSchema();\n  }\n\n  $scope.refreshSchema = () => getSchema(true);\n\n  function updateDataSources(dataSources) {\n    // Filter out data sources the user can't query (or used by current query):\n    $scope.dataSources = dataSources.filter(dataSource =>\n       !dataSource.view_only || dataSource.id === $scope.query.data_source_id\n    );\n\n    if ($scope.dataSources.length === 0) {\n      $scope.noDataSources = true;\n      return;\n    }\n\n    if ($scope.query.isNew()) {\n      $scope.query.data_source_id = getDataSourceId();\n    }\n\n    $scope.dataSource = find(dataSources, ds => ds.id === $scope.query.data_source_id);\n\n    $scope.canCreateQuery = any(dataSources, ds => !ds.view_only);\n\n    updateSchema();\n  }\n\n  $scope.executeQuery = () => {\n    if (!$scope.canExecuteQuery()) {\n      return;\n    }\n\n    if (!$scope.query.query) {\n      return;\n    }\n\n    getQueryResult(0);\n    $scope.lockButton(true);\n    $scope.cancelling = false;\n    Events.record('execute', 'query', $scope.query.id);\n\n    Notifications.getPermissions();\n  };\n\n\n  $scope.currentUser = currentUser;\n  $scope.dataSource = {};\n  $scope.query = $route.current.locals.query;\n  $scope.showPermissionsControl = clientConfig.showPermissionsControl;\n\n  const shortcuts = {\n    'mod+enter': $scope.executeQuery,\n  };\n\n  KeyboardShortcuts.bind(shortcuts);\n\n  $scope.$on('$destroy', () => {\n    KeyboardShortcuts.unbind(shortcuts);\n  });\n\n  Events.record('view', 'query', $scope.query.id);\n  if ($scope.query.hasResult() || $scope.query.paramsRequired()) {\n    getQueryResult();\n  }\n  $scope.queryExecuting = false;\n\n  $scope.isQueryOwner = (currentUser.id === $scope.query.user.id) || currentUser.hasPermission('admin');\n  $scope.canViewSource = currentUser.hasPermission('view_source');\n\n  $scope.canExecuteQuery = () => currentUser.hasPermission('execute_query') && !$scope.dataSource.view_only;\n\n  $scope.canScheduleQuery = currentUser.hasPermission('schedule_query');\n\n  if ($route.current.locals.dataSources) {\n    $scope.dataSources = $route.current.locals.dataSources;\n    updateDataSources($route.current.locals.dataSources);\n  } else {\n    $scope.dataSources = DataSource.query(updateDataSources);\n  }\n\n  // in view mode, latest dataset is always visible\n  // source mode changes this behavior\n  $scope.showDataset = true;\n  $scope.showLog = false;\n\n  $scope.lockButton = (lock) => {\n    $scope.queryExecuting = lock;\n  };\n\n  $scope.showApiKey = () => {\n    $window.alert(`API Key for this query:\\n${$scope.query.api_key}`);\n  };\n\n  $scope.saveQuery = (customOptions, data) => {\n    let request = data;\n\n    if (request) {\n      // Don't save new query with partial data\n      if ($scope.query.isNew()) {\n        return $q.reject();\n      }\n      request.id = $scope.query.id;\n      request.version = $scope.query.version;\n    } else {\n      request = pick($scope.query, ['schedule', 'query', 'id', 'description', 'name', 'data_source_id', 'options', 'latest_query_data_id', 'version', 'is_draft']);\n    }\n\n    const options = Object.assign({}, {\n      successMessage: 'Query saved',\n      errorMessage: 'Query could not be saved',\n    }, customOptions);\n\n    return Query.save(request, (updatedQuery) => {\n      toastr.success(options.successMessage);\n      $scope.query.version = updatedQuery.version;\n    }, (error) => {\n      if (error.status === 409) {\n        toastr.error('It seems like the query has been modified by another user. ' +\n          'Please copy/backup your changes and reload this page.', { autoDismiss: false });\n      } else {\n        toastr.error(options.errorMessage);\n      }\n    }).$promise;\n  };\n\n  $scope.togglePublished = () => {\n    Events.record('toggle_published', 'query', $scope.query.id);\n    $scope.query.is_draft = !$scope.query.is_draft;\n    $scope.saveQuery(undefined, { is_draft: $scope.query.is_draft });\n  };\n\n  $scope.saveDescription = () => {\n    Events.record('edit_description', 'query', $scope.query.id);\n    $scope.saveQuery(undefined, { description: $scope.query.description });\n  };\n\n  $scope.saveName = () => {\n    Events.record('edit_name', 'query', $scope.query.id);\n    $scope.saveQuery(undefined, { name: $scope.query.name });\n  };\n\n  $scope.cancelExecution = () => {\n    $scope.cancelling = true;\n    $scope.queryResult.cancelExecution();\n    Events.record('cancel_execute', 'query', $scope.query.id);\n  };\n\n  $scope.archiveQuery = () => {\n    function archive() {\n      Query.delete({ id: $scope.query.id }, () => {\n        $scope.query.is_archived = true;\n        $scope.query.schedule = null;\n      }, () => {\n        toastr.error('Query could not be archived.');\n      });\n    }\n\n    const title = 'Archive Query';\n    const message = 'Are you sure you want to archive this query?<br/> All alerts and dashboard widgets created with its visualizations will be deleted.';\n    const confirm = { class: 'btn-warning', title: 'Archive' };\n\n    AlertDialog.open(title, message, confirm).then(archive);\n  };\n\n  $scope.updateDataSource = () => {\n    Events.record('update_data_source', 'query', $scope.query.id);\n    localStorage.lastSelectedDataSourceId = $scope.query.data_source_id;\n\n    $scope.query.latest_query_data = null;\n    $scope.query.latest_query_data_id = null;\n\n    if ($scope.query.id) {\n      Query.save({\n        id: $scope.query.id,\n        data_source_id: $scope.query.data_source_id,\n        latest_query_data_id: null,\n      });\n    }\n\n    updateSchema();\n    $scope.dataSource = find($scope.dataSources, ds => ds.id === $scope.query.data_source_id);\n    $scope.executeQuery();\n  };\n\n  $scope.setVisualizationTab = (visualization) => {\n    $scope.selectedTab = visualization.id;\n    $location.hash(visualization.id);\n  };\n\n  $scope.$watch('query.name', () => {\n    Title.set($scope.query.name);\n  });\n\n  $scope.$watch('queryResult && queryResult.getData()', (data) => {\n    if (!data) {\n      return;\n    }\n\n    $scope.filters = $scope.queryResult.getFilters();\n  });\n\n  $scope.$watch('queryResult && queryResult.getStatus()', (status) => {\n    if (!status) {\n      return;\n    }\n\n    if (status === 'done') {\n      $scope.query.latest_query_data_id = $scope.queryResult.getId();\n      $scope.query.queryResult = $scope.queryResult;\n\n      Notifications.showNotification('Redash', `${$scope.query.name} updated.`);\n    } else if (status === 'failed') {\n      Notifications.showNotification('Redash', `${$scope.query.name} failed to run: ${$scope.queryResult.getError()}`);\n    }\n\n    if (status === 'done' || status === 'failed') {\n      $scope.lockButton(false);\n    }\n\n    if ($scope.queryResult.getLog() != null) {\n      $scope.showLog = true;\n    }\n  });\n\n  $scope.openVisualizationEditor = (visualization) => {\n    function openModal() {\n      $uibModal.open({\n        windowClass: 'modal-xl',\n        component: 'editVisualizationDialog',\n        resolve: {\n          query: $scope.query,\n          visualization,\n          queryResult: $scope.queryResult,\n          onNewSuccess: () => $scope.setVisualizationTab,\n        },\n      });\n    }\n\n    if ($scope.query.isNew()) {\n      $scope.saveQuery().then((query) => {\n        // Because we have a path change, we need to \"signal\" the next page to\n        // open the visualization editor.\n        $location.path(query.getSourceLink()).hash('add');\n      });\n    } else {\n      openModal();\n    }\n  };\n\n  if ($location.hash() === 'add') {\n    $location.hash(null);\n    $scope.openVisualizationEditor();\n  }\n\n  $scope.openScheduleForm = () => {\n    if (!$scope.isQueryOwner || !$scope.canScheduleQuery) {\n      return;\n    }\n\n    $uibModal.open({\n      component: 'scheduleDialog',\n      size: 'sm',\n      resolve: {\n        query: $scope.query,\n        saveQuery: () => $scope.saveQuery,\n      },\n    });\n  };\n\n  $scope.showEmbedDialog = (query, visualization) => {\n    $uibModal.open({\n      component: 'embedCodeDialog',\n      resolve: {\n        query,\n        visualization,\n      },\n    });\n  };\n\n  $scope.$watch(() =>\n     $location.hash()\n  , (hash) => {\n    $scope.selectedTab = hash || DEFAULT_TAB;\n  });\n\n  $scope.showManagePermissionsModal = () => {\n    $uibModal.open({\n      component: 'permissionsEditor',\n      resolve: {\n        aclUrl: { url: `api/queries/${$routeParams.queryId}/acl` },\n      },\n    });\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.controller('QueryViewCtrl', QueryViewCtrl);\n\n  return {\n    '/queries/:queryId': {\n      template,\n      controller: 'QueryViewCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: (Query, $route) => {\n          'ngInject';\n\n          return Query.get({ id: $route.current.params.queryId }).$promise;\n        },\n      },\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/view.js","import moment from 'moment';\n\nfunction queryResultLink() {\n  return {\n    restrict: 'A',\n    link(scope, element, attrs) {\n      const fileType = attrs.fileType ? attrs.fileType : 'csv';\n      scope.$watch('queryResult && queryResult.getData()', (data) => {\n        if (!data) {\n          return;\n        }\n\n        if (scope.queryResult.getId() == null) {\n          element.attr('href', '');\n        } else {\n          element.attr('href', `api/queries/${scope.query.id}/results/${scope.queryResult.getId()}.${fileType}${scope.embed ? `?api_key=${scope.apiKey}` : ''}`);\n          element.attr('download', `${scope.query.name.replace(' ', '_') + moment(scope.queryResult.getUpdatedAt()).format('_YYYY_MM_DD')}.${fileType}`);\n        }\n      });\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('queryResultLink', queryResultLink);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/query-results-link.js","import 'brace';\nimport 'brace/mode/python';\nimport 'brace/mode/sql';\nimport 'brace/mode/json';\nimport 'brace/ext/language_tools';\nimport { map } from 'underscore';\n\n// By default Ace will try to load snippet files for the different modes and fail.\n// We don't need them, so we use these placeholders until we define our own.\nfunction defineDummySnippets(mode) {\n  window.ace.define(`ace/snippets/${mode}`, ['require', 'exports', 'module'], (require, exports) => {\n    exports.snippetText = '';\n    exports.scope = mode;\n  });\n}\n\ndefineDummySnippets('python');\ndefineDummySnippets('sql');\ndefineDummySnippets('json');\n\nfunction queryEditor(QuerySnippet) {\n  return {\n    restrict: 'E',\n    scope: {\n      query: '=',\n      schema: '=',\n      syntax: '=',\n    },\n    template: '<div ui-ace=\"editorOptions\" ng-model=\"query.query\"></div>',\n    link: {\n      pre($scope) {\n        $scope.syntax = $scope.syntax || 'sql';\n\n        $scope.editorOptions = {\n          mode: 'json',\n          // require: ['ace/ext/language_tools'],\n          advanced: {\n            behavioursEnabled: true,\n            enableSnippets: true,\n            enableBasicAutocompletion: true,\n            enableLiveAutocompletion: true,\n            autoScrollEditorIntoView: true,\n          },\n          onLoad(editor) {\n            // Release Cmd/Ctrl+L to the browser\n            editor.commands.bindKey('Cmd+L', null);\n            editor.commands.bindKey('Ctrl+L', null);\n\n            QuerySnippet.query((snippets) => {\n              window.ace.acequire(['ace/snippets'], (snippetsModule) => {\n                const snippetManager = snippetsModule.snippetManager;\n                const m = {\n                  snippetText: '',\n                };\n                m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n                snippets.forEach((snippet) => {\n                  m.snippets.push(snippet.getSnippet());\n                });\n\n                snippetManager.register(m.snippets || [], m.scope);\n              });\n            });\n\n            editor.$blockScrolling = Infinity;\n            editor.getSession().setUseWrapMode(true);\n            editor.setShowPrintMargin(false);\n\n            $scope.$watch('syntax', (syntax) => {\n              const newMode = `ace/mode/${syntax}`;\n              editor.getSession().setMode(newMode);\n            });\n\n            $scope.$watch('schema', (newSchema, oldSchema) => {\n              if (newSchema !== oldSchema) {\n                const tokensCount =\n                  newSchema.reduce((totalLength, table) => totalLength + table.columns.length, 0);\n                // If there are too many tokens we disable live autocomplete,\n                // as it makes typing slower.\n                if (tokensCount > 5000) {\n                  editor.setOption('enableLiveAutocompletion', false);\n                } else {\n                  editor.setOption('enableLiveAutocompletion', true);\n                }\n              }\n            });\n\n            $scope.$parent.$on('angular-resizable.resizing', () => {\n              editor.resize();\n            });\n\n            editor.focus();\n          },\n        };\n\n\n        const schemaCompleter = {\n          getCompletions(state, session, pos, prefix, callback) {\n            if (prefix.length === 0 || !$scope.schema) {\n              callback(null, []);\n              return;\n            }\n\n            if (!$scope.schema.keywords) {\n              const keywords = {};\n\n              $scope.schema.forEach((table) => {\n                keywords[table.name] = 'Table';\n\n                table.columns.forEach((c) => {\n                  keywords[c] = 'Column';\n                  keywords[`${table.name}.${c}`] = 'Column';\n                });\n              });\n\n              $scope.schema.keywords = map(keywords, (v, k) =>\n                 ({\n                   name: k,\n                   value: k,\n                   score: 0,\n                   meta: v,\n                 })\n              );\n            }\n            callback(null, $scope.schema.keywords);\n          },\n        };\n\n\n        window.ace.acequire(['ace/ext/language_tools'], (langTools) => {\n          langTools.addCompleter(schemaCompleter);\n        });\n      },\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('queryEditor', queryEditor);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/query-editor.js","import template from './schema-browser.html';\n\nfunction SchemaBrowserCtrl($scope) {\n  'ngInject';\n\n  this.showTable = (table) => {\n    table.collapsed = !table.collapsed;\n    $scope.$broadcast('vsRepeatTrigger');\n  };\n\n  this.getSize = (table) => {\n    let size = 18;\n\n    if (!table.collapsed) {\n      size += 18 * table.columns.length;\n    }\n\n    return size;\n  };\n}\n\nconst SchemaBrowser = {\n  bindings: {\n    schema: '<',\n    onRefresh: '&',\n  },\n  controller: SchemaBrowserCtrl,\n  template,\n};\n\nexport default function (ngModule) {\n  ngModule.component('schemaBrowser', SchemaBrowser);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/schema-browser.js","module.exports = \"<div class=\\\"schema-container\\\">\\n  <div class=\\\"schema-control\\\">\\n    <input type=\\\"text\\\" placeholder=\\\"Search schema...\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.schemaFilter\\\">\\n    <button class=\\\"btn btn-default\\\"\\n            title=\\\"Refresh Schema\\\"\\n            ng-click=\\\"$ctrl.onRefresh()\\\">\\n      <span class=\\\"zmdi zmdi-refresh\\\"></span>\\n    </button>\\n  </div>\\n\\n  <div class=\\\"schema-browser\\\" vs-repeat vs-size=\\\"$ctrl.getSize(table)\\\">\\n    <div ng-repeat=\\\"table in $ctrl.schema | filter:$ctrl.schemaFilter track by table.name\\\">\\n      <div class=\\\"table-name\\\" ng-click=\\\"$ctrl.showTable(table)\\\">\\n        <i class=\\\"fa fa-table\\\"></i>\\n        <strong>\\n          <span title=\\\"{{table.name}}\\\">{{table.name}}</span>\\n          <span ng-if=\\\"table.size !== undefined\\\"> ({{table.size}})</span>\\n        </strong>\\n      </div>\\n      <div uib-collapse=\\\"table.collapsed\\\">\\n        <div ng-repeat=\\\"column in table.columns track by column\\\" style=\\\"padding-left:16px;\\\">{{column}}</div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/queries/schema-browser.html\n// module id = 268\n// module chunks = 0","import template from './embed-code-dialog.html';\n\nconst EmbedCodeDialog = {\n  controller(clientConfig) {\n    'ngInject';\n\n    this.query = this.resolve.query;\n    this.visualization = this.resolve.visualization;\n\n    this.embedUrl = `${clientConfig.basePath}embed/query/${this.query.id}/visualization/${this.visualization.id}?api_key=${this.query.api_key}`;\n    if (window.snapshotUrlBuilder) {\n      this.snapshotUrl = window.snapshotUrlBuilder(this.query, this.visualization);\n    }\n  },\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  template,\n};\n\nexport default function (ngModule) {\n  ngModule.component('embedCodeDialog', EmbedCodeDialog);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/embed-code-dialog.js","module.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Embed Code</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <h5>IFrame Embed</h5>\\n    <div>\\n      <code>&lt;iframe src=\\\"{{ $ctrl.embedUrl }}\\\" width=\\\"720\\\" height=\\\"391\\\"&gt;&lt;/iframe&gt;</code>\\n    </div>\\n    <span class=\\\"text-muted\\\">(height should be adjusted)</span>\\n    <div ng-if=\\\"snapshotUrl\\\">\\n      <h5>Image Embed</h5>\\n      <div>\\n        <code style=\\\"overflow-wrap:break-word;\\\">{{snapshotUrl}}</code>\\n      </div>\\n    </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/queries/embed-code-dialog.html\n// module id = 270\n// module chunks = 0","import moment from 'moment';\nimport { map, range, partial } from 'underscore';\n\nimport template from './schedule-dialog.html';\n\nfunction padWithZeros(size, v) {\n  let str = String(v);\n  if (str.length < size) {\n    str = `0${str}`;\n  }\n  return str;\n}\n\nfunction queryTimePicker() {\n  return {\n    restrict: 'E',\n    scope: {\n      refreshType: '=',\n      query: '=',\n      saveQuery: '=',\n    },\n    template: `\n      <select ng-disabled=\"refreshType != 'daily'\" ng-model=\"hour\" ng-change=\"updateSchedule()\" ng-options=\"c as c for c in hourOptions\"></select> :\n      <select ng-disabled=\"refreshType != 'daily'\" ng-model=\"minute\" ng-change=\"updateSchedule()\" ng-options=\"c as c for c in minuteOptions\"></select>\n    `,\n    link($scope) {\n      $scope.hourOptions = map(range(0, 24), partial(padWithZeros, 2));\n      $scope.minuteOptions = map(range(0, 60, 5), partial(padWithZeros, 2));\n\n      if ($scope.query.hasDailySchedule()) {\n        const parts = $scope.query.scheduleInLocalTime().split(':');\n        $scope.minute = parts[1];\n        $scope.hour = parts[0];\n      } else {\n        $scope.minute = '15';\n        $scope.hour = '00';\n      }\n\n      $scope.updateSchedule = () => {\n        const newSchedule = moment().hour($scope.hour)\n                                    .minute($scope.minute)\n                                    .utc()\n                                    .format('HH:mm');\n\n        if (newSchedule !== $scope.query.schedule) {\n          $scope.query.schedule = newSchedule;\n          $scope.saveQuery();\n        }\n      };\n\n      $scope.$watch('refreshType', () => {\n        if ($scope.refreshType === 'daily') {\n          $scope.updateSchedule();\n        }\n      });\n    },\n  };\n}\n\nfunction queryRefreshSelect() {\n  return {\n    restrict: 'E',\n    scope: {\n      refreshType: '=',\n      query: '=',\n      saveQuery: '=',\n    },\n    template: `<select\n                ng-disabled=\"refreshType != 'periodic'\"\n                ng-model=\"query.schedule\"\n                ng-change=\"saveQuery()\"\n                ng-options=\"c.value as c.name for c in refreshOptions\">\n                <option value=\"\">No Refresh</option>\n                </select>`,\n    link($scope) {\n      $scope.refreshOptions = [\n        {\n          value: '60',\n          name: 'Every minute',\n        },\n      ];\n\n      [5, 10, 15, 30].forEach((i) => {\n        $scope.refreshOptions.push({\n          value: String(i * 60),\n          name: `Every ${i} minutes`,\n        });\n      });\n\n      range(1, 13).forEach((i) => {\n        $scope.refreshOptions.push({\n          value: String(i * 3600),\n          name: `Every ${i}h`,\n        });\n      });\n\n      $scope.refreshOptions.push({\n        value: String(24 * 3600),\n        name: 'Every 24h',\n      });\n      $scope.refreshOptions.push({\n        value: String(7 * 24 * 3600),\n        name: 'Every 7 days',\n      });\n      $scope.refreshOptions.push({\n        value: String(14 * 24 * 3600),\n        name: 'Every 14 days',\n      });\n      $scope.refreshOptions.push({\n        value: String(30 * 24 * 3600),\n        name: 'Every 30 days',\n      });\n\n      $scope.$watch('refreshType', () => {\n        if ($scope.refreshType === 'periodic') {\n          if ($scope.query.hasDailySchedule()) {\n            $scope.query.schedule = null;\n            $scope.saveQuery();\n          }\n        }\n      });\n    },\n\n  };\n}\n\nconst ScheduleForm = {\n  controller() {\n    this.query = this.resolve.query;\n    this.saveQuery = this.resolve.saveQuery;\n\n    if (this.query.hasDailySchedule()) {\n      this.refreshType = 'daily';\n    } else {\n      this.refreshType = 'periodic';\n    }\n  },\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  template,\n};\n\nexport default function (ngModule) {\n  ngModule.directive('queryTimePicker', queryTimePicker);\n  ngModule.directive('queryRefreshSelect', queryRefreshSelect);\n  ngModule.component('scheduleDialog', ScheduleForm);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/schedule-dialog.js","module.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Refresh Schedule</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <div class=\\\"radio\\\">\\n        <label>\\n            <input type=\\\"radio\\\" value=\\\"periodic\\\" ng-model=\\\"$ctrl.refreshType\\\">\\n            <query-refresh-select refresh-type=\\\"$ctrl.refreshType\\\" query=\\\"$ctrl.query\\\" save-query=\\\"$ctrl.saveQuery\\\"></query-refresh-select>\\n        </label>\\n    </div>\\n    <div class=\\\"radio\\\">\\n        <label>\\n            <input type=\\\"radio\\\" value=\\\"daily\\\" ng-model=\\\"$ctrl.refreshType\\\">\\n            <query-time-picker refresh-type=\\\"$ctrl.refreshType\\\" query=\\\"$ctrl.query\\\" save-query=\\\"$ctrl.saveQuery\\\"></query-time-picker>\\n        </label>\\n    </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/queries/schedule-dialog.html\n// module id = 272\n// module chunks = 0","function alertUnsavedChanges($window) {\n  return {\n    restrict: 'E',\n    replace: true,\n    scope: {\n      isDirty: '=',\n    },\n    link($scope) {\n      const unloadMessage = 'You will lose your changes if you leave';\n      const confirmMessage = `${unloadMessage}\\n\\nAre you sure you want to leave this page?`;\n      // store original handler (if any)\n      const _onbeforeunload = $window.onbeforeunload;\n\n      $window.onbeforeunload = function onbeforeunload() {\n        return $scope.isDirty ? unloadMessage : null;\n      };\n\n      $scope.$on('$locationChangeStart', (event, next, current) => {\n        if (next.split('?')[0] === current.split('?')[0] || next.split('#')[0] === current.split('#')[0]) {\n          return;\n        }\n\n        if ($scope.isDirty && !$window.confirm(confirmMessage)) {\n          event.preventDefault();\n        }\n      });\n\n      $scope.$on('$destroy', () => {\n        $window.onbeforeunload = _onbeforeunload;\n      });\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('alertUnsavedChanges', alertUnsavedChanges);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/alert-unsaved-changes.js","import moment from 'moment';\nimport { isString } from 'underscore';\n\nimport { Paginator } from '../../utils';\nimport template from './queries-search-results-page.html';\n\nfunction QuerySearchCtrl($location, $filter, currentUser, Events, Query) {\n  this.term = $location.search().q;\n  this.paginator = new Paginator([], { itemsPerPage: 20 });\n\n  Query.search({ q: this.term, include_drafts: true }, (results) => {\n    const queries = results.map((query) => {\n      query.created_at = moment(query.created_at);\n      return query;\n    });\n\n    this.paginator.updateRows(queries);\n  });\n\n  this.search = () => {\n    if (!isString(this.term) || this.term.trim() === '') {\n      this.paginator.updateRows([]);\n    } else {\n      $location.search({ q: this.term });\n    }\n  };\n\n  Events.record('search', 'query', '', { term: this.term });\n}\n\nexport default function (ngModule) {\n  ngModule.component('queriesSearchResultsPage', {\n    template,\n    controller: QuerySearchCtrl,\n  });\n\n  return {\n    '/queries/search': {\n      template: '<queries-search-results-page></queries-search-results-page>',\n      reloadOnSearch: true,\n      title: 'Queries Search',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/queries-search-results-page.js","module.exports = \"<div class=\\\"container\\\">\\n    <div class=\\\"bg-white p-5 m-t-10 m-b-10\\\">\\n      <form class=\\\"form-inline\\\" role=\\\"form\\\" ng-submit=\\\"$ctrl.search()\\\">\\n          <div class=\\\"form-group\\\">\\n              <input class=\\\"form-control\\\" placeholder=\\\"Search...\\\" ng-model=\\\"$ctrl.term\\\" autofocus>\\n          </div>\\n          <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">\\n              <span class=\\\"zmdi zmdi-search\\\"></span>\\n          </button>\\n      </form>\\n    </div>\\n    <div class=\\\"bg-white\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th>Name</th>\\n            <th>Created By</th>\\n            <th>Created At</th>\\n            <th>Update Schedule</th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n          <tr ng-repeat=\\\"query in $ctrl.paginator.getPageRows()\\\">\\n            <td><a href=\\\"queries/{{query.id}}\\\">{{query.name}}</a> <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span></td>\\n            <td>{{query.user.name}}</td>\\n            <td>{{query.created_at | dateTime}}</td>\\n            <td>{{query.schedule | scheduleHumanize}}</td>\\n          </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.paginator\\\"></paginator>\\n    </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/queries/queries-search-results-page.html\n// module id = 275\n// module chunks = 0","import { find } from 'underscore';\nimport template from './visualization-embed.html';\nimport logoUrl from '../../assets/images/redash_icon_small.png';\n\nconst VisualizationEmbed = {\n  template,\n  bindings: {\n    data: '<',\n  },\n  controller($routeParams, Query, QueryResult) {\n    'ngInject';\n\n    document.querySelector('body').classList.add('headless');\n    const visualizationId = parseInt($routeParams.visualizationId, 10);\n    this.showQueryDescription = $routeParams.showDescription;\n    this.apiKey = $routeParams.api_key;\n    this.logoUrl = logoUrl;\n    this.query = new Query(this.data[0]);\n    this.queryResult = new QueryResult(this.data[1]);\n    this.visualization =\n      find(this.query.visualizations, visualization => visualization.id === visualizationId);\n  },\n};\n\nexport default function (ngModule) {\n  ngModule.component('visualizationEmbed', VisualizationEmbed);\n\n  function session($http, $route, Auth) {\n    'ngInject';\n\n    const apiKey = $route.current.params.api_key;\n    Auth.setApiKey(apiKey);\n    return Auth.loadConfig();\n  }\n\n  function loadData($http, $route, $q, Auth) {\n    return session($http, $route, Auth).then(() => {\n      const queryId = $route.current.params.queryId;\n      const query = $http.get(`/api/queries/${queryId}`).then(response => response.data);\n      const queryResult = $http.get(`/api/queries/${queryId}/results.json`).then(response => response.data);\n      return $q.all([query, queryResult]);\n    });\n  }\n\n  ngModule.config(($routeProvider) => {\n    $routeProvider.when('/embed/query/:queryId/visualization/:visualizationId', {\n      template: '<visualization-embed data=\"$resolve.data\"></visualization-embed>',\n      resolve: {\n        data: loadData,\n      },\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/visualization-embed.js","module.exports = \"<div class=\\\"tile m-10\\\">\\n  <div class=\\\"t-heading p-10\\\">\\n    <h3 class=\\\"th-title\\\">\\n      <p>\\n        <img src=\\\"{{$ctrl.logoUrl}}\\\" style=\\\"height: 24px;\\\"/>\\n        {{$ctrl.query.name}}\\n        <small><visualization-name visualization=\\\"$ctrl.visualization\\\"/></small>\\n      </p>\\n      <small ng-if=\\\"$ctrl.showQueryDescription\\\">\\n        <div class=\\\"text-muted\\\" ng-bind-html=\\\"$ctrl.query.description | markdown\\\"></div>\\n      </small>\\n    </h3>\\n  </div>\\n\\n  <visualization-renderer visualization=\\\"$ctrl.visualization\\\" query-result=\\\"$ctrl.queryResult\\\" class=\\\"t-body\\\">\\n  </visualization-renderer>\\n\\n  <div class=\\\"bg-ace clearfix p-10\\\">\\n    <div class=\\\"col-sm-6\\\">\\n      <span class=\\\"label label-default hidden-print\\\">Updated: <span am-time-ago=\\\"$ctrl.queryResult.getUpdatedAt()\\\"></span></span>\\n      <span class=\\\"label label-default visible-print\\\">Updated: {{$ctrl.queryResult.getUpdatedAt() | dateTime}}</span>\\n    </div>\\n    <div class=\\\"col-sm-6 text-right hidden-print\\\">\\n      <a class=\\\"btn btn-default btn-xs\\\" ng-href=\\\"queries/{{$ctrl.query.id}}#{{$ctrl.visualization.id}}\\\" target=\\\"_blank\\\" tooltip=\\\"Open in Redash\\\">\\n        <span class=\\\"zmdi zmdi-link\\\"></span>\\n      </a>\\n\\n      <div class=\\\"btn-group\\\" uib-dropdown>\\n        <button type=\\\"button\\\" class=\\\"btn btn-default btn-xs dropdown-toggle\\\" aria-haspopup=\\\"true\\\" uib-dropdown-toggle\\n                aria-expanded=\\\"false\\\">\\n          Download Dataset <span class=\\\"caret\\\"></span>\\n        </button>\\n        <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n          <li>\\n            <a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'csv', $ctrl.apiKey)}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'csv')}}\\\" target=\\\"_self\\\">\\n              <span class=\\\"fa fa-file-o\\\"></span> Download as CSV File\\n            </a>\\n          </li>\\n          <li>\\n            <a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'xlsx', $ctrl.apiKey)}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'xlsx')}}\\\"  target=\\\"_self\\\">\\n              <span class=\\\"fa fa-file-excel-o\\\"></span> Download as Excel File\\n            </a>\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/queries/visualization-embed.html\n// module id = 277\n// module chunks = 0","export { default as appHeader } from './app-header';\nexport { default as footer } from './footer';\nexport { default as pageHeader } from './page-header';\nexport { default as tabNav } from './tab-nav';\nexport { default as emailSettingsWarning } from './email-settings-warning';\nexport { default as rdTab } from './rd-tab';\nexport { default as queryLink } from './query-link';\nexport { default as parameters } from './parameters';\nexport { default as permissionsEditor } from './permissions-editor';\nexport { default as dynamicTable } from './dynamic-table';\nexport { default as paginator } from './paginator';\nexport { default as settingsScreen } from './settings-screen';\nexport { default as errorMessages } from './error-messages';\nexport { default as editInPlace } from './edit-in-place';\nexport { default as dynamicForm } from './dynamic-form';\nexport { default as rdTimer } from './rd-timer';\nexport { default as rdTimeAgo } from './rd-time-ago';\nexport { default as overlay } from './overlay';\nexport { default as routeStatus } from './route-status';\nexport { default as filters } from './filters';\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/index.js","import debug from 'debug';\n\nimport template from './app-header.html';\nimport logoUrl from '../../assets/images/redash_icon_small.png';\nimport './app-header.css';\n\nconst logger = debug('redash:appHeader');\n\nfunction controller($rootScope, $location, $uibModal, Auth, currentUser, Dashboard) {\n  // TODO: logoUrl should come from clientconfig\n  this.logoUrl = logoUrl;\n  this.currentUser = currentUser;\n  this.showQueriesMenu = currentUser.hasPermission('view_query');\n  this.showNewQueryMenu = currentUser.hasPermission('create_query');\n  this.showSettingsMenu = currentUser.hasPermission('list_users');\n  this.showDashboardsMenu = currentUser.hasPermission('list_dashboards');\n\n  this.reloadDashboards = () => {\n    logger('Reloading dashboards.');\n    this.dashboards = Dashboard.recent();\n  };\n\n  this.reloadDashboards();\n\n  $rootScope.$on('reloadDashboards', this.reloadDashboards);\n\n  this.newDashboard = () => {\n    $uibModal.open({\n      component: 'editDashboardDialog',\n      resolve: {\n        dashboard: () => ({ name: null, layout: null }),\n      },\n    });\n  };\n\n  this.searchQueries = () => {\n    $location.path('/queries/search').search({ q: this.term });\n  };\n\n  this.logout = () => {\n    Auth.logout();\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.component('appHeader', {\n    template,\n    controller,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/app-header/index.js","module.exports = \"<nav class=\\\"navbar navbar-inverse navbar-fixed-top app-header\\\" role=\\\"navigation\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"navbar-header\\\">\\n      <button type=\\\"button\\\" class=\\\"navbar-toggle\\\" ng-click=\\\"isNavOpen = !isNavOpen\\\">\\n        <span class=\\\"sr-only\\\">Toggle navigation</span>\\n        <span class=\\\"icon-bar\\\"></span>\\n        <span class=\\\"icon-bar\\\"></span>\\n        <span class=\\\"icon-bar\\\"></span>\\n      </button>\\n      <a class=\\\"navbar-brand\\\" href=\\\"/\\\"><img ng-src=\\\"{{$ctrl.logoUrl}}\\\"/></a>\\n    </div>\\n    <div class=\\\"collapse navbar-collapse\\\" uib-collapse=\\\"!isNavOpen\\\">\\n      <ul class=\\\"nav navbar-nav\\\">\\n        <li class=\\\"dropdown\\\" ng-show=\\\"$ctrl.showDashboardsMenu\\\" uib-dropdown>\\n          <a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle title=\\\"Dashboards\\\">\\n            <span class=\\\"visible-xs visible-md visible-lg\\\">Dashboards <b class=\\\"caret\\\"></b></span>\\n            <span class=\\\"visible-sm\\\"><i class=\\\"zmdi zmdi-view-dashboard\\\"></i> <b class=\\\"caret\\\"></b></span>\\n          </a>\\n          <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n            <li><a ng-show=\\\"$ctrl.currentUser.hasPermission('create_dashboard')\\\" ng-click=\\\"$ctrl.newDashboard()\\\">New Dashboard</a></li>\\n            <li><a href=\\\"dashboards\\\">Dashboards</a></li>\\n            <li class=\\\"divider\\\" ng-if=\\\"$ctrl.dashboards | notEmpty\\\"></li>\\n            <li ng-repeat=\\\"dashboard in $ctrl.dashboards\\\">\\n              <a href=\\\"dashboard/{{dashboard.slug}}\\\" ng-bind=\\\"dashboard.name\\\"></a>\\n            </li>\\n          </ul>\\n        </li>\\n        <li class=\\\"dropdown\\\" ng-show=\\\"$ctrl.showQueriesMenu\\\" uib-dropdown>\\n          <a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle>Queries <b class=\\\"caret\\\"></b></a>\\n          <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n            <li ng-show=\\\"$ctrl.showNewQueryMenu\\\"><a href=\\\"queries/new\\\">New Query</a></li>\\n            <li><a href=\\\"queries\\\">Queries</a></li>\\n          </ul>\\n        </li>\\n        <li>\\n          <a href=\\\"alerts\\\">Alerts</a>\\n        </li>\\n      </ul>\\n      <form class=\\\"navbar-form navbar-left\\\" role=\\\"search\\\" ng-submit=\\\"$ctrl.searchQueries()\\\">\\n        <div class=\\\"input-group menu-search\\\">\\n          <input type=\\\"text\\\" ng-model=\\\"$ctrl.term\\\" class=\\\"form-control\\\" placeholder=\\\"Search queries...\\\">\\n          <span class=\\\"input-group-btn\\\">\\n            <button type=\\\"submit\\\" class=\\\"btn btn-default\\\"><span class=\\\"zmdi zmdi-search\\\"></span></button>\\n          </span>\\n        </div>\\n      </form>\\n      <ul class=\\\"nav navbar-nav navbar-right\\\">\\n        <li ng-show=\\\"$ctrl.currentUser.isAdmin\\\">\\n          <a href=\\\"data_sources\\\" title=\\\"Data Sources\\\"><i class=\\\"fa fa-database\\\"></i></a>\\n        </li>\\n        <li ng-show=\\\"$ctrl.showSettingsMenu\\\">\\n          <a href=\\\"users\\\" title=\\\"Settings\\\"><i class=\\\"fa fa-cog\\\"></i></a>\\n        </li>\\n        <li class=\\\"dropdown\\\" uib-dropdown>\\n          <a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle><span ng-bind=\\\"$ctrl.currentUser.name\\\"></span> <span\\n            class=\\\"caret\\\"></span></a>\\n          <ul class=\\\"dropdown-menu\\\" dropdown-menu>\\n            <li style=\\\"width:300px\\\">\\n              <a ng-href=\\\"users/{{$ctrl.currentUser.id}}\\\">\\n                <div class=\\\"row\\\">\\n                  <div class=\\\"col-sm-2\\\">\\n                    <img ng-src=\\\"{{$ctrl.currentUser.gravatar_url}}\\\" size=\\\"40px\\\" class=\\\"img-circle\\\"/>\\n                  </div>\\n                  <div class=\\\"col-sm-10\\\">\\n                    <p><strong>{{$ctrl.currentUser.name}}</strong></p>\\n                  </div>\\n                </div>\\n              </a>\\n            </li>\\n            <li class=\\\"divider\\\" ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\">\\n            <li ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\"><a href=\\\"admin/status\\\">System Status</a></li>\\n            <li class=\\\"divider\\\">\\n            </li>\\n            <li>\\n              <a ng-click=\\\"$ctrl.logout()\\\">Log out</a>\\n            </li>\\n          </ul>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</nav>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/app-header/app-header.html\n// module id = 280\n// module chunks = 0","import template from './footer.html';\n\nfunction controller(clientConfig, currentUser) {\n  this.version = clientConfig.version;\n  this.newVersionAvailable = clientConfig.newVersionAvailable && currentUser.isAdmin;\n}\n\nexport default function (ngModule) {\n  ngModule.component('footer', {\n    template,\n    controller,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/footer/index.js","module.exports = \"<div id=\\\"footer\\\">\\n    <a href=\\\"http://redash.io\\\">Redash</a> <span ng-bind=\\\"$ctrl.version\\\"></span> <small ng-if=\\\"$ctrl.newVersionAvailable\\\" ng-cloak class=\\\"ng-cloak\\\"><a href=\\\"https://version.redash.io/\\\">(New Redash version available)</a></small>\\n\\n    <ul class=\\\"f-menu\\\">\\n        <li><a href=\\\"https://redash.io/help/\\\">Documentation</a></li>\\n        <li><a href=\\\"http://github.com/getredash/redash\\\">Contribute</a></li>\\n    </ul>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/footer/footer.html\n// module id = 283\n// module chunks = 0","import template from './page-header.html';\n\nfunction controller() {\n\n}\n\nexport default function (ngModule) {\n  ngModule.component('pageHeader', {\n    template,\n    controller,\n    transclude: true,\n    bindings: {\n      title: '@',\n    },\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/page-header/index.js","module.exports = \"<div class=\\\"row bg-white p-10 p-l-15 p-r-15 m-b-10\\\">\\n  <div class=\\\"col-sm-9\\\">\\n    <h3>{{$ctrl.title}}</h3>\\n  </div>\\n  <div class=\\\"col-sm-3 text-right\\\">\\n    <h3 ng-transclude>\\n    </h3>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/page-header/page-header.html\n// module id = 285\n// module chunks = 0","import startsWith from 'underscore.string/startsWith';\n\nfunction controller($location) {\n  this.tabs.forEach((tab) => {\n    if (tab.isActive) {\n      tab.active = tab.isActive($location.path());\n    } else {\n      tab.active = startsWith($location.path(), `/${tab.path}`);\n    }\n  });\n}\n\nexport default function (ngModule) {\n  ngModule.component('tabNav', {\n    template: '<ul class=\"tab-nav bg-white\">' +\n                '<li ng-repeat=\"tab in $ctrl.tabs\" ng-class=\"{\\'active\\': tab.active }\"><a ng-href=\"{{tab.path}}\">{{tab.name}}</a></li>' +\n              '</ul>',\n    controller,\n    bindings: {\n      tabs: '<',\n    },\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/tab-nav/index.js","function controller(clientConfig, currentUser) {\n  this.showMailWarning = clientConfig.mailSettingsMissing && currentUser.isAdmin;\n}\n\nexport default function (ngModule) {\n  ngModule.component('emailSettingsWarning', {\n    bindings: {\n      function: '<',\n    },\n    template: '<p class=\"alert alert-danger\" ng-if=\"$ctrl.showMailWarning\">It looks like your mail server isn\\'t configured. Make sure to configure it for the {{$ctrl.function}} to work.</p>',\n    controller,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/email-settings-warning/index.js","function rdTab($location) {\n  return {\n    restrict: 'E',\n    scope: {\n      tabId: '@',\n      name: '@',\n      basePath: '=?',\n    },\n    transclude: true,\n    template: '<li class=\"rd-tab\" ng-class=\"{active: tabId==selectedTab}\"><a href=\"{{basePath}}#{{tabId}}\">{{name}}<span ng-transclude></span></a></li>',\n    replace: true,\n    link(scope) {\n      scope.basePath = scope.basePath || $location.path().substring(1);\n      scope.$watch(() =>\n         scope.$parent.selectedTab\n      , (tab) => {\n        scope.selectedTab = tab;\n      });\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('rdTab', rdTab);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/rd-tab/index.js","\nfunction QueryLinkController() {\n  let hash = null;\n  if (this.visualization) {\n    if (this.visualization.type === 'TABLE') {\n      // link to hard-coded table tab instead of the (hidden) visualization tab\n      hash = 'table';\n    } else {\n      hash = this.visualization.id;\n    }\n  }\n\n  this.link = this.query.getUrl(false, hash);\n}\n\nexport default function (ngModule) {\n  ngModule.component('queryLink', {\n    bindings: {\n      query: '<',\n      visualization: '<',\n    },\n    template: '<a ng-href=\"{{$ctrl.link}}\" class=\"query-link\">{{$ctrl.query.name}}</a>',\n    controller: QueryLinkController,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/query-link.js","import template from './parameters.html';\nimport parameterSettingsTemplate from './parameter-settings.html';\n\nconst ParameterSettingsComponent = {\n  template: parameterSettingsTemplate,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller() {\n    'ngInject';\n\n    this.parameter = this.resolve.parameter;\n  },\n};\n\nfunction ParametersDirective($location, $uibModal) {\n  return {\n    restrict: 'E',\n    transclude: true,\n    scope: {\n      parameters: '=',\n      syncValues: '=?',\n      editable: '=?',\n      changed: '&onChange',\n    },\n    template,\n    link(scope) {\n      // is this the correct location for this logic?\n      if (scope.syncValues !== false) {\n        scope.$watch('parameters', () => {\n          if (scope.changed) {\n            scope.changed({});\n          }\n          scope.parameters.forEach((param) => {\n            if (param.value !== null || param.value !== '') {\n              $location.search(`p_${param.name}`, param.value);\n            }\n          });\n        }, true);\n      }\n\n      scope.showParameterSettings = (param) => {\n        $uibModal.open({\n          component: 'parameterSettings',\n          resolve: {\n            parameter: param,\n          },\n        });\n      };\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('parameters', ParametersDirective);\n  ngModule.component('parameterSettings', ParameterSettingsComponent);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/parameters.js","module.exports = \"<div class=\\\"form-inline bg-white p-5\\\" ng-if=\\\"parameters | notEmpty\\\" ui-sortable=\\\"{ 'ui-floating': true, 'disabled': !editable }\\\" ng-model=\\\"parameters\\\">\\n  <div class=\\\"form-group\\\" ng-repeat=\\\"param in parameters\\\">\\n    <label>{{param.title}}</label>\\n    <button class=\\\"btn btn-default btn-xs\\\" ng-click=\\\"showParameterSettings(param)\\\" ng-if=\\\"editable\\\"><i class=\\\"zmdi zmdi-settings\\\"></i></button>\\n    <span ng-switch=\\\"param.type\\\">\\n      <input ng-switch-when=\\\"datetime-with-seconds\\\" type=\\\"datetime-local\\\" step=\\\"1\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n      <input ng-switch-when=\\\"datetime-local\\\" type=\\\"datetime-local\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n      <input ng-switch-when=\\\"date\\\" type=\\\"date\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n      <input ng-switch-default type=\\\"{{param.type}}\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n    </span>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/parameters.html\n// module id = 294\n// module chunks = 0","module.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">{{$ctrl.parameter.name}}</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <div class=\\\"form\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>Title</label>\\n        <input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.parameter.title\\\">\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>Type</label>\\n        <select ng-model=\\\"$ctrl.parameter.type\\\" class=\\\"form-control\\\">\\n          <option value=\\\"text\\\">Text</option>\\n          <option value=\\\"number\\\">Number</option>\\n          <option value=\\\"date\\\">Date</option>\\n          <option value=\\\"datetime-local\\\">Date and Time</option>\\n          <option value=\\\"datetime-with-seconds\\\">Date and Time (with seconds)</option>\\n        </select>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>Global</label>\\n        <input type=\\\"checkbox\\\" class=\\\"form-inline\\\" ng-model=\\\"$ctrl.parameter.global\\\">\\n      </div>\\n    </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/parameter-settings.html\n// module id = 295\n// module chunks = 0","import { contains, each } from 'underscore';\nimport template from './permissions-editor.html';\n\nconst PermissionsEditorComponent = {\n  template,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($http, User) {\n    'ngInject';\n\n    this.grantees = [];\n    this.newGrantees = {};\n    this.aclUrl = this.resolve.aclUrl.url;\n\n      // List users that are granted permissions\n    const loadGrantees = () => {\n      $http.get(this.aclUrl).success((result) => {\n        this.grantees = [];\n\n        each(result, (grantees, accessType) => {\n          grantees.forEach((grantee) => {\n            grantee.access_type = accessType;\n            this.grantees.push(grantee);\n          });\n        });\n      });\n    };\n\n    loadGrantees();\n\n      // Search for user\n    this.findUser = (search) => {\n      if (search === '') {\n        return;\n      }\n\n      if (this.foundUsers === undefined) {\n        User.query((users) => {\n          const existingIds = this.grantees.map(m => m.id);\n          users.forEach((user) => { user.alreadyGrantee = contains(existingIds, user.id); });\n          this.foundUsers = users;\n        });\n      }\n    };\n\n      // Add new user to grantees list\n    this.addGrantee = (user) => {\n      this.newGrantees.selected = undefined;\n      const body = { access_type: 'modify', user_id: user.id };\n      $http.post(this.aclUrl, body).success(() => {\n        user.alreadyGrantee = true;\n        loadGrantees();\n      });\n    };\n\n      // Remove user from grantees list\n    this.removeGrantee = (user) => {\n      const body = { access_type: 'modify', user_id: user.id };\n      $http({ url: this.aclUrl,\n        method: 'DELETE',\n        data: body,\n        headers: { 'Content-Type': 'application/json' },\n      }).success(() => {\n        this.grantees = this.grantees.filter(m => m !== user);\n\n        if (this.foundUsers) {\n          this.foundUsers.forEach((u) => { if (u.id === user.id) { u.alreadyGrantee = false; } });\n        }\n      });\n    };\n  },\n};\n\nexport default function (ngModule) {\n  ngModule.component('permissionsEditor', PermissionsEditorComponent);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/permissions-editor/index.js","module.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Manage Permissions</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div style=\\\"overflow: auto; height: 300px\\\">\\n    <ui-select ng-model=\\\"$ctrl.newGrantee.selected\\\" on-select=\\\"$ctrl.addGrantee($item)\\\">\\n       <ui-select-match placeholder=\\\"Add New User\\\"></ui-select-match>\\n       <ui-select-choices repeat=\\\"user in $ctrl.foundUsers | filter:$select.search\\\"\\n                         refresh=\\\"$ctrl.findUser($select.search)\\\"\\n                         refresh-delay=\\\"0\\\"\\n                         ui-disable-choice=\\\"user.alreadyGrantee\\\">\\n        <div>\\n          <img ng-src=\\\"{{user.gravatar_url}}\\\" height=\\\"24px\\\">&nbsp;{{user.name}}\\n          <small ng-if=\\\"user.alreadyGrantee\\\">(already has permission)</small>\\n        </div>\\n       </ui-select-choices>\\n    </ui-select>\\n      <br/>\\n       <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th></th>\\n            <th>User</th>\\n            <th>Permission</th>\\n            <th></th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"grantee in $ctrl.grantees\\\">\\n          <td width=\\\"50px\\\"><img ng-src=\\\"{{grantee.gravatar_url}}\\\" height=\\\"40px\\\"/></td>\\n          <td>{{grantee.name}} </td>\\n          <td>{{grantee.access_type}}</td>\\n          <td><button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"$ctrl.removeGrantee(grantee)\\\">Remove</button></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n    </div>\\n  </div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/permissions-editor/permissions-editor.html\n// module id = 297\n// module chunks = 0","import { sortBy } from 'underscore';\nimport template from './dynamic-table.html';\nimport './dynamic-table.css';\n\nfunction DynamicTable($sanitize) {\n  'ngInject';\n\n  this.itemsPerPage = this.count = 15;\n  this.page = 1;\n  this.rowsCount = 0;\n  this.orderByField = undefined;\n  this.orderByReverse = false;\n\n  this.pageChanged = () => {\n    const first = this.count * (this.page - 1);\n    const last = this.count * (this.page);\n\n    this.rows = this.allRows.slice(first, last);\n  };\n\n  this.$onChanges = (changes) => {\n    if (changes.columns) {\n      this.columns = changes.columns.currentValue;\n    }\n\n    if (changes.rows) {\n      this.allRows = changes.rows.currentValue;\n    }\n\n    this.rowsCount = this.allRows.length;\n\n    this.pageChanged();\n  };\n\n  this.orderBy = (column) => {\n    if (column === this.orderByField) {\n      this.orderByReverse = !this.orderByReverse;\n    } else {\n      this.orderByField = column;\n      this.orderByReverse = false;\n    }\n\n    if (this.orderByField) {\n      this.allRows = sortBy(this.allRows, this.orderByField.name);\n      if (this.orderByReverse) {\n        this.allRows = this.allRows.reverse();\n      }\n      this.pageChanged();\n    }\n  };\n\n  this.sanitize = value => $sanitize(value);\n\n  this.sortIcon = (column) => {\n    if (column !== this.orderByField) {\n      return null;\n    }\n\n    if (this.orderByReverse) {\n      return 'desc';\n    }\n\n    return 'asc';\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.component('dynamicTable', {\n    template,\n    controller: DynamicTable,\n    bindings: {\n      rows: '<',\n      columns: '<',\n      count: '<',\n    },\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/dynamic-table/index.js","module.exports = \"<div>\\n  <table class=\\\"table table-condensed table-hover\\\">\\n    <thead>\\n    <tr>\\n      <th ng-repeat=\\\"column in $ctrl.columns\\\" ng-click=\\\"$ctrl.orderBy(column)\\\" class=\\\"sortable-column\\\">\\n        {{column.title}} <span ng-if=\\\"$ctrl.sortIcon(column)\\\"><i class=\\\"fa fa-sort-{{$ctrl.sortIcon(column)}}\\\"></i></span>\\n      </th>\\n    </tr>\\n\\n    </thead>\\n    <tbody>\\n    <tr ng-repeat=\\\"row in $ctrl.rows\\\">\\n      <td ng-repeat=\\\"column in $ctrl.columns\\\" ng-bind-html=\\\"$ctrl.sanitize(column.formatFunction(row[column.name]))\\\">\\n      </td>\\n    </tr>\\n    </tbody>\\n  </table>\\n</div>\\n<div class=\\\"text-center\\\">\\n  <ul uib-pagination total-items=\\\"$ctrl.rowsCount\\\"\\n      items-per-page=\\\"$ctrl.itemsPerPage\\\"\\n      ng-model=\\\"$ctrl.page\\\"\\n      max-size=\\\"6\\\"\\n      class=\\\"pagination\\\"\\n      boundary-link-numbers=\\\"true\\\"\\n      rotate=\\\"false\\\"\\n      next-text='>'\\n      previous-text='<'\\n      ng-change=\\\"$ctrl.pageChanged()\\\"></ul>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/dynamic-table/dynamic-table.html\n// module id = 299\n// module chunks = 0","class PaginatorCtrl {\n  constructor() {\n    this.page = this.paginator.page;\n  }\n  pageChanged() {\n    this.paginator.setPage(this.page);\n  }\n}\n\nexport default function (ngModule) {\n  ngModule.component('paginator', {\n    template: `\n<div class=\"text-center\">\n  <ul uib-pagination total-items=\"$ctrl.paginator.totalCount\"\n                     items-per-page=\"$ctrl.paginator.itemsPerPage\"\n                     ng-model=\"$ctrl.page\"\n                     max-size=\"6\"\n                     class=\"pagination\"\n                     boundary-link-numbers=\"true\"\n                     rotate=\"false\"\n                     next-text='>'\n                     previous-text='<'\n                     ng-change=\"$ctrl.pageChanged()\"></ul>\n</div>\n    `,\n    bindings: {\n      paginator: '<',\n    },\n    controller: PaginatorCtrl,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/paginator.js","import startsWith from 'underscore.string/startsWith';\nimport template from './settings-screen.html';\n\nexport default function (ngModule) {\n  ngModule.directive('settingsScreen', $location =>\n     ({\n       restrict: 'E',\n       transclude: true,\n       template,\n       controller($scope, currentUser) {\n         $scope.usersPage = startsWith($location.path(), '/users');\n         $scope.groupsPage = startsWith($location.path(), '/groups');\n         $scope.dsPage = startsWith($location.path(), '/data_sources');\n         $scope.destinationsPage = startsWith($location.path(), '/destinations');\n         $scope.snippetsPage = startsWith($location.path(), '/query_snippets');\n\n         $scope.showGroupsLink = currentUser.hasPermission('list_users');\n         $scope.showUsersLink = currentUser.hasPermission('list_users');\n         $scope.showDsLink = currentUser.hasPermission('admin');\n         $scope.showDestinationsLink = currentUser.hasPermission('admin');\n       },\n     })\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/settings-screen.js","module.exports = \"<page-header title=\\\"Settings\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li ng-class=\\\"{'active': dsPage }\\\" ng-if=\\\"showDsLink\\\"><a href=\\\"data_sources\\\">Data Sources</a></li>\\n      <li ng-class=\\\"{'active': usersPage }\\\" ng-if=\\\"showUsersLink\\\"><a href=\\\"users\\\">Users</a></li>\\n      <li ng-class=\\\"{'active': groupsPage }\\\" ng-if=\\\"showGroupsLink\\\"><a href=\\\"groups\\\">Groups</a></li>\\n      <li ng-class=\\\"{'active': destinationsPage }\\\" ng-if=\\\"showDestinationsLink\\\"><a href=\\\"destinations\\\">Alert Destinations</a></li>\\n      <li ng-class=\\\"{'active': snippetsPage }\\\"><a href=\\\"query_snippets\\\">Query Snippets</a></li>\\n    </ul>\\n\\n    <div ng-transclude>\\n\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/settings-screen.html\n// module id = 303\n// module chunks = 0","const ErrorMessagesComponent = {\n  template: `\n  <div class=\"help-block\" ng-messages=\"$ctrl.input.$error\" ng-show=\"$ctrl.input.$touched || $ctrl.form.$submitted\">\n    <span class=\"error\" ng-message=\"required\">This field is required.</span>\n    <span class=\"error\" ng-message=\"minlength\">This field is too short.</span>\n    <span class=\"error\" ng-message=\"email\">This needs to be a valid email.</span>\n  </div>\n  `,\n  replace: true,\n  bindings: {\n    input: '<',\n    form: '<',\n  },\n  controller() {\n  },\n};\n\nexport default function (ngModule) {\n  ngModule.component('errorMessages', ErrorMessagesComponent);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/error-messages.js","import $ from 'jquery';\nimport { isEmpty } from 'underscore';\n\n// From: http://jsfiddle.net/joshdmiller/NDFHg/\nfunction EditInPlace() {\n  return {\n    restrict: 'E',\n    scope: {\n      value: '=',\n      ignoreBlanks: '=',\n      editable: '=',\n      done: '=',\n    },\n    template(tElement, tAttrs) {\n      const elType = tAttrs.editor || 'input';\n      const placeholder = tAttrs.placeholder || 'Click to edit';\n\n      let viewMode = '';\n\n      if (tAttrs.markdown === 'true') {\n        viewMode = '<span ng-click=\"editable && edit()\" ng-bind-html=\"value|markdown\" ng-class=\"{editable: editable}\"></span>';\n      } else {\n        viewMode = '<span ng-click=\"editable && edit()\" ng-bind=\"value\" ng-class=\"{editable: editable}\"></span>';\n      }\n\n      const placeholderSpan = `<span ng-click=\"editable && edit()\"\n                                     ng-show=\"editable && !value\"\n                                     ng-class=\"{editable: editable}\">${placeholder}</span>`;\n      const editor = '<{elType} ng-model=\"value\" class=\"rd-form-control\"></{elType}>'.replace('{elType}', elType);\n\n      return viewMode + placeholderSpan + editor;\n    },\n    link($scope, element) {\n      // Let's get a reference to the input element, as we'll want to reference it.\n      const inputElement = $(element.children()[2]);\n\n      // This directive should have a set class so we can style it.\n      element.addClass('edit-in-place');\n\n      // Initially, we're not editing.\n      $scope.editing = false;\n\n      // ng-click handler to activate edit-in-place\n      $scope.edit = () => {\n        $scope.oldValue = $scope.value;\n\n        $scope.editing = true;\n\n        // We control display through a class on the directive itself. See the CSS.\n        element.addClass('active');\n\n        // And we must focus the element.\n        // `angular.element()` provides a chainable array, like jQuery so to access\n        // a native DOM function, we have to reference the first element in the array.\n        inputElement[0].focus();\n      };\n\n      function save() {\n        if ($scope.editing) {\n          if ($scope.ignoreBlanks && isEmpty($scope.value)) {\n            $scope.value = $scope.oldValue;\n          }\n          $scope.editing = false;\n          element.removeClass('active');\n\n          if ($scope.value !== $scope.oldValue) {\n            if ($scope.done) {\n              $scope.done();\n            }\n          }\n        }\n      }\n\n      $(inputElement).keydown((e) => {\n        // 'return' or 'enter' key pressed\n        // allow 'shift' to break lines\n        if (e.which === 13 && !e.shiftKey) {\n          save();\n        } else if (e.which === 27) {\n          $scope.value = $scope.oldValue;\n          $scope.$apply(() => {\n            $(inputElement[0]).blur();\n          });\n        }\n      }).blur(() => {\n        save();\n      });\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('editInPlace', EditInPlace);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/edit-in-place.js","import { each, contains, find } from 'underscore';\nimport endsWith from 'underscore.string/endsWith';\nimport template from './dynamic-form.html';\n\nfunction DynamicForm($http, toastr, $q) {\n  return {\n    restrict: 'E',\n    replace: 'true',\n    transclude: true,\n    template,\n    scope: {\n      target: '=',\n      type: '@type',\n      actions: '=',\n    },\n    link($scope) {\n      function setType(types) {\n        if ($scope.target.type === undefined) {\n          $scope.target.type = types[0].type;\n        }\n\n        $scope.type = find(types, t => t.type === $scope.target.type);\n      }\n\n      $scope.inProgressActions = {};\n      if ($scope.actions) {\n        $scope.actions.forEach((action) => {\n          const originalCallback = action.callback;\n          const name = action.name;\n          action.callback = () => {\n            action.name = `<i class=\"zmdi zmdi-spinner zmdi-hc-spin\"></i> ${name}`;\n\n            $scope.inProgressActions[action.name] = true;\n            function release() {\n              $scope.inProgressActions[action.name] = false;\n              action.name = name;\n            }\n            originalCallback(release);\n          };\n        });\n      }\n\n      $scope.files = {};\n\n      $scope.$watchCollection('files', () => {\n        each($scope.files, (v, k) => {\n          // THis is needed because angular-base64-upload sets the value to null at initialization,\n          // causing the field to be marked as dirty even if it wasn't changed.\n          if (!v && $scope.target.options[k]) {\n            $scope.dataSourceForm.$setPristine();\n          }\n          if (v) {\n            $scope.target.options[k] = v.base64;\n          }\n        });\n      });\n\n      const typesPromise = $http.get(`api/${$scope.type}/types`);\n\n      $q.all([typesPromise, $scope.target.$promise]).then((responses) => {\n        const types = responses[0].data;\n        setType(types);\n\n        $scope.types = types;\n\n        types.forEach((type) => {\n          each(type.configuration_schema.properties, (prop, name) => {\n            if (name === 'password' || name === 'passwd') {\n              prop.type = 'password';\n            }\n\n            if (endsWith(name, 'File')) {\n              prop.type = 'file';\n            }\n\n            if (prop.type === 'boolean') {\n              prop.type = 'checkbox';\n            }\n\n            prop.required = contains(type.configuration_schema.required, name);\n          });\n        });\n      });\n\n      $scope.$watch('target.type', (current, prev) => {\n        if (prev !== current) {\n          if (prev !== undefined) {\n            $scope.target.options = {};\n          }\n          setType($scope.types);\n        }\n      });\n\n      $scope.saveChanges = () => {\n        $scope.target.$save(() => {\n          toastr.success('Saved.');\n          $scope.dataSourceForm.$setPristine();\n        }, () => {\n          toastr.error('Failed saving.');\n        });\n      };\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('dynamicForm', DynamicForm);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/dynamic-form.js","module.exports = \"<form name=\\\"dataSourceForm\\\">\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"dataSourceName\\\">Name</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" name=\\\"dataSourceName\\\" ng-model=\\\"target.name\\\" required>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"type\\\">Type</label>\\n        <select name=\\\"type\\\" class=\\\"form-control\\\" ng-options=\\\"type.type as type.name for type in types\\\" ng-model=\\\"target.type\\\"></select>\\n    </div>\\n    <div class=\\\"form-group\\\" ng-class='{\\\"has-error\\\": !inner.input.$valid}' ng-form=\\\"inner\\\" ng-repeat=\\\"(name, input) in type.configuration_schema.properties\\\">\\n        <label ng-if=\\\"input.type !== 'checkbox'\\\">{{input.title || name | capitalize}}</label>\\n        <input name=\\\"input\\\" type=\\\"{{input.type}}\\\" class=\\\"form-control\\\" ng-model=\\\"target.options[name]\\\" ng-required=\\\"input.required\\\"\\n                ng-if=\\\"input.type !== 'file' && input.type !== 'checkbox'\\\" accesskey=\\\"tab\\\" placeholder=\\\"{{input.default}}\\\">\\n\\n        <label ng-if=\\\"input.type=='checkbox'\\\">\\n          <input name=\\\"input\\\" type=\\\"{{input.type}}\\\" ng-model=\\\"target.options[name]\\\" ng-required=\\\"input.required\\\"\\n                  ng-if=\\\"input.type !== 'file'\\\" accesskey=\\\"tab\\\" placeholder=\\\"{{input.default}}\\\">\\n          {{input.title || name | capitalize}}\\n        </label>\\n\\n        <input name=\\\"input\\\" type=\\\"file\\\" class=\\\"form-control\\\" ng-model=\\\"files[name]\\\" ng-required=\\\"input.required && !target.options[name]\\\"\\n               base-sixty-four-input\\n               ng-if=\\\"input.type === 'file'\\\">\\n    </div>\\n    <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!dataSourceForm.$valid\\\" ng-click=\\\"saveChanges()\\\">Save</button>\\n    <span ng-repeat=\\\"action in actions\\\">\\n        <button class=\\\"btn\\\"\\n                ng-class=\\\"action.class\\\"\\n                ng-if=\\\"target.id\\\"\\n                ng-disabled=\\\"(action.disableWhenDirty && dataSourceForm.$dirty) || inProgressActions[action.name]\\\"\\n                ng-click=\\\"action.callback()\\\" ng-bind-html=\\\"action.name\\\"></button>\\n    </span>\\n\\n    <span ng-transclude>\\n\\n    </span>\\n</form>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/dynamic-form.html\n// module id = 308\n// module chunks = 0","import moment from 'moment';\n\nfunction rdTimer() {\n  return {\n    restrict: 'E',\n    scope: { timestamp: '=' },\n    template: '{{currentTime}}',\n    controller($scope) {\n      $scope.currentTime = '00:00:00';\n\n      // We're using setInterval directly instead of $timeout, to avoid using $apply, to\n      // prevent the digest loop being run every second.\n      let currentTimer = setInterval(() => {\n        $scope.currentTime = moment(moment() - moment($scope.timestamp)).utc().format('HH:mm:ss');\n        $scope.$digest();\n      }, 1000);\n\n      $scope.$on('$destroy', () => {\n        if (currentTimer) {\n          clearInterval(currentTimer);\n          currentTimer = null;\n        }\n      });\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('rdTimer', rdTimer);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/rd-timer.js","const RdTimeAgo = {\n  bindings: {\n    value: '=',\n  },\n  controller() {\n  },\n  template: '<span>' +\n      '<span ng-show=\"$ctrl.value\" am-time-ago=\"$ctrl.value\"></span>' +\n      '<span ng-hide=\"$ctrl.value\">-</span>' +\n      '</span>',\n};\n\nexport default function (ngModule) {\n  ngModule.component('rdTimeAgo', RdTimeAgo);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/rd-time-ago.js","const Overlay = {\n  template: `\n  <div>\n    <div class=\"overlay\"></div>\n    <div style=\"width: 100%; position:absolute; top:50px; z-index:2000\">\n      <div class=\"well well-lg\" style=\"width: 70%; margin: auto;\" ng-transclude>\n      </div>\n    </div>\n  </div>\n  `,\n  transclude: true,\n};\n\nexport default function (ngModule) {\n  ngModule.component('overlay', Overlay);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/overlay.js","export default function (ngModule) {\n  ngModule.component('routeStatus', {\n    template: '<overlay ng-if=\"$ctrl.permissionDenied\">You do not have permission to load this page.',\n\n    controller($rootScope) {\n      this.permissionDenied = false;\n\n      $rootScope.$on('$routeChangeSuccess', () => {\n        this.permissionDenied = false;\n      });\n\n      $rootScope.$on('$routeChangeError', (event, current, previous, rejection) => {\n        if (rejection.status === 403) {\n          this.permissionDenied = true;\n        }\n      });\n    },\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/route-status.js","import template from './filters.html';\n\nconst FiltersComponent = {\n  template,\n  bindings: {\n    onChange: '&',\n    filters: '<',\n  },\n  controller() {\n    'ngInject';\n\n    this.filterChangeListener = (filter, modal) => {\n      this.onChange({ filter, $modal: modal });\n    };\n  },\n};\n\n\nexport default function (ngModule) {\n  ngModule.component('filters', FiltersComponent);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/filters.js","module.exports = \"<div class=\\\"container bg-white p-5\\\" ng-show=\\\"$ctrl.filters | notEmpty\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-sm-6 m-t-5\\\" ng-repeat=\\\"filter in $ctrl.filters\\\">\\n      <ui-select ng-model=\\\"filter.current\\\" ng-if=\\\"!filter.multiple\\\" on-select=\\\"$ctrl.filterChangeListener(filter, $model)\\\" on-remove=\\\"$ctrl.filterChangeListener(filter, $model)\\\">\\n        <ui-select-match placeholder=\\\"Select value for {{filter.friendlyName}}...\\\">{{filter.friendlyName}}: {{$select.selected | filterValue:filter}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"value in filter.values | filter: $select.search\\\">\\n          {{value | filterValue:filter }}\\n        </ui-select-choices>\\n      </ui-select>\\n\\n      <ui-select ng-model=\\\"filter.current\\\" multiple ng-if=\\\"filter.multiple\\\" on-select=\\\"$ctrl.filterChangeListener(filter, $model)\\\" on-remove=\\\"$ctrl.filterChangeListener(filter, $model)\\\">\\n        <ui-select-match placeholder=\\\"Select value for {{filter.friendlyName}}...\\\">{{filter.friendlyName}}: {{$item | filterValue:filter}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"value in filter.values | filter: $select.search\\\">\\n          {{value | filterValue:filter }}\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n</div>\\n\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/filters.html\n// module id = 314\n// module chunks = 0","import moment from 'moment';\nimport _capitalize from 'underscore.string/capitalize';\nimport { isEmpty } from 'underscore';\n\n// eslint-disable-next-line\nconst urlPattern = /(^|[\\s\\n]|<br\\/?>)((?:https?|ftp):\\/\\/[\\-A-Z0-9+\\u0026\\u2019@#\\/%?=()~_|!:,.;]*[\\-A-Z0-9+\\u0026@#\\/%=~()_|])/gi;\n\nexport function durationHumanize(duration) {\n  let humanized = '';\n\n  if (duration === undefined) {\n    humanized = '-';\n  } else if (duration < 60) {\n    const seconds = Math.round(duration);\n    humanized = `${seconds}s`;\n  } else if (duration > 3600 * 24) {\n    const days = Math.round(parseFloat(duration) / 60.0 / 60.0 / 24.0);\n    humanized = `${days}days`;\n  } else if (duration >= 3600) {\n    const hours = Math.round(parseFloat(duration) / 60.0 / 60.0);\n    humanized = `${hours}h`;\n  } else {\n    const minutes = Math.round(parseFloat(duration) / 60.0);\n    humanized = `${minutes}m`;\n  }\n  return humanized;\n}\n\nexport function scheduleHumanize(schedule) {\n  if (schedule === null) {\n    return 'Never';\n  } else if (schedule.match(/\\d\\d:\\d\\d/) !== null) {\n    const parts = schedule.split(':');\n    const localTime = moment.utc()\n                            .hour(parts[0])\n                            .minute(parts[1])\n                            .local()\n                            .format('HH:mm');\n\n    return `Every day at ${localTime}`;\n  }\n\n  return `Every ${durationHumanize(parseInt(schedule, 10))}`;\n}\n\nexport function toHuman(text) {\n  return text.replace(/_/g, ' ').replace(/(?:^|\\s)\\S/g, a =>\n     a.toUpperCase()\n  );\n}\n\nexport function colWidth(widgetWidth) {\n  if (widgetWidth === 0) {\n    return 0;\n  } else if (widgetWidth === 1) {\n    return 6;\n  } else if (widgetWidth === 2) {\n    return 12;\n  }\n  return widgetWidth;\n}\n\nexport function capitalize(text) {\n  if (text) {\n    return _capitalize(text);\n  }\n\n  return null;\n}\n\nexport function linkify(text) {\n  return text.replace(urlPattern, \"$1<a href='$2' target='_blank'>$2</a>\");\n}\n\nexport function remove(items, item) {\n  if (items === undefined) {\n    return items;\n  }\n\n  let notEquals;\n\n  if (item instanceof Array) {\n    notEquals = other => item.indexOf(other) === -1;\n  } else {\n    notEquals = other => item !== other;\n  }\n\n  const filtered = [];\n\n  for (let i = 0; i < items.length; i += 1) {\n    if (notEquals(items[i])) {\n      filtered.push(items[i]);\n    }\n  }\n\n  return filtered;\n}\n\nexport function notEmpty(collection) {\n  return !isEmpty(collection);\n}\n\nexport function showError(field, form) {\n  return (field.$touched && field.$invalid) || form.$submitted;\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/filters/index.js","export { default as Dashboard } from './dashboard';\nexport { default as Widget } from './widget';\nexport { default as Query } from './query';\nexport { default as QueryResult } from './query-result';\nexport { default as Events } from './events';\nexport { default as Alert } from './alert';\nexport { default as AlertSubscription } from './alert-subscription';\nexport { default as Destination } from './destination';\nexport { default as User } from './user';\nexport { default as Group } from './group';\nexport { default as DataSource } from './data-source';\nexport { default as QuerySnippet } from './query-snippet';\nexport { default as Notifications } from './notifications';\nexport { default as KeyboardShortcuts } from './keyboard-shortcuts';\nexport { default as OfflineListener } from './offline-listener';\nexport { default as AlertDialog } from './alert-dialog';\nexport { default as Auth } from './auth';\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/index.js","import { map, isArray } from 'underscore';\n\nfunction Dashboard($resource, $http, currentUser, Widget) {\n  function transformSingle(dashboard) {\n    dashboard.widgets = map(dashboard.widgets, row => row.map(widget => new Widget(widget)));\n    dashboard.publicAccessEnabled = dashboard.public_url !== undefined;\n  }\n\n  const transform = $http.defaults.transformResponse.concat((data) => {\n    if (isArray(data)) {\n      data.forEach(transformSingle);\n    } else {\n      transformSingle(data);\n    }\n    return data;\n  });\n\n  const resource = $resource('api/dashboards/:slug', { slug: '@slug' }, {\n    get: { method: 'GET', transformResponse: transform },\n    save: { method: 'POST', transformResponse: transform },\n    query: { method: 'GET', isArray: true, transformResponse: transform },\n    recent: {\n      method: 'get',\n      isArray: true,\n      url: 'api/dashboards/recent',\n      transformResponse: transform,\n    },\n  });\n\n  resource.prototype.canEdit = function canEdit() {\n    return currentUser.canEdit(this) || this.can_edit;\n  };\n\n  return resource;\n}\n\nexport default function (ngModule) {\n  ngModule.factory('Dashboard', Dashboard);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/dashboard.js","import truncate from 'underscore.string/truncate';\n\nfunction Widget($resource, Query) {\n  const WidgetResource = $resource('api/widgets/:id', { id: '@id' });\n\n  WidgetResource.prototype.getQuery = function getQuery() {\n    if (!this.query && this.visualization) {\n      this.query = new Query(this.visualization.query);\n    }\n\n    return this.query;\n  };\n\n  WidgetResource.prototype.getName = function getName() {\n    if (this.visualization) {\n      return `${this.visualization.query.name} (${this.visualization.name})`;\n    }\n    return truncate(this.text, 20);\n  };\n\n  return WidgetResource;\n}\n\n\nexport default function (ngModule) {\n  ngModule.factory('Widget', Widget);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/widget.js","import moment from 'moment';\nimport Mustache from 'mustache';\nimport { each, object, isEmpty, pluck, filter, contains, union, uniq, has } from 'underscore';\n\nfunction collectParams(parts) {\n  let parameters = [];\n\n  parts.forEach((part) => {\n    if (part[0] === 'name' || part[0] === '&') {\n      parameters.push(part[1]);\n    } else if (part[0] === '#') {\n      parameters = union(parameters, collectParams(part[4]));\n    }\n  });\n\n  return parameters;\n}\n\nclass QueryResultError {\n  constructor(errorMessage) {\n    this.errorMessage = errorMessage;\n  }\n\n  getError() {\n    return this.errorMessage;\n  }\n\n  static getStatus() {\n    return 'failed';\n  }\n\n  static getData() {\n    return null;\n  }\n\n  static getLog() {\n    return null;\n  }\n\n  static getChartData() {\n    return null;\n  }\n}\n\n\nclass Parameter {\n  constructor(parameter) {\n    this.title = parameter.title;\n    this.name = parameter.name;\n    this.type = parameter.type;\n    this.value = parameter.value;\n    this.global = parameter.global;\n  }\n\n  get ngModel() {\n    if (this.type === 'date' || this.type === 'datetime-local' || this.type === 'datetime-with-seconds') {\n      this.$$value = this.$$value || moment(this.value).toDate();\n      return this.$$value;\n    } else if (this.type === 'number') {\n      this.$$value = this.$$value || parseInt(this.value, 10);\n      return this.$$value;\n    }\n\n    return this.value;\n  }\n\n  set ngModel(value) {\n    if (value && this.type === 'date') {\n      this.value = moment(value).format('YYYY-MM-DD');\n      this.$$value = moment(this.value).toDate();\n    } else if (value && this.type === 'datetime-local') {\n      this.value = moment(value).format('YYYY-MM-DD HH:mm');\n      this.$$value = moment(this.value).toDate();\n    } else if (value && this.type === 'datetime-with-seconds') {\n      this.value = moment(value).format('YYYY-MM-DD HH:mm:ss');\n      this.$$value = moment(this.value).toDate();\n    } else {\n      this.value = this.$$value = value;\n    }\n  }\n}\n\nclass Parameters {\n  constructor(query, queryString) {\n    this.query = query;\n    this.updateParameters();\n    this.initFromQueryString(queryString);\n  }\n\n  parseQuery() {\n    const parts = Mustache.parse(this.query.query);\n    const parameters = uniq(collectParams(parts));\n    return parameters;\n  }\n\n  updateParameters() {\n    if (this.query.query === this.cachedQueryText) {\n      return;\n    }\n\n    this.cachedQueryText = this.query.query;\n    const parameterNames = this.parseQuery();\n\n    this.query.options.parameters = this.query.options.parameters || [];\n\n    const parametersMap = {};\n    this.query.options.parameters.forEach((param) => {\n      parametersMap[param.name] = param;\n    });\n\n    parameterNames.forEach((param) => {\n      if (!has(parametersMap, param)) {\n        this.query.options.parameters.push({\n          title: param,\n          name: param,\n          type: 'text',\n          value: null,\n          global: false,\n        });\n      }\n    });\n\n    const parameterExists = p => contains(parameterNames, p.name);\n    this.query.options.parameters =\n      this.query.options.parameters.filter(parameterExists).map(p => new Parameter(p));\n  }\n\n  initFromQueryString(queryString) {\n    this.get().forEach((param) => {\n      const queryStringName = `p_${param.name}`;\n      if (has(queryString, queryStringName)) {\n        param.value = queryString[queryStringName];\n      }\n    });\n  }\n\n  get() {\n    this.updateParameters();\n    return this.query.options.parameters;\n  }\n\n  getMissing() {\n    return pluck(filter(this.get(), p => p.value === null || p.value === ''), 'title');\n  }\n\n  isRequired() {\n    return !isEmpty(this.get());\n  }\n\n  getValues() {\n    const params = this.get();\n    return object(pluck(params, 'name'), pluck(params, 'value'));\n  }\n}\n\nfunction QueryResource($resource, $http, $q, $location, currentUser, QueryResult) {\n  const Query = $resource('api/queries/:id', { id: '@id' },\n    {\n      search: {\n        method: 'get',\n        isArray: true,\n        url: 'api/queries/search',\n      },\n      recent: {\n        method: 'get',\n        isArray: true,\n        url: 'api/queries/recent',\n      },\n      query: {\n        isArray: false,\n      },\n      myQueries: {\n        method: 'get',\n        isArray: false,\n        url: 'api/queries/my',\n      },\n      fork: {\n        method: 'post',\n        isArray: false,\n        url: 'api/queries/:id/fork',\n        params: { id: '@id' },\n      },\n    });\n\n  Query.newQuery = function newQuery() {\n    return new Query({\n      query: '',\n      name: 'New Query',\n      schedule: null,\n      user: currentUser,\n      options: {},\n    });\n  };\n\n  Query.format = function formatQuery(syntax, query) {\n    if (syntax === 'json') {\n      try {\n        const formatted = JSON.stringify(JSON.parse(query), ' ', 4);\n        return $q.resolve(formatted);\n      } catch (err) {\n        return $q.reject(String(err));\n      }\n    } else if (syntax === 'sql') {\n      return $http.post('api/queries/format', { query }).then(response =>\n         response.data.query\n      );\n    } else {\n      return $q.reject('Query formatting is not supported for your data source syntax.');\n    }\n  };\n\n  Query.prototype.getSourceLink = function getSourceLink() {\n    return `/queries/${this.id}/source`;\n  };\n\n  Query.prototype.isNew = function isNew() {\n    return this.id === undefined;\n  };\n\n  Query.prototype.hasDailySchedule = function hasDailySchedule() {\n    return (this.schedule && this.schedule.match(/\\d\\d:\\d\\d/) !== null);\n  };\n\n  Query.prototype.scheduleInLocalTime = function scheduleInLocalTime() {\n    const parts = this.schedule.split(':');\n    return moment.utc()\n                 .hour(parts[0])\n                 .minute(parts[1])\n                 .local()\n                 .format('HH:mm');\n  };\n\n  Query.prototype.hasResult = function hasResult() {\n    return !!(this.latest_query_data || this.latest_query_data_id);\n  };\n\n  Query.prototype.paramsRequired = function paramsRequired() {\n    return this.getParameters().isRequired();\n  };\n\n  Query.prototype.getQueryResult = function getQueryResult(maxAge) {\n    if (!this.query) {\n      return new QueryResultError(\"Can't execute empty query.\");\n    }\n    let queryText = this.query;\n\n    const parameters = this.getParameters();\n    const missingParams = parameters.getMissing();\n\n    if (missingParams.length > 0) {\n      let paramsWord = 'parameter';\n      let valuesWord = 'value';\n      if (missingParams.length > 1) {\n        paramsWord = 'parameters';\n        valuesWord = 'values';\n      }\n\n      return new QueryResult({ job: { error: `missing ${valuesWord} for ${missingParams.join(', ')} ${paramsWord}.`, status: 4 } });\n    }\n\n    if (parameters.isRequired()) {\n      queryText = Mustache.render(queryText, parameters.getValues());\n\n      // Need to clear latest results, to make sure we don't use results for different params.\n      this.latest_query_data = null;\n      this.latest_query_data_id = null;\n    }\n\n    if (this.latest_query_data && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = new QueryResult({ query_result: this.latest_query_data });\n      }\n    } else if (this.latest_query_data_id && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = QueryResult.getById(this.latest_query_data_id);\n      }\n    } else if (this.data_source_id) {\n      this.queryResult = QueryResult.get(this.data_source_id, queryText, maxAge, this.id);\n    } else {\n      return new QueryResultError('Please select data source to run this query.');\n    }\n\n    return this.queryResult;\n  };\n\n  Query.prototype.getUrl = function getUrl(source, hash) {\n    let url = `queries/${this.id}`;\n\n    if (source) {\n      url += '/source';\n    }\n\n    let params = '';\n    if (this.getParameters().isRequired()) {\n      each(this.getParameters().getValues(), (value, name) => {\n        if (value === null) {\n          return;\n        }\n\n        if (params !== '') {\n          params += '&';\n        }\n\n        params += `p_${encodeURIComponent(name)}=${encodeURIComponent(value)}`;\n      });\n    }\n\n    if (params !== '') {\n      url += `?${params}`;\n    }\n\n    if (hash) {\n      url += `#${hash}`;\n    }\n\n    return url;\n  };\n\n  Query.prototype.getQueryResultPromise = function getQueryResultPromise() {\n    return this.getQueryResult().toPromise();\n  };\n\n  Query.prototype.getParameters = function getParameters() {\n    if (!this.$parameters) {\n      this.$parameters = new Parameters(this, $location.search());\n    }\n\n    return this.$parameters;\n  };\n\n  Query.prototype.getParametersDefs = function getParametersDefs() {\n    return this.getParameters().get();\n  };\n\n  return Query;\n}\n\nexport default function (ngModule) {\n  ngModule.factory('Query', QueryResource);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/query.js","import debug from 'debug';\nimport moment from 'moment';\nimport { uniq, contains, values, some, each, isArray, isNumber, isString } from 'underscore';\n\nconst logger = debug('redash:services:QueryResult');\n\nfunction getColumnNameWithoutType(column) {\n  let typeSplit;\n  if (column.indexOf('::') !== -1) {\n    typeSplit = '::';\n  } else if (column.indexOf('__') !== -1) {\n    typeSplit = '__';\n  } else {\n    return column;\n  }\n\n  const parts = column.split(typeSplit);\n  if (parts[0] === '' && parts.length === 2) {\n    return parts[1];\n  }\n  return parts[0];\n}\n\nexport function getColumnCleanName(column) {\n  const name = getColumnNameWithoutType(column);\n  return name;\n}\n\nfunction getColumnFriendlyName(column) {\n  return getColumnNameWithoutType(column).replace(/(?:^|\\s)\\S/g, a =>\n     a.toUpperCase()\n  );\n}\n\nfunction addPointToSeries(point, seriesCollection, seriesName) {\n  if (seriesCollection[seriesName] === undefined) {\n    seriesCollection[seriesName] = {\n      name: seriesName,\n      type: 'column',\n      data: [],\n    };\n  }\n\n  seriesCollection[seriesName].data.push(point);\n}\n\n\nfunction QueryResultService($resource, $timeout, $q) {\n  const QueryResultResource = $resource('api/query_results/:id', { id: '@id' }, { post: { method: 'POST' } });\n  const Job = $resource('api/jobs/:id', { id: '@id' });\n  const statuses = {\n    1: 'waiting',\n    2: 'processing',\n    3: 'done',\n    4: 'failed',\n  };\n\n  class QueryResult {\n    constructor(props) {\n      this.deferred = $q.defer();\n      this.job = {};\n      this.query_result = {};\n      this.status = 'waiting';\n      this.filters = undefined;\n      this.filterFreeze = undefined;\n\n      this.updatedAt = moment();\n\n      if (props) {\n        this.update(props);\n      }\n    }\n\n    update(props) {\n      Object.assign(this, props);\n\n      if ('query_result' in props) {\n        this.status = 'done';\n        this.filters = undefined;\n        this.filterFreeze = undefined;\n\n        const columnTypes = {};\n\n        // TODO: we should stop manipulating incoming data, and switch to relaying\n        // on the column type set by the backend. This logic is prone to errors,\n        // and better be removed. Kept for now, for backward compatability.\n        each(this.query_result.data.rows, (row) => {\n          each(row, (v, k) => {\n            if (isNumber(v)) {\n              columnTypes[k] = 'float';\n            } else if (isString(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}T/)) {\n              row[k] = moment.utc(v);\n              columnTypes[k] = 'datetime';\n            } else if (isString(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n              row[k] = moment.utc(v);\n              columnTypes[k] = 'date';\n            } else if (typeof (v) === 'object' && v !== null) {\n              row[k] = JSON.stringify(v);\n            }\n          });\n        });\n\n        each(this.query_result.data.columns, (column) => {\n          if (columnTypes[column.name]) {\n            if (column.type == null || column.type === 'string') {\n              column.type = columnTypes[column.name];\n            }\n          }\n        });\n\n        this.deferred.resolve(this);\n      } else if (this.job.status === 3) {\n        this.status = 'processing';\n      } else {\n        this.status = undefined;\n      }\n    }\n\n    getId() {\n      let id = null;\n      if ('query_result' in this) {\n        id = this.query_result.id;\n      }\n      return id;\n    }\n\n    cancelExecution() {\n      Job.delete({ id: this.job.id });\n    }\n\n    getStatus() {\n      return this.status || statuses[this.job.status];\n    }\n\n    getError() {\n      // TODO: move this logic to the server...\n      if (this.job.error === 'None') {\n        return undefined;\n      }\n\n      return this.job.error;\n    }\n\n    getLog() {\n      if (!this.query_result.data ||\n          !this.query_result.data.log ||\n          this.query_result.data.log.length === 0) {\n        return null;\n      }\n\n      return this.query_result.data.log;\n    }\n\n    getUpdatedAt() {\n      return this.query_result.retrieved_at || this.job.updated_at * 1000.0 || this.updatedAt;\n    }\n\n    getRuntime() {\n      return this.query_result.runtime;\n    }\n\n    getRawData() {\n      if (!this.query_result.data) {\n        return null;\n      }\n\n      const data = this.query_result.data.rows;\n\n      return data;\n    }\n\n    getData() {\n      if (!this.query_result.data) {\n        return null;\n      }\n\n      function filterValues(filters) {\n        if (!filters) {\n          return null;\n        }\n\n        return filters.reduce((str, filter) =>\n           str + filter.current\n        , '');\n      }\n\n      const filters = this.getFilters();\n      const filterFreeze = filterValues(filters);\n\n      if (this.filterFreeze !== filterFreeze) {\n        this.filterFreeze = filterFreeze;\n\n        if (filters) {\n          this.filteredData = this.query_result.data.rows.filter(row =>\n             filters.reduce((memo, filter) => {\n               if (!isArray(filter.current)) {\n                 filter.current = [filter.current];\n               }\n\n               return (memo && some(filter.current, (v) => {\n                 const value = row[filter.name];\n                 if (moment.isMoment(value)) {\n                   return value.isSame(v);\n                 }\n                 // We compare with either the value or the String representation of the value,\n                 // because Select2 casts true/false to \"true\"/\"false\".\n                 return (v === value || String(value) === v);\n               }));\n             }, true)\n          );\n        } else {\n          this.filteredData = this.query_result.data.rows;\n        }\n      }\n\n      return this.filteredData;\n    }\n\n    isEmpty() {\n      return this.getData() === null || this.getData().length === 0;\n    }\n\n    getChartData(mapping) {\n      const series = {};\n\n      this.getData().forEach((row) => {\n        let point = {};\n        let seriesName;\n        let xValue = 0;\n        const yValues = {};\n        let eValue = null;\n        let sizeValue = null;\n\n        each(row, (v, definition) => {\n          const name = definition.split('::')[0] || definition.split('__')[0];\n          let value = v;\n          let type = definition.split('::')[1] || definition.split('__')[1];\n          if (mapping) {\n            type = mapping[definition];\n          }\n\n          if (type === 'unused') {\n            return;\n          }\n\n          if (type === 'x') {\n            xValue = value;\n            point[type] = value;\n          }\n          if (type === 'y') {\n            if (value == null) {\n              value = 0;\n            }\n            yValues[name] = value;\n            point[type] = value;\n          }\n          if (type === 'yError') {\n            eValue = value;\n            point[type] = value;\n          }\n\n          if (type === 'series') {\n            seriesName = String(value);\n          }\n\n          if (type === 'size') {\n            point[type] = value;\n            sizeValue = value;\n          }\n\n          if (type === 'multiFilter' || type === 'multi-filter') {\n            seriesName = String(value);\n          }\n        });\n\n        if (seriesName === undefined) {\n          each(yValues, (yValue, ySeriesName) => {\n            point = { x: xValue, y: yValue };\n            if (eValue !== null) {\n              point.yError = eValue;\n            }\n\n            if (sizeValue !== null) {\n              point.size = sizeValue;\n            }\n            addPointToSeries(point, series, ySeriesName);\n          });\n        } else {\n          addPointToSeries(point, series, seriesName);\n        }\n      });\n      return values(series);\n    }\n\n    getColumns() {\n      if (this.columns === undefined && this.query_result.data) {\n        this.columns = this.query_result.data.columns;\n      }\n\n      return this.columns;\n    }\n\n    getColumnNames() {\n      if (this.columnNames === undefined && this.query_result.data) {\n        this.columnNames = this.query_result.data.columns.map(v => v.name);\n      }\n\n      return this.columnNames;\n    }\n\n\n    getColumnCleanNames() {\n      return this.getColumnNames().map(col => getColumnCleanName(col));\n    }\n\n    getColumnFriendlyNames() {\n      return this.getColumnNames().map(col => getColumnFriendlyName(col));\n    }\n\n    getFilters() {\n      if (!this.filters) {\n        this.prepareFilters();\n      }\n\n      return this.filters;\n    }\n\n    prepareFilters() {\n      if (!this.getColumns()) {\n        return;\n      }\n\n      const filters = [];\n      const filterTypes = ['filter', 'multi-filter', 'multiFilter'];\n\n      this.getColumns().forEach((col) => {\n        const name = col.name;\n        const type = name.split('::')[1] || name.split('__')[1];\n        if (contains(filterTypes, type)) {\n          // filter found\n          const filter = {\n            name,\n            friendlyName: getColumnFriendlyName(name),\n            column: col,\n            values: [],\n            multiple: (type === 'multiFilter') || (type === 'multi-filter'),\n          };\n          filters.push(filter);\n        }\n      }, this);\n\n      this.getRawData().forEach((row) => {\n        filters.forEach((filter) => {\n          filter.values.push(row[filter.name]);\n          if (filter.values.length === 1) {\n            if (filter.multiple) {\n              filter.current = [row[filter.name]];\n            } else {\n              filter.current = row[filter.name];\n            }\n          }\n        });\n      });\n\n      filters.forEach((filter) => {\n        filter.values = uniq(filter.values, (v) => {\n          if (moment.isMoment(v)) {\n            return v.unix();\n          }\n          return v;\n        });\n      });\n\n      this.filters = filters;\n    }\n\n    toPromise() {\n      return this.deferred.promise;\n    }\n\n    static getById(id) {\n      const queryResult = new QueryResult();\n\n      QueryResultResource.get({ id }, (response) => {\n        queryResult.update(response);\n      });\n\n      return queryResult;\n    }\n\n    refreshStatus(query) {\n      Job.get({ id: this.job.id }, (jobResponse) => {\n        this.update(jobResponse);\n\n        if (this.getStatus() === 'processing' && this.job.query_result_id && this.job.query_result_id !== 'None') {\n          QueryResultResource.get({ id: this.job.query_result_id }, (response) => {\n            this.update(response);\n          });\n        } else if (this.getStatus() !== 'failed') {\n          $timeout(() => {\n            this.refreshStatus(query);\n          }, 3000);\n        }\n      }, (error) => {\n        logger('Connection error', error);\n        // TODO: use QueryResultError, or better yet: exception/reject of promise.\n        this.update({ job: { error: 'failed communicating with server. Please check your Internet connection and try again.', status: 4 } });\n      });\n    }\n\n    getLink(queryId, fileType, apiKey) {\n      let link = `/api/queries/${queryId}/results/${this.getId()}.${fileType}`;\n      if (apiKey) {\n        link = `${link}?api_key=${apiKey}`;\n      }\n      return link;\n    }\n\n    getName(queryName, fileType) {\n      return `${queryName.replace(' ', '_') + moment(this.getUpdatedAt()).format('_YYYY_MM_DD')}.${fileType}`;\n    }\n\n    static get(dataSourceId, query, maxAge, queryId) {\n      const queryResult = new QueryResult();\n\n      const params = { data_source_id: dataSourceId, query, max_age: maxAge };\n      if (queryId !== undefined) {\n        params.query_id = queryId;\n      }\n\n      QueryResultResource.post(params, (response) => {\n        queryResult.update(response);\n\n        if ('job' in response) {\n          queryResult.refreshStatus(query);\n        }\n      }, (error) => {\n        if (error.status === 403) {\n          queryResult.update(error.data);\n        } else if (error.status === 400 && 'job' in error.data) {\n          queryResult.update(error.data);\n        } else {\n          logger('Unknown error', error);\n          queryResult.update({ job: { error: 'unknown error occurred. Please try again later.', status: 4 } });\n        }\n      });\n\n      return queryResult;\n    }\n  }\n\n\n  return QueryResult;\n}\n\nexport default function (ngModule) {\n  ngModule.factory('QueryResult', QueryResultService);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/query-result.js","import { debounce } from 'underscore';\n\nfunction Events($http) {\n  this.events = [];\n\n  this.post = debounce(() => {\n    const events = this.events;\n    this.events = [];\n\n    $http.post('api/events', events);\n  }, 1000);\n\n  this.record = function record(action, objectType, objectId, additionalProperties) {\n    const event = {\n      action,\n      object_type: objectType,\n      object_id: objectId,\n      timestamp: Date.now() / 1000.0,\n    };\n    Object.assign(event, additionalProperties);\n    this.events.push(event);\n\n    this.post();\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.service('Events', Events);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/events.js","function Alert($resource, $http) {\n  const actions = {\n    save: {\n      method: 'POST',\n      transformRequest: [(data) => {\n        const newData = Object.assign({}, data);\n        if (newData.query_id === undefined) {\n          newData.query_id = newData.query.id;\n          newData.destination_id = newData.destinations;\n          delete newData.query;\n          delete newData.destinations;\n        }\n\n        return newData;\n      }].concat($http.defaults.transformRequest),\n    },\n  };\n  const resource = $resource('api/alerts/:id', { id: '@id' }, actions);\n\n  return resource;\n}\n\nexport default function (ngModule) {\n  ngModule.factory('Alert', Alert);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/alert.js","function AlertSubscription($resource) {\n  const resource = $resource('api/alerts/:alertId/subscriptions/:subscriberId', { alertId: '@alert_id', subscriberId: '@id' });\n  return resource;\n}\n\nexport default function (ngModule) {\n  ngModule.factory('AlertSubscription', AlertSubscription);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/alert-subscription.js","function Destination($resource) {\n  const actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true },\n  };\n\n  const DestinationResource = $resource('api/destinations/:id', { id: '@id' }, actions);\n\n  return DestinationResource;\n}\n\nexport default function (ngModule) {\n  ngModule.factory('Destination', Destination);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/destination.js","import { isArray } from 'underscore';\n\nfunction transformSingle(user) {\n  if (user.groups !== undefined) {\n    user.admin = user.groups.indexOf('admin') !== -1;\n  }\n}\n\nfunction transform(data) {\n  if (isArray(data)) {\n    data.forEach(transformSingle);\n  } else {\n    transformSingle(data);\n  }\n\n  return data;\n}\n\nfunction User($resource, $http) {\n  const transformResponse = $http.defaults.transformResponse.concat(transform);\n\n  const actions = {\n    get: { method: 'GET', transformResponse },\n    save: { method: 'POST', transformResponse },\n    query: { method: 'GET', isArray: true, transformResponse },\n    delete: { method: 'DELETE', transformResponse },\n  };\n\n  const UserResource = $resource('api/users/:id', { id: '@id' }, actions);\n\n  return UserResource;\n}\n\nexport default function (ngModule) {\n  ngModule.factory('User', User);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/user.js","function Group($resource) {\n  const actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true },\n    members: { method: 'GET', cache: false, isArray: true, url: 'api/groups/:id/members' },\n    dataSources: { method: 'GET', cache: false, isArray: true, url: 'api/groups/:id/data_sources' },\n  };\n  const resource = $resource('api/groups/:id', { id: '@id' }, actions);\n  return resource;\n}\n\nexport default function (ngModule) {\n  ngModule.factory('Group', Group);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/group.js","function DataSource($resource) {\n  const actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true },\n    test: { method: 'POST', cache: false, isArray: false, url: 'api/data_sources/:id/test' },\n    getSchema: { method: 'GET', cache: false, isArray: true, url: 'api/data_sources/:id/schema' },\n  };\n\n  const DataSourceResource = $resource('api/data_sources/:id', { id: '@id' }, actions);\n\n  return DataSourceResource;\n}\n\n\nexport default function (ngModule) {\n  ngModule.factory('DataSource', DataSource);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/data-source.js","function QuerySnippet($resource) {\n  const resource = $resource('api/query_snippets/:id', { id: '@id' });\n  resource.prototype.getSnippet = function getSnippet() {\n    let name = this.trigger;\n    if (this.description !== '') {\n      name = `${this.trigger}: ${this.description}`;\n    }\n\n    return {\n      name,\n      content: this.snippet,\n      tabTrigger: this.trigger,\n    };\n  };\n\n  return resource;\n}\n\nexport default function (ngModule) {\n  ngModule.factory('QuerySnippet', QuerySnippet);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/query-snippet.js","import debug from 'debug';\n\nconst logger = debug('redash:notifications');\n\nfunction Notifications(currentUser, Events) {\n  const notificationService = { pageVisible: true };\n\n  notificationService.monitorVisibility = function monitorVisibility() {\n    let hidden;\n    let visibilityChange;\n\n    if (typeof document.hidden !== 'undefined') {\n      hidden = 'hidden';\n      visibilityChange = 'visibilitychange';\n    } else if (typeof document.msHidden !== 'undefined') {\n      hidden = 'msHidden';\n      visibilityChange = 'msvisibilitychange';\n    }\n\n    let documentHidden = document[hidden];\n\n    document.addEventListener(visibilityChange, () => {\n      if (documentHidden !== document[hidden]) {\n        if (document[hidden]) {\n          notificationService.pageVisible = false;\n        } else {\n          notificationService.pageVisible = true;\n        }\n\n        documentHidden = document[hidden];\n      }\n    });\n  };\n\n  notificationService.monitorVisibility();\n\n  notificationService.isSupported = () => {\n    if ('Notification' in window) {\n      return true;\n    }\n\n    logger('HTML5 notifications are not supported.');\n    return false;\n  };\n\n  notificationService.getPermissions = function getPermissions() {\n    if (!this.isSupported()) {\n      return;\n    }\n\n    if (Notification.permission === 'default') {\n      Notification.requestPermission((status) => {\n        if (Notification.permission !== status) {\n          Notification.permission = status;\n        }\n      });\n    }\n  };\n\n  notificationService.showNotification = function showNotification(title, content) {\n    if (!this.isSupported() || this.pageVisible || Notification.permission !== 'granted') {\n      return;\n    }\n\n    // using the 'tag' to avoid showing duplicate notifications\n    const notification = new Notification(title, { tag: title + content, body: content, icon: '/images/redash_icon_small.png' });\n    setTimeout(() => {\n      notification.close();\n    }, 3000);\n    notification.onclick = function onClick() {\n      window.focus();\n      this.close();\n      Events.record('click', 'notification');\n    };\n  };\n\n  return notificationService;\n}\n\n\nexport default function (ngModule) {\n  ngModule.factory('Notifications', Notifications);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/notifications.js","import { each } from 'underscore';\nimport Mousetrap from 'mousetrap';\nimport 'mousetrap/plugins/global-bind/mousetrap-global-bind';\n\n\nfunction KeyboardShortcuts() {\n  this.bind = function bind(keymap) {\n    each(keymap, (fn, key) => {\n      Mousetrap.bindGlobal(key, (e) => {\n        e.preventDefault();\n        fn();\n      });\n    });\n  };\n\n  this.unbind = function unbind(keymap) {\n    each(keymap, (fn, key) => {\n      Mousetrap.unbind(key);\n    });\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.service('KeyboardShortcuts', KeyboardShortcuts);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/keyboard-shortcuts.js","function OfflineListener(toastr) {\n  function addOnlineListener(toast) {\n    function onlineStateHandler() {\n      toastr.remove(toast.toastId);\n      window.removeEventListener('online', onlineStateHandler);\n    }\n    window.addEventListener('online', onlineStateHandler);\n  }\n\n  window.addEventListener('offline', () => {\n    const toast = toastr.warning('<div>Please check your Internet connection.</div>', '', {\n      allowHtml: true,\n      autoDismiss: false,\n      timeOut: false,\n      tapToDismiss: true,\n    });\n    addOnlineListener(toast);\n  });\n}\n\nexport default function (ngModule) {\n  ngModule.service('OfflineListener', OfflineListener);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/offline-listener.js","const AlertDialogComponent = {\n  template: `\n<div class=\"modal-header\">\n    <h4 class=\"modal-title\" ng-if=\"$ctrl.title\">{{$ctrl.title}}</h4>\n</div>\n<div class=\"modal-body\">\n  <p ng-bind-html=\"$ctrl.message\"></p>\n</div>\n<div class=\"modal-footer\">\n  <button class=\"btn btn-default\" ng-click=\"$ctrl.dismiss()\">Cancel</button>\n  <button class=\"btn\" ng-class=\"$ctrl.confirm.class\" ng-click=\"$ctrl.close()\" ng-if=\"$ctrl.confirm.show\">{{$ctrl.confirm.title}}</button>\n</div>\n  `,\n  bindings: {\n    close: '&',\n    dismiss: '&',\n    resolve: '<',\n  },\n  controller() {\n    this.title = this.resolve.title;\n    this.message = this.resolve.message;\n    this.confirm = Object.assign({}, { class: 'btn-sucess', show: true, title: 'OK' }, this.resolve.confirm);\n  },\n};\n\nfunction AlertDialog($uibModal) {\n  const service = {\n    open(title, message, confirm) {\n      return $uibModal.open({\n        component: 'alertDialog',\n        resolve: {\n          title: () => title,\n          message: () => message,\n          confirm: () => confirm,\n        },\n      }).result;\n    },\n  };\n\n  return service;\n}\n\nexport default function (ngModule) {\n  ngModule.component('alertDialog', AlertDialogComponent);\n  ngModule.factory('AlertDialog', AlertDialog);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/alert-dialog.js","import debug from 'debug';\n\nconst logger = debug('redash:auth');\nconst SESSION_ITEM = 'session';\nconst session = { loaded: false };\n\nfunction storeSession(sessionData) {\n  logger('Updating session to be:', sessionData);\n  Object.assign(session, sessionData, { loaded: true });\n}\n\nfunction getLocalSessionData() {\n  if (session.loaded) {\n    return session;\n  }\n\n  const sessionData = window.sessionStorage.getItem(SESSION_ITEM);\n  if (sessionData) {\n    storeSession(JSON.parse(sessionData));\n  }\n\n  return session;\n}\n\nfunction AuthService($window, $location, $q, $http) {\n  const Auth = {\n    isAuthenticated() {\n      const sessionData = getLocalSessionData();\n      return sessionData.loaded && sessionData.user.id;\n    },\n    login() {\n      const next = encodeURI($location.url());\n      logger('Calling login with next = %s', next);\n      window.location.href = `/login?next=${next}`;\n    },\n    logout() {\n      logger('Logout.');\n      window.sessionStorage.removeItem(SESSION_ITEM);\n      $window.location.href = '/logout';\n    },\n    loadSession() {\n      logger('Loading session');\n      const sessionData = getLocalSessionData();\n      if (sessionData.loaded && sessionData.user.id) {\n        logger('Resolving with local value.');\n        return $q.resolve(sessionData);\n      }\n\n      this.setApiKey(null);\n      return $http.get('/api/session').then((response) => {\n        storeSession(response.data);\n        return session;\n      });\n    },\n    loadConfig() {\n      logger('Loading config');\n      return $http.get('/api/config').then((response) => {\n        storeSession({ client_config: response.data.client_config, user: { permissions: [] } });\n        return response.data;\n      });\n    },\n    setApiKey(apiKey) {\n      logger('Set API key to: %s', apiKey);\n      this.apiKey = apiKey;\n    },\n    getApiKey() {\n      return this.apiKey;\n    },\n  };\n\n  return Auth;\n}\n\nfunction CurrentUserService() {\n  const sessionData = getLocalSessionData();\n  Object.assign(this, sessionData.user);\n\n  this.canEdit = (object) => {\n    const userId = object.user_id || (object.user && object.user.id);\n    return this.hasPermission('admin') || (userId && (userId === this.id));\n  };\n\n  this.hasPermission = permission => this.permissions.indexOf(permission) !== -1;\n\n  this.isAdmin = this.hasPermission('admin');\n}\n\nfunction ClientConfigService() {\n  Object.assign(this, getLocalSessionData().client_config);\n}\n\nfunction apiKeyHttpInterceptor($injector) {\n  return {\n    request(config) {\n      const Auth = $injector.get('Auth');\n      const apiKey = Auth.getApiKey();\n      if (apiKey) {\n        config.headers.Authorization = `Key ${apiKey}`;\n      }\n\n      return config;\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.factory('Auth', AuthService);\n  ngModule.service('currentUser', CurrentUserService);\n  ngModule.service('clientConfig', ClientConfigService);\n  ngModule.factory('apiKeyHttpInterceptor', apiKeyHttpInterceptor);\n\n  ngModule.config(($httpProvider) => {\n    $httpProvider.interceptors.push('apiKeyHttpInterceptor');\n  });\n\n  ngModule.run(($location, $window, $rootScope, $route, Auth) => {\n    $rootScope.$on('$routeChangeStart', (event, to) => {\n      if (to.authenticated && !Auth.isAuthenticated()) {\n        logger('Requested authenticated route: ', to);\n        event.preventDefault();\n        // maybe we only miss the session? try to load session\n        Auth.loadSession().then(() => {\n          logger('Loaded session');\n          $route.reload();\n        }).catch(() => {\n          logger('Need to login, redirecting');\n          Auth.login();\n        });\n      }\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/auth.js","import debug from 'debug';\n\nconst logger = debug('redash:directives');\n\nfunction compareTo() {\n  return {\n    require: 'ngModel',\n    scope: {\n      otherModelValue: '=compareTo',\n    },\n    link(scope, element, attributes, ngModel) {\n      const validate = (value) => {\n        ngModel.$setValidity('compareTo', value === scope.otherModelValue);\n      };\n\n      scope.$watch('otherModelValue', () => {\n        validate(ngModel.$modelValue);\n      });\n\n      ngModel.$parsers.push((value) => {\n        validate(value);\n        return value;\n      });\n    },\n  };\n}\n\nfunction autofocus($timeout) {\n  return {\n    link(scope, element) {\n      $timeout(() => {\n        element[0].focus();\n      });\n    },\n  };\n}\n\nfunction TitleService($rootScope) {\n  const Title = {\n    title: 'Redash',\n    set(newTitle) {\n      this.title = newTitle;\n      $rootScope.$broadcast('$titleChange');\n    },\n    get() {\n      return this.title;\n    },\n  };\n\n  return Title;\n}\n\nfunction title($rootScope, Title) {\n  return {\n    restrict: 'E',\n    link(scope, element) {\n      function updateTitle() {\n        const newTitle = Title.get();\n        logger('Updating title to: %s', newTitle);\n        element.text(newTitle);\n      }\n\n      $rootScope.$on('$routeChangeSuccess', (event, to) => {\n        if (to.title) {\n          Title.set(to.title);\n        }\n      });\n      $rootScope.$on('$titleChange', updateTitle);\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.factory('Title', TitleService);\n  ngModule.directive('title', title);\n  ngModule.directive('compareTo', compareTo);\n  ngModule.directive('autofocus', autofocus);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/directives/index.js","import moment from 'moment';\nimport { isEmpty, isArray, reduce } from 'underscore';\n\nimport registerEditVisualizationDialog from './edit-visualization-dialog';\nimport counterVisualization from './counter';\nimport tableVisualization from './table';\nimport chartVisualization from './chart';\nimport sunburstVisualization from './sunburst';\nimport sankeyVisualization from './sankey';\nimport wordCloudVisualization from './word-cloud';\nimport boxPlotVisualization from './box-plot';\nimport cohortVisualization from './cohort';\nimport mapVisualization from './map';\nimport pivotVisualization from './pivot';\n\nfunction VisualizationProvider() {\n  this.visualizations = {};\n  this.visualizationTypes = {};\n  const defaultConfig = {\n    defaultOptions: {},\n    skipTypes: false,\n    editorTemplate: null,\n  };\n\n  this.registerVisualization = (config) => {\n    const visualization = Object.assign({}, defaultConfig, config);\n\n    // TODO: this is prone to errors; better refactor.\n    if (isEmpty(this.visualizations)) {\n      this.defaultVisualization = visualization;\n    }\n\n    this.visualizations[config.type] = visualization;\n\n    if (!config.skipTypes) {\n      this.visualizationTypes[config.name] = config.type;\n    }\n  };\n\n  this.getSwitchTemplate = (property) => {\n    const pattern = /(<[a-zA-Z0-9-]*?)( |>)/;\n\n    let mergedTemplates = reduce(this.visualizations, (templates, visualization) => {\n      if (visualization[property]) {\n        const ngSwitch = `$1 ng-switch-when=\"${visualization.type}\" $2`;\n        const template = visualization[property].replace(pattern, ngSwitch);\n\n        return `${templates}\\n${template}`;\n      }\n\n      return templates;\n    }, '');\n\n    mergedTemplates = `<div ng-switch on=\"visualization.type\">${mergedTemplates}</div>`;\n\n    return mergedTemplates;\n  };\n\n  this.$get = ($resource) => {\n    const Visualization = $resource('api/visualizations/:id', { id: '@id' });\n    Visualization.visualizations = this.visualizations;\n    Visualization.visualizationTypes = this.visualizationTypes;\n    Visualization.renderVisualizationsTemplate = this.getSwitchTemplate('renderTemplate');\n    Visualization.editorTemplate = this.getSwitchTemplate('editorTemplate');\n    Visualization.defaultVisualization = this.defaultVisualization;\n\n    return Visualization;\n  };\n}\n\nfunction VisualizationName(Visualization) {\n  return {\n    restrict: 'E',\n    scope: {\n      visualization: '=',\n    },\n    template: '{{name}}',\n    replace: false,\n    link(scope) {\n      if (Visualization.visualizations[scope.visualization.type]) {\n        const defaultName = Visualization.visualizations[scope.visualization.type].name;\n        if (defaultName !== scope.visualization.name) {\n          scope.name = scope.visualization.name;\n        }\n      }\n    },\n  };\n}\n\nfunction VisualizationRenderer(Visualization) {\n  return {\n    restrict: 'E',\n    scope: {\n      visualization: '=',\n      queryResult: '=',\n    },\n    // TODO: using switch here (and in the options editor) might introduce errors and bad\n    // performance wise. It's better to eventually show the correct template based on the\n    // visualization type and not make the browser render all of them.\n    template: `<filters filters=\"filters\"></filters>\\n${Visualization.renderVisualizationsTemplate}`,\n    replace: false,\n    link(scope) {\n      scope.$watch('queryResult && queryResult.getFilters()', (filters) => {\n        if (filters) {\n          scope.filters = filters;\n        }\n      });\n    },\n  };\n}\n\nfunction VisualizationOptionsEditor(Visualization) {\n  return {\n    restrict: 'E',\n    template: Visualization.editorTemplate,\n    replace: false,\n    scope: {\n      visualization: '=',\n      query: '=',\n      queryResult: '=',\n    },\n  };\n}\n\nfunction FilterValueFilter(clientConfig) {\n  return (value, filter) => {\n    let firstValue = value;\n    if (isArray(value)) {\n      firstValue = value[0];\n    }\n\n    // TODO: deduplicate code with table.js:\n    if (filter.column.type === 'date') {\n      if (firstValue && moment.isMoment(firstValue)) {\n        return firstValue.format(clientConfig.dateFormat);\n      }\n    } else if (filter.column.type === 'datetime') {\n      if (firstValue && moment.isMoment(firstValue)) {\n        return firstValue.format(clientConfig.dateTimeFormat);\n      }\n    }\n\n    return firstValue;\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.provider('Visualization', VisualizationProvider);\n  ngModule.directive('visualizationRenderer', VisualizationRenderer);\n  ngModule.directive('visualizationOptionsEditor', VisualizationOptionsEditor);\n  ngModule.directive('visualizationName', VisualizationName);\n  ngModule.filter('filterValue', FilterValueFilter);\n  registerEditVisualizationDialog(ngModule);\n  chartVisualization(ngModule);\n  counterVisualization(ngModule);\n  sunburstVisualization(ngModule);\n  sankeyVisualization(ngModule);\n  wordCloudVisualization(ngModule);\n  boxPlotVisualization(ngModule);\n  cohortVisualization(ngModule);\n  mapVisualization(ngModule);\n  pivotVisualization(ngModule);\n  tableVisualization(ngModule);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/index.js","import { pluck } from 'underscore';\nimport { copy } from 'angular';\nimport template from './edit-visualization-dialog.html';\n\nconst EditVisualizationDialog = {\n  template,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($window, currentUser, Events, Visualization, toastr) {\n    'ngInject';\n\n    this.query = this.resolve.query;\n    this.queryResult = this.resolve.queryResult;\n    this.originalVisualization = this.resolve.visualization;\n    this.onNewSuccess = this.resolve.onNewSuccess;\n    this.visualization = copy(this.originalVisualization);\n    this.visTypes = Visualization.visualizationTypes;\n\n    this.newVisualization = () =>\n       ({\n         type: Visualization.defaultVisualization.type,\n         name: Visualization.defaultVisualization.name,\n         description: '',\n         options: Visualization.defaultVisualization.defaultOptions,\n       })\n    ;\n\n    if (!this.visualization) {\n      this.visualization = this.newVisualization();\n    }\n\n    this.typeChanged = (oldType) => {\n      const type = this.visualization.type;\n      // if not edited by user, set name to match type\n      // todo: this is wrong, because he might have edited it before.\n      if (type && oldType !== type && this.visualization && !this.visForm.name.$dirty) {\n        this.visualization.name = Visualization.visualizations[this.visualization.type].name;\n      }\n\n      // Bring default options\n      if (type && oldType !== type && this.visualization) {\n        this.visualization.options =\n          Visualization.visualizations[this.visualization.type].defaultOptions;\n      }\n    };\n\n    this.submit = () => {\n      if (this.visualization.id) {\n        Events.record('update', 'visualization', this.visualization.id, { type: this.visualization.type });\n      } else {\n        Events.record('create', 'visualization', null, { type: this.visualization.type });\n      }\n\n      this.visualization.query_id = this.query.id;\n\n      Visualization.save(this.visualization, (result) => {\n        toastr.success('Visualization saved');\n\n        const visIds = pluck(this.query.visualizations, 'id');\n        const index = visIds.indexOf(result.id);\n        if (index > -1) {\n          this.query.visualizations[index] = result;\n        } else {\n          // new visualization\n          this.query.visualizations.push(result);\n          if (this.onNewSuccess) {\n            this.onNewSuccess(result);\n          }\n        }\n        this.close();\n      }, () => {\n        toastr.error('Visualization could not be saved');\n      });\n    };\n\n    this.closeDialog = () => {\n      if (this.visForm.$dirty) {\n        if ($window.confirm('Are you sure you want to close the editor without saving?')) {\n          this.close();\n        }\n      } else {\n        this.close();\n      }\n    };\n  },\n};\n\nexport default function (ngModule) {\n  ngModule.component('editVisualizationDialog', EditVisualizationDialog);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/edit-visualization-dialog.js","module.exports = \"<div>\\n  <div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.closeDialog()\\\"><span aria-hidden=\\\"true\\\">&times;</span>\\n    </button>\\n    <h4 class=\\\"modal-title\\\">Visualization Editor</h4>\\n  </div>\\n  <div class=\\\"modal-body\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-5 p-r-5\\\">\\n        <div>\\n          <form name=\\\"$ctrl.visForm\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Visualization Type</label>\\n\\n              <select required ng-model=\\\"$ctrl.visualization.type\\\"\\n                      ng-options=\\\"value as key for (key, value) in $ctrl.visTypes\\\" class=\\\"form-control\\\"\\n                      ng-change=\\\"$ctrl.typeChanged('{{$ctrl.visualization.type}}')\\\"></select>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Visualization Name</label>\\n              <input name=\\\"name\\\" type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.visualization.name\\\"\\n                     placeholder=\\\"{{$ctrl.visualization.type | capitalize}}\\\">\\n            </div>\\n\\n            <visualization-options-editor visualization=\\\"$ctrl.visualization\\\"\\n                                          query-result=\\\"$ctrl.queryResult\\\"\\n                                          query=\\\"$ctrl.query\\\">\\n            </visualization-options-editor>\\n          </form>\\n        </div>\\n      </div>\\n      <div class=\\\"col-md-7\\\" style=\\\"border: 1px solid #eee\\\">\\n        <visualization-renderer visualization=\\\"$ctrl.visualization\\\" query-result=\\\"$ctrl.queryResult\\\"></visualization-renderer>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"modal-footer\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.closeDialog()\\\">Close</button>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"$ctrl.submit()\\\">Save</button>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/edit-visualization-dialog.html\n// module id = 342\n// module chunks = 0","import counterTemplate from './counter.html';\nimport counterEditorTemplate from './counter-editor.html';\n\nfunction CounterRenderer() {\n  return {\n    restrict: 'E',\n    template: counterTemplate,\n    link($scope) {\n      const refreshData = () => {\n        const queryData = $scope.queryResult.getData();\n        if (queryData) {\n          const rowNumber = $scope.visualization.options.rowNumber - 1;\n          const targetRowNumber = $scope.visualization.options.targetRowNumber - 1;\n          const counterColName = $scope.visualization.options.counterColName;\n          const targetColName = $scope.visualization.options.targetColName;\n\n          if ($scope.visualization.options.countRow) {\n            $scope.counterValue = queryData.length;\n          } else if (counterColName) {\n            $scope.counterValue = queryData[rowNumber][counterColName];\n          }\n          if (targetColName) {\n            $scope.targetValue = queryData[targetRowNumber][targetColName];\n\n            if ($scope.targetValue) {\n              $scope.delta = $scope.counterValue - $scope.targetValue;\n              $scope.trendPositive = $scope.delta >= 0;\n            }\n          } else {\n            $scope.targetValue = null;\n          }\n        }\n      };\n\n      $scope.$watch('visualization.options', refreshData, true);\n      $scope.$watch('queryResult && queryResult.getData()', refreshData);\n    },\n  };\n}\n\nfunction CounterEditor() {\n  return {\n    restrict: 'E',\n    template: counterEditorTemplate,\n  };\n}\n\n\nexport default function (ngModule) {\n  ngModule.directive('counterEditor', CounterEditor);\n  ngModule.directive('counterRenderer', CounterRenderer);\n\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n        '<counter-renderer ' +\n        'options=\"visualization.options\" query-result=\"queryResult\">' +\n        '</counter-renderer>';\n\n    const editTemplate = '<counter-editor></counter-editor>';\n    const defaultOptions = {\n      counterColName: 'counter',\n      rowNumber: 1,\n      targetRowNumber: 1,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'COUNTER',\n      name: 'Counter',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/counter/index.js","module.exports = \"<counter ng-class=\\\"{'positive': targetValue && trendPositive, 'negative': targetValue && !trendPositive}\\\">\\n  <value>{{counterValue|number}}</value>\\n  <counter-target ng-if=\\\"targetValue\\\">({{targetValue|number}})</counter-target>\\n  <counter-name>{{visualization.name}}</counter-name>\\n</counter>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/counter/counter.html\n// module id = 344\n// module chunks = 0","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Counter Value Column Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.counterColName\\\" class=\\\"form-control\\\" ng-disabled=\\\"visualization.options.countRow\\\"></select>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Counter Value Row Number</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"number\\\" ng-model=\\\"visualization.options.rowNumber\\\" min=\\\"1\\\" class=\\\"form-control\\\" ng-disabled=\\\"visualization.options.countRow\\\">\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Target Value Column Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.targetColName\\\" class=\\\"form-control\\\">\\n        <option value=\\\"\\\">No target value</option>\\n      </select>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\" ng-if=\\\"visualization.options.targetColName\\\">\\n    <label class=\\\"col-lg-6\\\">Target Value Row Number</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"number\\\" ng-model=\\\"visualization.options.targetRowNumber\\\" min=\\\"1\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.countRow\\\">\\n      <i class=\\\"input-helper\\\"></i> Count Rows\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/counter/counter-editor.html\n// module id = 345\n// module chunks = 0","import moment from 'moment';\nimport { _, partial, isString } from 'underscore';\nimport { getColumnCleanName } from '../../services/query-result';\nimport template from './table.html';\n\nfunction formatValue($filter, clientConfig, value, type) {\n  let formattedValue = value;\n  switch (type) {\n    case 'integer':\n      formattedValue = $filter('number')(value, 0);\n      break;\n    case 'float':\n      formattedValue = $filter('number')(value, 2);\n      break;\n    case 'boolean':\n      if (value !== undefined) {\n        formattedValue = String(value);\n      }\n      break;\n    case 'date':\n      if (value && moment.isMoment(value)) {\n        formattedValue = value.format(clientConfig.dateFormat);\n      }\n      break;\n    case 'datetime':\n      if (value && moment.isMoment(value)) {\n        formattedValue = value.format(clientConfig.dateTimeFormat);\n      }\n      break;\n    default:\n      if (isString(value)) {\n        formattedValue = $filter('linkify')(value);\n      }\n      break;\n  }\n\n  return formattedValue;\n}\n\nfunction GridRenderer(clientConfig) {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      itemsPerPage: '=',\n    },\n    template,\n    replace: false,\n    controller($scope, $filter) {\n      $scope.gridColumns = [];\n      $scope.gridRows = [];\n\n      $scope.$watch('queryResult && queryResult.getData()', (queryResult) => {\n        if (!queryResult) {\n          return;\n        }\n\n        if ($scope.queryResult.getData() == null) {\n          $scope.gridColumns = [];\n          $scope.filters = [];\n        } else {\n          $scope.filters = $scope.queryResult.getFilters();\n\n          const columns = $scope.queryResult.getColumns();\n          columns.forEach((col) => {\n            col.title = getColumnCleanName(col.name);\n            col.formatFunction = partial(formatValue, $filter, clientConfig, _, col.type);\n          });\n\n          $scope.gridRows = $scope.queryResult.getData();\n          $scope.gridColumns = columns;\n        }\n      });\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.config((VisualizationProvider) => {\n    VisualizationProvider.registerVisualization({\n      type: 'TABLE',\n      name: 'Table',\n      renderTemplate: '<grid-renderer options=\"visualization.options\" query-result=\"queryResult\"></grid-renderer>',\n      skipTypes: true,\n    });\n  });\n  ngModule.directive('gridRenderer', GridRenderer);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/table/index.js","module.exports = \"<dynamic-table rows=\\\"gridRows\\\" columns=\\\"gridColumns\\\"></dynamic-table>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/table/table.html\n// module id = 347\n// module chunks = 0","import { some, extend, has, partial, intersection, without, contains, isUndefined, sortBy, each, pluck, keys, difference } from 'underscore';\nimport plotly from './plotly';\nimport template from './chart.html';\nimport editorTemplate from './chart-editor.html';\n\nfunction ChartRenderer() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      options: '=?',\n    },\n    template,\n    replace: false,\n    controller($scope) {\n      $scope.chartSeries = [];\n\n      function zIndexCompare(series) {\n        if ($scope.options.seriesOptions[series.name]) {\n          return $scope.options.seriesOptions[series.name].zIndex;\n        }\n        return 0;\n      }\n\n      function reloadData() {\n        if (!isUndefined($scope.queryResult) && $scope.queryResult.getData()) {\n          const data = $scope.queryResult.getChartData($scope.options.columnMapping);\n          $scope.chartSeries = sortBy(data, zIndexCompare);\n        }\n      }\n\n      function reloadChart() {\n        reloadData();\n        $scope.plotlyOptions = $scope.options;\n      }\n\n      $scope.$watch('options', reloadChart, true);\n      $scope.$watch('queryResult && queryResult.getData()', reloadData);\n    },\n  };\n}\n\nfunction ChartEditor(ColorPalette, clientConfig) {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n    scope: {\n      queryResult: '=',\n      options: '=?',\n    },\n    link(scope) {\n      scope.currentTab = 'general';\n      scope.colors = extend({ Automatic: null }, ColorPalette);\n\n      scope.stackingOptions = {\n        Disabled: null,\n        Enabled: 'normal',\n        Percent: 'percent',\n      };\n\n      scope.changeTab = (tab) => {\n        scope.currentTab = tab;\n      };\n\n      scope.chartTypes = {\n        line: { name: 'Line', icon: 'line-chart' },\n        column: { name: 'Bar', icon: 'bar-chart' },\n        area: { name: 'Area', icon: 'area-chart' },\n        pie: { name: 'Pie', icon: 'pie-chart' },\n        scatter: { name: 'Scatter', icon: 'circle-o' },\n        bubble: { name: 'Bubble', icon: 'circle-o' },\n      };\n\n      if (clientConfig.allowCustomJSVisualizations) {\n        scope.chartTypes.custom = { name: 'Custom', icon: 'code' };\n      }\n\n      scope.xAxisScales = ['datetime', 'linear', 'logarithmic', 'category'];\n      scope.yAxisScales = ['linear', 'logarithmic', 'datetime'];\n\n      scope.chartTypeChanged = () => {\n        keys(scope.options.seriesOptions).forEach((key) => {\n          scope.options.seriesOptions[key].type = scope.options.globalSeriesType;\n        });\n      };\n\n      scope.showSizeColumnPicker = () => some(scope.options.seriesOptions, options => options.type === 'bubble');\n\n      scope.options.customCode = `// Available variables are x, ys, element, and Plotly\n// Type console.log(x, ys); for more info about x and ys\n// To plot your graph call Plotly.plot(element, ...)\n// Plotly examples and docs: https://plot.ly/javascript/`;\n\n      function refreshColumns() {\n        scope.columns = scope.queryResult.getColumns();\n        scope.columnNames = pluck(scope.columns, 'name');\n        if (scope.columnNames.length > 0) {\n          each(difference(keys(scope.options.columnMapping), scope.columnNames), (column) => {\n            delete scope.options.columnMapping[column];\n          });\n        }\n      }\n\n      function refreshColumnsAndForm() {\n        refreshColumns();\n        if (!scope.queryResult.getData() ||\n            scope.queryResult.getData().length === 0 ||\n            scope.columns.length === 0) {\n          return;\n        }\n        scope.form.yAxisColumns = intersection(scope.form.yAxisColumns, scope.columnNames);\n        if (!contains(scope.columnNames, scope.form.xAxisColumn)) {\n          scope.form.xAxisColumn = undefined;\n        }\n        if (!contains(scope.columnNames, scope.form.groupby)) {\n          scope.form.groupby = undefined;\n        }\n      }\n\n      function refreshSeries() {\n        const seriesNames = pluck(scope.queryResult.getChartData(scope.options.columnMapping), 'name');\n        const existing = keys(scope.options.seriesOptions);\n        each(difference(seriesNames, existing), (name) => {\n          scope.options.seriesOptions[name] = {\n            type: scope.options.globalSeriesType,\n            yAxis: 0,\n          };\n          scope.form.seriesList.push(name);\n        });\n        each(difference(existing, seriesNames), (name) => {\n          scope.form.seriesList = without(scope.form.seriesList, name);\n          delete scope.options.seriesOptions[name];\n        });\n      }\n\n      function setColumnRole(role, column) {\n        scope.options.columnMapping[column] = role;\n      }\n\n      function unsetColumn(column) {\n        setColumnRole('unused', column);\n      }\n\n      refreshColumns();\n\n      scope.$watch('options.columnMapping', () => {\n        if (scope.queryResult.status === 'done') {\n          refreshSeries();\n        }\n      }, true);\n\n      scope.$watch(() => [scope.queryResult.getId(), scope.queryResult.status], (changed) => {\n        if (!changed[0] || changed[1] !== 'done') {\n          return;\n        }\n\n        refreshColumnsAndForm();\n        refreshSeries();\n      }, true);\n\n      scope.form = {\n        yAxisColumns: [],\n        seriesList: sortBy(keys(scope.options.seriesOptions), name =>\n           scope.options.seriesOptions[name].zIndex\n        ),\n      };\n\n      scope.$watchCollection('form.seriesList', (value) => {\n        each(value, (name, index) => {\n          scope.options.seriesOptions[name].zIndex = index;\n          scope.options.seriesOptions[name].index = 0; // is this needed?\n        });\n      });\n\n\n      scope.$watchCollection('form.yAxisColumns', (value, old) => {\n        each(old, unsetColumn);\n        each(value, partial(setColumnRole, 'y'));\n      });\n\n      scope.$watch('form.xAxisColumn', (value, old) => {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) { setColumnRole('x', value); }\n      });\n\n      scope.$watch('form.errorColumn', (value, old) => {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('yError', value);\n        }\n      });\n\n      scope.$watch('form.sizeColumn', (value, old) => {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('size', value);\n        }\n      });\n\n\n      scope.$watch('form.groupby', (value, old) => {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('series', value);\n        }\n      });\n\n      if (!has(scope.options, 'legend')) {\n        scope.options.legend = { enabled: true };\n      }\n\n      if (!has(scope.options, 'bottomMargin')) {\n        scope.options.bottomMargin = 50;\n      }\n\n      if (scope.columnNames) {\n        each(scope.options.columnMapping, (value, key) => {\n          if (scope.columnNames.length > 0 && !contains(scope.columnNames, key)) {\n            return;\n          }\n          if (value === 'x') {\n            scope.form.xAxisColumn = key;\n          } else if (value === 'y') {\n            scope.form.yAxisColumns.push(key);\n          } else if (value === 'series') {\n            scope.form.groupby = key;\n          } else if (value === 'yError') {\n            scope.form.errorColumn = key;\n          } else if (value === 'size') {\n            scope.form.sizeColumn = key;\n          }\n        });\n      }\n    },\n  };\n}\n\nconst ColorBox = {\n  bindings: {\n    color: '<',\n  },\n  template: \"<span style='width: 12px; height: 12px; background-color: {{$ctrl.color}}; display: inline-block; margin-right: 5px;'></span>\",\n};\n\nexport default function (ngModule) {\n  ngModule.component('colorBox', ColorBox);\n  ngModule.directive('chartRenderer', ChartRenderer);\n  ngModule.directive('chartEditor', ChartEditor);\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate = '<chart-renderer options=\"visualization.options\" query-result=\"queryResult\"></chart-renderer>';\n    const editTemplate = '<chart-editor options=\"visualization.options\" query-result=\"queryResult\"></chart-editor>';\n\n    const defaultOptions = {\n      globalSeriesType: 'column',\n      sortX: true,\n      legend: { enabled: true },\n      yAxis: [{ type: 'linear' }, { type: 'linear', opposite: true }],\n      xAxis: { type: 'datetime', labels: { enabled: true } },\n      error_y: { type: 'data', visible: true },\n      series: { stacking: null, error_y: { type: 'data', visible: true } },\n      seriesOptions: {},\n      columnMapping: {},\n      bottomMargin: 50,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'CHART',\n      name: 'Chart',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n  plotly(ngModule);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/chart/index.js","import { isEmpty, isEqual, isArray, isNumber, isUndefined, contains, min, max, has, each, values, sortBy, union, pluck, identity } from 'underscore';\nimport d3 from 'd3';\nimport Plotly from 'plotly.js/lib/core';\nimport bar from 'plotly.js/lib/bar';\nimport pie from 'plotly.js/lib/pie';\nimport histogram from 'plotly.js/lib/histogram';\n\nimport moment from 'moment';\n\nPlotly.register([bar, pie, histogram]);\nPlotly.setPlotConfig({\n  modeBarButtonsToRemove: ['sendDataToCloud'],\n});\n\n// The following colors will be used if you pick \"Automatic\" color.\nconst BaseColors = {\n  Blue: '#4572A7',\n  Red: '#AA4643',\n  Green: '#89A54E',\n  Purple: '#80699B',\n  Cyan: '#3D96AE',\n  Orange: '#DB843D',\n  'Light Blue': '#92A8CD',\n  Lilac: '#A47D7C',\n  'Light Green': '#B5CA92',\n  Brown: '#A52A2A',\n  Black: '#000000',\n  Gray: '#808080',\n  Pink: '#FFC0CB',\n  'Dark Blue': '#00008b',\n};\n\n// Additional colors for the user to choose from:\nconst ColorPalette = Object.assign({}, BaseColors, {\n  'Indian Red': '#F8766D',\n  'Green 2': '#53B400',\n  'Green 3': '#00C094',\n  DarkTurquoise: '#00B6EB',\n  'Dark Violet': '#A58AFF',\n  'Pink 2': '#FB61D7',\n});\n\nconst ColorPaletteArray = values(BaseColors);\n\nfunction fillXValues(seriesList) {\n  const xValues = sortBy(union(...pluck(seriesList, 'x')), identity);\n  seriesList.forEach((series) => {\n    series.x = sortBy(series.x, identity);\n\n    each(xValues, (value, index) => {\n      if (series.x[index] !== value) {\n        series.x.splice(index, 0, value);\n        series.y.splice(index, 0, null);\n      }\n    });\n  });\n}\n\nfunction storeOriginalHeightForEachSeries(seriesList) {\n  seriesList.forEach((series) => {\n    if (!has(series, 'visible')) {\n      series.visible = true;\n      series.original_y = series.y.slice();\n    }\n  });\n}\n\nfunction getEnabledSeries(seriesList) {\n  return seriesList.filter(series => series.visible === true);\n}\n\nfunction initializeTextAndHover(seriesList) {\n  seriesList.forEach((series) => {\n    series.text = [];\n    series.hoverinfo = 'text+name';\n  });\n}\n\nfunction normalAreaStacking(seriesList) {\n  fillXValues(seriesList);\n  storeOriginalHeightForEachSeries(seriesList);\n  initializeTextAndHover(seriesList);\n\n  const enabledSeriesList = getEnabledSeries(seriesList);\n\n  each(enabledSeriesList, (series, seriesIndex, list) => {\n    each(series.y, (_, yIndex) => {\n      const cumulativeHeightOfPreviousSeries =\n        seriesIndex > 0 ? list[seriesIndex - 1].y[yIndex] : 0;\n      const cumulativeHeightWithThisSeries =\n        cumulativeHeightOfPreviousSeries + series.original_y[yIndex];\n\n      series.y[yIndex] = cumulativeHeightWithThisSeries;\n      series.text.push(`Value: ${series.original_y[yIndex]}<br>Sum: ${cumulativeHeightWithThisSeries}`);\n    });\n  });\n}\n\nfunction lastVisibleY(seriesList, lastSeriesIndex, yIndex) {\n  for (let i = lastSeriesIndex; i >= 0; i -= 1) {\n    if (seriesList[i].visible === true) {\n      return seriesList[i].y[yIndex];\n    }\n  }\n  return 0;\n}\n\nfunction percentAreaStacking(seriesList) {\n  if (seriesList.length === 0) {\n    return;\n  }\n  fillXValues(seriesList);\n  storeOriginalHeightForEachSeries(seriesList);\n  initializeTextAndHover(seriesList);\n\n  each(seriesList[0].y, (seriesY, yIndex) => {\n    const sumOfCorrespondingDataPoints = seriesList.reduce((total, series) =>\n       total + series.original_y[yIndex]\n    , 0);\n\n    each(seriesList, (series, seriesIndex) => {\n      const percentage = (series.original_y[yIndex] / sumOfCorrespondingDataPoints) * 100;\n      const previousVisiblePercentage = lastVisibleY(seriesList, seriesIndex - 1, yIndex);\n      series.y[yIndex] = percentage + previousVisiblePercentage;\n      series.text.push(`Value: ${series.original_y[yIndex]}<br>Relative: ${percentage.toFixed(2)}%`);\n    });\n  });\n}\n\nfunction percentBarStacking(seriesList) {\n  if (seriesList.length === 0) {\n    return;\n  }\n  fillXValues(seriesList);\n  initializeTextAndHover(seriesList);\n\n  for (let i = 0; i < seriesList[0].y.length; i += 1) {\n    let sum = 0;\n    for (let j = 0; j < seriesList.length; j += 1) {\n      sum += seriesList[j].y[i];\n    }\n    for (let j = 0; j < seriesList.length; j += 1) {\n      const value = seriesList[j].y[i] / sum * 100;\n      seriesList[j].text.push(`Value: ${seriesList[j].y[i]}<br>Relative: ${value.toFixed(2)}%`);\n      seriesList[j].y[i] = value;\n    }\n  }\n}\n\nfunction normalizeValue(value) {\n  if (moment.isMoment(value)) {\n    return value.format('YYYY-MM-DD HH:mm:ss');\n  }\n  return value;\n}\n\nfunction seriesMinValue(series) {\n  return min(series.map(s => min(s.y)));\n}\n\nfunction seriesMaxValue(series) {\n  return max(series.map(s => max(s.y)));\n}\n\nfunction leftAxisSeries(series) {\n  return series.filter(s => s.yaxis !== 'y2');\n}\n\nfunction rightAxisSeries(series) {\n  return series.filter(s => s.yaxis === 'y2');\n}\n\nfunction getScaleType(scale) {\n  if (scale === 'datetime') {\n    return 'date';\n  }\n  if (scale === 'logarithmic') {\n    return 'log';\n  }\n  return scale;\n}\n\nfunction getColor(index) {\n  return ColorPaletteArray[index % ColorPaletteArray.length];\n}\n\nconst PlotlyChart = () => {\n  let bottomMargin = 50;\n  return {\n    restrict: 'E',\n    template: '<div></div>',\n    scope: {\n      options: '=',\n      series: '=',\n      height: '=',\n    },\n    link(scope, element) {\n      function calculateHeight() {\n        const height = Math.max(scope.height, (scope.height - 50) + bottomMargin);\n        return height;\n      }\n\n      function setType(series, type) {\n        if (type === 'column') {\n          series.type = 'bar';\n        } else if (type === 'line') {\n          series.mode = 'lines';\n        } else if (type === 'area') {\n          series.fill = scope.options.series.stacking === null ? 'tozeroy' : 'tonexty';\n          series.mode = 'lines';\n        } else if (type === 'scatter') {\n          series.type = 'scatter';\n          series.mode = 'markers';\n        } else if (type === 'bubble') {\n          series.mode = 'markers';\n        }\n      }\n\n      function getTitle(axis) {\n        if (!isUndefined(axis) && !isUndefined(axis.title)) {\n          return axis.title.text;\n        }\n        return null;\n      }\n\n\n      function recalculateOptions() {\n        scope.data.length = 0;\n        scope.layout.showlegend = has(scope.options, 'legend') ? scope.options.legend.enabled : true;\n        if (has(scope.options, 'bottomMargin')) {\n          bottomMargin = parseInt(scope.options.bottomMargin, 10);\n          scope.layout.margin.b = bottomMargin;\n        }\n        delete scope.layout.barmode;\n        delete scope.layout.xaxis;\n        delete scope.layout.yaxis;\n        delete scope.layout.yaxis2;\n\n        if (scope.options.globalSeriesType === 'pie') {\n          const hasX = contains(values(scope.options.columnMapping), 'x');\n          const rows = scope.series.length > 2 ? 2 : 1;\n          const cellsInRow = Math.ceil(scope.series.length / rows);\n          const cellWidth = 1 / cellsInRow;\n          const cellHeight = 1 / rows;\n          const xPadding = 0.02;\n          const yPadding = 0.05;\n\n          each(scope.series, (series, index) => {\n            const xPosition = (index % cellsInRow) * cellWidth;\n            const yPosition = Math.floor(index / cellsInRow) * cellHeight;\n            const plotlySeries = {\n              values: [],\n              labels: [],\n              type: 'pie',\n              hole: 0.4,\n              marker: { colors: ColorPaletteArray },\n              text: series.name,\n              textposition: 'inside',\n              name: series.name,\n              domain: {\n                x: [xPosition, xPosition + cellWidth - xPadding],\n                y: [yPosition, yPosition + cellHeight - yPadding],\n              },\n            };\n\n            series.data.forEach((row) => {\n              plotlySeries.values.push(row.y);\n              plotlySeries.labels.push(hasX ? row.x : `Slice ${index}`);\n            });\n\n            scope.data.push(plotlySeries);\n          });\n          return;\n        }\n\n        let hasY2 = false;\n        const sortX = scope.options.sortX === true || scope.options.sortX === undefined;\n        const useUnifiedXaxis = sortX && scope.options.xAxis.type === 'category';\n\n        let unifiedX = null;\n        if (useUnifiedXaxis) {\n          unifiedX = sortBy(union(...scope.series.map(s => pluck(s.data, 'x'))), identity);\n        }\n\n        each(scope.series, (series, index) => {\n          const seriesOptions = scope.options.seriesOptions[series.name] ||\n            { type: scope.options.globalSeriesType };\n\n          const plotlySeries = {\n            x: [],\n            y: [],\n            error_y: { array: [] },\n            name: seriesOptions.name || series.name,\n            marker: { color: seriesOptions.color ? seriesOptions.color : getColor(index) },\n          };\n\n          if (seriesOptions.yAxis === 1 && (scope.options.series.stacking === null || seriesOptions.type === 'line')) {\n            hasY2 = true;\n            plotlySeries.yaxis = 'y2';\n          }\n\n          setType(plotlySeries, seriesOptions.type);\n          let data = series.data;\n          if (sortX) {\n            data = sortBy(data, 'x');\n          }\n\n          if (useUnifiedXaxis && index === 0) {\n            const yValues = {};\n            const eValues = {};\n\n            data.forEach((row) => {\n              yValues[row.x] = row.y;\n              if (row.yError) {\n                eValues[row.x] = row.yError;\n              }\n            });\n\n            unifiedX.forEach((x) => {\n              plotlySeries.x.push(normalizeValue(x));\n              plotlySeries.y.push(normalizeValue(yValues[x] || null));\n              if (!isUndefined(eValues[x])) {\n                plotlySeries.error_y.array.push(normalizeValue(eValues[x] || null));\n              }\n            });\n          } else {\n            data.forEach((row) => {\n              plotlySeries.x.push(normalizeValue(row.x));\n              plotlySeries.y.push(normalizeValue(row.y));\n              if (row.yError) {\n                plotlySeries.error_y.array.push(normalizeValue(row.yError));\n              }\n            });\n          }\n          if (!plotlySeries.error_y.length) {\n            delete plotlySeries.error_y.length;\n          }\n\n          if (seriesOptions.type === 'bubble') {\n            plotlySeries.marker = {\n              size: pluck(data, 'size'),\n            };\n          }\n          scope.data.push(plotlySeries);\n        });\n\n        scope.layout.xaxis = {\n          title: getTitle(scope.options.xAxis),\n          type: getScaleType(scope.options.xAxis.type),\n        };\n\n        if (!isUndefined(scope.options.xAxis.labels)) {\n          scope.layout.xaxis.showticklabels = scope.options.xAxis.labels.enabled;\n        }\n\n        if (isArray(scope.options.yAxis)) {\n          scope.layout.yaxis = {\n            title: getTitle(scope.options.yAxis[0]),\n            type: getScaleType(scope.options.yAxis[0].type),\n          };\n\n          if (isNumber(scope.options.yAxis[0].rangeMin) ||\n              isNumber(scope.options.yAxis[0].rangeMax)) {\n            const minY = scope.options.yAxis[0].rangeMin ||\n              Math.min(0, seriesMinValue(leftAxisSeries(scope.data)));\n            const maxY = scope.options.yAxis[0].rangeMax ||\n              seriesMaxValue(leftAxisSeries(scope.data));\n\n            scope.layout.yaxis.range = [minY, maxY];\n          }\n        }\n        if (hasY2 && !isUndefined(scope.options.yAxis)) {\n          scope.layout.yaxis2 = {\n            title: getTitle(scope.options.yAxis[1]),\n            type: getScaleType(scope.options.yAxis[1].type),\n            overlaying: 'y',\n            side: 'right',\n          };\n\n          if (isNumber(scope.options.yAxis[1].rangeMin) ||\n              isNumber(scope.options.yAxis[1].rangeMax)) {\n            const minY = scope.options.yAxis[1].rangeMin ||\n              Math.min(0, seriesMinValue(rightAxisSeries(scope.data)));\n            const maxY = scope.options.yAxis[1].rangeMax ||\n              seriesMaxValue(rightAxisSeries(scope.data));\n\n            scope.layout.yaxis2.range = [minY, maxY];\n          }\n        } else {\n          delete scope.layout.yaxis2;\n        }\n\n        if (scope.options.series.stacking === 'normal') {\n          scope.layout.barmode = 'stack';\n          if (scope.options.globalSeriesType === 'area') {\n            normalAreaStacking(scope.data);\n          }\n        } else if (scope.options.series.stacking === 'percent') {\n          scope.layout.barmode = 'stack';\n          if (scope.options.globalSeriesType === 'area') {\n            percentAreaStacking(scope.data);\n          } else if (scope.options.globalSeriesType === 'column') {\n            percentBarStacking(scope.data);\n          }\n        }\n\n        scope.layout.margin.b = bottomMargin;\n        scope.layout.height = calculateHeight();\n      }\n\n      scope.$watch('series', recalculateOptions);\n      scope.$watch('options', recalculateOptions, true);\n\n      scope.layout = {\n        margin: { l: 50, r: 50, b: bottomMargin, t: 20, pad: 4 },\n        height: calculateHeight(),\n        autosize: true,\n      };\n      scope.plotlyOptions = { showLink: false, displaylogo: false };\n      scope.data = [];\n\n      const plotlyElement = element[0].children[0];\n      Plotly.newPlot(plotlyElement, scope.data, scope.layout, scope.plotlyOptions);\n\n      plotlyElement.on('plotly_afterplot', () => {\n        if (scope.options.globalSeriesType === 'area' && (scope.options.series.stacking === 'normal' || scope.options.series.stacking === 'percent')) {\n          document.querySelectorAll('.legendtoggle').forEach((rectDiv, i) => {\n            d3.select(rectDiv).on('click', () => {\n              const maxIndex = scope.data.length - 1;\n              const itemClicked = scope.data[maxIndex - i];\n\n              itemClicked.visible = (itemClicked.visible === true) ? 'legendonly' : true;\n              if (scope.options.series.stacking === 'normal') {\n                normalAreaStacking(scope.data);\n              } else if (scope.options.series.stacking === 'percent') {\n                percentAreaStacking(scope.data);\n              }\n              Plotly.redraw(plotlyElement);\n            });\n          });\n        }\n      });\n      scope.$watch('layout', (layout, old) => {\n        if (isEqual(layout, old)) {\n          return;\n        }\n        Plotly.relayout(plotlyElement, layout);\n      }, true);\n\n      scope.$watch('data', (data) => {\n        if (!isEmpty(data)) {\n          Plotly.redraw(plotlyElement);\n        }\n      }, true);\n    },\n  };\n};\n\nconst CustomPlotlyChart = (clientConfig) => {\n  const customChart = {\n    restrict: 'E',\n    template: '<div></div>',\n    scope: {\n      series: '=',\n      options: '=',\n      height: '=',\n    },\n    link(scope, element) {\n      if (!clientConfig.allowCustomJSVisualizations) {\n        return;\n      }\n      const refresh = () => {\n        // eslint-disable-next-line no-eval\n        const codeCall = eval(`codeCall = function(x, ys, element, Plotly){ ${scope.options.customCode} }`);\n        codeCall(scope.x, scope.ys, element[0].children[0], Plotly);\n      };\n      const timeSeriesToPlotlySeries = () => {\n        scope.x = [];\n        scope.ys = {};\n        each(scope.series, (series) => {\n          scope.ys[series.name] = [];\n          each(series.data, (point) => {\n            scope.x.push(normalizeValue(point.x));\n            scope.ys[series.name].push(normalizeValue(point.y));\n          });\n        });\n      };\n      scope.$watch('options.customCode', () => {\n        try {\n          refresh();\n        } catch (err) {\n          if (scope.options.enableConsoleLogs) {\n            // eslint-disable-next-line no-console\n            console.log(`Error while executing custom graph: ${err}`);\n          }\n        }\n      }, true);\n      scope.$watch('series', () => {\n        timeSeriesToPlotlySeries();\n        refresh();\n      }, true);\n    },\n  };\n  return customChart;\n};\n\nexport default function (ngModule) {\n  ngModule.constant('ColorPalette', ColorPalette);\n  ngModule.directive('plotlyChart', PlotlyChart);\n  ngModule.directive('customPlotlyChart', CustomPlotlyChart);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/chart/plotly.js","module.exports = \"<div ng-if=\\\"plotlyOptions.globalSeriesType != 'custom'\\\">\\n  <plotly-chart options='plotlyOptions' series='chartSeries' height=\\\"300\\\"></plotly-chart>\\n</div>\\n<div ng-if=\\\"plotlyOptions.globalSeriesType == 'custom'\\\">\\n  <custom-plotly-chart series='chartSeries' options='plotlyOptions' height=\\\"300\\\"></custom-plotly-chart>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/chart/chart.html\n// module id = 590\n// module chunks = 0","module.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\">\\n      <a ng-click=\\\"changeTab('general')\\\">General</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'xAxis'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('xAxis')\\\">X Axis</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'yAxis'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('yAxis')\\\">Y Axis</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'series'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('series')\\\">Series</a>\\n    </li>\\n  </ul>\\n  <div ng-show=\\\"currentTab == 'general'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Chart Type</label>\\n      <div ng-if=\\\"chartTypes\\\"><!--the if is a weird workaround-->\\n        <ui-select ng-model=\\\"options.globalSeriesType\\\" on-select=\\\"chartTypeChanged()\\\">\\n          <ui-select-match placeholder=\\\"Choose chart type...\\\">\\n            <div>\\n              <i class=\\\"fa fa-{{$select.selected.value.icon}}\\\"></i>\\n              {{$select.selected.value.name}}\\n            </div>\\n          </ui-select-match>\\n          <ui-select-choices repeat=\\\"info.chartType as (chartType, info) in chartTypes\\\">\\n            <div><i class=\\\"fa fa-{{info.value.icon}}\\\"></i><span> </span><span\\n              ng-bind-html=\\\"info.value.name | highlight: $select.search\\\"></span></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n\\n\\n    <div class=\\\"form-group\\\" ng-class=\\\"{'has-error': chartEditor.xAxisColumn.$invalid}\\\">\\n      <label class=\\\"control-label\\\">X Column</label>\\n\\n      <ui-select name=\\\"xAxisColumn\\\" required ng-model=\\\"form.xAxisColumn\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <!-- not using regular validation (chartEditor.yAxisColumns.$invalid) due to a bug in ui-select with multiple choices-->\\n    <div class=\\\"form-group\\\" ng-class=\\\"{'has-error': !form.yAxisColumns || form.yAxisColumns.length == 0}\\\">\\n      <label class=\\\"control-label\\\">Y Columns</label>\\n\\n      <ui-select multiple name=\\\"yAxisColumns\\\" required ng-model=\\\"form.yAxisColumns\\\">\\n        <ui-select-match placeholder=\\\"Choose columns...\\\">{{$item}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.groupby | remove:form.xAxisColumn\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label class=\\\"control-label\\\">Group by</label>\\n      <ui-select name=\\\"groupby\\\" ng-model=\\\"form.groupby\\\" class=\\\"clearable\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">\\n          {{$select.selected}}\\n        </ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.xAxisColumn\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"showSizeColumnPicker()\\\">\\n      <label class=\\\"control-label\\\">Bubble size column</label>\\n\\n      <ui-select name=\\\"sizeColumn\\\" ng-model=\\\"form.sizeColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label class=\\\"control-label\\\">Errors column</label>\\n\\n      <ui-select name=\\\"errorColumn\\\" ng-model=\\\"form.errorColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.legend.enabled\\\">\\n        <i class=\\\"input-helper\\\"></i> Show Legend\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label class=\\\"control-label\\\">Stacking</label>\\n\\n      <div ng-if=\\\"stackingOptions\\\"><!--the if is a weird workaround-->\\n        <ui-select ng-model=\\\"options.series.stacking\\\"\\n                   ng-disabled=\\\"['line', 'area', 'column'].indexOf(options.globalSeriesType) == -1\\\">\\n          <ui-select-match placeholder=\\\"Choose Stacking...\\\">{{$select.selected.key | capitalize}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"value.value as (key, value) in stackingOptions\\\">\\n            <div ng-bind-html=\\\"value.key | highlight: $select.search\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType == 'custom'\\\">\\n    <label class=\\\"control-label\\\">Custom code</label>\\n    <textarea ng-model=\\\"options.customCode\\\" class=\\\"form-control\\\" rows=\\\"10\\\">\\n    </textarea>\\n  </div>\\n\\n  <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType == 'custom'\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.enableConsoleLogs\\\">\\n        <i class=\\\"input-helper\\\"></i> Show errors in the console\\n      </label>\\n    </div>\\n\\n\\n  <div ng-show=\\\"currentTab == 'xAxis'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Scale</label>\\n      <ui-select ng-model=\\\"options.xAxis.type\\\">\\n        <ui-select-match placeholder=\\\"Choose Scale...\\\">{{$select.selected | capitalize}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"scaleType in xAxisScales\\\">\\n          <div ng-bind-html=\\\"scaleType | capitalize | highlight: $select.search\\\"></div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Name</label>\\n      <input ng-model=\\\"options.xAxis.title.text\\\" type=\\\"text\\\" class=\\\"form-control\\\"></input>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.sortX\\\">\\n        <i class=\\\"input-helper\\\"></i> Sort Values\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.xAxis.labels.enabled\\\">\\n        <i class=\\\"input-helper\\\"></i> Show Labels\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Height</label>\\n      <input name=\\\"x-axis-height\\\" type=\\\"number\\\" class=\\\"form-control\\\" ng-model=\\\"options.bottomMargin\\\">\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'yAxis'\\\">\\n    <div ng-repeat=\\\"yAxis in options.yAxis\\\">\\n      <h4>{{$index == 0 ? 'Left' : 'Right'}} Y Axis</h4>\\n\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Scale</label>\\n        <ui-select ng-model=\\\"yAxis.type\\\">\\n          <ui-select-match placeholder=\\\"Choose Scale...\\\">{{$select.selected | capitalize}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"scaleType in yAxisScales\\\">\\n            <div ng-bind-html=\\\"scaleType | capitalize | highlight: $select.search\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Name</label>\\n        <input ng-model=\\\"yAxis.title.text\\\" type=\\\"text\\\" class=\\\"form-control\\\"></input>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Min Value</label>\\n        <input ng-model=\\\"yAxis.rangeMin\\\" type=\\\"number\\\" step=\\\"any\\\" placeholder=\\\"Auto\\\" class=\\\"form-control\\\"></input>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Max Value</label>\\n        <input ng-model=\\\"yAxis.rangeMax\\\" type=\\\"number\\\" step=\\\"any\\\" placeholder=\\\"Auto\\\" class=\\\"form-control\\\"></input>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab=='series'\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <thead>\\n      <th>zIndex</th>\\n      <th>Left Y Axis</th>\\n      <th>Right Y Axis</th>\\n      <th>Label</th>\\n      <th>Color</th>\\n      <th>Type</th>\\n      </thead>\\n      <tbody ui-sortable ng-model=\\\"form.seriesList\\\">\\n      <tr ng-repeat=\\\"name in form.seriesList\\\">\\n        <td style=\\\"cursor: move;\\\"><i class=\\\"fa fa-arrows-v\\\"></i> <span\\n          ng-bind=\\\"options.seriesOptions[name].zIndex + 1\\\"></span></td>\\n        <td>\\n          <input type=\\\"radio\\\" ng-value=\\\"0\\\" ng-model=\\\"options.seriesOptions[name].yAxis\\\">\\n        </td>\\n        <td>\\n          <input type=\\\"radio\\\" ng-value=\\\"1\\\" ng-model=\\\"options.seriesOptions[name].yAxis\\\">\\n        </td>\\n        <td style=\\\"padding: 3px; width: 140px;\\\">\\n          <input placeholder=\\\"{{name}}\\\" class=\\\"form-control input-sm super-small-input\\\" type=\\\"text\\\"\\n                 ng-model=\\\"options.seriesOptions[name].name\\\">\\n        </td>\\n        <td style=\\\"padding: 3px; width: 35px;\\\">\\n          <ui-select ng-model=\\\"options.seriesOptions[name].color\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </td>\\n        <td style=\\\"padding: 3px; width: 105px;\\\">\\n          <ui-select ng-model=\\\"options.seriesOptions[name].type\\\">\\n            <ui-select-match placeholder=\\\"Chart Type\\\">\\n              <div>\\n                <i class=\\\"fa fa-{{$select.selected.value.icon}}\\\"></i>\\n                {{$select.selected.value.name}}\\n              </div>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"info.chartType as (chartType, info) in chartTypes\\\">\\n              <div><i class=\\\"fa fa-{{info.value.icon}}\\\"></i><span> </span><span\\n                ng-bind-html=\\\"info.value.name | highlight: $select.search\\\"></span></div>\\n            </ui-select-choices>\\n          </ui-select>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/chart/chart-editor.html\n// module id = 591\n// module chunks = 0","import jQuery from 'jquery';\nimport Sunburst from './sunburst';\nimport editorTemplate from './sunburst-sequence-editor.html';\n\nfunction sunburstSequenceRenderer() {\n  return {\n    restrict: 'E',\n    link(scope, element) {\n      let sunburst = new Sunburst(scope, element);\n\n      function resize() {\n        sunburst.remove();\n        sunburst = new Sunburst(scope, element);\n      }\n\n      jQuery(window).on('resize', resize);\n      scope.$watch('visualization.options.height', (oldValue, newValue) => {\n        if (oldValue !== newValue) {\n          resize();\n        }\n      });\n    },\n  };\n}\n\nfunction sunburstSequenceEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('sunburstSequenceRenderer', sunburstSequenceRenderer);\n  ngModule.directive('sunburstSequenceEditor', sunburstSequenceEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n      '<sunburst-sequence-renderer options=\"visualization.options\" query-result=\"queryResult\"></sunburst-sequence-renderer>';\n\n    const editTemplate = '<sunburst-sequence-editor></sunburst-sequence-editor>';\n    const defaultOptions = {\n      height: 300,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'SUNBURST_SEQUENCE',\n      name: 'Sunburst Sequence',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  }\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/sunburst/index.js","import d3 from 'd3';\nimport _ from 'underscore';\nimport angular from 'angular';\n\nconst exitNode = '<<<Exit>>>';\nconst colors = d3.scale.category10();\n\n// helper function colorMap - color gray if \"end\" is detected\nfunction colorMap(d) {\n  return colors(d.name);\n}\n\n\n// Return array of ancestors of nodes, highest first, but excluding the root.\nfunction getAncestors(node) {\n  const path = [];\n  let current = node;\n\n  while (current.parent) {\n    path.unshift(current);\n    current = current.parent;\n  }\n  return path;\n}\n\n// The following is based on @chrisrzhou's example from: http://bl.ocks.org/chrisrzhou/d5bdd8546f64ca0e4366.\nexport default function Sunburst(scope, element) {\n  this.element = element;\n  this.watches = [];\n\n  // svg dimensions\n  const width = element[0].parentElement.clientWidth;\n  const height = scope.visualization.options.height;\n  const radius = Math.min(width, height) / 2;\n\n  // Breadcrumb dimensions: width, height, spacing, width of tip/tail.\n  const b = {\n    w: width / 6,\n    h: 30,\n    s: 3,\n    t: 10,\n  };\n\n  // margins\n  const margin = {\n    top: radius,\n    bottom: 50,\n    left: radius,\n    right: 0,\n  };\n\n  /**\n   * Drawing variables:\n   *\n   * e.g. colors, totalSize, partitions, arcs\n   */\n  // Mapping of nodes to colorscale.\n\n  // Total size of all nodes, to be used later when data is loaded\n  let totalSize = 0;\n\n  // create d3.layout.partition\n  const partition = d3.layout.partition()\n    .size([2 * Math.PI, radius * radius])\n    .value(d =>\n       d.size\n    );\n\n  // create arcs for drawing D3 paths\n  const arc = d3.svg.arc()\n    .startAngle(d =>\n       d.x\n    )\n    .endAngle(d =>\n       d.x + d.dx\n    )\n    .innerRadius(d =>\n       Math.sqrt(d.y)\n    )\n    .outerRadius(d =>\n       Math.sqrt(d.y + d.dy)\n    );\n\n\n  /**\n   * Define and initialize D3 select references and div-containers\n   *\n   * e.g. vis, breadcrumbs, lastCrumb, summary, sunburst, legend\n   */\n  // create main vis selection\n  const vis = d3.select(element[0])\n    .append('div').classed('vis-container', true)\n    .style('position', 'relative')\n    .style('margin-top', '5px')\n    .style('height', `${height + 2 * b.h}px`);\n\n  // create and position breadcrumbs container and svg\n  const breadcrumbs = vis\n    .append('div').classed('breadcrumbs-container', true)\n    .append('svg')\n    .attr('width', width)\n    .attr('height', b.h)\n    .attr('fill', 'white')\n    .attr('font-weight', 600);\n\n  const marginLeft = (width - radius * 2) / 2;\n\n  // create and position SVG\n  const sunburst = vis\n    .append('div').classed('sunburst-container', true)\n    .style('z-index', '2')\n    // .style(\"margin-left\", marginLeft + \"px\")\n    .style('left', `${marginLeft}px`)\n    .style('position', 'absolute')\n    .append('svg')\n    .attr('width', width)\n    .attr('height', height)\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`);\n\n  // create last breadcrumb element\n  const lastCrumb = breadcrumbs.append('text').classed('lastCrumb', true);\n\n  // create and position summary container\n  const summary = vis\n    .append('div').classed('summary-container', true)\n    .style('position', 'absolute')\n    .style('top', `${b.h + radius * 0.80}px`)\n    .style('left', `${marginLeft + radius / 2}px`)\n    .style('width', `${radius}px`)\n    .style('height', `${radius}px`)\n    .style('text-align', 'center')\n    .style('font-size', '11px')\n    .style('color', '#666')\n    .style('z-index', '1');\n\n  // Generate a string representation for drawing a breadcrumb polygon.\n  function breadcrumbPoints(d, i) {\n    const points = [];\n    points.push('0,0');\n    points.push(`${b.w},0`);\n    points.push(`${b.w + b.t},${b.h / 2}`);\n    points.push(`${b.w},${b.h}`);\n    points.push(`0,${b.h}`);\n\n    if (i > 0) { // Leftmost breadcrumb; don't include 6th vertex.\n      points.push(`${b.t},${b.h / 2}`);\n    }\n    return points.join(' ');\n  }\n\n  // Update the breadcrumb breadcrumbs to show the current sequence and percentage.\n  function updateBreadcrumbs(ancestors, percentageString) {\n    // Data join, where primary key = name + depth.\n    const g = breadcrumbs.selectAll('g')\n      .data(ancestors, d =>\n         d.name + d.depth\n      );\n\n    // Add breadcrumb and label for entering nodes.\n    const breadcrumb = g.enter().append('g');\n\n    breadcrumb\n      .append('polygon').classed('breadcrumbs-shape', true)\n      .attr('points', breadcrumbPoints)\n      .attr('fill', colorMap);\n\n    breadcrumb\n      .append('text').classed('breadcrumbs-text', true)\n      .attr('x', (b.w + b.t) / 2)\n      .attr('y', b.h / 2)\n      .attr('dy', '0.35em')\n      .attr('font-size', '10px')\n      .attr('text-anchor', 'middle')\n      .text(d =>\n         d.name\n      );\n\n    // Set position for entering and updating nodes.\n    g.attr('transform', (d, i) =>\n       `translate(${i * (b.w + b.s)}, 0)`\n    );\n\n    // Remove exiting nodes.\n    g.exit().remove();\n\n    // Update percentage at the lastCrumb.\n    lastCrumb\n      .attr('x', (ancestors.length + 0.5) * (b.w + b.s))\n      .attr('y', b.h / 2)\n      .attr('dy', '0.35em')\n      .attr('text-anchor', 'middle')\n      .attr('fill', 'black')\n      .attr('font-weight', 600)\n      .text(percentageString);\n  }\n\n  // helper function mouseover to handle mouseover events/animations and calculation\n  // of ancestor nodes etc\n  function mouseover(d) {\n    // build percentage string\n    const percentage = (100 * d.value / totalSize).toPrecision(3);\n    let percentageString = `${percentage}%`;\n    if (percentage < 1) {\n      percentageString = '< 1.0%';\n    }\n\n    // update breadcrumbs (get all ancestors)\n    const ancestors = getAncestors(d);\n    updateBreadcrumbs(ancestors, percentageString);\n\n    // update sunburst (Fade all the segments and highlight only ancestors of current segment)\n    sunburst.selectAll('path')\n      .attr('opacity', 0.3);\n    sunburst.selectAll('path')\n      .filter(node =>\n         (ancestors.indexOf(node) >= 0)\n      )\n      .attr('opacity', 1);\n\n    // update summary\n    summary.html(\n      `Stage: ${d.depth}<br />` +\n      `<span class='percentage' style='font-size: 2em;'>${percentageString}</span><br />${\n      d.value} of ${totalSize}<br />`\n    );\n\n    // display summary and breadcrumbs if hidden\n    summary.style('visibility', '');\n    breadcrumbs.style('visibility', '');\n  }\n\n\n  // helper function click to handle mouseleave events/animations\n  function click() {\n    // Deactivate all segments then retransition each segment to full opacity.\n    sunburst.selectAll('path').on('mouseover', null);\n    sunburst.selectAll('path')\n      .transition()\n      .duration(1000)\n      .attr('opacity', 1)\n      .each('end', function endClick() {\n        d3.select(this).on('mouseover', mouseover);\n      });\n\n    // hide summary and breadcrumbs if visible\n    breadcrumbs.style('visibility', 'hidden');\n    summary.style('visibility', 'hidden');\n  }\n\n  // helper function to draw the sunburst and breadcrumbs\n  function drawSunburst(json) {\n    // Build only nodes of a threshold \"visible\" sizes to improve efficiency\n    const nodes = partition.nodes(json)\n      .filter(d =>\n         (d.dx > 0.005) && d.name !== exitNode // 0.005 radians = 0.29 degrees\n      );\n\n    // this section is required to update the colors.domain() every time the data updates\n    const uniqueNames = (function uniqueNames(a) {\n      const output = [];\n      a.forEach((d) => {\n        if (output.indexOf(d.name) === -1) output.push(d.name);\n      });\n      return output;\n    }(nodes));\n    colors.domain(uniqueNames); // update domain colors\n\n    // create path based on nodes\n    const path = sunburst.data([json]).selectAll('path')\n      .data(nodes).enter()\n      .append('path')\n      .classed('nodePath', true)\n      .attr('display', d => (d.depth ? null : 'none'))\n      .attr('d', arc)\n      .attr('fill', colorMap)\n      .attr('opacity', 1)\n      .attr('stroke', 'white')\n      .on('mouseover', mouseover);\n\n\n    // // trigger mouse click over sunburst to reset visualization summary\n    vis.on('click', click);\n\n    // Update totalSize of the tree = value of root node from partition.\n    totalSize = path.node().__data__.value;\n  }\n\n  // visualize json tree structure\n  function createVisualization(json) {\n    drawSunburst(json); // draw sunburst\n  }\n\n  function removeVisualization() {\n    sunburst.selectAll('.nodePath').remove();\n    // legend.selectAll(\"g\").remove();\n  }\n\n  function buildNodes(raw) {\n    let values;\n\n    if (_.has(raw[0], 'sequence') && _.has(raw[0], 'stage') && _.has(raw[0], 'node') && _.has(raw[0], 'value')) {\n      const grouped = _.groupBy(raw, 'sequence');\n\n      values = _.map(grouped, (value) => {\n        const sorted = _.sortBy(value, 'stage');\n        return {\n          size: value[0].value,\n          sequence: value[0].sequence,\n          nodes: _.pluck(sorted, 'node'),\n        };\n      });\n    } else {\n      const validKey = key => key !== 'value' && key.indexOf('$$') !== 0;\n      const keys = _.sortBy(_.filter(_.keys(raw[0]), validKey), _.identity);\n\n      values = _.map(raw, (row, sequence) =>\n         ({\n           size: row.value,\n           sequence,\n           nodes: _.compact(_.map(keys, key => row[key])),\n         })\n      );\n    }\n\n    return values;\n  }\n\n  function buildHierarchy(csv) {\n    const data = buildNodes(csv);\n\n    // build tree\n    const root = {\n      name: 'root',\n      children: [],\n    };\n\n    data.forEach((d) => {\n      const nodes = d.nodes;\n      const size = parseInt(d.size, 10);\n\n      // build graph, nodes, and child nodes\n      let currentNode = root;\n      for (let j = 0; j < nodes.length; j += 1) {\n        let children = currentNode.children;\n        const nodeName = nodes[j];\n        const isLeaf = j + 1 === nodes.length;\n\n\n        if (!children) {\n          currentNode.children = children = [];\n          children.push({\n            name: exitNode,\n            size: currentNode.size,\n          });\n        }\n\n        let childNode = _.find(children, child => child.name === nodeName);\n\n        if (isLeaf && childNode) {\n          childNode.children.push({\n            name: exitNode,\n            size,\n          });\n        } else if (isLeaf) {\n          children.push({\n            name: nodeName,\n            size,\n          });\n        } else {\n          if (!childNode) {\n            childNode = {\n              name: nodeName,\n              children: [],\n            };\n            children.push(childNode);\n          }\n\n          currentNode = childNode;\n        }\n      }\n    });\n\n    return root;\n  }\n\n  function render(data) {\n    const json = buildHierarchy(data); // build json tree\n    removeVisualization(); // remove existing visualization if any\n    createVisualization(json); // visualize json tree\n  }\n\n  function refreshData() {\n    const queryData = scope.queryResult.getData();\n    if (queryData) {\n      render(queryData);\n    }\n  }\n\n  refreshData();\n  this.watches.push(scope.$watch('visualization.options', refreshData, true));\n  this.watches.push(scope.$watch('queryResult && queryResult.getData()', refreshData));\n}\n\nSunburst.prototype.remove = function remove() {\n  this.watches.forEach((unregister) => { unregister(); });\n  angular.element(this.element[0]).empty('.vis-container');\n};\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/sunburst/sunburst.js","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Height</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"number\\\" ng-model=\\\"visualization.options.height\\\" min=\\\"1\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div>\\n    <hr>\\n    This visualization expects the query result to have rows in one of the following formats:\\n\\n    <strong>Option 1:</strong>\\n    <ul>\\n      <li><strong>sequence</strong> - sequence id</li>\\n      <li><strong>stage</strong> - what stage in sequence this is (1, 2, ...)</li>\\n      <li><strong>node</strong> - stage name</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n\\n    <strong>Option 2:</strong>\\n    <ul>\\n      <li><strong>stage1</strong> - stage 1 value</li>\\n      <li><strong>stage1</strong> - stage 2 value (or null)</li>\\n      <li><strong>stage3</strong> - stage 3 value (or null)</li>\\n      <li><strong>stage4</strong> - stage 4 value (or null)</li>\\n      <li><strong>stage5</strong> - stage 5 value (or null)</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/sunburst/sunburst-sequence-editor.html\n// module id = 594\n// module chunks = 0","import angular from 'angular';\nimport _ from 'underscore';\nimport $ from 'jquery';\nimport d3 from 'd3';\n\nimport d3sankey from './d3sankey';\nimport editorTemplate from './sankey-editor.html';\n\nfunction getConnectedNodes(node) {\n  // source link = this node is the source, I need the targets\n  const nodes = [];\n  node.sourceLinks.forEach((link) => { nodes.push(link.target); });\n  node.targetLinks.forEach((link) => { nodes.push(link.source); });\n\n  return nodes;\n}\n\nfunction graph(data) {\n  const nodesDict = {};\n  const links = {};\n  const nodes = [];\n\n  const validKey = key => key !== 'value' && key.indexOf('$$') !== 0;\n  const keys = _.sortBy(_.filter(_.keys(data[0]), validKey), _.identity);\n\n  function normalizeName(name) {\n    if (name) {\n      return name;\n    }\n\n    return 'Exit';\n  }\n\n  function getNode(name, level) {\n    name = normalizeName(name);\n    const key = `${name}:${String(level)}`;\n    let node = nodesDict[key];\n    if (!node) {\n      node = { name };\n      const id = nodes.push(node) - 1;\n      node.id = id;\n      nodesDict[key] = node;\n    }\n    return node;\n  }\n\n  function getLink(source, target) {\n    let link = links[[source, target]];\n    if (!link) {\n      link = { target, source, value: 0 };\n      links[[source, target]] = link;\n    }\n\n    return link;\n  }\n\n  function addLink(sourceName, targetName, value, depth) {\n    if ((sourceName === '' || !sourceName) && depth > 1) {\n      return;\n    }\n\n    const source = getNode(sourceName, depth);\n    const target = getNode(targetName, depth + 1);\n    const link = getLink(source.id, target.id);\n    link.value += parseInt(value, 10);\n  }\n\n  data.forEach((row) => {\n    addLink(row[keys[0]], row[keys[1]], row.value, 1);\n    addLink(row[keys[1]], row[keys[2]], row.value, 2);\n    addLink(row[keys[2]], row[keys[3]], row.value, 3);\n    addLink(row[keys[3]], row[keys[4]], row.value, 4);\n  });\n\n  return { nodes, links: _.values(links) };\n}\n\nfunction spreadNodes(height, data) {\n  const nodesByBreadth = d3.nest()\n    .key(d => d.x)\n    .entries(data.nodes)\n    .map(d => d.values);\n\n  nodesByBreadth.forEach((nodes) => {\n    nodes = _.filter(_.sortBy(nodes, node => -node.value), node =>\n       node.name !== 'Exit'\n    );\n\n    const sum = d3.sum(nodes, o => o.dy);\n    const padding = (height - sum) / nodes.length;\n\n    _.reduce(nodes, (y0, node) => {\n      node.y = y0;\n      return y0 + node.dy + padding;\n    }, 0);\n  });\n}\n\nfunction createSankey(element, sankeyHeight, data) {\n  const margin = { top: 10, right: 10, bottom: 10, left: 10 };\n  const width = $(element).parent().width() - margin.left - margin.right;\n  const height = sankeyHeight - margin.top - margin.bottom;\n\n  data = graph(data);\n\n  const format = d => d3.format(',.0f')(d);\n  const color = d3.scale.category20();\n\n  // append the svg canvas to the page\n  const svg = d3.select(element).append('svg')\n    .attr('class', 'sankey')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform',\n    `translate(${margin.left},${margin.top})`);\n\n  // Set the sankey diagram properties\n  const sankey = d3sankey()\n    .nodeWidth(15)\n    .nodePadding(10)\n    .size([width, height]);\n\n  const path = sankey.link();\n\n  sankey\n    .nodes(data.nodes)\n    .links(data.links)\n    .layout(0);\n\n  spreadNodes(height, data);\n  sankey.relayout();\n\n  // add in the links\n  const link = svg.append('g').selectAll('.link')\n    .data(data.links)\n    .enter()\n    .append('path')\n    .filter(l => l.target.name !== 'Exit')\n    .attr('class', 'link')\n    .attr('d', path)\n    .style('stroke-width', d => Math.max(1, d.dy))\n    .sort((a, b) => b.dy - a.dy);\n\n  // add the link titles\n  link.append('title')\n    .text(d =>\n       `${d.source.name} → ${d.target.name}\\n${format(d.value)}`\n    );\n\n  const node = svg.append('g').selectAll('.node')\n    .data(data.nodes)\n    .enter()\n    .append('g')\n    .filter(n => n.name !== 'Exit')\n    .attr('class', 'node')\n    .attr('transform', d => `translate(${d.x},${d.y})`);\n\n  function nodeMouseOver(currentNode) {\n    let nodes = getConnectedNodes(currentNode);\n    nodes = _.pluck(nodes, 'id');\n    node.filter((d) => {\n      if (d === currentNode) {\n        return false;\n      }\n\n      if (_.contains(nodes, d.id)) {\n        return false;\n      }\n\n      return true;\n    }).style('opacity', 0.2);\n    link.filter(l =>\n       !(_.include(currentNode.sourceLinks, l) || _.include(currentNode.targetLinks, l))\n    ).style('opacity', 0.2);\n  }\n\n  function nodeMouseOut() {\n    node.style('opacity', 1);\n    link.style('opacity', 1);\n  }\n\n  // add in the nodes\n  node.on('mouseover', nodeMouseOver)\n      .on('mouseout', nodeMouseOut);\n\n  // add the rectangles for the nodes\n  node.append('rect')\n    .attr('height', d => d.dy)\n    .attr('width', sankey.nodeWidth())\n    .style('fill', d => (d.color = color(d.name.replace(/ .*/, ''))))\n    .style('stroke', d => d3.rgb(d.color).darker(2))\n    .append('title')\n    .text(d => `${d.name}\\n${format(d.value)}`);\n\n  // add in the title for the nodes\n  node.append('text')\n    .attr('x', -6)\n    .attr('y', d => d.dy / 2)\n    .attr('dy', '.35em')\n    .attr('text-anchor', 'end')\n    .attr('transform', null)\n    .text(d => d.name)\n    .filter(d => d.x < width / 2)\n    .attr('x', 6 + sankey.nodeWidth())\n    .attr('text-anchor', 'start');\n}\n\nfunction sankeyRenderer() {\n  return {\n    restrict: 'E',\n    link(scope, element) {\n      function refreshData() {\n        const queryData = scope.queryResult.getData();\n        if (queryData) {\n          // do the render logic.\n          angular.element(element[0]).empty();\n          createSankey(element[0], scope.visualization.options.height, queryData);\n        }\n      }\n\n      angular.element(window).on('resize', refreshData);\n      scope.$watch('queryResult && queryResult.getData()', refreshData);\n      scope.$watch('visualization.options.height', (oldValue, newValue) => {\n        if (oldValue !== newValue) {\n          refreshData();\n        }\n      });\n    },\n  };\n}\n\nfunction sankeyEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('sankeyRenderer', sankeyRenderer);\n  ngModule.directive('sankeyEditor', sankeyEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n        '<sankey-renderer options=\"visualization.options\" query-result=\"queryResult\"></sankey-renderer>';\n\n    const editTemplate = '<sankey-editor></sankey-editor>';\n    const defaultOptions = {\n      height: 300,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'SANKEY',\n      name: 'Sankey',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/sankey/index.js","/* eslint-disable */\n\nimport d3 from 'd3';\n\nfunction center(node) {\n  return node.y + node.dy / 2;\n}\n\nfunction value(link) {\n  return link.value;\n}\n\nexport default function() {\n  const sankey = {};\n  let nodeWidth = 24;\n  let nodePadding = 8;\n  let size = [1, 1];\n  let nodes = [];\n  let links = [];\n\n  // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n  function computeNodeLinks() {\n    nodes.forEach((node) => {\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    links.forEach((link) => {\n      let source = link.source;\n      let target = link.target;\n      if (typeof source === 'number') source = link.source = nodes[link.source];\n      if (typeof target === 'number') target = link.target = nodes[link.target];\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n  }\n\n  // Compute the value (size) of each node by summing the associated links.\n  function computeNodeValues() {\n    nodes.forEach((node) => {\n      node.value = Math.max(\n        d3.sum(node.sourceLinks, value),\n        d3.sum(node.targetLinks, value)\n      );\n    });\n  }\n\n  function moveSinksRight(x) {\n    nodes.forEach((node) => {\n      if (!node.sourceLinks.length) {\n        node.x = x - 1;\n      }\n    });\n  }\n\n  function scaleNodeBreadths(kx) {\n    nodes.forEach((node) => {\n      node.x *= kx;\n    });\n  }\n\n  // Iteratively assign the breadth (x-position) for each node.\n  // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned breadth zero, while\n  // nodes with no outgoing links are assigned the maximum breadth.\n  function computeNodeBreadths() {\n    let remainingNodes = nodes;\n    let nextNodes;\n    let x = 0;\n\n    function assignBreadth(node) {\n      node.x = x;\n      node.dx = nodeWidth;\n      node.sourceLinks.forEach((link) => {\n        if (nextNodes.indexOf(link.target) < 0) {\n          nextNodes.push(link.target);\n        }\n      });\n    }\n\n    while (remainingNodes.length) {\n      nextNodes = [];\n      remainingNodes.forEach(assignBreadth);\n      remainingNodes = nextNodes;\n      x += 1;\n    }\n\n    //\n    moveSinksRight(x);\n    scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n  }\n\n  function moveSourcesRight() {\n    nodes.forEach((node) => {\n      if (!node.targetLinks.length) {\n        node.x = d3.min(node.sourceLinks, d => d.target.x) - 1;\n      }\n    });\n  }\n\n  function computeNodeDepths(iterations) {\n    const nodesByBreadth = d3.nest()\n        .key(d => d.x)\n        .sortKeys(d3.ascending)\n        .entries(nodes)\n        .map(d => d.values);\n\n    function initializeNodeDepth() {\n      const ky = d3.min(nodesByBreadth, n =>\n         (size[1] - (n.length - 1) * nodePadding) / d3.sum(n, value)\n      );\n\n      nodesByBreadth.forEach((n) => {\n        n.forEach((node, i) => {\n          node.y = i;\n          node.dy = node.value * ky;\n        });\n      });\n\n      links.forEach((link) => {\n        link.dy = link.value * ky;\n      });\n    }\n\n    function relaxLeftToRight(alpha) {\n      function weightedSource(link) {\n        return center(link.source) * link.value;\n      }\n\n      nodesByBreadth.forEach((n) => {\n        n.forEach((node) => {\n          if (node.targetLinks.length) {\n            const y = d3.sum(node.targetLinks, weightedSource) / d3.sum(node.targetLinks, value);\n            node.y += (y - center(node)) * alpha;\n          }\n        });\n      });\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach((nodes) => {\n        const n = nodes.length;\n        let node;\n        let dy;\n        let y0 = 0;\n        let i;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach((nodes) => {\n        let node,\n          dy,\n          y0 = 0,\n          n = nodes.length,\n          i;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n\n    initializeNodeDepth();\n    resolveCollisions();\n\n    for (let alpha = 1; iterations > 0; iterations -= 1) {\n      relaxRightToLeft(alpha *= 0.99);\n      resolveCollisions();\n      relaxLeftToRight(alpha);\n      resolveCollisions();\n    }\n\n    function relaxRightToLeft(alpha) {\n      nodesByBreadth.slice().reverse().forEach((nodes) => {\n        nodes.forEach((node) => {\n          if (node.sourceLinks.length) {\n            const y = d3.sum(node.sourceLinks, weightedTarget) / d3.sum(node.sourceLinks, value);\n            node.y += (y - center(node)) * alpha;\n          }\n        });\n      });\n\n      function weightedTarget(link) {\n        return center(link.target) * link.value;\n      }\n    }\n\n    function ascendingDepth(a, b) {\n      return a.y - b.y;\n    }\n  }\n\n  function computeLinkDepths() {\n    nodes.forEach((node) => {\n      node.sourceLinks.sort(ascendingTargetDepth);\n      node.targetLinks.sort(ascendingSourceDepth);\n    });\n    nodes.forEach((node) => {\n      let sy = 0,\n        ty = 0;\n      node.sourceLinks.forEach((link) => {\n        link.sy = sy;\n        sy += link.dy;\n      });\n      node.targetLinks.forEach((link) => {\n        link.ty = ty;\n        ty += link.dy;\n      });\n    });\n\n    function ascendingSourceDepth(a, b) {\n      return a.source.y - b.source.y;\n    }\n\n    function ascendingTargetDepth(a, b) {\n      return a.target.y - b.target.y;\n    }\n  }\n\n  sankey.nodeWidth = function (_) {\n    if (!arguments.length) return nodeWidth;\n    nodeWidth = +_;\n    return sankey;\n  };\n\n  sankey.nodePadding = function (_) {\n    if (!arguments.length) return nodePadding;\n    nodePadding = +_;\n    return sankey;\n  };\n\n  sankey.nodes = function (_) {\n    if (!arguments.length) return nodes;\n    nodes = _;\n    return sankey;\n  };\n\n  sankey.links = function (_) {\n    if (!arguments.length) return links;\n    links = _;\n    return sankey;\n  };\n\n  sankey.size = function (_) {\n    if (!arguments.length) return size;\n    size = _;\n    return sankey;\n  };\n\n  sankey.layout = function (iterations) {\n    computeNodeLinks();\n    computeNodeValues();\n    computeNodeBreadths();\n    computeNodeDepths(iterations);\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.relayout = function () {\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.link = function () {\n    let curvature = 0.5;\n\n    function link(d) {\n      const x0 = d.source.x + d.source.dx;\n      const x1 = d.target.x;\n      const xi = d3.interpolateNumber(x0, x1);\n      const x2 = xi(curvature);\n      const x3 = xi(1 - curvature);\n      const y0 = d.source.y + d.sy + d.dy / 2;\n      const y1 = d.target.y + d.ty + d.dy / 2;\n\n      return `M${x0},${y0\n            }C${x2},${y0\n            } ${x3},${y1\n            } ${x1},${y1}`;\n    }\n\n    link.curvature = (_) => {\n      if (!arguments.length) return curvature;\n      curvature = +_;\n      return link;\n    };\n\n    return link;\n  };\n\n\n  return sankey;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/sankey/d3sankey.js","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Height</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"number\\\" ng-model=\\\"visualization.options.height\\\" min=\\\"1\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div>\\n    <hr>\\n    This visualization expects the query result to have rows in the following format:\\n\\n    <ul>\\n      <li><strong>stage1</strong> - stage 1 value</li>\\n      <li><strong>stage1</strong> - stage 2 value (or null)</li>\\n      <li><strong>stage3</strong> - stage 3 value (or null)</li>\\n      <li><strong>stage4</strong> - stage 4 value (or null)</li>\\n      <li><strong>stage5</strong> - stage 5 value (or null)</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/sankey/sankey-editor.html\n// module id = 597\n// module chunks = 0","import d3 from 'd3';\nimport angular from 'angular';\nimport cloud from 'd3-cloud';\nimport { each } from 'underscore';\n\nimport editorTemplate from './word-cloud-editor.html';\n\nfunction findWordFrequencies(data, columnName) {\n  const wordsHash = {};\n\n  data.forEach((row) => {\n    const wordsList = row[columnName].toString().split(' ');\n    wordsList.forEach((d) => {\n      if (d in wordsHash) {\n        wordsHash[d] += 1;\n      } else {\n        wordsHash[d] = 1;\n      }\n    });\n  });\n\n  return wordsHash;\n}\n\n\nfunction wordCloudRenderer() {\n  return {\n    restrict: 'E',\n    link($scope, elem) {\n      function reloadCloud() {\n        if (!angular.isDefined($scope.queryResult)) return;\n\n        const data = $scope.queryResult.getData();\n        let wordsHash = {};\n\n        if ($scope.visualization.options.column) {\n          wordsHash = findWordFrequencies(data, $scope.visualization.options.column);\n        }\n\n        const wordList = [];\n        each(wordsHash, (v, key) => {\n          wordList.push({ text: key, size: 10 + Math.pow(v, 2) });\n        });\n\n        const fill = d3.scale.category20();\n        const layout = cloud()\n            .size([500, 500])\n            .words(wordList)\n            .padding(5)\n            .rotate(() => Math.floor(Math.random() * 2) * 90)\n            .font('Impact')\n            .fontSize(d => d.size);\n\n        function draw(words) {\n          d3.select(elem[0].parentNode)\n            .select('svg')\n            .remove();\n\n          d3.select(elem[0].parentNode)\n            .append('svg')\n              .attr('width', layout.size()[0])\n              .attr('height', layout.size()[1])\n            .append('g')\n              .attr('transform', `translate(${layout.size()[0] / 2},${layout.size()[1] / 2})`)\n            .selectAll('text')\n              .data(words)\n            .enter()\n            .append('text')\n              .style('font-size', d => `${d.size}px`)\n              .style('font-family', 'Impact')\n              .style('fill', (d, i) => fill(i))\n              .attr('text-anchor', 'middle')\n              .attr('transform', d =>\n                 `translate(${[d.x, d.y]})rotate(${d.rotate})`\n              )\n              .text(d => d.text);\n        }\n\n        layout.on('end', draw);\n\n        layout.start();\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', reloadCloud);\n      $scope.$watch('visualization.options.column', reloadCloud);\n    },\n  };\n}\n\nfunction wordCloudEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('wordCloudEditor', wordCloudEditor);\n  ngModule.directive('wordCloudRenderer', wordCloudRenderer);\n\n  ngModule.config((VisualizationProvider) => {\n    VisualizationProvider.registerVisualization({\n      type: 'WORD_CLOUD',\n      name: 'Word Cloud',\n      renderTemplate: '<word-cloud-renderer options=\"visualization.options\" query-result=\"queryResult\"></word-cloud-renderer>',\n      editorTemplate: '<word-cloud-editor></word-cloud-editor>',\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/word-cloud/index.js","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Word Cloud Column Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.column\\\" class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/word-cloud/word-cloud-editor.html\n// module id = 601\n// module chunks = 0","import d3 from 'd3';\nimport box from './d3box';\nimport editorTemplate from './box-plot-editor.html';\n\nfunction boxPlotRenderer() {\n  return {\n    restrict: 'E',\n    template: '<div></div>',\n    link($scope, elm) {\n      function calcIqr(k) {\n        return (d) => {\n          const q1 = d.quartiles[0];\n          const q3 = d.quartiles[2];\n          const iqr = (q3 - q1) * k;\n\n          let i = -1;\n          let j = d.length;\n\n          // eslint-disable-next-line no-plusplus\n          while (d[++i] < q1 - iqr);\n          // eslint-disable-next-line no-plusplus\n          while (d[--j] > q3 + iqr);\n          return [i, j];\n        };\n      }\n\n      $scope.$watch('[queryResult && queryResult.getData(), visualization.options]', () => {\n        if ($scope.queryResult.getData() === null) {\n          return;\n        }\n\n        const data = $scope.queryResult.getData();\n        const parentWidth = d3.select(elm[0].parentNode).node().getBoundingClientRect().width;\n        const margin = { top: 10, right: 50, bottom: 40, left: 50, inner: 25 };\n        const width = parentWidth - margin.right - margin.left;\n        const height = 500 - margin.top - margin.bottom;\n\n        let min = Infinity;\n        let max = -Infinity;\n        const mydata = [];\n        let value = 0;\n        let d = [];\n        const xAxisLabel = $scope.visualization.options.xAxisLabel;\n        const yAxisLabel = $scope.visualization.options.yAxisLabel;\n\n        const columns = $scope.queryResult.getColumnNames();\n        const xscale = d3.scale.ordinal()\n          .domain(columns)\n          .rangeBands([0, parentWidth - margin.left - margin.right]);\n\n        let boxWidth;\n        if (columns.length > 1) {\n          boxWidth = Math.min(xscale(columns[1]), 120.0);\n        } else {\n          boxWidth = 120.0;\n        }\n        margin.inner = boxWidth / 3.0;\n\n        columns.forEach((column, i) => {\n          d = mydata[i] = [];\n          data.forEach((row) => {\n            value = row[column];\n            d.push(value);\n            if (value > max) max = Math.ceil(value);\n            if (value < min) min = Math.floor(value);\n          });\n        });\n\n        const yscale = d3.scale.linear()\n          .domain([min * 0.99, max * 1.01])\n          .range([height, 0]);\n\n        const chart = box()\n            .whiskers(calcIqr(1.5))\n            .width(boxWidth - 2 * margin.inner)\n            .height(height)\n            .domain([min * 0.99, max * 1.01]);\n        const xAxis = d3.svg.axis()\n          .scale(xscale)\n          .orient('bottom');\n\n\n        const yAxis = d3.svg.axis()\n          .scale(yscale)\n          .orient('left');\n\n        const xLines = d3.svg.axis()\n          .scale(xscale)\n          .tickSize(height)\n          .orient('bottom');\n\n        const yLines = d3.svg.axis()\n          .scale(yscale)\n          .tickSize(width)\n          .orient('right');\n\n        function barOffset(i) {\n          return xscale(columns[i]) + (xscale(columns[1]) - margin.inner) / 2.0;\n        }\n\n        d3.select(elm[0]).selectAll('svg').remove();\n\n        const plot = d3.select(elm[0])\n          .append('svg')\n            .attr('width', parentWidth)\n            .attr('height', height + margin.bottom + margin.top)\n          .append('g')\n            .attr('width', parentWidth - margin.left - margin.right)\n            .attr('transform', `translate(${margin.left},${margin.top})`);\n\n        d3.select('svg').append('text')\n            .attr('class', 'box')\n            .attr('x', parentWidth / 2.0)\n            .attr('text-anchor', 'middle')\n            .attr('y', height + margin.bottom)\n            .text(xAxisLabel);\n\n        d3.select('svg').append('text')\n            .attr('class', 'box')\n            .attr('transform', `translate(10,${(height + margin.top + margin.bottom) / 2.0})rotate(-90)`)\n            .attr('text-anchor', 'middle')\n            .text(yAxisLabel);\n\n        plot.append('rect')\n            .attr('class', 'grid-background')\n            .attr('width', width)\n            .attr('height', height);\n\n        plot.append('g')\n            .attr('class', 'grid')\n            .call(yLines);\n\n        plot.append('g')\n            .attr('class', 'grid')\n            .call(xLines);\n\n        plot.append('g')\n            .attr('class', 'x axis')\n            .attr('transform', `translate(0,${height})`)\n            .call(xAxis);\n\n        plot.append('g')\n            .attr('class', 'y axis')\n            .call(yAxis);\n\n        plot.selectAll('.box').data(mydata)\n          .enter().append('g')\n            .attr('class', 'box')\n            .attr('width', boxWidth)\n            .attr('height', height)\n            .attr('transform', (_, i) => `translate(${barOffset(i)},${0})`)\n            .call(chart);\n      }, true);\n    },\n  };\n}\n\nfunction boxPlotEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('boxplotRenderer', boxPlotRenderer);\n  ngModule.directive('boxplotEditor', boxPlotEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n        '<boxplot-renderer ' +\n        'options=\"visualization.options\" query-result=\"queryResult\">' +\n        '</boxplot-renderer>';\n\n    const editTemplate = '<boxplot-editor></boxplot-editor>';\n\n    VisualizationProvider.registerVisualization({\n      type: 'BOXPLOT',\n      name: 'Boxplot',\n      renderTemplate,\n      editorTemplate: editTemplate,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/box-plot/index.js","/* eslint-disable */\n// Inspired by http://informationandvisualization.de/blog/box-plot\nexport default function box() {\n  let width = 1,\n    height = 1,\n    duration = 0,\n    domain = null,\n    value = Number,\n    whiskers = boxWhiskers,\n    quartiles = boxQuartiles,\n    tickFormat = null;\n\n  // For each small multiple…\n  function box(g) {\n    g.each(function (d, i) {\n      d = d.map(value).sort(d3.ascending);\n      let g = d3.select(this),\n        n = d.length,\n        min = d[0],\n        max = d[n - 1];\n\n      // Compute quartiles. Must return exactly 3 elements.\n      const quartileData = d.quartiles = quartiles(d);\n\n      // Compute whiskers. Must return exactly 2 elements, or null.\n      let whiskerIndices = whiskers && whiskers.call(this, d, i),\n        whiskerData = whiskerIndices && whiskerIndices.map(i => d[i]);\n\n      // Compute outliers. If no whiskers are specified, all data are \"outliers\".\n      // We compute the outliers as indices, so that we can join across transitions!\n      const outlierIndices = whiskerIndices\n          ? d3.range(0, whiskerIndices[0]).concat(d3.range(whiskerIndices[1] + 1, n))\n          : d3.range(n);\n\n      // Compute the new x-scale.\n      const x1 = d3.scale.linear()\n          .domain(domain && domain.call(this, d, i) || [min, max])\n          .range([height, 0]);\n\n      // Retrieve the old x-scale, if this is an update.\n      const x0 = this.__chart__ || d3.scale.linear()\n          .domain([0, Infinity])\n          .range(x1.range());\n\n      // Stash the new scale.\n      this.__chart__ = x1;\n\n      // Note: the box, median, and box tick elements are fixed in number,\n      // so we only have to handle enter and update. In contrast, the outliers\n      // and other elements are variable, so we need to exit them! Variable\n      // elements also fade in and out.\n\n      // Update center line: the vertical line spanning the whiskers.\n      const center = g.selectAll('line.center')\n          .data(whiskerData ? [whiskerData] : []);\n\n      center.enter().insert('line', 'rect')\n          .attr('class', 'center')\n          .attr('x1', width / 2)\n          .attr('y1', d => x0(d[0]))\n          .attr('x2', width / 2)\n          .attr('y2', d => x0(d[1]))\n          .style('opacity', 1e-6)\n        .transition()\n          .duration(duration)\n          .style('opacity', 1)\n          .attr('y1', d => x1(d[0]))\n          .attr('y2', d => x1(d[1]));\n\n      center.transition()\n          .duration(duration)\n          .style('opacity', 1)\n          .attr('y1', d => x1(d[0]))\n          .attr('y2', d => x1(d[1]));\n\n      center.exit().transition()\n          .duration(duration)\n          .style('opacity', 1e-6)\n          .attr('y1', d => x1(d[0]))\n          .attr('y2', d => x1(d[1]))\n          .remove();\n\n      // Update innerquartile box.\n      const box = g.selectAll('rect.box')\n          .data([quartileData]);\n\n      box.enter().append('rect')\n          .attr('class', 'box')\n          .attr('x', 0)\n          .attr('y', d => x0(d[2]))\n          .attr('width', width)\n          .attr('height', d => x0(d[0]) - x0(d[2]))\n        .transition()\n          .duration(duration)\n          .attr('y', d => x1(d[2]))\n          .attr('height', d => x1(d[0]) - x1(d[2]));\n\n      box.transition()\n          .duration(duration)\n          .attr('y', d => x1(d[2]))\n          .attr('height', d => x1(d[0]) - x1(d[2]));\n\n      box.exit().remove();\n\n      // Update median line.\n      const medianLine = g.selectAll('line.median')\n          .data([quartileData[1]]);\n\n      medianLine.enter().append('line')\n          .attr('class', 'median')\n          .attr('x1', 0)\n          .attr('y1', x0)\n          .attr('x2', width)\n          .attr('y2', x0)\n        .transition()\n          .duration(duration)\n          .attr('y1', x1)\n          .attr('y2', x1);\n\n      medianLine.transition()\n          .duration(duration)\n          .attr('y1', x1)\n          .attr('y2', x1);\n\n      medianLine.exit().remove();\n\n      // Update whiskers.\n      const whisker = g.selectAll('line.whisker')\n          .data(whiskerData || []);\n\n      whisker.enter().insert('line', 'circle, text')\n          .attr('class', 'whisker')\n          .attr('x1', 0)\n          .attr('y1', x0)\n          .attr('x2', width)\n          .attr('y2', x0)\n          .style('opacity', 1e-6)\n        .transition()\n          .duration(duration)\n          .attr('y1', x1)\n          .attr('y2', x1)\n          .style('opacity', 1);\n\n      whisker.transition()\n          .duration(duration)\n          .attr('y1', x1)\n          .attr('y2', x1)\n          .style('opacity', 1);\n\n      whisker.exit().transition()\n          .duration(duration)\n          .attr('y1', x1)\n          .attr('y2', x1)\n          .style('opacity', 1e-6)\n          .remove();\n\n      // Update outliers.\n      const outlier = g.selectAll('circle.outlier')\n          .data(outlierIndices, Number);\n\n      outlier.enter().insert('circle', 'text')\n          .attr('class', 'outlier')\n          .attr('r', 5)\n          .attr('cx', width / 2)\n          .attr('cy', i => x0(d[i]))\n          .style('opacity', 1e-6)\n        .transition()\n          .duration(duration)\n          .attr('cy', i => x1(d[i]))\n          .style('opacity', 1);\n\n      outlier.transition()\n          .duration(duration)\n          .attr('cy', i => x1(d[i]))\n          .style('opacity', 1);\n\n      outlier.exit().transition()\n          .duration(duration)\n          .attr('cy', i => x1(d[i]))\n          .style('opacity', 1e-6)\n          .remove();\n\n      // Compute the tick format.\n      const format = tickFormat || x1.tickFormat(8);\n\n      // Update box ticks.\n      const boxTick = g.selectAll('text.box')\n          .data(quartileData);\n\n      boxTick.enter().append('text')\n          .attr('class', 'box')\n          .attr('dy', '.3em')\n          .attr('dx', (d, i) => i & 1 ? 6 : -6)\n          .attr('x', (d, i) => i & 1 ? width : 0)\n          .attr('y', x0)\n          .attr('text-anchor', (d, i) => i & 1 ? 'start' : 'end')\n          .text(format)\n        .transition()\n          .duration(duration)\n          .attr('y', x1);\n\n      boxTick.transition()\n          .duration(duration)\n          .text(format)\n          .attr('y', x1);\n\n      boxTick.exit().remove();\n\n      // Update whisker ticks. These are handled separately from the box\n      // ticks because they may or may not exist, and we want don't want\n      // to join box ticks pre-transition with whisker ticks post-.\n      const whiskerTick = g.selectAll('text.whisker')\n          .data(whiskerData || []);\n\n      whiskerTick.enter().append('text')\n          .attr('class', 'whisker')\n          .attr('dy', '.3em')\n          .attr('dx', 6)\n          .attr('x', width)\n          .attr('y', x0)\n          .text(format)\n          .style('opacity', 1e-6)\n        .transition()\n          .duration(duration)\n          .attr('y', x1)\n          .style('opacity', 1);\n\n      whiskerTick.transition()\n          .duration(duration)\n          .text(format)\n          .attr('y', x1)\n          .style('opacity', 1);\n\n      whiskerTick.exit().transition()\n          .duration(duration)\n          .attr('y', x1)\n          .style('opacity', 1e-6)\n          .remove();\n    });\n    d3.timer.flush();\n  }\n\n  box.width = function (x) {\n    if (!arguments.length) return width;\n    width = x;\n    return box;\n  };\n\n  box.height = function (x) {\n    if (!arguments.length) return height;\n    height = x;\n    return box;\n  };\n\n  box.tickFormat = function (x) {\n    if (!arguments.length) return tickFormat;\n    tickFormat = x;\n    return box;\n  };\n\n  box.duration = function (x) {\n    if (!arguments.length) return duration;\n    duration = x;\n    return box;\n  };\n\n  box.domain = function (x) {\n    if (!arguments.length) return domain;\n    domain = x == null ? x : d3.functor(x);\n    return box;\n  };\n\n  box.value = function (x) {\n    if (!arguments.length) return value;\n    value = x;\n    return box;\n  };\n\n  box.whiskers = function (x) {\n    if (!arguments.length) return whiskers;\n    whiskers = x;\n    return box;\n  };\n\n  box.quartiles = function (x) {\n    if (!arguments.length) return quartiles;\n    quartiles = x;\n    return box;\n  };\n\n  return box;\n}\n\nfunction boxWhiskers(d) {\n  return [0, d.length - 1];\n}\n\nfunction boxQuartiles(d) {\n  return [\n    d3.quantile(d, 0.25),\n    d3.quantile(d, 0.5),\n    d3.quantile(d, 0.75),\n  ];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/box-plot/d3box.js","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">X Axis Label</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"visualization.options.xAxisLabel\\\" class=\\\"form-control\\\"></input>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Y Axis Label</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"visualization.options.yAxisLabel\\\" class=\\\"form-control\\\"></input>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/box-plot/box-plot-editor.html\n// module id = 604\n// module chunks = 0","/* global Cornelius */\nimport _ from 'underscore';\nimport moment from 'moment';\nimport angular from 'angular';\nimport 'cornelius/src/cornelius';\nimport 'cornelius/src/cornelius.css';\n\nimport editorTemplate from './cohort-editor.html';\n\nfunction cohortRenderer() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      options: '=',\n    },\n    template: '',\n    replace: false,\n    link($scope, element) {\n      $scope.options.timeInterval = $scope.options.timeInterval || 'daily';\n\n      function updateCohort() {\n        if ($scope.queryResult.getData() === null) {\n          return;\n        }\n\n        const sortedData = _.sortBy($scope.queryResult.getData(), r =>\n           r.date + r.day_number\n        );\n\n        const grouped = _.groupBy(sortedData, 'date');\n\n        const maxColumns = _.reduce(grouped, (memo, data) =>\n           ((data.length > memo) ? data.length : memo)\n        , 0);\n\n        const data = _.map(grouped, (values) => {\n          const row = [values[0].total];\n          _.each(values, (value) => {\n            row.push(value.value);\n          });\n          _.each(_.range(values.length, maxColumns), () => {\n            row.push(null);\n          });\n          return row;\n        });\n\n        const initialDate = moment(sortedData[0].date).toDate();\n        const container = angular.element(element)[0];\n\n        Cornelius.draw({\n          initialDate,\n          container,\n          cohort: data,\n          title: null,\n          timeInterval: $scope.options.timeInterval,\n          labels: {\n            time: 'Time',\n            people: 'Users',\n            weekOf: 'Week of',\n          },\n        });\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', updateCohort);\n      $scope.$watch('options.timeInterval', updateCohort);\n    },\n  };\n}\n\nfunction cohortEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('cohortRenderer', cohortRenderer);\n  ngModule.directive('cohortEditor', cohortEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const editTemplate = '<cohort-editor></cohort-editor>';\n    const defaultOptions = {\n      timeInterval: 'daily',\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'COHORT',\n      name: 'Cohort',\n      renderTemplate: '<cohort-renderer options=\"visualization.options\" query-result=\"queryResult\"></cohort-renderer>',\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/cohort/index.js","module.exports = \"<div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Time Interval</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"visualization.options.timeInterval\\\">\\n      <option value=\\\"daily\\\">Daily</option>\\n      <option value=\\\"weekly\\\">Weekly</option>\\n      <option value=\\\"monthly\\\">Monthly</option>\\n    </select>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/cohort/cohort-editor.html\n// module id = 608\n// module chunks = 0","import _ from 'underscore';\nimport d3 from 'd3';\nimport angular from 'angular';\nimport L from 'leaflet';\nimport 'leaflet.markercluster';\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport markerIcon from 'leaflet/dist/images/marker-icon.png';\nimport markerIconRetina from 'leaflet/dist/images/marker-icon-2x.png';\nimport markerShadow from 'leaflet/dist/images/marker-shadow.png';\n\nimport template from './map.html';\nimport editorTemplate from './map-editor.html';\n\n/*\nThis is a workaround for an issue with giving Leaflet load the icon on its own.\n*/\nL.Icon.Default.mergeOptions({\n  iconUrl: markerIcon,\n  iconRetinaUrl: markerIconRetina,\n  shadowUrl: markerShadow,\n});\n\ndelete L.Icon.Default.prototype._getIconUrl;\n\n\nfunction mapRenderer() {\n  return {\n    restrict: 'E',\n    template,\n    link($scope, elm) {\n      const colorScale = d3.scale.category10();\n      const map = L.map(elm[0].children[0].children[0], { scrollWheelZoom: false });\n      const mapControls = L.control.layers().addTo(map);\n      const layers = {};\n      const tileLayer = L.tileLayer('//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n      }).addTo(map);\n\n      function getBounds() {\n        $scope.visualization.options.bounds = map.getBounds();\n      }\n\n      function setBounds() {\n        const b = $scope.visualization.options.bounds;\n\n        if (b) {\n          map.fitBounds([[b._southWest.lat, b._southWest.lng],\n                         [b._northEast.lat, b._northEast.lng]]);\n        } else if (layers) {\n          const allMarkers = _.flatten(_.map(_.values(layers), l => l.getLayers()));\n          // eslint-disable-next-line new-cap\n          const group = new L.featureGroup(allMarkers);\n          map.fitBounds(group.getBounds());\n        }\n      }\n\n\n      map.on('focus', () => { map.on('moveend', getBounds); });\n      map.on('blur', () => { map.off('moveend', getBounds); });\n\n      function resize() {\n        if (!map) return;\n        map.invalidateSize(false);\n        setBounds();\n      }\n\n      const createMarker = (lat, lon) => L.marker([lat, lon]);\n\n      const heatpoint = (lat, lon, color) => {\n        const style = {\n          fillColor: color,\n          fillOpacity: 0.9,\n          stroke: false,\n        };\n\n        return L.circleMarker([lat, lon], style);\n      };\n\n      function createDescription(latCol, lonCol, row) {\n        const lat = row[latCol];\n        const lon = row[lonCol];\n\n        let description = '<ul style=\"list-style-type: none;padding-left: 0\">';\n        description += `<li><strong>${lat}, ${lon}</strong>`;\n\n        _.each(row, (v, k) => {\n          if (!(k === latCol || k === lonCol)) {\n            description += `<li>${k}: ${v}</li>`;\n          }\n        });\n\n        return description;\n      }\n\n      function removeLayer(layer) {\n        if (layer) {\n          mapControls.removeLayer(layer);\n          map.removeLayer(layer);\n        }\n      }\n\n      function addLayer(name, points) {\n        const latCol = $scope.visualization.options.latColName || 'lat';\n        const lonCol = $scope.visualization.options.lonColName || 'lon';\n        const classify = $scope.visualization.options.classify;\n\n        let markers;\n        if ($scope.visualization.options.clusterMarkers) {\n          const color = $scope.visualization.options.groups[name].color;\n          const options = {};\n\n          if (classify) {\n            options.iconCreateFunction = (cluster) => {\n              const childCount = cluster.getChildCount();\n\n              let c = ' marker-cluster-';\n              if (childCount < 10) {\n                c += 'small';\n              } else if (childCount < 100) {\n                c += 'medium';\n              } else {\n                c += 'large';\n              }\n\n              c = '';\n\n              const style = `color: white; background-color: ${color};`;\n              return L.divIcon({ html: `<div style=\"${style}\"><span>${childCount}</span></div>`, className: `marker-cluster${c}`, iconSize: new L.Point(40, 40) });\n            };\n          }\n\n          markers = L.markerClusterGroup(options);\n        } else {\n          markers = L.layerGroup();\n        }\n\n        // create markers\n        _.each(points, (row) => {\n          let marker;\n\n          const lat = row[latCol];\n          const lon = row[lonCol];\n\n          if (lat === null || lon === null) return;\n\n          if (classify && classify !== 'none') {\n            const groupColor = $scope.visualization.options.groups[name].color;\n            marker = heatpoint(lat, lon, groupColor);\n          } else {\n            marker = createMarker(lat, lon);\n          }\n\n          marker.bindPopup(createDescription(latCol, lonCol, row));\n          markers.addLayer(marker);\n        });\n\n        markers.addTo(map);\n\n        layers[name] = markers;\n        mapControls.addOverlay(markers, name);\n      }\n\n      function render() {\n        const queryData = $scope.queryResult.getData();\n        const classify = $scope.visualization.options.classify;\n\n        $scope.visualization.options.mapTileUrl = $scope.visualization.options.mapTileUrl || '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n        tileLayer.setUrl($scope.visualization.options.mapTileUrl);\n\n        if ($scope.visualization.options.clusterMarkers === undefined) {\n          $scope.visualization.options.clusterMarkers = true;\n        }\n\n        if (queryData) {\n          let pointGroups;\n          if (classify && classify !== 'none') {\n            pointGroups = _.groupBy(queryData, classify);\n          } else {\n            pointGroups = { All: queryData };\n          }\n\n          const groupNames = _.keys(pointGroups);\n          const options = _.map(groupNames, (group) => {\n            if ($scope.visualization.options.groups && $scope.visualization.options.groups[group]) {\n              return $scope.visualization.options.groups[group];\n            }\n            return { color: colorScale(group) };\n          });\n\n          $scope.visualization.options.groups = _.object(groupNames, options);\n\n          _.each(layers, (v) => {\n            removeLayer(v);\n          });\n\n          _.each(pointGroups, (v, k) => {\n            addLayer(k, v);\n          });\n\n          setBounds();\n        }\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', render);\n      $scope.$watch('visualization.options', render, true);\n      angular.element(window).on('resize', resize);\n      $scope.$watch('visualization.options.height', resize);\n    },\n  };\n}\n\nfunction mapEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n    link($scope) {\n      $scope.currentTab = 'general';\n      $scope.columns = $scope.queryResult.getColumns();\n      $scope.columnNames = _.pluck($scope.columns, 'name');\n      $scope.classify_columns = $scope.columnNames.concat('none');\n      $scope.mapTiles = [\n        {\n          name: 'OpenStreetMap',\n          url: '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenStreetMap BW',\n          url: '//{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenStreetMap DE',\n          url: '//{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenStreetMap FR',\n          url: '//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenStreetMap Hot',\n          url: '//{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'Thunderforest',\n          url: '//{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'Thunderforest Spinal',\n          url: '//{s}.tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenMapSurfer',\n          url: '//korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}',\n        },\n        {\n          name: 'Stamen Toner',\n          url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'Stamen Toner Background',\n          url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'Stamen Toner Lite',\n          url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenTopoMap',\n          url: '//{s}.tile.opentopomap.org/{z}/{x}/{y}.png',\n        },\n      ];\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('mapRenderer', mapRenderer);\n  ngModule.directive('mapEditor', mapEditor);\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n      '<map-renderer ' +\n      'options=\"visualization.options\" query-result=\"queryResult\">' +\n      '</map-renderer>';\n\n    const editTemplate = '<map-editor></map-editor>';\n    const defaultOptions = {\n      height: 500,\n      classify: 'none',\n      clusterMarkers: true,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'MAP',\n      name: 'Map',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/map/index.js","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/leaflet/dist/images/marker-icon.png\n// module id = 615\n// module chunks = 0","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7c3grY3grg8hJo3grY4g7c4g7c3grU0gLI4grY9hrpBi79HkMM2frE0daA0fq82gbROlslbo9Vgp9dcpNZQmcxFjsIwd6QzeKk3gbRfptdepdZcpdY2gLMtd5s3gLNZotVSntNPnNJLmtFImdBZodU1f7A2f7A1frA2f7I2f7FHmNBUnM9Wn9VGmNAydaNYoNJOm9M9hLc0e6w3fa46f7BKmdFFltBVndE1fK1Els82fq41fK1Dlc89g7RClc9XoNVUndQ0eqxClM9Jl9FRms81eqo0eqpHltFBk89Fi75Qm9M/k89KkcYzealSjbadvdPH2ufz9/r4+vzP3+qlxNljmL08gLNSnNQzeKgydqUzeKg/ks6NtM/////+/v8+kc/f6fFAgK1CiLwydKIzd6c8kM6Tt9C1zd5OmdNBh7pTjLRzn78xdKIydqU7j86jwdbM3egxdKIydaQydaMydKNGlNE6js5OiLAxc6FKkshDk9E5jc09e6Zekrcxc6I4jc03eagyc6FIldI3jM0wcaBMl9J+psNKltIwcZ82i83k7fMubJhLlc81is1Lg6pklbZNl9I/j9AvbJlEjcVdkLPt8/cwcZ4ubZkwcJ00icy0y9swcJwvb5wzicxHkcpTh60ubZhCkNAyiMwvbpoxh8xAicBHj8hGk9FHks0+jdAubJcubJdEkdEwhsw6i88ubJgta5cvhswxapgubJcuhcstbJcubZcuhMsubJcvbJZBjMgthMsubJcvbZkubJcrg8stbJctbZcubJgrgssua5gubJc6is8qgcs8i9A9iMYtg8spgcoogMo7hcMrbZcubJcngMonf8olfsoubJc4gr8kfckua5g5iM8jfMk4iM8he8k1froua5g7itAgeskubJc2hs8eecgzfLcofssdeMg0hc4ubJccd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqjbZ8obAAAA7HRSTlMAHDdTb4yPA+L/7ZxE/////yYLgvb///////8SYf/////qB/////////+1wNHd//////8s////r/////////+O/P///////////8f///////////////////////+P2P///////////3f//////////5j/////tczn//////L///////////////////////8+////////R/////Ww////tf////9q////////////4P/////Yd/8W+P/xov+UNv///STN/7hc1P/AUv//////////MMT///+m//+e//////+M//+C////////6cqo94AAAAXmSURBVHgBrNKDoipBGADgbHMRpjuKi2xOdu//MHe2Y6tvOdZvuhGzxWqzO2xWi9lp+g6L3eV+5PH6vmpltrv8nDsQDIWCAbef83jDpo9FojFeJxhPJO8JosQzYnb5oxYpVzodiCcyhiwA2esPEAPpdM727vT+eSH0x7McwoTmOUpxIcvF/RAWI29byCUIpUQ2m8A0/xwx8kIQls2vW4QrihIHQMDqGyQBgAiVnOXVTuWUtAaAnq++I48B0PxKrPZiq8qKvy4IpPqBhiDUm0rl+ca12h1NQN3eh7pI6MN26WnfooNBPIHU4SdUlBAHg9Hj0seDEEJ08pxKqfoio4tQaDAOP0xrMEWIzB4NCWaIK8xJ7ymXItQcFO/jcLGIF+bLRytW4LS18Wbd5SNcEBcLn8mw2TYZ2+3vLRuMaYdme7sdTA8iY8flQ0mPscC2fB1ku12z4+necs7YebDlri9JZ3rvoazB1tutxdiuy1TXl4/Zer95ufzneq7524qBAIBr61TmtxXX/MK4FC6cKIwvViozXMDMzLbCTF+1JBn/4/EtLi2vrK6tbywsbE506vVxnZ3fF7YIIQamdX7dVqb/RtnCr1X+n3F9gA2MdA7Vsl87nzEDId2MTUCHSdr+As/Y1DKvM1uYFWBGpTtggrFuYrMPApgc0jhMTNmdvInLbn8NqNImgEG7jWzZnwB1KAg79t1V3mzPvgm6Q+n9m98n/e5ZQI+iw6Dby1v43AzApPIIs24/Cbg1GFcRE+h29xpvseJ2v4cxjzQOmjtAgqF5PRyRZvTXIfcqbxUNPdOnI1JYnw8FSSwUp4mklKDzoRRvkw7N0vF6QTwUI4aMRsNZyUQnMhkzb2HMZeJ0RhUMUy1jIP68lRaKUpLSXN7FW5jz+QnqKEoFas37yX6pD8tFpYybpQpv4S3lEGv5KvaV9olNDPwNHUhh1ETex5scpsQOVg8UxAFhI0dCHKPjRIogDorT1aZPzkTuHC9U2oPnQlySRzFxhYkTJYHHIXFt5srNnhBxLDSyV+L2IyF395vnhQflpHCuifv80g3/a+UPIXWNEDEAQEE0HR23weEk6XGnwR1iH3eJu7udbt26fe30I17x/PYH+9iv+CB5qT1v+YhlL5WeS5ZV72RZftvlNF6Wj75Zdn2kHcl6e5Sy/A3D7DsBMP0gd/DkC/Bp9l3gW5Y7a5asWVCm3WcaAFSHnFtxAXivwwAsWf9E25dl+TiwhwIKPVRgD33Ct6wvom0ijKapOBllpkEcf6ZCMsqjyCgjuvKIoajXYgya8vhIJ7rKKnKOP+sxjOPJZmV0DRRHGIZx/KW6npaOvor3M/G+pqalS00TT5q4G7qzPGe4O+wu7mxw59wt8p3LCre//pn/J+iupIwe1HKcpVdXI8c9QB9l9QMDnHVQF8+9xdAw5YzgBmfuHdVh4bj7GKO8cZYxW/UmvHkAeEl5pgncMJt7JzVZzOYaTFGh6WRGEDVJ5pniCDOCWw0Ns3MaLA0NdRijYm+AmQZhXoO1YQFYpBJLqGloGF1W1ZuMfKRSL1OZFVXJyNBlUhhD7evXk6sqZl+/rscaKfUDC68FtYn19Xr64xU+oo7nxQ2FWZ6vxyapuTyEdV5WTgR+HZ3DpGoN9Szzu8Qkzz9CH6kbZhlpa7uELO2gs4I0bOKRJInFC1GyPsMuaanoxPre1n6hbXlvB90dpKkPj4Q9sXAi7gnfcEDaOjqxIxwe5e1vCcforiIdu/gkyyenOSeyrBthqrpxvHV2lF0cHW4d47ySdB3g29bWiSPjZMvZBDvpqzxPZk7Ti9PDLZcyomBHk/PwxJ1ycsgiv4guzrgOz9wexn126EVbNV3oVzLj8zBaEYXqNnjP/G4W8Z8F0GYiKisTPGMZ31kQGKdymGwIhMIeTzgUgM1EZRkHgmGfL8wi01Qe0wQCYSaAESrXNBCJRiN6EYURxKLRmF5E4Q0QjwNvyIAlJBKYIiNegnlJhowBY2RMP9BPBn38SEYtLpKG/+tgQe8M5cY7AAAAAElFTkSuQmCC\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/leaflet/dist/images/marker-icon-2x.png\n// module id = 618\n// module chunks = 0","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/leaflet/dist/images/marker-shadow.png\n// module id = 619\n// module chunks = 0","module.exports = \"<div style='margin:1%;width:98%;height:{{visualization.options.height}}px'>\\n    <div style=\\\"width:100%; height:100%;\\\"></div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/map/map.html\n// module id = 620\n// module chunks = 0","module.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\"><a ng-click=\\\"currentTab='general'\\\">General</a></li>\\n    <li ng-class=\\\"{active: currentTab == 'groups'}\\\"><a ng-click=\\\"currentTab='groups'\\\">Groups</a></li>\\n    <li ng-class=\\\"{active: currentTab == 'map'}\\\"><a ng-click=\\\"currentTab='map'\\\">Map Settings</a></li>\\n  </ul>\\n\\n  <div ng-show=\\\"currentTab == 'general'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Latitude Column Name</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.latColName\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:visualization.options.classify | remove:visualization.options.lonColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Longitude Column Name</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.lonColName\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:visualization.options.classify | remove:visualization.options.latColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Group By</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.classify\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in classify_columns | remove:visualization.options.lonColName | remove:visualization.options.latColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'groups'\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <thead>\\n      <th>Name</th>\\n      <th>Color</th>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"(name, options) in visualization.options.groups\\\">\\n        <td>{{name}}</td>\\n        <td>\\n            <input class=\\\"form-control\\\" type=\\\"color\\\" ng-model=\\\"options.color\\\"/>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'map'\\\">\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.clusterMarkers\\\">\\n        <i class=\\\"input-helper\\\"></i> Cluster Markers\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Map Height (px)</label>\\n      <input class=\\\"form-control\\\" type=\\\"number\\\" ng-model=\\\"visualization.options.height\\\"/>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Map Tiles</label>\\n      <select ng-options=\\\"tile.url as tile.name for tile in mapTiles\\\" ng-model=\\\"visualization.options.mapTileUrl\\\"\\n              class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/map/map-editor.html\n// module id = 621\n// module chunks = 0","import angular from 'angular';\nimport $ from 'jquery';\nimport 'pivottable';\nimport 'pivottable/dist/pivot.css';\n\nfunction pivotTableRenderer() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      visualization: '=',\n    },\n    template: '',\n    replace: false,\n    link($scope, element) {\n      $scope.$watch('queryResult && queryResult.getData()', (data) => {\n        if (!data) {\n          return;\n        }\n\n        if ($scope.queryResult.getData() !== null) {\n          // We need to give the pivot table its own copy of the data, because it changes\n          // it which interferes with other visualizations.\n          data = angular.copy($scope.queryResult.getData());\n          const options = {\n            renderers: $.pivotUtilities.renderers,\n            onRefresh(config) {\n              const configCopy = Object.assign({}, config);\n              // delete some values which are functions\n              delete configCopy.aggregators;\n              delete configCopy.renderers;\n              delete configCopy.onRefresh;\n              // delete some bulky default values\n              delete configCopy.rendererOptions;\n              delete configCopy.localeStrings;\n\n              if ($scope.visualization) {\n                $scope.visualization.options = configCopy;\n              }\n            },\n          };\n\n          if ($scope.visualization) {\n            Object.assign(options, $scope.visualization.options);\n          }\n          $(element).pivotUI(data, options, true);\n        }\n      });\n    },\n  };\n}\n\nexport default function (ngModule) {\n  ngModule.directive('pivotTableRenderer', pivotTableRenderer);\n\n  ngModule.config((VisualizationProvider) => {\n    const editTemplate = '<div/>';\n    const defaultOptions = {\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'PIVOT',\n      name: 'Pivot Table',\n      renderTemplate: '<pivot-table-renderer visualization=\"visualization\" query-result=\"queryResult\"></pivot-table-renderer>',\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/pivot/index.js","import marked from 'marked';\n\nexport default function (ngModule) {\n  ngModule.filter('markdown', ($sce, clientConfig) =>\n     function markdown(text) {\n       if (!text) {\n         return '';\n       }\n\n       let html = marked(String(text));\n       if (clientConfig.allowScriptsInUserInput) {\n         html = $sce.trustAsHtml(html);\n       }\n\n       return html;\n     }\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/filters/markdown.js","import moment from 'moment';\n\nexport default function (ngModule) {\n  ngModule.filter('toMilliseconds', () => value => value * 1000.0);\n\n  ngModule.filter('dateTime', clientConfig =>\n     function dateTime(value) {\n       if (!value) {\n         return '-';\n       }\n\n       return moment(value).format(clientConfig.dateTimeFormat);\n     }\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/filters/datetime.js","import registerList from './list';\nimport registerShow from './show';\n\nexport default function (ngModule) {\n  return Object.assign({}, registerList(ngModule), registerShow(ngModule));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/destinations/index.js"],"sourceRoot":""}